# IT Solutions Knowledgebase

**Organized by Category**

Total Solutions: 647

---

## Categories

- **[Oracle & Database](#category-oracle--database)** (409 solutions)
- **[Networking & Firewall](#category-networking--firewall)** (71 solutions)
- **[Windows & Active Directory](#category-windows--active-directory)** (59 solutions)
- **[Other Solutions](#category-other-solutions)** (40 solutions)
- **[Linux & Unix](#category-linux--unix)** (29 solutions)
- **[Server & Infrastructure](#category-server--infrastructure)** (23 solutions)
- **[Security & Authentication](#category-security--authentication)** (7 solutions)
- **[Web Servers & Applications](#category-web-servers--applications)** (6 solutions)
- **[Email & Communication](#category-email--communication)** (2 solutions)
- **[Monitoring & Management](#category-monitoring--management)** (1 solutions)

---

## Category: Oracle & Database

*409 solutions*

### 10. Install and configure Oracle Enterprise Manager

**Topic ID:** 902

Install and configure Oracle Enterprise Manager and Monitoring Agent.

OEM Info:
server: oem.appshosting.com
secure URL:https://oem.appshosting.com:1159/em
non secure URL:http://oem.appshosting.com:4889/em(or port 7777)

OMS agent registration password: abc123
OMS admin/sysman password: Chicago12#
Unix ID/vnc oraoem password: M0n!t0rm3

**Notes:**
1.****On each target database, make sure DBSNMP database account is unlocked and you can log into it.
2. If you receive following error, copy libXp.so.6 from another similar server: Exception in thread "main" java.lang.UnsatisfiedLinkError: /ahi/tmp/OraInstall2010-08-14_03-08-40PM/jre/1.4.2/lib/i386/libawt.so: libXp.so.6: cannot open shared object file: No such file or directory

---

### 340. Out of memory error sb-db\r\nkernel: EXT3-fs error (device dm-5) in start_transaction: Journal has aborted.

**Topic ID:** 2403

Ashok,

CAUSE : Out of memory Error

Feb 2 05:11:01 sb-db kernel: Out of Memory: Killed process 20863 (oracle).

Feb 2 05:12:45 sb-db kernel: oom-killer: gfp_mask=0xd0

Oracle is killing the processes due to out of memory.

What we did is:

------------------

In sysctl.conf placed the value kernel.shmmax = 3589934592

In rc.local placed the following values

echo 40960 > /proc/sys/vm/min_free_kbytes

echo 250 > /proc/sys/vm/lower_zone_protection

Then rebooted the machine. Now everything looks fine.

---

### 37. How to add DADS entry for APEX

**Topic ID:** 2104

OptionsSymptom:
*(public)*How to add DADS entry for APEXProblem:
*(public)*How to add DADS entry for APEXSolution:
*(public)*For Production on ah3:

su - orafus
cd /u04/orafus/product/10133/ohs/modplsql/conf
vi dads.conf & add the new entries.

---

### 15. http://onlinetest.net4practice.com/login website info

**Topic ID:** 306

In prod we have may tomcat processes running on differenet ports.

Forhttp://onlinetest.net4practice.com/login, the tomcat is running on port 8880. The path is here

/home/tomcat6/apache-tomcat-6.0.20

Go to bin directory and run the startup.sh script

NOTE : The other tomcat processes are in /usr/local/jakarta

net4p@onlinetest.net4practice.com [~]# sudo su - root -c /home/tomcat6/apache-tomcat-6.0.20/bin/shutdown.shUsing CATALINA_BASE: /home/tomcat6/apache-tomcat-6.0.20Using CATALINA_HOME: /home/tomcat6/apache-tomcat-6.0.20Using CATALINA_TMPDIR: /home/tomcat6/apache-tomcat-6.0.20/tempUsing JRE_HOME: /usr/local/jdk
net4p@onlinetest.net4practice.com [~]# sudo su - root -c /home/tomcat6/apache-tomcat-6.0.20/bin/startup.shUsing CATALINA_BASE: /home/tomcat6/apache-tomcat-6.0.20Using CATALINA_HOME: /home/tomcat6/apache-tomcat-6.0.20Using CATALINA_TMPDIR: /home/tomcat6/apache-tomcat-6.0.20/tempUsing JRE_HOME: /usr/local/jdk

---

### 23. Changing DB privilaged accounts passwords which are going to expire when logging to db console

**Topic ID:** 1801

Please follow the following metalink notes to reset the passwords fordbsnmp, sysman and mgmt_view.

****

**How to change the password of the 10g database user sysman [ID 259379.1]**

```
PURPOSE\n-------\n\nHow to change the password of the database user sysman\n\n \nSCOPE & APPLICATION\n-------------------\nAll database administrators using the Enterprise Manager 10G DB Control\n(also known as RDBMS 10G Standalone dbconsole)\n\n\nHow to change the password of the 10g database user sysman\n----------------------------------------------------------\n\nThe Oracle user sysman is the schema of the standalone repository \nof the 10G Enterprise Manager DB Control.\n\nTo ensure that you change the sysman password in the right database,\nyou must check that the environment variable ORACLE_SID is set.\nYou must also check that the environment variable ORACLE_HOME is set \nand that the path includes the correct $ORACLE_HOME/bin.\n\nTo change the password of the user sysman you must strictly \nfollow the steps below, otherwise you 10g Standalone dbconsole used to manage\nyour 10g database will not function properly.\n\n1. Stop the standalone dbconsole\n   on Unix\n   $ emctl stop dbconsole\n   on Windows\n   Stop the Windows Service OracleDBConsole\n   Or\n   Open a DOS Command Window and type\n   C> emctl stop dbconsole\n\n2. Check that the standalone dbconsole is stopped\n   on Unix\n   $ emctl status dbconsole\n   on Windows\n   Check the status of the Windows Service OracleDBConsole\n   Or\n   Open a DOS Command Window and type\n   C> emctl status dbconsole\n\n3. Connect to the database as a user with DBA privilege with SQL*Plus \n   and execute\n   SQL> alter user sysman identified by  ;\n\n4. Check the new password\n   SQL> connect sysman/[@database_alias]\n\n5. Go to $ORACLE_HOME/host_sid/sysman/config\n   5.1 Save the file emoms.properties to emoms.properties.orig\n   5.2 Edit the file emoms.properties\n       a. Search for the line beginning with:\n          oracle.sysman.eml.mntr.emdRepPwd=\n          Replace the encrypted value by the new password value\n       b. Search for the line:\n          oracle.sysman.eml.mntr.emdRepPwdEncrypted=TRUE\n          Replace TRUE by FALSE\n\n6. Restart the standalone dbconsole\n   on Unix\n   $ emctl start dbconsole\n   on Windows\n   Start the Windows Service OracleDBConsole\n   Or\n   Open a DOS Command Window and type\n   C> emctl start dbconsole\n\n7. Check that the password has been encrypted\n   Edit the file emoms.properties\n   7.1 Search for the line beginning with:\n       oracle.sysman.eml.mntr.emdRepPwd=\n       Check that the password is encrypted\n   7.2 Search for the line beginning with:\n       oracle.sysman.eml.mntr.emdRepPwdEncrypted=\n       Check that the value is TRUE\n
```
****
**How to Change the Password of the 10g Database User Dbsnmp [ID 259387.1]**

```
PURPOSE\n-------\n\nHow to change the password of the 10g database user dbsnmp\n\n \nSCOPE & APPLICATION\n-------------------\nAll database administrators using the Standalone dbconsole\n\n\nHow to change the password of the 10g database user dbsnmp\n----------------------------------------------------------\n \nTo change the password of the user dbsnmp you must strictly \nfollow the steps below, otherwise you 10g Standalone dbconsole used to manage\nyour 10g database will not function properly.\n\n1. Stop the standalone dbconsole\n   on Unix\n   $ export ORACLE_SID=\n   $ emctl stop dbconsole\n   on Windows\n   Stop the Windows Service OracleDBConsole\n   Or\n   Open a DOS Command Window and type\n   C> set ORACLE_SID=\n   C> set ORACLE_HOME=\n   C> cd %ORACLE_HOME%/bin\n   C> emctl stop dbconsole\n\n2. Check that the standalone dbconsole and the emagent are stopped\n   on Unix\n   $ emctl status dbconsole\n   $ emctl status agent\n   on Windows\n   Check the status of the Windows Service OracleDBConsole\n   Check that the process emagent.exe is not running in Task Manager\n   Or\n   Open a DOS Command Window, cd to the database $ORACLE_HOME\\bin and type\n   C> emctl status dbconsole\n   C> emctl status agent\n\n3. Connect to the database as a user with DBA privilege with SQL*Plus \n   and execute\n   SQL> alter user dbsnmp identified by  ;\n\n4. Check the new password\n   SQL> connect dbsnmp/[@database_alias]\n\n5. Go to $ORACLE_HOME/host_sid/sysman/emd\n   5.1 Save the file targets.xml to targets.xml.orig\n   5.2 Edit the file targets.xml with your favorite text editor \n      (wordpad is recommended on Windows platform)\n      Search for the line:\n      \n      Replace the encrypted value by the new password value\n      Replace TRUE by FALSE\n\n6. Restart the standalone dbconsole\n   on Unix\n   $ export ORACLE_SID=\n   $ emctl start dbconsole\n   on Windows\n   Start the Windows Service OracleDBConsole\n   Or\n   Open a DOS Command Window and type\n   C> set ORACLE_SID=\n   C> set ORACLE_HOME=\n   C> cd %ORACLE_HOME%/bin\n   C> emctl start dbconsole\n\n7. Check that the password has bee

... [Content truncated for readability]

---

### 25. Add CUSTOM_TOP for R12 environment for RS group

**Topic ID:** 601

Login to ah200 as oravis
Create new file $APPL_TOP/customVIS_ah200.env
Add following content in this file
XXRS_TOP=/d01/oracle/VIS/apps/apps_st/appl/xxrs/12.0.0
export XXRS_TOP
Change $APPL_TOP/admin/topfile.txt to add following line.
xxrs /d01/oracle/VIS/apps/apps_st/appl
Re-source environment then bounce application services

---

### 26. Create APEX workspace manually

**Topic ID:** 2104

See attached
Sample APEX Schema creation script:
1. Create tablespace for data and index:create tablespace abc_data datafile '/u01/oradata/ahdb07/abc_data01.dbf'size 100m autoextend on maxsize 300mextent management local segment space management auto/
2. Create usercreate user abc_user identified by "A2b4c0#" default tablespace abc_datatemporary tablespace temp quota unlimited on abc_data/
3. Grant privilege.grant create session to abc_user;alter user abc_user quota unlimited on abc_idx;grant create view, create synonym, create procedure,create materialized view, create sequence, create table,create trigger to abc_user;ALTER USER abc_user DEFAULT ROLE ALL;

---

### 36. Error starting HTTP Server that comes with 10g Database Companion

**Topic ID:** 2104

OptionsSymptom:
*(public)*Error starting HTTP Server that comes with 10g Database Companion

/u01/app/oracomp/product/10.2.0/db_comp/opmn/logs:
--------
09/02/24 14:10:41 Start process
--------
/u01/app/oracomp/product/10.2.0/db_comp/Apache/Apache/bin/apachectl start: execing httpd
/u01/app/oracomp/product/10.2.0/db_comp/Apache/Apache/bin/httpd: error while loading shared libraries: libdb.so.2: cannot open shared object file: No such file or directoryProblem:
*(public)*Error starting HTTP Server that comes with 10g Database CompanionSolution:
*(public)*cd /usr/lib
ln -s libgdbm.so.2 libdb.so.2

Comment:
*(internal)*

---

### 628. OECC post clone steps

**Topic ID:** 2105

-bash-4.2$ java oracle.apps.fnd.security.AdminDesktop apps/YNeg1bVIUpVYXj6I CREATE NODE_NAME=rhtstebsapp2.appsforte.com
DBC=/u01/oracle/uat/fs2/inst/apps/UAT_rhtstebsapp2/appl/fnd/12.0.0/secure/UAT.dbc
Application node exists, using server ID of node.
Committing changes
CREATE executed successfully - UAT_RHTSTEBSAPP2.APPSFORTE.COM.dbc

-bash-4.2$ cp UAT_RHTSTEBSAPP2.APPSFORTE.COM.dbc /u01/oracle/oecc/Oracle/quickInstall/connection.dbc
-bash-4.2$ ./startAllEcc.sh

Select ECC Component you want to start

1. All

2. ECC Domain Admin Server

3. ECC Managed Server

4. Exit:

1

Enter password for ECC domain admin user weblogic:

Starting ECC Domain Admin Server ...
Started the ECC Admin Server successfully

ZooKeeper JMX enabled by default
Using config: /u01/oracle/oecc/Oracle/software/zookeeper/bin/../conf/zoo.cfg
Starting zookeeper ... STARTED
Zookeeper started. Starting Managed Server
Starting the eccManaged ...
Started the eccManaged successfully

Done

-bash-4.2$ ./envSetup.sh
Initialized file is /u01/oracle/oecc/Oracle/quickInstall/initializeEnv.sh

Environemnt file is /u01/oracle/oecc/Oracle/quickInstall/env/ecc.env and QI_BASE is /u01/oracle/oecc/Oracle/quickInstall

Select which option you want to proceed with

1. Database Setup

2. Install Weblogic Server

3. Create ECC Domain

4. Create EBS JNDI

5. Integrate ECC with EBS

6. Exit:

4
Creating JNDI ....
Checking connection.dbc file availability...

DBC file /u01/oracle/oecc/Oracle/quickInstall/connection.dbc available

Enter the EBS apps password:
Verify if the Node is registered in the EBS database...
Node name RHTSTEBSAPP2.APPSFORTE.COM
EBS_ECC_USER ECC_DISCOVERY
DB URL rhtstebsdb2.appsforte.com:1521/ebs_uat
Node is registerd in EBS

Check if the FND USER ECC_DISCOVERY exists
User ECC_DISCOVERY already exists in FND_USER. Validating user

Enter password:
User ECC_DISCOVERY successfully validated

Provide ECC admin credentials for JNDI setup

Enter the password for weblogic admin for ECC domain :
Creating JNDI for ECC to access EBS DB...

CLASSPATH=/u01/oracle/oecc/Oracle/software/java/jdk/lib/tools.jar:/u01/oracle/oecc/Oracle/Middleware/wlserver/modules/features/wlst.wls.classpath.jar:

PATH=/u01/oracle/oecc/Oracle/Middleware/wlserver/server/bin:/u01/oracle/oecc/Oracle/Middleware/wlserver/../oracle_common/modules/thirdparty/org.apache.ant/1.9.8.0.0/ap
ache-ant-
1.9.8/bin:/u01/oracle/oecc/Oracle/software/java/jdk/jre/bin:/u01/oracle/oecc/Oracle/software/java/jdk/bin:/u01/oracle/oecc/Oracle/software/java/jdk/bin:/u01/oracle/oec
c/insta_client:/usr/lib64/qt-
3.3/bin:/usr/local/bin:/bin:/usr/bin:/usr/local/sbin:/usr/sbin:/u01/oracle/oecc/Oracle/Middleware/wlserver/../oracle_common/modules/org.apache.maven_3.2.5/bin

Your environment has been set.

Initializing WebLogic Scripting Tool (WLST) ...

Welcome to WebLogic Server Administration Scripting Shell

Type help() for help on available commands

Connecting to t3://localhost:7775 with userid weblogic ...
Successfully connected to Admin Server "AdminServer" that belongs to domain "ecc_domain".

Warning: An insecure protocol was used to connect to the server.
To ensure on-the-wire security, the SSL port or Admin port should be used instead.

Location changed to edit tree.
This is a writable tree with DomainMBean as the root.
To make changes you will need to start an edit session via startEdit().
For more help, use help('edit').

Starting an edit session ...
Started edit session, be sure to save and activate your changes once you are done.
MBean type JDBCSystemResource with name ebsDB has been deleted successfully.
Saving all your changes ...
Saved all your changes successfully.
Activating all your changes, this may take a while ...
The edit lock associated with this edit session is released once the activation is completed.
Activation completed
ebsDB is already existing and deleted successfully
Starting an edit session ...
Started edit session, be sure to save and activate your changes once you are done.
Saving all your changes ...
Saved all your changes successfully.
Activating all your changes, this may take a while ...
The edit lock associated with this edit session is released once the activation is completed.
Activation completed
Disconnected from weblogic server: AdminServer
JNDI created for EBS database...

-bash-4.2$ ./envSetup.sh
Initialized file is /u01/oracle/oecc/Oracle/quickInstall/initializeEnv.sh

Environemnt file is /u01/oracle/oecc/Oracle/quickInstall/env/ecc.env and QI_BASE is /u01/oracle/oecc/Oracle/quickInstall

Select which option you want to proceed with

1. Database Setup

2. Install Weblogic Server

3. Create ECC Domain

4. Create EBS JNDI

5. Integrate ECC with EBS

6. Exit:

5
Proceed with Integration? confirm(y) otherwise(n):
y

Enter the password for ECC DB user ECC :
Enter the password for ECC admin user weblogic :
Updating EBS Security Manager
old 1: update ECC_SOURCE_SYSTEM set SECURITY_MANAGER='&1' where SYSTEM_NAME='EBS'
new 1: update ECC_SOURCE_SYSTEM set SECURITY_MANAGER

... [Content truncated for readability]

---

### 632. Steps to run Trial Balance Report Fix

**Topic ID:** 2105

Reference:Severity 3SR 3-24762381491 : AP Trial Balance is not removing fully paid transactions

Step # 01 (Apply Patch):
====================
**NOTE: It's already done on both PRD and UAT. So, not required to do it again. **

Apply patch17494470 as HOT patch using below command:

Download and unzip the patch under "/u01/R122_EBS/fs_ne/EBSapps/patch".

sshapplprd@rhapp1.appsforte.com
. EBSapps.env run

adop phase=APPLY patches=hotpatch=yes

After successful patch application, go to RUN EDITION and check Following files exists with correct versions or not.
$AP_TOP/patch/115/sql/ap_party_id_mismatch_sel.sql
$AP_TOP/patch/115/sql/ap_party_id_mismatch_fix.sql

Step # 02 (Execute data select script):
===============================**NOTE: It's already done on both PRD and UAT. So, not required to do it again. **

Run the data selection script as below:

sshapplprd@rhapp1.appsforte.com
. EBSapps.env run

sqlplus apps@prd<
SQL> @$AP_TOP/patch/115/sql/ap_party_id_mismatch_sel.sql

Step # 03 (Set the appropriate process_flag):
============================
Set the appropriate process flag for the invoice against which you'll be running the data fix.

Possible process_flag settings:
N - Do not Process.
Y - Yes, process it.
D - Already processed.

If we are running data fix for one (01) invoice ID, for example 557058. Below step will ensure above.

sshapplprd@rhapp1.appsforte.com
. EBSapps.env run

sqlplus apps@prd<

Step # 04 (Run the data fix):
=======================
Run the data fix script as below:

sshapplprd@rhapp1.appsforte.com
. EBSapps.env run

sqlplus apps@prd<
SQL> @$AP_TOP/patch/115/sql/ap_party_id_mismatch_fix.sql

It will prompt you for below values:

(Case Sensitive)

Please use below values at the prompts:
P_User_Name =
sup@appsforte.com>> In our case, we used support's email address.

========================
sshapplprd@rhapp1.appsforte.com
. EBSapps.env run

sqlplus apps@prd<

****IMPORTANT****

In future, if we have to run the data fix for "N" number of invoice IDs, you can follow below steps:
a. Get invoice IDs from the intermediate table using invoice numbers (a.k.a. transaction number).

c. Verify process_flag update.

---

### 28. How to remove APEX workspace

**Topic ID:** 2104

Remove APEX workspace
1. Remove APEX workspace
1.1 login to APEX admin consolehttp://ah3.appshosting.com:8004/apex/apex_admin
Username: admin
Password:
1.2 Click Manage Workspaces->Remove Workspace->click workspace button to select the
correct workspace->Next->Click check box->Next->write down the Schema and tablespaces
name->click Remove Workspace button->Click Return to Internal Manager
2. Remove User
2.1 Login to ah3.appshosting.com as oraapex
2.2 sqlplus as sysdba
2.3 DROP USERCASCADE;
2. Remove tablespace
2.1 Login to sqlplus as sysdba
2.2 DROP TABLESPACEINCLUDING CONTENTS AND DATAFILES CASCADE CONSTRAINTS;

Comment:
(internal) To resolve error:
Starting backup at 03-FEB-2009 18:29:04
RMAN-06169: could not read file header for datafile 109 error reason 4
RMAN-06169: could not read file header for datafile 109 error reason 4
released channel: d1
RMAN-00571: ===========================================================
RMAN-00569: =============== ERROR MESSAGE STACK FOLLOWS ===============
RMAN-00571: ===========================================================
RMAN-03002: failure of backup command at 02/03/2009 18:29:05
RMAN-06056: could not access datafile 109
Solution:
Problem was that earlier I did drop tablespace offline drop, and datafile still hanging out there. I did alter tablespace flow_94 datafile 'xxx.dbf' offline drop, but didn't work.
DROP TABLESPACE flow_94 INCLUDING CONTENTS;

---

### 29. Migrating or copy APEX and database schema

**Topic ID:** 2104

Need to migrate APEX schema from one database to another which is on different database and different tablespace
Solution:
(public) Use expdp/impdp to migrate APEX/oracle schema
(Use this method if both source and target are above 10g version)
Export source schema
$ ssh@
$ cd $HOME/customers/
$ expdp system directory=DATA_PUMP_DIR dumpfile=expdp_.dmp schemas=job_name=expdp_
Create target schema
Create target schema through APEX admin console.
Refer to 'Create new APEX workspace' document on OTRS FAQ
» FAQ » APEX » How to create new APEX workspace manually
Import into target schema
$ ssh@
$ cd $HOME/customers/
$ impdp system directory=DATA_PUMP_DIR dumpfile=expdp_.dmp schemas=job_name=imp_remap_schema=:remap_tablespace=:
Verify
Verify target schema now has all the objects imported.

Use exp/imp to migrate APEX/oracle schema
(Use this method if both source and target are 9i or below version)
Create APEX and database accounts
Export on source database
$ ssh@
$ cd $HOME/customers/
$ exp userid=system file=.dmp owner=
Generate script to create tables
$ ssh@
$ cd $HOME/customers/
$ scp -p@:/home//customers//.dmp .
$ imp userid=system buffer=20960 file=.dmp log=imp_show.log show=y indexfile=create_tables0.sql ignore=y indexes=n rows=n constraints=n fromuser=touser=
$ grep "^REM " create_tables0.sql > create_tables.sql
Get target tablespace name using following query. 'APLUSDBS' is target username on target database.
$ sqlplus system
SQL> select username, DEFAULT_TABLESPACE from dba_users where username='APLUSDBS';
Edit create_tables.sql to replace source tablespace name to target tablespace name
$ vi create_tables.sql
:1,$s/^REM //
:1,$s///g
Create tables in target schema
$ sqlplus
SQL> spool create_tables.log
SQL> @create_tables.sql
SQL> spool off
SQL> exit
review create_tables.log and resolve any error
Import data into target schema
imp userid=system buffer=40960 file=.dmp log=imp_data.log ignore=y indexes=n rows=y constraints=n grants=n fromuser=touser=commit=y resumable=y resumable_timeout=10000000
Import indexes and constraints
imp userid=system buffer=40960 file=.dmp log=imp_indexes.log ignore=y indexes=y rows=n constraints=y grants=y fromuser=touser=commit=y resumable=y resumable_timeout=10000000
For examples:
imp userid=system buffer=40960 file=bogdan.dmp log=imp_data.log ignore=y indexes=n rows=y constraints=n grants=n fromuser=bogdan touser=aplusdbs commit=y resumable=y resumable_timeout=10000000
imp userid=system buffer=40960 file=bogdan.dmp log=imp_indexes.log ignore=y indexes=y rows=n constraints=y grants=y fromuser=bogdan touser=aplusdbs commit=y resumable=y resumable_timeout=10000000
Associate multiple schemas to one tablespace if that is the case for customer
Logon to APEX administration page as admin->Manage workspace->Manage workspace to Schema Assignments->Create->Select 'Existing' then click Next->select the workspace->select the schema->Click create button.

---

### 30. SSH tunneling to 11g APEX database

**Topic ID:** 2104

To access database from client tool including sqlplus or sqldeveloper
1. Login to prod.appshosting.com as your Unix account
2. Setup SSH tunneling in putty as following:
Source port: 1522
Destination: ah3.appshosting.com:1522
Click add to add the SSH tunneling entry and save it
3. Add following TNS entry in your local sql*net configuration tnsnames.ora file
apex11g=(DESCRIPTION = (ADDRESS_LIST = (ADDRESS = (PROTOCOL =
TCP)(HOST=localhost)(PORT = 1522))) (CONNECT_DATA =
(SERVICE_NAME=ahdb07.appshosting.com)))
4. Now you will be able to connect to apex11g using your database account and password.

---

### 31. APEX 3.2.1 Upgrade vs. Install

**Topic ID:** 2104

OptionsSymptom:
*(public)*APEX 3.2.1.00.10 Upgrade vs. InstallProblem:
*(public)*APEX 3.2.1.00.10 Upgrade vs. InstallSolution:
*(public)***Pre-Upgrade/Install Steps:**
Stop Oracle HTTP Server shipped with Oracle Database 10grelease 1 (10.1) or later, enter commands using the following syntax, where`ORACLE_BASE`is the path to the Oracle base directory:
```
ORACLE_BASE\\ORACLE_HTTPSERVER_HOME\\opmn\\bin\\opmnctl stopproc ias-component=HTTP_Server

```
Note that if the Oracle HTTP Server is listening on a port less than 1024, then these commands must be executed as a privileged user (such as`root`).

**Perform Upgrade for APEX 3.2 if your current APEX is version 3.2:**

1. Download patch p8548651_111060_GENERIC.zip.
2. sqlplus / as sysdba
SQL> @apxpatch.sql
3. cp -rf patch/imagesORACLE_HTTPSERVER_HOME/Apache/Apache

For embedded PL/SQL gateway, run`apxldimg.sql`passing the file system path to the "patch" directory where the`p7313609_11106_GENERIC.zip`file was unzipped as shown in the following example:

- 

  - On Windows:

```
@apxldimg.sql SYSTEM_DRIVE:\\TEMP\\patch

```

  - On UNIX and Linux:

```
@apxldimg.sql /tmp/patch

```

4. Start Oracle HTTP Apache server.

**Perform Install for APEX 3.1.2 or earlier (or no previous APEX):**
1. Download patch 3.2 install from otn.oracle.com.
2. sqlplus / as sysdba

@apexinstablespace_apextablespace_filestablespace_tempimagesWhere:

- `tablespace_apex`is the name of the tablespace for the Oracle Application Express application user.

- `tablespace_files`is the name of the tablespace for the Oracle Application Express files user.

- `tablespace_temp`is the name of the temporary tablespace.

- `images`is the virtual directory for Oracle Application Express images. To support future Oracle Application Express upgrades, define the virtual image directory as`/i/`.

Example:

```
@apexins SYSAUX SYSAUX TEMP /i/

3. cp -rf patch/images ORACLE_HTTPSERVER_HOME/Apache/Apache

    For embedded PL/SQL gateway, run apxldimg.sql passing the file system path to the "patch" directory where the     p7313609_11106_GENERIC.zip file was unzipped as shown in the following example:

```

- 

  - On Windows:

```
@apxldimg.sql SYSTEM_DRIVE:\\TEMP\\patch

```

  - On UNIX and Linux:

```
@apxldimg.sql /tmp/patch

```

4. Start Oracle HTTP Apache server.Comment:
*(internal)*Configuring EPG instead of HTTP Server:

SELECT DBMS_XDB.GETHTTPPORT FROM DUAL;
If the port number returns 0, the Oracle XML DB HTTP Server is disabled.
To enable it, follow the instructions in "Enabling Oracle XML DB HTTP Server".
3.3.5.4 Enabling Oracle XML DB HTTP Server
The embedded PL/SQL gateway runs in the Oracle XML DB HTTP server in the Oracle database.
To enable Oracle XML DB HTTP server:
Start SQL*Plus and connect to the database where Oracle Application Express is installed as SYS specifying the SYSDBA role. For example:
On Windows:
SYSTEM_DRIVE:\\ sqlplus /nolog
SQL> CONNECT SYS as SYSDBA
Enter password: SYS_password
On UNIX and Linux:
$ sqlplus /nolog
SQL> CONNECT SYS as SYSDBA
Enter password: SYS_password
Enter a statement similar to the following:
EXEC DBMS_XDB.SETHTTPPORT(port);
For example:
EXEC DBMS_XDB.SETHTTPPORT(8080);

SELECT DBMS_XDB.GETHTTPPORT FROM DUAL;
If the port number returns 0, the Oracle XML DB HTTP Server is disabled.
To enable it, follow the instructions in "Enabling Oracle XML DB HTTP Server".
3.3.5.4 Enabling Oracle XML DB HTTP Server
The embedded PL/SQL gateway runs in the Oracle XML DB HTTP server in the Oracle database.
To enable Oracle XML DB HTTP server:
Start SQL*Plus and connect to the database where Oracle Application Express is installed as SYS specifying the SYSDBA role. For example:
On Windows:
SYSTEM_DRIVE:\\ sqlplus /nolog
SQL> CONNECT SYS as SYSDBA
Enter password: SYS_password
On UNIX and Linux:
$ sqlplus /nolog
SQL> CONNECT SYS as SYSDBA
Enter password: SYS_password
Enter a statement similar to the following:
EXEC DBMS_XDB.SETHTTPPORT(port);
For example:
EXEC DBMS_XDB.SETHTTPPORT(8080);

SQL> alter user anonymous account unlock;

**APPENDIX

Steps for setting up Web Services:
**-------------------------------------------------1. Set up EPG:SQL> SELECT dbms_xdb.gethttpport FROM dual;

GETHTTPPORT
-----------
0

SQL> EXEC dbms_xdb.sethttpport(8080);
2. Configure ORAWSV servlet:CONN sys/password@db11g AS SYSDBA

DECLARE
l_servlet_name VARCHAR2(32) := 'orawsv';
BEGIN
DBMS_XDB.deleteServletMapping(l_servlet_name);

DBMS_XDB.deleteServlet(l_servlet_name);

DBMS_XDB.addServlet(
name => l_servlet_name,
language => 'C',
dispname => 'Oracle Query Web Service',
descript => 'Servlet for issuing queries as a Web Service',
schema => 'XDB');

DBMS_XDB.addServletSecRole(
servname => l_servlet_name,
rolename => 'XDB_WEBSERVICES',
rolelink => 'XDB_WEBSERVICES');

DBMS_XDB.addServletMapping(
pattern => '/orawsv/*',
name => l_servlet_name);
END;
/3.Add to listener DESCRIPTION_LIST and bounce/reload:(DESCRIPTION=
(ADDRESS=(PROTOCOL=tcp)(HOST=cdb1.appshosting.com)(PORT=8080))(Presentation=HTT

... [Content truncated for readability]

---

### 32. APEX and Active Directory integration

**Topic ID:** 2104

OptionsSymptom:
*(public)*Problem:
*(public)*Solution:
*(public)*525 - user not found
52e - invalid credentials
530 - not permitted to logon at this time
531 - not permitted to logon from this computer
532 - password expired
533 - account disabled
701 - account expired
773 - user must reset password
775 - account locked
CN=Sam Yun,OU=SBSUsers,OU=Users,OU=MyBusiness,DC=ah,DC=local'

---

### 34. Cisco Switch 3550 VLAN Configuration

**Topic ID:** 1201

*(public)*

## Configure the VLAN on Catalyst 3550, 3750, 4500/4000, and 6500/6000 Switches That Run Cisco IOS Software

### Create VLANs and PortsThis section uses the Catalyst 4500 Switch for sample configuration commands, but the configuration tasks also apply to other switches that run Layer 3 (or Cisco IOS Software). These other switches include the Catalyst 3550, 3570, and 6500 Series Switches that run Cisco IOS Software. Before you can create a VLAN, the switch must be in VTP server mode or VTP transparent mode. If the switch is a VTP server, you must define a VTP domain name before you add any VLANs. You must define a VTP domain name regardless of:

- The number of switches in the network, whether one or many

- Whether you use VTP in order to propagate VLANs to other switches in the network

Refer toUnderstanding and Configuring VTPfor more information on how to configure VTP on Catalyst 4500/4000 Cisco IOS Software-based Supervisor Engine modules. Refer to the Software Configuration Guide for the switch platform under consideration for VTP configuration information for other Catalyst switch platforms. Refer to theLAN Product Support Pagesin order to locate the Software Configuration Guide.
You can create VLANs in either VLAN database mode or global configuration mode. You must create VLANs that are numbered higher than 1005 in global configuration mode. The VTP mode must be set to transparent in order to create these VLANs. VLANs that are numbered higher than 1005 are not advertised by VTP. Furthermore, VLANs that are numbered higher than 1005 are stored in the switch configuration file and not in the VLAN .dat file. The default location of the VLAN .dat file in Catalyst 4000 Switches with Supervisor Engine IV is the cat4000_flash directory.

```
Switch#**dir cat4000_flash:**\n\nDirectory of cat4000_flash:/\n\n1 -rw- 676  vlan.dat\n\n524260 bytes total (523584 bytes free)
```
**Note:**A Catalyst 6500 Switch that runs Cisco IOS Software allows you to create VLANs in server mode without a VTP domain name.
The**show vtp status**command shows the VTP information in the switch.

```
Switch#**show vtp status**\n\nVTP Version : 2\nConfiguration Revision : 0\nMaximum VLANs supported locally : 1005\nNumber of existing VLANs : 8\nVTP Operating Mode : Server\nVTP Domain Name : cisco\nVTP Pruning Mode : Enabled\nVTP V2 Mode : Disabled\nVTP Traps Generation : Disabled\nMD5 digest : 0xA4 0x18 0x78 0x52 0x5A 0x1B 0x2E 0x14\nConfiguration last modified by 0.0.0.0 at 5-28-01 05:17:02\nLocal updater ID is 10.10.10.1 on interface Vl1 (lowest numbered VLAN interface)
```

- Issue the**show vlan**command in order to check the VLAN information.

```
Switch#**show vlan**\n\nVLAN Name               Status  Ports\n---- -------------------------------- --------- -------------------------------\n1  default             active  Gi1/1, Gi1/2, Gi3/1, Gi3/2\n                        Gi3/3, Gi3/4, Gi3/5, Gi3/6\n                        Gi3/7, Gi3/8, Gi3/9, Gi3/10\n                        Gi3/11, Gi3/12, Gi3/13, Gi3/14\n                        Gi3/15, Gi3/16, Gi3/17, Gi3/18\n*\n!--- Output suppressed.\n*\nVLAN Name               Status  Ports\n---- -------------------------------- --------- -------------------------------\n1002 fddi-default           act/unsup\n1003 token-ring-default        act/unsup\n1004 fddinet-default         act/unsup\n1005 trnet-default          act/unsup\n\nVLAN Type SAID    MTU  Parent RingNo BridgeNo Stp BrdgMode Trans1 Trans2\n---- ----- ---------- ----- ------ ------ -------- ---- -------- ------ ------\n1  enet 100001   1500 -   -   -    -  -    0   0\n1002 fddi 101002   1500 -   -   -    -  -    0   0\n1003 tr  101003   1500 -   -   -    -  -    0   0\n1004 fdnet 101004   1500 -   -   -    ieee -    0   0\n1005 trnet 101005   1500 -   -   -    ibm -    0   0\n\nPrimary Secondary Type       Ports \n------- --------- ----------------- ------------------------------------------
```

- Enter the correct mode, either database mode or global configuration mode.
Issue the**vlan database**command in privileged mode in order to enter VLAN database mode.

```
Switch#**vlan database**\n\nSwitch(vlan)#
```

- Issue the**vlanvlan_number**command in order to configure a VLAN.

```
Switch(vlan)#**vlan 2**\n\nVLAN 2 added:\nName: VLAN0002\n\nSwitch(vlan)#**apply**\n\nAPPLY completed.
```
**Note:**For the configuration to take effect, you can either issue the**apply**command or exit out of VLAN database mode. The**end**keyword and**Ctrl-Z**exit methods do not work in VLAN database mode. Issue the**exit**command in order to exit out of VLAN database mode.
Issue these commands in order to perform the VLAN configuration in global configuration mode:

```
Switch(config)#**vlan 3**\n\nSwitch(config-vlan)#**exit**\n\nSwitch(config)#
```

- Issue the**show run**command in order to view VLANs that are numbered higher than 1005 in the running configuration.

```
Switch#**show running-config**\n\nBuilding configuration...\n\nCur

... [Content truncated for readability]

---

### 35. Config XMLDB

**Topic ID:** 2104

OptionsSymptom:
*(public)*User request to set xml db in non-default portProblem:
*(public)*User request to set xml db in non-default portSolution:
*(public)*Setup xmldb
$ sqplus /nolog
SQL> connect / as sysdba
SQL> exec DBMS_XDB.setHTTPPort(8081);
PL/SQL procedure successfully completed.
SQL> exec DBMS_XDB.setFTPPort(2100);
PL/SQL procedure successfully completed.
SQL> ALTER USER ANONYMOUS ACCOUNT UNLOCK;
$ vi $TNS_ADMIN/listener.ora
add following lines
(ADDRESS_LIST =
(ADDRESS = (PROTOCOL = TCP)(HOST = ah1.appshosting.com)(PORT = 8085))
(PROTOCOL_STACK = (PRESENTATION = HTTP) (SESSION = RAW)))
$ lsnrctl stop
$ lsnrctl start
Test connection from PC
Open DOS window on PC
DOS> telnet ah1.appshosting.com 8085

Reference doc:
http://download.oracle.com/docs/cd/B28359_01/appdev.111/b28369/xdb22pro.htm#i1026724
http://download.oracle.com/docs/cd/E10513_01/doc/install.310/e10496/otn_install.htm#CHDEIGGI
http://onlineappsdba.com/index.php/2008/09/17/oracle-application-express-apex-architecture-and-changes-from-oracle-database-11g/

---

### 615. List or check applied patches on EBS 12.x

**Topic ID:** 2105

**R11i / R12.0 / R12.1 / R12.2: Oracle Applications Current Patchset Comparison Utility - patchsets.sh (Doc ID 139684.1)**

**E-Business Suite Applications Manager Steps To Get The Patchset Level of Each Specific Oracle Applications Functional Product in R12 (Doc ID 550654.1)**

For EBS 12.1:
===========
sqlplus apps/

SQL> SELECT DISTINCT RPAD(a.bug_number,
11)|| RPAD(e.patch_name,
11)|| RPAD(TRUNC(c.end_date),
12)|| RPAD(b.applied_flag, 4) BUG_APPLIED
FROM
ad_bugs a,
ad_patch_run_bugs b,
ad_patch_runs c,
ad_patch_drivers d ,
ad_applied_patches e
WHERE
a.bug_id = b.bug_id AND
b.patch_run_id = c.patch_run_id AND
c.patch_driver_id = d.patch_driver_id AND
d.applied_patch_id = e.applied_patch_id AND
a.bug_number in ('','')
ORDER BY 1 DESC;

**Note:**Please enter Patch number in place ofand, e.g '3453499'

References:https://basharoracle.wordpress.com/2016/11/21/query-applied-patches-in-oracle-ebs-r12-2/

For EBS 12.2:
============

List of all patches applied:
---------------------------

```
SELECT adop_session_id, bug_number, session_type, 
       DECODE(status,'N','Applied on other nodes',
                     'R','Running',
                     'H','Failed (Hard)',
                     'F','Failed (Jobs Skipped)',
                     'S','Success (Jobs Skipped)',
                     'Y','Success',
                     'C','Clone Complete') status,
       applied_file_system_base, patch_file_system_base,
       node_name, start_date, end_date, 
       ROUND((end_date - start_date) * 24*60,2) exec_time,
       adpatch_options, autoconfig_status, driver_file_name
FROM ad_adop_session_patches
WHERE session_type IN ('ADPATCH','HOTPATCH','DOWNTIME','ONLINE')
ORDER BY adop_session_id, start_date, end_date;

```

List of patches applied between certain dates:
----------------------------------------------

12.2 E-Business Suite Applications DBA Steps To Check if a Patch is Applied in 12.2.x using SQL*PLUS (Doc ID 1963046.1)
col description format a35;
SELECT APPL_TOP_ID , NAME , DESCRIPTION , APPLICATIONS_SYSTEM_NAME , ACTIVE_FLAG FROM APPLSYS.AD_APPL_TOPS;
select ad_patch.is_patch_applied('R12',-1,20034256) from dual;

expected results:
EXPLICIT = applied
NOT APPLIED = not applied / aborted========================================================================================
Reference:**How to Verify Current Level for Product Family Patches/Patchsets Installed on the System (Doc ID 2234900.1)**

select ABBREVIATION,NAME,TYPE, CODELEVEL, BASELINE from AD_TRACKABLE_ENTITIES order by 1;

---

### 629. Save large table to .CSV

**Topic ID:** 1801

Create below procedure under sys schema and then execute the exec command to export the table dump in CSV format

**-- Generate dump file without double quotes around each field.****
**create or replace procedure dump_table_to_csv( p_tname in varchar2,
p_dir in varchar2,
p_filename in varchar2 )
is
l_output utl_file.file_type;
l_theCursor integer default dbms_sql.open_cursor;
l_columnValue varchar2(4000);
l_status integer;
l_query varchar2(1000)
default 'select * from ' || p_tname;
l_colCnt number := 0;
l_separator varchar2(1);
l_descTbl dbms_sql.desc_tab;
begin
l_output := utl_file.fopen( p_dir, p_filename, 'w' );
execute immediate 'alter session set nls_date_format=''dd-mon-yyyy hh24:mi:ss'' ';
dbms_sql.parse( l_theCursor, l_query, dbms_sql.native );
dbms_sql.describe_columns( l_theCursor, l_colCnt, l_descTbl );
for i in 1 .. l_colCnt loop
utl_file.put( l_output, l_separator || '"' || l_descTbl(i).col_name|| '"' );
dbms_sql.define_column( l_theCursor, i, l_columnValue, 4000 );
l_separator := ',';
end loop;
utl_file.new_line( l_output );
l_status := dbms_sql.execute(l_theCursor);
while ( dbms_sql.fetch_rows(l_theCursor) > 0 ) loop
l_separator := '';
for i in 1 .. l_colCnt loop
dbms_sql.column_value( l_theCursor, i, l_columnValue );
utl_file.put( l_output, l_separator || l_columnValue );
l_separator := ',';
end loop;
utl_file.new_line( l_output );
end loop;
dbms_sql.close_cursor(l_theCursor);
utl_file.fclose( l_output );
execute immediate 'alter session set nls_date_format=''dd-MON-yy'' ';
exception
when others then
utl_file.fclose( l_output );
--execute immediate 'alter session set nls_date_format=''dd-MON-yy'' ';
--raise;
end;
/

From SQL*Plus on server, execute:
exec dump_table_to_csv( '.', 'DATA_PUMP_DIR', '.txt');
i.e., exec dump_table_to_csv( 'XXKE.XXKE_MRP_ARCHIVE', 'DATA_PUMP_DIR', 'XXKE_MRP_ARCHIVE.txt');

**-- Generate dump file with double quotes around each field.****
**create or replace procedure dump_table_to_csv_quote( p_tname in varchar2,
p_dir in varchar2,
p_filename in varchar2 )
is
l_output utl_file.file_type;
l_theCursor integer default dbms_sql.open_cursor;
l_columnValue varchar2(4000);
l_status integer;
l_query varchar2(1000)
default 'select * from ' || p_tname;
l_colCnt number := 0;
l_separator varchar2(1);
l_descTbl dbms_sql.desc_tab;
begin
l_output := utl_file.fopen( p_dir, p_filename, 'w' );
execute immediate 'alter session set nls_date_format=''dd-mon-yyyy hh24:mi:ss'' ';
dbms_sql.parse( l_theCursor, l_query, dbms_sql.native );
dbms_sql.describe_columns( l_theCursor, l_colCnt, l_descTbl );
for i in 1 .. l_colCnt loop
utl_file.put( l_output, l_separator || '"' || l_descTbl(i).col_name|| '"' );
dbms_sql.define_column( l_theCursor, i, l_columnValue, 4000 );
l_separator := ',';
end loop;
utl_file.new_line( l_output );
l_status := dbms_sql.execute(l_theCursor);
while ( dbms_sql.fetch_rows(l_theCursor) > 0 ) loop
l_separator := '';
for i in 1 .. l_colCnt loop
dbms_sql.column_value( l_theCursor, i, l_columnValue );
utl_file.put( l_output, l_separator || '"' || l_columnValue || '"' );
l_separator := ',';
end loop;
utl_file.new_line( l_output );
end loop;
dbms_sql.close_cursor(l_theCursor);
utl_file.fclose( l_output );
execute immediate 'alter session set nls_date_format=''dd-MON-yy'' ';
exception
when others then
utl_file.fclose( l_output );
--execute immediate 'alter session set nls_date_format=''dd-MON-yy'' ';
--raise;
end;
/

From SQL*Plus on server, execute:
exec dump_table_to_csv_quote( '.', 'DATA_PUMP_DIR', '.txt');
i.e., exec dump_table_to_csv_quote( 'XXKE.XXKE_MRP_ARCHIVE', 'DATA_PUMP_DIR', 'XXKE_MRP_ARCHIVE.txt');

---

### 597. Clone schedule 360 RAC to RAC

**Topic ID:** 2701

**Reference:**ssh oraweb@af356.appsforte.com
ps -fu oraweb<<to check if processes are running fromorawebuser.

/u01/app/oraweb/Middleware/Oracle_Home/user_projects/domains/base_domain/bin/stopComponent.sh ohs1**<<It will prompt you for NodeManager Password.**

/u01/app/oraweb/Middleware/Oracle_Home/user_projects/domains/base_domain/bin/stopNodeManager.sh

ps -fu oraweb<<to check if processes have stopped running fromorawebuser.

ssh tomcat@af356.appsforte.com
ps -fu tomcat<<to check if processes are running fromtomcatuser.

/u01/app/tomcat/apache-tomcat-9.0.19/bin/shutdown.sh

**af357:**
ssh oraweb@af357.appsforte.com
ps -fu oraweb<<to check if processes are running fromorawebuser.

/u01/app/oraweb/Middleware/Oracle_Home/user_projects/domains/base_domain/bin/stopComponent.sh ohs1**<<It will prompt you for NodeManager Password.**

/u01/app/oraweb/Middleware/Oracle_Home/user_projects/domains/base_domain/bin/stopNodeManager.sh

ps -fu oraweb<<to check if processes have stopped running fromorawebuser.

ssh tomcat@af357.appsforte.com
ps -fu tomcat<<to check if processes are running fromtomcatuser.

/u01/app/tomcat/apache-tomcat-9.0.19/bin/shutdown.sh

**Step # 02: Drop Old TEST Database:**
ssh orarac@af356.appsforte.com
. tsat.env

srvctl status database -d tsat
srvctl stop database -d tsat

**On Instance01:**sqlplus / as sysdba
SQL> startup mount restrict;
SQL> exit

rman target /
RMAN> drop database;<<It will prompt you to enter "YES".

Create init ora file on test instance with all required parameters and make sure we remove remote cluster hostname and modify the parameters as per new test insance and then create spfile from the init file created

[orarac@af356 dbs]$ vi inittsat.ora
[orarac@af356 dbs]$ sqlplus sys/S3cr3t123@tsat as sysdba
SQL*Plus: Release 12.1.0.2.0 Production on Thu May 9 19:58:27 2019
Copyright (c) 1982, 2014, Oracle. All rights reserved.

Connected to:
Oracle Database 12c Enterprise Edition Release 12.1.0.2.0 - 64bit Production
With the Partitioning, Real Application Clusters, OLAP, Advanced Analytics
and Real Application Testing options
SQL> shut immediate
ORA-01507: database not mounted

ORACLE instance shut down.
SQL> exit
Disconnected from Oracle Database 12c Enterprise Edition Release 12.1.0.2.0 - 64bit Production
With the Partitioning, Real Application Clusters, OLAP, Advanced Analytics
and Real Application Testing options
[orarac@af356 dbs]$ sqlplus sys/S3cr3t123@tsat as sysdba
SQL*Plus: Release 12.1.0.2.0 Production on Thu May 9 19:58:55 2019
Copyright (c) 1982, 2014, Oracle. All rights reserved.
Connected to an idle instance.
SQL> startup nomount
ORA-32004: obsolete or deprecated parameter(s) specified for RDBMS instance
ORACLE instance started.
Total System Global Area 1.0737E+10 bytes
Fixed Size 2935712 bytes
Variable Size 6912214112 bytes
Database Buffers 3791650816 bytes
Redo Buffers 30617600 bytes
SQL> exit
Disconnected from Oracle Database 12c Enterprise Edition Release 12.1.0.2.0 - 64bit Production
With the Partitioning, Real Application Clusters, OLAP, Advanced Analytics
and Real Application Testing options
[orarac@af356 dbs]$ sqlplus sys/S3cr3t123@tsat as sysdba
SQL*Plus: Release 12.1.0.2.0 Production on Thu May 9 19:59:14 2019
Copyright (c) 1982, 2014, Oracle. All rights reserved.

Connected to:
Oracle Database 12c Enterprise Edition Release 12.1.0.2.0 - 64bit Production
With the Partitioning, Real Application Clusters, Automatic Storage Management, OLAP,
Advanced Analytics and Real Application Testing options
SQL> show parameter pfile
NAME TYPE VALUE
------------------------------------ ----------- ------------------------------
spfile string
SQL> create spfile from pfile;
File created.
SQL> exit
Disconnected from Oracle Database 12c Enterprise Edition Release 12.1.0.2.0 - 64bit Production
With the Partitioning, Real Application Clusters, Automatic Storage Management, OLAP,
Advanced Analytics and Real Application Testing options

Make sure the password file is also copied from TSAH to TSAT and both the passwords are same between source and target

[orarac@af356 dbs]$ ls -ltr
total 52
-rw-r--r-- 1 orarac oinstall 2992 Feb 3 2012 init.ora
-rw-r--r-- 1 orarac oinstall 54 May 9 15:49 pfile-tsat.ora
-rw-r----- 1 orarac oinstall 7680 May 9 16:01 orapwtsat.old
-rw-r----- 1 orarac oinstall 7680 May 9 19:36 orapwtsat
-rw-r----- 1 orarac oinstall 7680 May 9 19:36 orapwtsah2
-rw-r----- 1 orarac oinstall 4608 May 9 19:46 spfiletsat.ora.bad
-rw-r--r-- 1 orarac oinstall 1575 May 9 19:58 inittsat.ora
-rw-rw---- 1 orarac oinstall 1544 May 9 19:59 hc_tsat.dat
-rw-r----- 1 orarac oinstall 3584 May 9 19:59 spfiletsat.ora
[orarac@af356 dbs]$ view spfiletsat.ora
[orarac@af356 dbs]$ cat spfiletsat.ora
C"5,@"q*.audit_file_dest='/u01/app/orarac/admin/tsat/adump'
*.audit_trail='NONE'
*.cluster_database=FALSE
*.compatible='11.2.0.0.0'
*.control_files='+DATA/TSAT/CONTROLFILE/'
*.control_management_pack_access='DIAGNOSTIC+TUNING'
*.db_block_size=8192
*.db_create_file_dest='+DATA'
*.db_domain=''
*

... [Content truncated for readability]

---

### 373. Package Issue

**Topic ID:** 2104

Bounced Apache and database on ah118. Then re-created the package using /home/oraapex/sql/payments_pkg.sql script.

---

### 91. How to enable Huge Pages on Red Hat/CentOS LInux VM or physical box?

**Topic ID:** 301

Options
Symptom:
*(public)*How to improve Oracle database Performance in either physical system or Virtual system?
Problem:
*(public)*How to enable huge pages in RHEL kernel for SGA?
Solution:
*(public)*Here is the procedure to setup Huge pages:

1) Check the shared memory how much oracle is using as follows:

DR[root@prod-db ~]# ipcs -m

------ Shared Memory Segments --------
key shmid owner perms bytes nattch status
0x00000000 98304 gdm 600 393216 2 dest
0x324f19ec 9371649 oraprdn 640231735296019
0x00000000 622600 applprdn 644 151552 2 dest
0x00000000 655369 applprdn 644 122880 2 dest
0x00000000 688138 applprdn 644 790528 2 dest
0x00000000 1703947 orav11i 644 151552 2 dest
0x00000000 1736716 orav11i 644 122880 2 dest
0x00000000 1769485 orav11i 644 790528 2 dest

2) Then calculate the huge pages required for this SGA, the high lighted one is in bytes

DR[root@prod-db ~]# bc -l
bc 1.06
Copyright 1991-1994, 1997, 1998, 2000 Free Software Foundation, Inc.
This is free software with ABSOLUTELY NO WARRANTY.
For details type `warranty'.
2317352960/1024 -Divide to get KB
2263040.00000000000000000000
2263040/2048 -Dividing by 2048KB ( 2MB) toget pages
1105.00000000000000000000
quit

We need 1105 pages for this SGA size

3) Set the kernel parameter and execute sysctl -p or restart server.

Modify /etc/sysctl.conf and add huge pages parameter.
#Added By Srini on 11/29/08 for better Oracle performance.
vm.nr_hugepages = 1200

We had set to 1200 giving extra 200 MB as a buffer for Oracle incase needed.

4) Set the memlock in /etc/security/limits.conf file for oracle user.

# oracle-rdbms-server-11gR2-preinstall setting for memlock hard limit is maximum of 128GB on x86_64 or 3GB on x86 OR 90 % of RAM
oraprod soft memlock 134217728
oraprod hard memlock 134217728

5) How to check, in order to pin the huge pages after above steps reboot the server (or execute sysctl -p after database shut down). Then when system comes up you will see 1200 Huge pages Total set in /proc/meminfo as follows:

grep -i huge /proc/meminfo

DR[root@prod-db ~]# grep -i huge /proc/meminfo
HugePages_Total: 0 => after reboot 1200
HugePages_Free: 0 => after reboot small value

If HugePages do not show in meminfo after sysctl -p, then reboot of server is needed.

6) After checking # 5 start the oracle instance, before you can check the ulimit -l to make sure your limits are set to match the SGA size.

DR[oraprdn@prod-db ~]$ id
uid=504(oraprdn) gid=504(dba) groups=504(dba)
DR[oraprdn@prod-db ~]$ ulimit -l
2263040
DR[oraprdn@prod-db ~]$

7) For Oracle database version 11.2.0.3 onwards, force using Huge Pages by setting set use_large_pages=only. Or else set use_large_pages to TRUE which will use large pages when available. Verify this by checking Large Pages Information section in alert.log as the database comes up.

Then start the DB, what for grep -i huge /proc/meminfo that will be decreasing in Free pages as the instance is coming up. Once the database is open you should see 1200-1105 pages free

I recommend to this before your refresh process to see the improvements by your self before giving it to the customer
# oracle-rdbms-server-11gR2-preinstall setting for memlock hard limit is maximum of 128GB on x86_64 or 3GB on x86 OR 90 % of RAM

---

### 38. How to configure Oracle HTTP Server for APEX

**Topic ID:** 2104

OptionsSymptom:
*(public)*Need to configure free Oracle HTTP Server for APEX, comes with 10g database Companion CD
Problem:
*(public)*Need to configure free Oracle HTTP Server for APEX, comes with 10g database Companion CD.

Apache error log shows:
[error] [client 127.0.0.1] [ecid: 1235544072:127.0.0.1:22667:0:13,0] mod_plsql: /pls/apex/apex HTTP-503 ORA-12514Solution:
*(public)*1. Download 10.2.0.x database Companion CD.
2. Install Oracle HTTP Server (Choose Option 3 productions?).
3. Copy tnsnames.ora entry to/network/admin.
4. Configure modplsq/dads.conf as per the installation document.
5. If you get Server Unavailable error when going to pls/apex (apex), then modify listener.ora to specify Oracle home.**

---

### 40. How to enable SSL for APEX applicatoin

**Topic ID:** 2104

http://download.oracle.com/docs/cd/B15897_01/core.1012/b13995/wallets.htm#ASADM401http://download.oracle.com/docs/cd/B15897_01/core.1012/b13995/wallets.htm#ASADM401
Note:1. Create Standard wallet type.2. Make sure to generate 2048 bit or higher CSR.3. Common Name must match the fully qualified name of the server/URL.4. To have Oracle HTTP server automatically open the wallet without password, you must set "auto login" by clicking Wallet -> Enable Auto Login.

How to import customer provided trusted certificate into wallet.http://www.snapdba.com/2012/10/importing-a-trusted-certificate-ssl-into-oracle-wallet-manager/http://isu.ifmo.ru/docs/IAS904/core.904/b10377/appowm.htm
Open a vnc window, set the ORACLE_HOME environment variable as appropriate, and start the utility:
cd $ORACLE_HOME/binowm &When the GUI appears, if the default wallet path is not being used, click ‘Open Wallet’ from the sidebar then specify the wallet path, for example:
/home/oraapex/security/wallet/…then hit OK and enter the relevant password 'wallet01'
Click Operations > Import Trusted Certificate from the top menu bar.
The Import Trusted Certificate message is displayed. You now have the option of importing a certificate file, or pasting the contents (base64 formatted)…
Select a file that contains the certificate
Enter the path or folder name of the trusted certificate location and file, for example: /home/oraapex/security/wallet/facebook.crtClick OK.
Paste the certificate
Another Import Trusted Certificate dialog panel appears with the following message:“Please provide a base64 format certificate and paste it below.”
Copy the certificate text (from an email or file received) including the lines ‘Begin Certificate’ and ‘End Certificate’.
Paste the certificate into the window, and click OK.
A message at the bottom of the window informs you that the trusted certificate was successfully imported into the wallet. Click OK to dismiss the dialog panel. You are returned to the Oracle Wallet Manager main panel, and the trusted certificate is displayed at the bottom of the Trusted Certificates tree.
Make sure you’ve saved your wallet changes by clicking the ‘Save Wallet’ from the sidebar

---

### 41. How to remove APEX workspace

**Topic ID:** 2104

OptionsSymptom:
*(public)*Remove APEX workspaceProblem:
*(public)*Solution:
*(public)*Remove APEX workspace

1. Remove APEX workspace
1.1 login to APEX admin console http://ah3.appshosting.com:8004/apex/apex_admin
Username: admin
Password:
1.2 Click Manage Workspaces->Remove Workspace->click workspace button to select the

correct workspace->Next->Click check box->Next->write down the Schema and tablespaces

name->click Remove Workspace button->Click Return to Internal Manager

2. Remove User
2.1 Login to ah3.appshosting.com as oraapex
2.2 sqlplus as sysdba
2.3 DROP USERCASCADE;

2. Remove tablespace
2.1 Login to sqlplus as sysdba
2.2 DROP TABLESPACEINCLUDING CONTENTS AND DATAFILES CASCADE CONSTRAINTS;Comment:
*(internal)*To resolve error:
Starting backup at 03-FEB-2009 18:29:04
RMAN-06169: could not read file header for datafile 109 error reason 4
RMAN-06169: could not read file header for datafile 109 error reason 4
released channel: d1
RMAN-00571: ===========================================================
RMAN-00569: =============== ERROR MESSAGE STACK FOLLOWS ===============
RMAN-00571: ===========================================================
RMAN-03002: failure of backup command at 02/03/2009 18:29:05
RMAN-06056: could not access datafile 109

Solution:
Problem was that earlier I did drop tablespace offline drop, and datafile still hanging out there. I did alter tablespace flow_94 datafile 'xxx.dbf' offline drop, but didn't work.

DROP TABLESPACE flow_94 INCLUDING CONTENTS;

---

### 42. How to set up APEX print using Apache FOP

**Topic ID:** 2104

OptionsAttachment:fop1.jpg95.7 KBytesfop2.jpg46.9 KBytesapex print.jpg45.6 KBytesSymptom:
*(public)*Need to print/generate PDF from APEXProblem:
*(public)*In cdb3, the print settings were as follows:
server: localhost
port: 9090
script:/cocoon/fop_post/
Solution:
*(public)*
Installing and Configuring Apache FOP5.1 PrerequisitesA supported configuration of Apache FOP in conjunction with Oracle Containers for J2EE (10.1.3.2) is provided with Application Express 3.0.1. The Apache FOP installation is included in the Application Express distribution under*apex_install_directory*/utlities/fop/fop.war.
**Please note**- Beginning with Application Express 3.0.1, Apache FOP in conjunction with Oracle Containers for J2EE (10.1.3.2) is a supported report server but only when installed using the provided files. Alternate configurations of Apache FOP are not supported. Questions related to alternate configurations should be posted on theApplication Express OTN Forum.
**Prerequisite: Install and Start OC4J
**Before getting started, you will need to have Oracle Containers for J2EE (OC4J) up and running. The following version of OC4J have been verified to work with the FOP solution outlined below.

- Oracle Containers for J2EE (10.1.3.2)

  - Available fordownload from OTN
  - Installation instructions and configuration

1. Downloadhttp://download.oracle.com/otn/java/oc4j/101330/oc4j_extended_101330.zip
2. Unzip to an install area, i.e. c:\\oracle\\oc4j
3. Start OC4J and set oc4jadmin password, i.e. oc4j -start
**Step 1: Installing the WAR file**
Place the fop.war file (located in*apex_install_directory*/utlities/fop) in an accessible location on your local machine. You then follow the directions below or can view the process by running thisviewlet.

- Navigate to your OC4J Oracle Enterprise Manager Console eg: http://localhost:8888/em/
- Select the Applications Tab
- Select Deploy Button
- On the "Deploy: Select Archive" page use the option "Archive is present on local host. Upload the archive to the server where Application Server Control is running." Use the file browse to select the fop.war file and click "Next" button
- On the "Deploy: Application Attributes" page set the "Application Name" option to "fop" and clear the "Context Root " option and click "Next" Button
- On the Deploy: Deployment Settings click the "Deploy" button
**Step 2: Configure Oracle Application Express to use the JSP for PDF printing**
Once you have the FOP installed, access the Report Printing parameters:

- Access the Administration Services home page
- Select Manage Service
- Select Instance Settings, under Manage Environment Settings
- Click Report Printing to focus on just the Report Printing attributes
Now, specify the following attributes:

- Oracle BI Publisher:**Standard Support**(FOP support)
- Print Server Protocol:**HTTP**or**HTTPS**(depends on your configuration)
- Print Server Host Address:***the hostname for the machine where the java container is running***- e.g. myhost.mycompany.com
- Print Server Port:***the port that the OC4J is listening on***- e.g. 8888
- Print Server Script:**/fop/apex_fop.jsp**
Make sure you enter the print server settings exactly as specified, do not use http:// in front of your hostname, do not use a colon on your port settings and do not use a "/" after the JSP name, only before: "/fop/apex_fop.jsp".
**Ref:**http://www.oracle.com/technology/products/database/application_express/html/configure_printing.html#05

Configuring Other XSL-FO Processing EnginesIf you prefer to use another XSL-FO Processing Engine, you will need to create an endpoint that provides similar functionality to theexample JSPprovided for the Apache FOP example above. Only Oracle BI Publisher and the above described installation of Apache FOP in conjunction with Oracle Containers for J2EE (10.1.3.2) are supported report servers. Questions related to other XSL-FO Processing Engine should be posted on theApplication Express OTN Forum.Comment:
*(internal)*CDB1 Install:
Pre-requisite: Install JDK 1.5 or higher.

su - oraoc4j (passwd 0c4j#321)

1. Downloaded OC4J 10.1.3.3 from OTN since that is the oldest 10.1.3 version available.
2. Extract OC4J media.
mv /home/oraoc4j/Desktop/oc4j_extended_101330.zip /u03/oracle/oc4j
cd /u03/oracle/oc4j
unzip oc4j_extended_101330.zip

3. Start OC4J with increased JVM settings to handle big PDF documents (see VNC session on cdb1:5).
export JAVA_HOME=/usr/java/jdk1.6.0_05
export ORACLE_HOME=/u03/oracle/oc4j
export OC4J_JVM_ARGS="-Xms512m -Xmx512m"
/u03/oracle/oc4j/bin/oc4j -start

**Note:**When you start OC4J first time, it will ask you to set oc4jadmin password and it will activate the account. (Set to 0c4j#321 for cdb1)

4. Log in to EM console as oc4jadmin and deploy Apache FOP for printing.
http://cdb1.appshosting.com:8888/em

cp /home/oracle/apex31/apex/utilities/fop/fop.war /u03/oracle/oc4j

**Note:**To shut down OC4J, issue /u03/oracle/oc4j/bin/oc4j -shutdown

### Larry Zhao installed new OC4J service 

... [Content truncated for readability]

---

### 44. Migrating or copy APEX and database schema

**Topic ID:** 2104

OptionsSymptom:
*(public)*Need to migrate APEX schema from one database to anotherProblem:
*(public)*Need to migrate APEX schema from one database to another which is on different database and different tablespaceSolution:
*(public)*Use expdp/impdp to migrate APEX/oracle schema
(Use this method if both source and target are above 10g version)
Export source schema
$ ssh@
$ cd $HOME/customers/
$ expdp system directory=DATA_PUMP_DIR dumpfile=expdp_.dmp schemas=job_name=expdp_
Create target schema
Create target schema through APEX admin console.
Refer to 'Create new APEX workspace' document on OTRS FAQ
» FAQ » APEX » How to create new APEX workspace manually
Import into target schema
$ ssh@
$ cd $HOME/customers/
$ impdp system directory=DATA_PUMP_DIR dumpfile=expdp_.dmp schemas=job_name=imp_remap_schema=:remap_tablespace=:
Verify
Verify target schema now has all the objects imported.

Use exp/imp to migrate APEX/oracle schema
(Use this method if both source and target are 9i or below version)
Create APEX and database accounts
Export on source database
$ ssh@
$ cd $HOME/customers/
$ exp userid=system file=.dmp owner=
Generate script to create tables
$ ssh@
$ cd $HOME/customers/
$ scp -p@:/home//customers//.dmp .
$ imp userid=system buffer=20960 file=.dmp log=imp_show.log show=y indexfile=create_tables0.sql ignore=y indexes=n rows=n constraints=n fromuser=touser=
$ grep "^REM " create_tables0.sql > create_tables.sql
Get target tablespace name using following query. 'APLUSDBS' is target username on target database.
$ sqlplus system
SQL> select username, DEFAULT_TABLESPACE from dba_users where username='APLUSDBS';
Edit create_tables.sql to replace source tablespace name to target tablespace name
$ vi create_tables.sql
:1,$s/^REM //
:1,$s///g
Create tables in target schema
$ sqlplus
SQL> spool create_tables.log
SQL> @create_tables.sql
SQL> spool off
SQL> exit
review create_tables.log and resolve any error
Import data into target schema
imp userid=system buffer=40960 file=.dmp log=imp_data.log ignore=y indexes=n rows=y constraints=n grants=n fromuser=touser=commit=y resumable=y resumable_timeout=10000000
Import indexes and constraints
imp userid=system buffer=40960 file=.dmp log=imp_indexes.log ignore=y indexes=y rows=n constraints=y grants=y fromuser=touser=commit=y resumable=y resumable_timeout=10000000
For examples:
imp userid=system buffer=40960 file=bogdan.dmp log=imp_data.log ignore=y indexes=n rows=y constraints=n grants=n fromuser=bogdan touser=aplusdbs commit=y resumable=y resumable_timeout=10000000
imp userid=system buffer=40960 file=bogdan.dmp log=imp_indexes.log ignore=y indexes=y rows=n constraints=y grants=y fromuser=bogdan touser=aplusdbs commit=y resumable=y resumable_timeout=10000000
Associate multiple schemas to one tablespace if that is the case for customer
Logon to APEX administration page as admin->Manage workspace->Manage workspace to Schema Assignments->Create->Select 'Existing' then click Next->select the workspace->select the schema->Click create button.

---

### 46. Oracle APEX log-in throwing Server Unavailable error

**Topic ID:** 2104

Oracle APEX log-in throwing Server Unavailable error.
Apache error.log showing:
[error] [client 192.168.10.61] [ecid: 1251738027:127.0.0.1:5940:0:5,0] mod_plsql: /pls/apex/apex HTTP-503 ORA-28001
Problem:
*(public)*Oracle APEX log-in throwing Server Unavailable error

[root@ah45 init.d]# su - oracle
[oracle@ah45 ~]$ . oraenv
ORACLE_SID = [oracle] ? ahdbe
The Oracle base for ORACLE_HOME=/u01/app/oracle/product/11.1.0 is /u01/app/oracle
[oracle@ah45 ~]$ sqlplus / as sysdba

SQL*Plus: Release 10.1.0.3.0 - Production on Mon Aug 31 10:04:25 2009
Copyright (c) 1982, 2004, Oracle. All rights reserved.
ERROR:
ORA-12545: Connect failed because target host or object does not exist

Enter user-name:
[oracomp@ah45 conf]$ . oraenv
ORACLE_SID = [apex] ? ahdbe
The Oracle base for ORACLE_HOME=/u01/app/oracle/product/11.1.0 is /u01/app/oracomp/product/10.2.0/db_comp
[oracomp@ah45 conf]$ sqlplus APEX_PUBLIC_USER/nuap3x1
SQL*Plus: Release 11.1.0.6.0 - Production on Mon Aug 31 10:04:34 2009
Copyright (c) 1982, 2007, Oracle. All rights reserved.
ERROR:
ORA-28000: the account is locked

Enter user-name:
SQL*Plus: Release 11.1.0.6.0 - Production on Mon Aug 31 10:04:49 2009
Copyright (c) 1982, 2007, Oracle. All rights reserved.

Connected to:
Oracle Database 11g Enterprise Edition Release 11.1.0.6.0 - 64bit Production
With the Partitioning, OLAP, Data Mining and Real Application Testing options
SQL> alter user APEX_PUBLIC_USER account unlock;
User altered.
SQL> exit
Disconnected from Oracle Database 11g Enterprise Edition Release 11.1.0.6.0 - 64bit Production
With the Partitioning, OLAP, Data Mining and Real Application Testing options
[oracle@ah45 ~]$ su -
[oracle@ah45 ~]$ exit
logout
[root@ah45 init.d]# su
[root@ah45 init.d]#

Solution:
*(public)*1. Change password.
2. Unlcok account
3. Remove password expiration policy

select username, expiry_date, profile from dba_users order by username;
alter profile default limit PASSWORD_LIFE_TIME unlimited;
Profile altered.

---

### 47. Procedure for copying APEX schema and blobs from one database to another

**Topic ID:** 2104

OptionsSymptom:
*(public)*When copying Apex schemas with blobs to new database, the blobs do not copy over via exp/imp or expdp/impdt.
Problem:
*(public)*Need to copy Apex schemas with blobs to another database.Solution:
*(public)*

**Procedure for copying APEX schema and blobs from one database to another**

**From source db:
**1. Export the desired schema.
#exp system/rlaxmi file = ermd.dmp grants=N indexes=Y owner=ERMS
#exp userid=grace_im file=grace_im_schema.dmp log=exp_gram.log full=y
expdp system directory=DATA_PUMP_DIR dumpfile=expdp_GRACE_IM.dmp schemas=GRACE_IM job_name=expdp_GRACE_IM#impdp system directory=data_pump_dir dumpfile=grace_im.dp remap_tablespace=flow_1:grace_im remap_tablespace=flow_4:grace_im logfile=grace_im_imp.log
2.Find out the security_group_id of the workspace exported.
select to_char(APEX_UTIL.FIND_SECURITY_GROUP_ID('GRACE-IM') ) from dual;
54742212088737252

select count(*) from flows_files.wwv_flow_file_objects$ where
SECURITY_GROUP_ID= '54742212088737252';
COUNT(*)
----------
973
3. create table flows_files.tmp_wwv_flow_file_objects as select * from flows_files.wwv_flow_file_objects$ where
SECURITY_GROUP_ID= '54742212088737252';

4. Export out the APEX blob table from the tmp_wwv_flow_file_objects table in flows_files schema.
#SQL> alter user flows_files account unlock; -- (no need)
#SQL> grant create session to flows_files; --(no need)
exp userid=system file=apexblobl.dmp tables=(FLOWS_FILES.TMP_WWV_FLOW_FILE_OBJECTS)

***** Transfer compressed export files. *****

**From target db:
**0. Check the source so that the tablespaces for the schema are created on target with same name. If missing,
1. Import the desired schema.
imp userid=grace_im file=/tmp/grace_im_schema.dmp full=y log=imp_grace_im_full.log ignore=y
#imp userid=system file=/tmp/grace_im.dmp fromuser=grace_im touser=grace_im log=imp_grace_im.log
#imp userid=system file=/tmp/grace_im.dmp fromuser=grace_im touser=grace_im log=imp_grace_im_grc.log indexfile=grace_im.sql

impdp system directory=DATA_PUMP_DIR dumpfile=EXPDP_GRACE_IM.DMP schemas=grace_im job_name=imp_grace_im remap_schema=grace_im:grace_im remap_tablespace=FLOW_4:APEX_53585930402916105,GRACE_IM:APEX_53585930402916105

2. Upload Apex blobs to temporary table.
imp userid=system file=apexblob1.dmp fromuser=flows_files touser=flows_files

3. Find out the security_group_id of the same workspace in new database.
2.Find out the security_group_id of the workspace exported.
select to_char(APEX_UTIL.FIND_SECURITY_GROUP_ID('GRACE-IM') ) from dual;
54742212088737252
3. Update the security_group_id on the imported blobs.
SQL> update flows_files.tmp_wwv_flow_file_objects set security_group_id = 54742212088737252 ;
update flows_files.tmp_wwv_flow_file_objects set security_group_id = 54742212088737252
*
ERROR at line 1:
ORA-04098: trigger 'TMPUSER.WWV_BIU_FLOW_FILE_OBJECTS' is invalid and failed re-validation

SQL> alter trigger TMPUSER.WWV_BIU_FLOW_FILE_OBJECTS disable;
Trigger altered.
SQL> update flows_files.tmp_wwv_flow_file_objects set security_group_id = 54742212088737252 ;
938 rows updated.
SQL> commit;
Commit complete.
SQL> delete from flows_files.TMP_WWV_FLOW_FILE_OBJECTS where id in (select id from flows_files.WWV_FLOW_FILE_OBJECTS$) ;
23 rows deleted.
4. insert into flows_files.WWV_FLOW_FILE_OBJECTS$ select * from tmpuser.WWV_FLOW_FILE_OBJECTS ;

******************* Note ***********************

Drop flows_files.tmp_wwv_flow_file_objects when done.

---

### 48. Refresh APEX schema

**Topic ID:** 2104

OptionsSymptom:
*(public)*Customer requests to refresh from one APEX schema to another schemaProblem:
*(public)*Solution:
*(public)*1. Find out schemas and tablespace information
$ sqlplus /nolog
SQL> set pagesize 1000
SQL> select * from dba_users where username='';
SQL> select * from dba_users where username='';
2. Backup target schema
$ cd $HOME/customer/
$ exp userid=system file=.dmp log=.log owner=
3. Drop objects in target schema
SQL> spool drop_.sql
SQL> select 'DROP '||object_type||' '||owner||'.'||object_name||';' from all_objects where owner='';
SQL> spool off
4. Export source schema
$ expdp system directory=data_pump_dir dumpfile=.dmp schemas=job_name=export_
$ ls -l /u02/oracle/apexdb/admin/apex/dpdump/
5. Import into target
$ impdp system directory=data_pump_dir dumpfile=.dmp schemas=job_name=imp_remap_schema=:remap_tablespace=:

---

### 50. Troubleshoot opmn startup libdb error

**Topic ID:** 2104

OptionsSymptom:
*(public)*When startup opmn service in Oracle iAS 10.1.3.3, getting error related to libdbProblem:
*(public)*09/01/21 01:26:17 Start process
--------
/u01/oracle/product/10133/ohs/bin/apachectl startssl: execing httpd
/u01/oracle/product/10133/ohs/bin/httpd: error while loading shared libraries: libdb-3.3.so: cannot open shared object file: No such file or directorySolution:
*(public)*Logon as oracle user
$ cd /u01/oracle/product/10133/opmn/bin
$ ./opmnctl startall
opmnctl: starting opmn and all managed processes...
================================================================================
opmn id=cdb3.appshosting.com:6200
0 of 1 processes started.

ias-instance id=IAS-1
++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
--------------------------------------------------------------------------------
ias-component/process-type/process-set:
HTTP_Server/HTTP_Server/HTTP_Server/

Error
--> Process (index=1,uid=585653720,pid=24344)
failed to start a managed process after the maximum retry limit
Log:
/u01/oracle/product/10133/opmn/logs//HTTP_Server~1.log

$ cat /u01/oracle/product/10133/opmn/logs/HTTP_Server~1.log
09/01/21 00:15:28 Start process
--------
/u01/oracle/product/10133/ohs/bin/apachectl startssl: execing httpd
/u01/oracle/product/10133/ohs/bin/httpd: error while loading shared libraries: libgdbm.so.2: cannot open shared object file: No such file or directory

Resolved by
(1) Searched for the package: "yum list | grep gdbm"
(2) Installed the package: "yum install gdbm"

09/01/21 01:26:17 Start process
--------
/u01/oracle/product/10133/ohs/bin/apachectl startssl: execing httpd
/u01/oracle/product/10133/ohs/bin/httpd: error while loading shared libraries: libdb-3.3.so: cannot open shared object file: No such file or directory

Download and follow readme instructions for Patch 6078836 prior to the installation of any 10.1.3.x version installing the Oracle HTTP Server. This is a special system library (libdb.so.2), applicable to both 32 and 64 bit platforms, required to start Oracle HTTP Server during and after installation. The patch is labeled for "10.1.3.3" because the AS 10.1.3.3 Patch Set or later will needed to be applied as the last step.

# yum list |grep libdb
# yum install libdb
# cd /usr/lib
# ln -s /lib/libdb-4.2.so libdb-3.3.so
# ln -s /lib/libdb-4.2.so libdb.so

---

### 537. Set up OCFS2

**Topic ID:** 2404

Set up Oracle Clustered File System v2 (OCFS2)Nano staging app servers, we have added 30G disk10.100.100.182 and 113disk - /dev/xvdc1

---

### 57. How to restart Greeting Cards service

**Topic ID:** 301

OptionsSymptom:
*(public)*Greeting-cards.com not available
Problem:
*(public)*Greeting-cards.com downSolution:
*(public)*1. Log in to gc2.appshosting.com.
2. Switch user to root.
3. /etc/init.d/mysqld restart
/etc/init.d/httpd restart

---

### 51. Upgrade to Application Express 3.2

**Topic ID:** 2104

OptionsAttachment:apex32 upgrade.swf.html708 Bytesapex32 upgrade.swf2.0 MBytesSymptom:
*(public)*Problem:
*(public)*Upgrade to APEX 3.2Solution:
*(public)***Please follow below steps for upgrade to APEX 3.2**

1. Download the APEX 3.2 software fromhttp://download.oracle.com/otn/java/appexpress/apex_3.2.zip

2. Check the instllation steps at documentation linkhttp://download.oracle.com/docs/cd/E14373_01/install.32/e13366/otn_install.htm#insertedID4

Section 3.4 Downloading from OTN andConfiguring Oracle HTTP Server

3. Shutdown the HTTP Server, Oracle Database Server and listner

4. Startup the database and connect to the database using SQL*Plus

$ sqlplus /nolog
SQL> CONNECT SYS as SYSDBA
Enter password:SYS_password

5. unzip the file apex_3.2.zip file and go the apex directory.

6. Run the sql file apexins.sql

@apexins SYSAUX SYSAUX TEMP /i/

6. Copy the images

Before you begin the upgrade, to ensure that you can revert to the previous version, Oracle recommends that you create a copy of your existing images directory for Oracle Application Express, indicating the release number of the images (for example, images_3_1).

cp -rfAPEX_HOME/apex/imagesORACLE_HTTPSERVER_HOME/Apache

7. Startup the HTTP Server and test the APEX application.

For 11g database, execute:
ah3:/home/oraapex/security/acl_apex32.sql
ah3:/home/oraapex/security/acluser_apex32.sqlComment:
*(internal)*Reference - Installation Document

http://download.oracle.com/docs/cd/E14373_01/install.32/e13366/toc.htm

---

### 633. oracle Servlet error: An exception occurred. The current application deployment descriptors do not allow for including it in this response. Please consult the application log for details.

**Topic ID:** 2105

1. Stop oacore
2. Clear persistence folder

cd $INST_TOP/ora/10.1.3/j2ee/oacore;
rm –rf persistence

3. Start oacore

---

### 59. ADDING A VIRTUAL HOST in Apache for Fadi, and others using AH1 server

**Topic ID:** 301

OptionsSymptom:
*(public)*ADDING A VIRTUAL HOST in Apache for Fadi, and others using AH1 server

Added the following directives in /etc/httpd/conf/vhosts/Vhosts_ispconfig.conf on AH1 server.

Since Fadi's "lookjordan.com" is hosted on the old AH1 server (which can be found by SSH'ing to lookjordan.com).

ProxyPass /i http://ah1.appshosting.com:7781/i
ProxyPassReverse /i http://ah1.appshosting.com:7781/i
ProxyPass /pls/apex http://ah1.appshosting.com:7781/pls/apex
ProxyPassReverse /pls/apex http://ah1.appshosting.com:7781/pls/apex
ServerName lookfilipino.appshosting.com
ServerAlias lookfilipino.appshosting.com
ServerAlias lookfilipino.com
ServerAlias www.lookfilipino.com
ServerAdmin support@appshosting.com
DocumentRoot /var/www/lookjordan.appshosting.com/web.lookfilipino
DirectoryIndex index.html index.htm index.php index.php5 index.php4 index.php3 i ndex.shtml index.cgi index.pl index.jsp Default.htm default.htm
ScriptAlias /cgi-bin/ /var/www/lookjordan.appshosting.com/cgi-bin/
AddHandler cgi-script .cgi
AddHandler cgi-script .pl
ErrorLog /var/www/lookjordan.appshosting.com/log/error.log
CustomLog /var/www/lookjordan.appshosting.com/log/access.log combined
AddType application/x-httpd-php .php .php3 .php4 .php5

SetOutputFilter PHP
SetInputFilter PHP

SetOutputFilter PHP
SetInputFilter PHP

SetOutputFilter PHP
SetInputFilter PHP

SetOutputFilter PHP
SetInputFilter PHP

php_admin_flag safe_mode Off
Alias /error/ "/var/www/lookjordan.appshosting.com/web/error/"
ErrorDocument 400 /error/invalidSyntax.html
ErrorDocument 401 /error/authorizationRequired.html
ErrorDocument 403 /error/forbidden.html
ErrorDocument 404 /error/fileNotFound.html
ErrorDocument 405 /error/methodNotAllowed.html
ErrorDocument 500 /error/internalServerError.html
ErrorDocument 503 /error/overloaded.html

Once the above directives are added,

First: Do a /etc/init.d/httpd configtest
to check for errors

NOTE: The following error is normal:

[Sat Jul 11 18:47:57 2009] [warn] VirtualHost 66.152.169.35:443 overlaps with VirtualHost 66.152.169.35:443, the first has precedence, perhaps you need a NameVirtualHost directive

Then: Restart the web server /etc/init.d/httpd restart

When it asks for SSL password type "t1t@n"

---

### 62. Allow new IP access to server through VPN

**Topic ID:** 301

OptionsSymptom:
*(public)*Problem:
*(public)*Solution:
*(public)*[sam@ah23 ~]$ ssh 172.1.0.1
The authenticity of host '172.1.0.1 (172.1.0.1)' can't be established.
RSA key fingerprint is a8:9a:7c:3c:f5:c0:52:80:3c:db:96:3f:5d:42:4f:75.
Are you sure you want to continue connecting (yes/no)? yes
Warning: Permanently added '172.1.0.1' (RSA) to the list of known hosts.
[sam@ah23 ~]$ sshashb@172.1.0.1
ashb@172.1.0.1'spassword:
fw01> enable
Password: ************ (a0d...)
fw01# pwd
flash:/
fw01(config)# show run | include 216.74.58.82
access-list ahdirect extended permit tcp host 66.110.220.75 host 216.74.58.82 eq 3389
access-list ahdirect extended permit tcp any host 216.74.58.82 eq ftp
access-list ahdirect extended permit tcp any host 216.74.58.82 eq ftp-data
access-list ahdirect extended permit tcp host 173.56.42.109 host 216.74.58.82 eq ssh
access-list ahdirect extended permit tcp host 173.56.42.109 host 216.74.58.82 eq 1527
static (inside,outside) tcp 216.74.58.82 3389 172.1.0.120 3389 netmask 255.255.255.255
static (inside,outside) tcp 216.74.58.82 ftp 172.1.0.120 ftp netmask 255.255.255.255
static (inside,outside) tcp 216.74.58.82 ftp-data 172.1.0.120 ftp-data netmask 255.255.255.255
static (inside,outside) tcp 216.74.58.82 ssh 172.1.0.122 ssh netmask 255.255.255.255
static (inside,outside) tcp 216.74.58.82 1527 172.1.0.122 1527 netmask 255.255.255.255

fw01(config)# access-list ahdirect extended permit tcp host 96.232.125.92 host 216.74.58.82 eq ssh
fw01(config)# access-list ahdirect extended permit tcp host 96.232.125.92 host 216.74.58.82 eq 1527
fw01(config)# write mem
Building configuration...
Cryptochecksum: 990d8eab 016addb8 dbe8e08a 22620c3e
31551 bytes copied in 0.880 secs
[OK]
fw01(config)# no access-list ahdirect extended permit tcp host 173.56.42.109 h$
fw01(config)# no access-list ahdirect extended permit tcp host 173.56.42.109 h$
fw01(config)# write mem
Building configuration...
Cryptochecksum: 19c9bd0f 2002cf9c 260a3c5e b0c044f7
31378 bytes copied in 1.790 secs (31378 bytes/sec)
[OK]
fw01(config)# show run | include 216.74.58.82
access-list ahdirect extended permit tcp host 66.110.220.75 host 216.74.58.82 eq 3389
access-list ahdirect extended permit tcp any host 216.74.58.82 eq ftp
access-list ahdirect extended permit tcp any host 216.74.58.82 eq ftp-data
access-list ahdirect extended permit tcp host 96.232.125.92 host 216.74.58.82 eq ssh ssh
access-list ahdirect extended permit tcp host 96.232.125.92 host 216.74.58.82 eq 1527

---

### 64. Apache PHP MySQL OCI8 How to?

**Topic ID:** 301

OptionsAttachment:oracle-instantclient11.1-devel-11.1.0.7.0-1.x86_64.rpm565.4 KBytesoracle-instantclient11.1-devel-11.1.0.7.0-1.i386.rpm565.3 KBytesSymptom:
*(public)*This is how to document on setting up Apache + PHP52 + MySQL + OCI8Problem:
*(public)*How to setup Apache with PHP and Oracle/MySQLSolution:
*(public)*1) Down load the oracle instant client or use the attached Base + SDK, run rpm -ivh oracle

Download the "Instant Client Package - Basic." On Linux, also download the "Instant Client Package - SDK."

## Enabling the PHP OCI8 Extension on LinuxTo install on Linux, PHP generally needs tobe recompiled. For users of Oracle Enterprise Linux, pre-built RPMpackages of PHP and OCI8 are available fromoss.oracle.com, or viaULNupdates.
To build PHP and OCI8:

- Download theApache HTTPD Serverif you decide not to use your default package. Download thePHP 5.2 source code.
Install PHP and Apache followingInstallation on Unix systemsin the PHP manual.
At this stage, don't configure the OCI8 extension.
Check that PHP is working before continuing.

- Download the Basic and the SDK Instant Client packages from the OTNInstant Client page. Either the zip file or RPMs can be used.
Install the RPMs as the root user:

```
rpm -Uvh oracle-instantclient11.1-basic-11.1.0.7.0-1.i386.rpm
rpm -Uvh oracle-instantclient11.1-devel-11.1.0.7.0-1.i386.rpm

```
The first RPM puts the Oracle libraries in/usr/lib/oracle/11.1/client/lib and the second creates headers in/usr/include/oracle/11.1/client
If using the zip files, the SDK should unzipped to the same directory as the basic package, and a symbolic link created:

```
ln -s libclntsh.so.11.1 libclntsh.so
```

- The latest OCI8 1.3 extension fromPECLsupercedes the default version in the PHP 5.2 source code. This can be downloaded manually and installed with:

```
pecl install oci8-1.3.5.tgz

```
Or the latest production package can be automatically downloaded and installed:

```
pecl install oci8

```
This gives:

```
downloading oci8-1.3.5.tgz ...
Starting to download oci8-1.3.5.tgz (137,987 bytes)
.....done: 137,987 bytes
10 source files, building
running: phpize
Configuring for:
PHP Api Version:  20041225
Zend Module Api No: 20060613
Zend Extension Api No: 220060519
 1. Please provide the path to the ORACLE_HOME directory. 
Use 'instantclient,/path/to/instant/client/lib' if you're compiling with Oracle Instant Client : autodetect

1-1, 'all', 'abort', or Enter to continue: 

```
If you have the Instant Client RPMs, hit Enter and PECL will automatically locate the RPMs and build and install an oci8.so shared library.
If you have the Instant Client zip files, orhave multiple versions of the Instant Client RPMs installed thenexplicitly give the path:

  - Enter 1 to update the first (and only) setting. The OCI8 configuration prompt will then be shown:

```
Please provide the path to the ORACLE_HOME directory. Use 'instantclient,/path/to/instant/client/lib'
 if you're compiling with Oracle Instant Client [autodetect] : 

```

  - Enter the path, such as:

```
instantclient,/usr/lib/oracle/11.1/client/lib

```
or:

```
instantclient,/your/path/to/instantclient_11_1 

```
Do not use any environment variable names, because the PECL installer doesn't expand variables.

  - You will get reprompted 1-1, 'all', 'abort', or Enter to continue. As it says, press Enter to continue. PECL will build and install an oci8.so shared library.

- Edit php.ini and confirm extension_dir points to the directory the oci8.so file was installed into.
Also in php.ini, enable the OCI8 extension with:

```
extension=oci8.so

```

- Add the directory with InstantClient to /etc/ld.so.conf, or manually set LD_LIBRARY_PATH to/usr/lib/oracle/11.1/client/lib and restart Apache.
It is important to set all Oracle environment variables before starting Apache. A script helps do that:

```
#!/bin/sh

LD_LIBRARY_PATH=/usr/lib/oracle/11.1/client/lib:${LD_LIBRARY_PATH}
export LD_LIBRARY_PATH

echo Starting Apache 
/usr/sbin/apachectl start

```
This script can contain desiredOracle globalization language environment variables such as NLS_LANG.If nothing is set, a default local environment will be assumed. SeeAn Overview on Globalizing Oracle PHP Applicationsfor more details.

## Verifying the Extension is InstalledTo check the extension is configured, create a simple PHP script phpinfo.php in the Apache document root:

```
 phpinfo();
?>

```
Load the script into a browser using theappropriate URL, e.g. "http://localhost/phpinfo.php". The browser pagewill contain an "oci8" section saying "OCI8 Support enabled".
The OCI8 options that can be configured in your php.ini file are shown.

## Connecting to OracleOracle authentication and databaseinformation is passed to oci_connect() to create a connection. Toolslinked with Instant Client are always "remote" from any database serverand an Oracle Net connection identifier must be used along with ausername and password. The connection information is likely to be wellknown for est

... [Content truncated for readability]

---

### 65. Apache SSL Multiple Virtual Hosts

**Topic ID:** 301

OptionsSymptom:
*(public)*Use a configuration like the following, terminating SSL on multiple ports for multiple SSL virtual hosts:
LoadModule ssl_module modules/mod_ssl.so
Listen 443Listen 444
AddType application/x-x509-ca-cert .crtAddType application/x-pkcs7-crl .crl
SSLPassPhraseDialog builtin
SSLSessionCache shmcb:/var/cache/mod_ssl/scache(512000)SSLSessionCacheTimeout 300
SSLMutex default
SSLRandomSeed startup file:/dev/urandom 256SSLRandomSeed connect builtin
SSLCryptoDevice builtin
ErrorLog logs/ssl_error_logTransferLog logs/ssl_access_logLogLevel warnSSLEngine onSSLProtocol all -SSLv2SSLCipherSuite ALL:!ADH:!EXPORT:!SSLv2:RC4+RSA:+HIGH:+MEDIUM:+LOWSSLCertificateFile /etc/httpd/conf.d/APEXTRACKER.ND.EDU-SSL/apextracker.nd.edu.crtSSLCertificateKeyFile /etc/httpd/conf.d/APEXTRACKER.ND.EDU-SSL/apextracker.nd.edu.keySSLCACertificateFile /etc/httpd/conf.d/APEXTRACKER.ND.EDU-SSL/intermediate.crtSSLOptions +StdEnvVarsSSLOptions +StdEnvVarsSetEnvIf User-Agent ".*MSIE.*" \\nokeepalive ssl-unclean-shutdown \\downgrade-1.0 force-response-1.0CustomLog logs/ssl_request_log \\"%t %h %{SSL_PROTOCOL}x %{SSL_CIPHER}x \\"%r\\" %b"ProxyPass / http://ah45.appshosting.com:7780/ProxyPassReverse / http://ah45.appshosting.com:7780/
ErrorLog logs/ssl_error_logTransferLog logs/ssl_access_logLogLevel warnSSLEngine onSSLProtocol all -SSLv2SSLCipherSuite ALL:!ADH:!EXPORT:!SSLv2:RC4+RSA:+HIGH:+MEDIUM:+LOWSSLCertificateFile /etc/httpd/conf.d/SHARED-SSL/appshosting.com.crtSSLCertificateKeyFile /etc/httpd/conf.d/SHARED-SSL/appshosting.com.keySSLCACertificateFile /etc/httpd/conf.d/SHARED-SSL/appshosting.com.cabundleSSLOptions +StdEnvVarsSSLOptions +StdEnvVarsSetEnvIf User-Agent ".*MSIE.*" \\nokeepalive ssl-unclean-shutdown \\downgrade-1.0 force-response-1.0CustomLog logs/ssl_request_log \\"%t %h %{SSL_PROTOCOL}x %{SSL_CIPHER}x \\"%r\\" %b"ProxyPass / http://ah45.appshosting.com:7780/ProxyPassReverse / http://ah45.appshosting.com:7780/

---

### 68. Big Brother FileSystem FULL issue

**Topic ID:** 301

*(public)*Big Brother complains that the File system is FULL on new RHEL/CentOS 5 clientsProblem:
*(public)*Big Brother complains that the File system is FULL on new RHEL/CentOS 5 clientsSolution:
*(public)*The issue was with bbsys.sh in CentOS 5.

Here is the solution which was placed on AH25.

Thanks,
Srini

# Solution SOL42245

# TitleBigBrotherreports error under disk as Filesystem of /home/Monitoring/bb/bbc3.30-bbpe/tmpisFULL

# Problem DescriptionBigBrotherreports error under disk as Filesystem of /home/Monitoring/bb/bbc3.30-bbpe/tmpisFULL
Filesystem of /home/Monitoring/bb/bbc3.30-bbpe/tmpisFULL
(/Monitoring/ is added by a re-writer on the way out of the system to the visual display. The client and server OS are CentOS 5 (client and server are on the same machine).

# CauseThis is due to the sort command in bbsys.sh being slightly different in the later versions

# ResolutionOn the BB client change as follows in the bbsys.sh
DF="/bin/df -kP"
DFSORT="-k4n"
Stop and start of the client required.

# Environment**Product:**BigBrother- 3.3**Attachments:**
**Client OS:**Unix - Linux**Server OS:**Unix / Red Hat - All**Database:**All - All DB Rev**Application:**All - N/A

---

### 626. Add Oracle Database ACL

**Topic ID:** 1801

**Title**: Add Database ACL rule

**References**:

**Procedure or Description**:
[af3:/home/oraapex@af3 ~]$ more jb_acl.sql
BEGIN
DBMS_NETWORK_ACL_ADMIN.create_acl (
acl => 'PAPER_API.xml',
description => 'ACL for JB to https paper-api',
principal => 'GQ',
is_grant => TRUE,
privilege => 'connect',
start_date => SYSTIMESTAMP,
end_date => NULL);

COMMIT;
END;
/

BEGIN
DBMS_NETWORK_ACL_ADMIN.add_privilege (
acl => 'PAPER_API.xml',
principal => 'GQ',
is_grant => TRUE,
privilege => 'resolve',
position => NULL,
start_date => NULL,
end_date => NULL);
END;
/

BEGIN
DBMS_NETWORK_ACL_ADMIN.add_privilege (
acl => 'PAPER_API.xml',
principal => 'GQDEV',
is_grant => TRUE,
privilege => 'connect',
position => NULL,
start_date => NULL,
end_date => NULL);
END;
/

BEGIN
DBMS_NETWORK_ACL_ADMIN.add_privilege (
acl => 'PAPER_API.xml',
principal => 'GQDEV',
is_grant => TRUE,
privilege => 'resolve',
position => NULL,
start_date => NULL,
end_date => NULL);
END;
/

BEGIN
DBMS_NETWORK_ACL_ADMIN.assign_acl (
acl => 'PAPER_API.xml',
host => 'paper-api.alpaca.markets',
lower_port => 443,
upper_port => 443);

COMMIT;
END;
/

[/home/oraapex@af3 ~]$ more ckacl.sql
rem Check after assigning ACL
set lines 150
COLUMN host FORMAT A45
COLUMN acl FORMAT A30

SELECT host, lower_port, upper_port, acl, aclid FROM dba_network_acls;

set lines 150
COLUMN acl FORMAT A35
COLUMN principal FORMAT A25
col PRIVILEGE format a11
col IS_GRANT format a11
col start_date format a10
col end_date format a10
col PRIVILEGE format a20

SELECT acl,
principal,
privilege,
is_grant,
TO_CHAR(start_date, 'DD-MON-YYYY') AS start_date,
TO_CHAR(end_date, 'DD-MON-YYYY') AS end_date
FROM dba_network_acl_privileges
order by acl, principal;

---

### 149. How To Drop, Create And Recreate DB Control In A 10g

**Topic ID:** 1801

OptionsSymptom:
*(public)*Drop, Create And Recreate DB Control In A 10gProblem:
*(public)*Drop, Create And Recreate DB Control In A 10gSolution:
*(public)*From Note:278100.1 How To Drop, Create And Recreate DB Control In A 10g
Database

Enterprise Manager Grid Control - Version: 10.1 to 10.2
Information in this document applies to any platform.
DBConsole
Purpose
This article provides detailed instructions on how to 1) create, 2) drop and 3)recreate the
repository and configuration files for the DB Control application used to
manage a single 10g Database.

Scope and Application
The steps in this article are written for a DBA or System Administrator who needs to create, drop or
reconfigure the DB Control Application.

1. Delete DB Control Configuration Files using EMCA scripts:
For DB Control 10.2.x, run the command:bin/emca -deconfig dbcontrol db

2. Delete DB Control Configuration Files Manually:

Remove the following directories from your file system if they
exist:
/
/oc4j/j2ee/OC4J_DBConsole_
Caution: Please note the HOSTNAME_SID directory and no others.
These may or may not be here, depending on the install.

3. Delete DB Control Repository Objects Manually

Logon SQLPLUS as user SYS, and drop the sysman account and management objects:

EXEC sysman.emd_maintenance.remove_em_dbms_jobs;
EXEC sysman.setEMUserContext('',5);

REVOKE dba FROM sysman;
DECLARE
CURSOR c1 IS
SELECT owner, synonym_name name
FROM dba_synonyms
WHERE table_owner = 'SYSMAN';
BEGIN
FOR r1 IN c1 LOOP
IF r1.owner = 'PUBLIC' THEN
EXECUTE IMMEDIATE 'DROP PUBLIC SYNONYM '||r1.name;
ELSE
EXECUTE IMMEDIATE 'DROP SYNONYM '||r1.owner||'.'||r1.name;
END IF;
END LOOP;
END;
/

DROP USER mgmt_view CASCADE;
DROP ROLE mgmt_user;
drop public synonym MGMT_TARGET_BLACKOUTS;
drop public synonym SETEMVIEWUSERCONTEXT;
DROP USER sysman CASCADE;

2) This will cleanly remove the Database Console repository

Completed.

I would suggest bouncing the Database after this to clean up any other possible EM
connections.

-----------------------
NOTE: The following is for recreation only. Here is where I talked about some things to check prior to
recreating.
3) In the future if you decided to recreate follow these steps.

The biggest pre-step is to make sure the Database is registered with the
Listener.

from command line
lsnrctl status

ex.
Services Summary...
Service "db11.oracle.com" has 1 instance(s).
Instance "db11", status READY, has 1 handler(s) for this service...

This is dynamic database registration.
You should see the database listed and in a status of READY.

Also test your sqlplus connection these ways.

a)sqlplus sys/password@tns_alias as sysdba
and
b)sqlplus system/password@tns_alias as sysdba
and
c)sqlplus sysman/password@tns_alias -May not work, but that's ok.
and
d)sqlplus dbsnmp/password@tns_alias

Note: SYSMAN may not exist, but it will be created later.

Make sure the TNS_ALIAS uses SERVICE_NAME, not SID

ex.

sqlplus sysman/password@DB11

tnsnames.ora for DB11 shows, SERVICE_NAME, not SID:
DB11 =
(DESCRIPTION =
(ADDRESS = (PROTOCOL = TCP)(HOST = sertver1.oracle.com)(PORT = 1521))
(CONNECT_DATA =
(SERVER = DEDICATED)
(SERVICE_NAME = db11.us.oracle.com)
)
)

If not, correct this so the Database and listener are talking. If you can't get it to
go, may want to contact our Networking team after searching MetaLink.

*** Do not continue until this works for your databases.
See
Note:433693.1:Service / Instance Not Registering with Listener
and
Note:235562.1 Issues affecting Automatic Service Registration

Also,
Make sure the DBSNMP account is not locked in the database, unlock and test connectivity again.
This account is required by the Agent that comes with Database Control.
SYSMAN account may not work during these test, but that ok because it just may not exists and you will
remove it later.

4) Once that is done, verify your network.

Follow this note:
Note 428665.1:How to verify the network for a Grid Control Installation.
Applies to Database Control as well.

If the machine doesn't use DNS, no proplem, either way make sure the hosts files looks like this
ex.
/windows/system32/drives/etc/hosts

10.10.10.10 hostname.domain hostname

Replace with your values

If this is Windows, I'd suggest rebooting so the changes take effect.

While here, check the listener.ora file as well to make sure that HOST=
has the fully qualified hostname in it. Restart the listener and check the status
like in Step 1. The Database has to be here and in READY mode.

ex.
LISTENER =
(DESCRIPTION_LIST =
(DESCRIPTION =
(ADDRESS = (PROTOCOL = IPC)(KEY = EXTPROC1521))
(ADDRESS = (PROTOCOL = TCP)(HOST = hostname.domain)(PORT = 1521))
)
)

Ignore the IPC entry.

5) Create the DB Control Repository Objects and Configuration Files
set ORACLE_HOME and ORACLE_SID command line:

For DB Control 10.2.x, run the command:bin/
./emca -config dbcontrol db -repos create

18-DEC-08 21:34:15 GMT

(Update for record id(s): 284453766)

KNOWLEDGE CONTENT
=================
Note:278100.1 How To Drop, 

... [Content truncated for readability]

---

### 70. Brocade Switch Zoning and Multipath Configuration

**Topic ID:** 301

OptionsSymptom:
*(public)***Brocade Switch Zoning and Multipath Configuration**

Check the HBA names

cd /sys/class/fc_host

*Find out port names for both HBA's:*

[root@sfa-ebs03 host3]# cat port_name
0x2100001b3286c965

[root@sfa-ebs03 host4]# cat port_name
0x2100001b32863265

Make sure both HBA's are online

[root@sfa-ebs03 host4]# cat port_state
Online
[root@sfa-ebs03 host4]# cat ../host3/port_state
Online

Log into Fibre Switch

Find out which port the HBA's are connected to:

SW300:admin> switchshow
(Search for WWN)
Example:
4 4 id N4 Online F-Port 21:00:00:1b:32:86:32:65

Create a new Zone

SW300:admin> zonecreate "sfcebs03spa","21:00:00:1b:32:86:32:65"
SW300:admin> zoneadd "sfcebs03spa","50:06:01:68:4b:a0:43:dd"

Save the Configuration

SW300:admin> cfgsave

Repeat for second switch

SW300:admin> zonecreate "sfcebs03spb","50:06:01:69:4b:a0:43:dd"
SW300:admin> zoneadd "sfcebs03spb","21:00:00:1b:32:86:c9:65"
SW300:admin> cfgsave
You are about to save the Defined zoning configuration. This
action will only save the changes on Defined configuration.
Any changes made on the Effective configuration will not
take effect until it is re-enabled.
Do you want to save Defined zoning configuration only? (yes, y, no, n): [no] y
Updating flash ...
SW300:admin> cfgenable "Prod"
You are about to enable a new zoning configuration.
This action will replace the old zoning configuration with the
current configuration selected.
Do you want to enable 'Prod' configuration (yes, y, no, n): [no] y
zone config "Prod" is in effect
Updating flash ...

Enable the Configuration

SW300:admin> cfgenable Prod
**
EMC Clarion Configuration**

(Navisphere Express)

Click on "Disk Pools"
Click Create New Pool, and select disks
Create a new virtual disk using the disk pool

Click on "Connections"

Select the WWN and click "Modify Server"

Set operating system to "Standard"
Click "New" in Step 2 and type hostname and IP address

click Apply

Click Virtual Disks and Assign Disk to server

**Multipath Configuration**

[root@sfa-ebs03 mapper]# vi /etc/multipath.conf
[root@sfa-ebs03 mapper]# chkconfig multipathd on
[root@sfa-ebs03 mapper]# service multipathd start
Starting multipathd daemon: [ OK ]
[root@sfa-ebs03 mapper]# multipath -l
mpath1 (360060160aaa1220000948375574fde11) dm-2 DGC,RAID 5
[size=752G][features=1 queue_if_no_path][hwhandler=1 emc][rw]
\\_ round-robin 0 [prio=0][active]
\\_ 3:0:0:0 sdb 8:16 [active][undef]
\\_ 4:0:0:0 sdc 8:32 [active][undef]

---

### 75. Cisco Switch Firmware Upgrade (Cisco Catalyst 3550)

**Topic ID:** 301

OptionsSymptom:
*(public)*

## IntroductionThis document explains the step-by-step procedure to upgrade the software image on Cisco Catalyst 3550 series switches with use of the command-line interface (CLI).

## Prerequisites

### RequirementsBefore you attempt this configuration, ensure that you are familiar with these topics for Catalyst 3550:

- Naming conventions

- Feature sets

- File systems and boot parameters

- Setup of a TFTP server and backup of the configuration

If you are not familiar with the topics, see thePrepare to Upgradesection of this document before you attempt the software upgrade.
If you already meet the requirements, skip any or all of these topics. Go directly to theSoftware Upgrade Procedure for 3550 Series Switchessection of this document.

### Components UsedThis document is not restricted to specific software and hardware versions.

### ConventionsRefer to theCisco Technical Tips Conventionsfor more information on document conventions.

## Background InformationA software image upgrade can be necessary for these reasons:

- You want to implement new features in your network that are available in the later software release.

- You want to install a new line card that the current software version does not support.

- A known bug has affected your switch. The later software release resolves the bug.

This document does not cover the upgrade procedure that uses Cisco Cluster Management Suite (CMS). For details on this procedure, complete these steps:

- Open the CMS application.

- Choose**Administration > Software Upgrade**.

- From the menu bar, choose**Help**.

## Prepare to Upgrade

### Understand File Extensions: .bin and .tar FilesThere are two types of files or file extensions that you see when you download 3550 software from the LAN Switches section ofDownloads - Switches(registeredcustomers only) .

- The**.bin**file is the Cisco IOS® Software image. If you only want to use the CLI to manage the switch, the .bin file is the only file to download.

- The**.tar**file is an archive file. The upgrade process extracts both the Cisco IOS image and the CMS files from the .tar file. If you want to manage switches or clusters of switches through a web interface, such as HTML, this file is the only file to download.

**Note:**When you download a .tar image, the archive utility that is on your PC saves the file. This utility can be WinZip or some other third-party software. There is no need to manually extract the files in archive. The extraction occurs automatically during the upgrade process.
**Note:**For more information on the CMS, refer to theMultimedia Presentation.

### Understand 3550 Software Image Naming Conventions: SMI and EMIThe 3550 is either a Layer 2 (L2) or Layer 3 (L3) switch, which depends on the software version and feature set that you install.
The naming conventions for 3550 images begin with either of these:

The differences between the two are:

- The**SMI image**is essentially an L2-only image. However, Cisco IOS Software Release 12.1(8)EA1b includes enhancements to the L2 feature set. This release and later SMI releases use the term "Layer2+". Cisco IOS Software Release 12.1(11)EA1 adds basic L3 functionality to the SMI image. This L3 functionality includes static unicast routing, the Routing Information Protocol (RIP), and other features. This release and later SMI releases use the phrase "basic Layer 3 routing features".

- The**EMI image**is an L2 image in combination with a full L3 feature set. This feature set includes:

  - Interior Gateway Routing Protocol (IGRP) and Enhanced IGRP (EIGRP)

  - Open Shortest Path First (OSPF) Protocol

  - Border Gateway Protocol Version 4 (BGP4)

  - Hot Standby Router Protocol (HSRP)

  - Protocol Independent Multicast (PIM)

  - Other advanced services

**Note:**For more information on SMI and EMI features, refer to the*Catalyst 3550 Multilayer Switch Software Configuration Guide*under theCatalyst 3550 Multilayer Switchesrelease notes for your version of 3550 software.
**Note:**All Catalyst 3550 Gigabit Ethernet switches ship with an EMI installation. Catalyst 3550 Fast Ethernet switches ship with either an SMI or EMI installation. You can order the Enhanced Multilayer Software Image Upgrade kit (CD-3550-EMI=) in order to upgrade any Catalyst 3550 Fast Ethernet switch from the SMI to the EMI. However, unless you purchased your 3550 with an EMI image preinstallation, you must purchase the upgrade kit before you download the EMI image.
Issue the**show version**command in order to verify these items:

- The version of software that you run

- The location of the image installation

- The feature set that you run

- The 3550 model that you have

Here is a sample command output:

```
3550# **show version**
Cisco Internetwork Operating System Software
IOS (tm) C3550 Software (C3550-**I5Q3L2**-M), **Version** **12.1(12c)EA1**, RELEASE SOFTWARE
 (fc1)
*
!--- The "I5Q3L2" at the start of the image name tells
!--- you that t

... [Content truncated for readability]

---

### 630. Changing Agile application administrator password from database

**Topic ID:** 2105

SQL> update agileuser set login_pwd='LD0RK6THOLTE9IIBD6RVO40L8L5OA1EK' where loginid = 'administrator';

1 row updated.

SQL> commit;

Commit complete.

Above will set the administrator password to agile987

Also, for loading Agile application from browser we need to have host file entries as below,
172.16.128.140 agileapp-dev3
172.16.128.140 agileapp-dev3.celeritynet.net

---

### 81. Data Center Worklist

**Topic ID:** 301

OptionsSymptom:
*(public)*Problem:
*(public)*Solution:
*(public)*Comment:
*(internal)***Completed**

- DSI Network Changeover
- Fusion Troubleshooting for Josh

**Current**

- Follow up on AIX patching
- Configure Tape Backups
- Monitoring Emtek Servers (Manual monitoring)(Sagar)
- Create scripts for monitoring Emtek (Sagar)
- Website for appsourcing.com (Anthony)
- Fix Pix Firewall for Los Angeles
- Obtain support for Cisco switch, then set up ACL groups for restricting outbound access

**Future**

- Create operational checklist
- Migrate AH3 server to new hardware
- Acquire and install router
- Install Raju's Environment
- Create redundant Exchange environment
- Brochures for OpenWorld (Fusion, Services Etc)
- Upgrade OTRS (performance)
**Additional Requests**

- 
Category:DC/System AdminState:internal (agent)Language:enResult:0.00 %Votes:0Keywords:DataCenterWorklistCreated:09/16/2009 17:59:13 (ashb)Changed:09/17/2009 08:31:26 (ashb)<>

### Did this article help?
100 %
75 %
50 %
25 %
0 %

---

### 83. Enable firewall on PIX or server

**Topic ID:** 301

OptionsSymptom:
*(public)*Problem:
*(public)*Need to open firewall for e-business or database public accessSolution:
*(public)*Open firewall on servers not located in Irvine, CA
(firewall is managed on invidual server through iptables)
1. Logon to the server as root
2. Backup current iptables file
# cp -p /etc/sysconfig/iptables /etc/sysconfig/iptables.
3. Add new firewall entry
# vi /etc/sysconfig/iptables
(add a new line)
Example 1: open port 8080 for any client to access
-A RH-Firewall-1-INPUT -m state --state NEW -m tcp -p tcp --dport 8080 -j ACCEPT
Example 2: Open port 1522 for a particular client
-A RH-Firewall-1-INPUT -p tcp -m state -m tcp -s 69.50.193.174 --dport 1522 --state NEW -j ACCEPT
4. Restart firewall service on the server
# service iptables restart
or
# /etc/rc.d/init.d/iptables restart

Open firewall on server at Irvine data center
(firewall is managed through Cisco Pix firewall)
1. logon to ah7-i.appshosting.com as yourself
2. Get internal and external IP address for the
('ping-l.appshosting.com' for internal IP address)
$ ping ah9-l
PING ah9-l.appshosting.com (172.1.0.59) 56(84) bytes of data.
64 bytes from ah9.appshosting.com (172.1.0.59): icmp_seq=0 ttl=64 time=0.038 ms
('ping.appshosting.com' for external IP address)
2. su - root
3. ssh larry@172.1.0.1 (logon to firewall server)
4. fw01> enable
Password:
5. fw01# config terminal (enter config mode)
6. Save current configuration
fw01(config)# show run
Manually copy and paste firewall configuration to notepad and save to "Irvine firewall rule DATE.txt"
7. Check what rule exists for the internal and external IP
fw01(config)# show run | include 172.1.0.59
8. Setup firewall for internal IP
fw01(config)# static (inside,outside) tcp 216.74.58.74 8005 172.1.0.59 8005 netmask 255.255.255.255
fw01(config)# static (inside,outside) tcp 216.74.58.74 ssh 172.1.0.59 ssh netmask 255.255.255.255
fw01(config)# static (inside,outside) tcp 216.74.58.74 www 172.1.0.59 www netmask 255.255.255.255

9. Setup firewall for external IP
fw01(config)# access-list ahdirect extended permit tcp any host 216.74.58.74 eq 8005
fw01(config)# access-list ahdirect extended permit tcp any host 216.74.58.74 eq ssh
fw01(config)# access-list ahdirect extended permit tcp any host 216.74.58.74 eq www
10. (verify firewall rule now in place)
fw01(config)# show run | include
access-list ahdirect extended permit tcp any host 216.74.58.72 eq 8005
access-list ahdirect extended permit tcp any host 216.74.58.74 eq 8005
static (inside,outside) tcp 216.74.58.72 8005 172.1.0.62 8005 netmask 255.255.255.255
static (inside,outside) tcp 216.74.58.74 8005 172.1.0.59 8005 netmask 255.255.255.255
11. (write record permanently)
fw01(config)# write memory
Building configuration...
Cryptochecksum: e0c2a8f2 6bb38657 8c2d8c91 d7c4148c
14615 bytes copied in 0.600 secs
[OK]

---

### 181. How to clone Rel 12

**Topic ID:** 2105

OptionsSymptom:
*(public)*How to cloneProblem:
*(public)*Need to clone R12Solution:
*(public)*1. Run pre-clone.
2. Copy files.
3. Rapid Clone.

---

### 119. OS patching on 64/32 bit Linux 5 for Oracle EBS

**Topic ID:** 301

OptionsSymptom:
*(public)*Apply OS patching for 32bit Linux 5 for Oracle E-business application
Problem:
*(public)*Solution:
*(public)***OS patching for Linux 5 64bit**
****
edit hosts file
Disable SELINUX
Disable Firewall
Install Xen Tools
Setup AD Auth
Copy sudoers

Install OS packages required by Oracle E-business applications R12

yum install gcc gcc-c++ glibc glibc-common glibc-devel libgcc libstdc++ libstdc++-devel make libgomp sysstat util-linux gdbm libXp libaio compat-libstdc++-296 compat-libstdc++-33 compat-db

yum install gcc.x86_64 gcc-c++.x86_64 glibc-devel.i386 gdbm.i386 libXp.i386 libXp.x86_64 sysstat.x86_64 libstdc++-devel.i386 compat-libstdc++-33.i386 compat-libstdc++-33.x86_64 compat-libstdc++-296.i386 compat-db.i386 compat-db.x86_64

To resolve Oracle iAS 10.1.3 Apache not start issue

Go to /b01/oracle-prereqs

# Copy libdb.so.2 from existing machine to /usr/lib/

Install additional Linux 5 packages supplied by Oracle

# rpm -ivh openmotif21-2.1.30-11.EL5.i386.rpm

# rpm -ivh xorg-x11-libs-compat-6.8.2-1.EL.33.0.1.i386.rpm

Link to Motif library in Oracle Application Server 10.1.2

# unlink /usr/lib/libXtst.so.6

# ln -s /usr/X11R6/lib/libXtst.so.6.1 /usr/lib/libXtst.so.6

Edit Kernel parameters

# vi /etc/sysctl.conf

Add following values on 64 bit OS server

#Added as per R12 docid 416305.1

kernel.shmall = 2097152
kernel.sem = 256 32000 100 142
kernel.shmmni = 4096
kernel.msgmni = 2878
fs.file-max = 655360
net.ipv4.ip_local_port_range = 10000 65000
net.core.rmem_default = 262144
net.core.rmem_max = 262144
net.core.wmem_default = 262144
net.core.wmem_max = 262144

#sysctl -p

**OS patching for Linux 5 32bit:**

Install following packages from Linux 5 32bit OS
# yum install glibc-devel.i386
# yum install libXp.i386
# yum install compat-libstdc++-296.i386
# yum install compat-libstdc++-33.i386
# yum install compat-db.i386
# yum install gcc.i386
# yum install byacc.i386
# yum install compat-gcc-34.i386
# yum install compat-gcc-34-c++.i386
# yum install compat-libgcc-296.i386
# yum install gcc-c++.i386
# yum install gcc-gnat.i386
# yum install gcc-java.i386

yum install glibc-devel.i386 libXp.i386 compat-libstdc++-296.i386 compat-libstdc++-33.i386 compat-db.i386 gcc.i386 byacc.i386 compat-gcc-34.i386 compat-gcc-34-c++.i386 compat-libgcc-296.i386 gcc-c++.i386 gcc-gnat.i386 gcc-java.i386

Install pdksh
# yum remove ksh-20060214-1.7
# rpm -Uvh --nodeps pdksh-5.2.14-30.6.i386.rpm
Red Hat Enterprise Linux 5 32bit only :
# ln -s /usr/bin/ld215 /usr/bin/ld
Download and apply the OS library patch 6078836 from OracleMetaLink and create the following symbolic link:
# mv /usr/lib/libdb.so.2 /usr/lib/libdb.so.2.6078836
# cp -p /san-002/work/linux_oracle_rpm/6078836/libdb.so.2 /usr/lib/
# ln -s /usr/lib/libdb.so.2 /usr/lib/libdb.so.3

Apply Oracle Enterprise Linux 5 32bit patches
Red Hat Enterprise Linux 5* (base and Advanced Platform) Update 1 or higher of Oracle Enterprise Linux (OEL) 5/Red Hat Enterprise Linux (RHEL) 5 is required.
# cd /san-002/work/linux_oracle_rpm
# rpm -U -ivh binutils-2.17.50.0.6-6.0.1.el5.i386.rpm
# rpm -ivh compat-libstdc++-egcs-1.1.2-1.i386.rpm
# rpm -ivh compat-libcwait-2.1-1.i386.rpm
# rpm -ivh openmotif21-2.1.30-11.EL5.i386.rpm
# rpm -ivh compat-oracle-el5-1.0-5.i386.rpm

Disable SELINUX

Comment:
*(internal)*On ah71 the gnome desktop packages were not installed.
Installed using the following command.

#yum groupinstall "GNOME Desktop Environment"

and then installed the other package

#yum -y install elfutils

---

### 87. How to SME Server with Affa ESXi Integration

**Topic ID:** 301

OptionsSymptom:
*(public)*This is how to article on SME server and Affa setupProblem:
*(public)*This document describes the procedure to setup and implement SME server with Affa and ESXi integrationSolution:
*(public)*

# Backup of ESXi Virtual Machines using Affa

### From SME ServerJump to:navigation,search**Skill level: Advanced**
The instructions on this page may require deviations from procedure, a goodunderstanding of linux and SME is recommended.

## Contents[hide]

- 1Introduction
- 2Preparing the Affa Server

  - 2.1VMware Infrastructure (VI) Perl Toolkit

    - 2.1.1Configure the DAG repository
    - 2.1.2Install the VMware Infrastructure (VI) Perl Toolkit

  - 2.2Install Affa Version 2 beta

- 3Preparing the ESXi Host for use with Affa

  - 3.1Adding an ESXi User with restricted Permissions

    - 3.1.1Adding Affa role
    - 3.1.2Adding Affa user
    - 3.1.3Assigning permissions

  - 3.2Configuring SSH and RSYNC on the ESX3i Host

    - 3.2.1Download and install the script

- 4Setting up an Affa job
- 5Uninstall
- 6Addtional Information

  - 6.1New properties in Affa 2
  - 6.2New command line options in Affa 2
  - 6.3How to update the ESXi System Image
  - 6.4How to make a statically linked Rsync Binary

- 7References

### IntroductionAs of version 2,Affasupports hot backing up virtual machines running on the VMWare ESXi server. It uses the VMware Infrastructure Perl Toolkit to communicate with the EXSi and rsync over ssh to transfer the data. Before the backup starts, the state of the running VM is freezed by creating a snapshot of all its disks. After the freezed virtual disk files were backed up, the snapshot is deleted and the config points to the just backed up disks again. Then, as a last step the config files are backed up.
A restore of a VM can be done by simply copying back all archived files to the original location on the ESXi host. It is also possible to copy the files to a different directory (or to another ESXi server) and add the vmx file to the inventory.
Latest Affa version is**smeserver-affa-2.0.0-beta17**

**Note:**
This document is applicable to ESX3i with an USB boot device. It will most likely not work with other type of boot devices

**Warning:**
As Affa Version 2 is in a BETA state, errors in design and/or implementation cannot be completely eliminated. Therefore take precautions to avoid negative impacts to your system. In particular do not use it on production systems.

### Preparing the Affa Server

#### VMware Infrastructure (VI) Perl ToolkitConfigure the DAG repositoryThe following command will configure the dag repository on SME Server.

```
/sbin/e-smith/db yum_repositories set dag repository \\
Name 'Dag - EL4' \\
BaseURL 'http://apt.sw.be/redhat/el4/en/$basearch/dag' \\
EnableGroups no \\
GPGCheck yes \\
GPGKey http://dag.wieers.com/packages/RPM-GPG-KEY.dag.txt \\
Visible no \\
Exclude freetype,htop,iptraf,rsync,syslinux \\
status disabled

```
After adding it to the database we have to update the changes to the configuration file:

```
signal-event yum-modify

```
Login as root and run:

```
/usr/bin/yum install openssl-devel
/usr/bin/yum --enable=dag install perl-XML-SAX

```
Install the VMware Infrastructure (VI) Perl ToolkitDownload the VI Perl Toolkit tarball from the VMWare web site:http://www.vmware.com/support/developer/viperltoolkit/

```
tar xzf VMware-VIPerl-1.6.0-104313.i386.tar.gz
cd vmware-viperl-distrib

```
Edit the vmware-install.pl script and comment out these lines

```
 4738 #   if ( -d '/proc/xen' ) {
 4739 #    error('You cannot install ' .
 4740 #       vmware_product_name() .
 4741 #       ' on a system running a xen kernel.');
 4742 #   }

```
Run the script

```
./vmware-install.pl

```
Ignore this warning: The following Perl modules were found on the system but may be too old to work with VIPerl: URI XML::NamespaceSupport

#### Install Affa Version 2 betaInstall the**latest**Affa 2.x beta version. Download the RPM fromhttp://mirror.contribs.org/smeserver/contribs/michaelw/sme7/Affa2

```
/usr/bin/yum --enable=dag localinstall smeserver-affa-2.0.0-beta*.noarch.rpm

```

### Preparing the ESXi Host for use with AffaTo make the ESXi server ready to cooperate with Affa you must install the rsync program, enable the ssh service, configure passwordless ssh login and add a user for communication using the VMware Infrastructure (VI) Perl Toolkit.

#### Adding an ESXi User with restricted PermissionsRun the Virtual Infrastructure Client and logon to the ESXi host.
Adding Affa roleSwitch to the*Administration*module and add a new role with permissions to create and delete snapshots

Adding Affa userSwitch back to the*Inventory*module and add a new user with password:

Assigning permissionsIn the*Permission Tab*assign the new role to the new user.

#### Configuring SSH and RSYNC on the ESX3i HostOn ESXi the SSH service Dropbear is installed but disabled. To use rsync the SSH service must be enabled and the rsync program must be installed. To enable

... [Content truncated for readability]

---

### 95. How to manage printers on Linux

**Topic ID:** 301

OptionsSymptom:
*(public)*The Procedure needs to be followed when managing printers in LinuxProblem:
*(public)*Manage printers in linux
Solution:
*(public)*Add printers in linux:

1) Invoke VNC session for root at the target system, for example: dev-db:1
2) Type in the password
3) Launch Web Browser and goto http://localhost:631/admin, supply the root credentials
4) Go to mange printers, invoke add printer
5) Give the Name of the Printer, location and Description example: EXPEDITER_PRINT
6) Then continue, keep device as same AppSocket/HP JetDirect, then continue
7) Type is device URI, example: socket://10.10.30.45:9100, continue
8) Select model/driver, example: HP
9) Choose the driver example: HP LaserJet series CUPS v1.1
10) Continue, printer would have added by now.
Test the printer by sending output to it and confirm from local support that it has printed.

Migrate Linux Printer Configuration
CUPS stores its configuration at /etc/cups directory, so all you have to do is copy /etc/cups to a new computer. Open terminal and type the commands on old Linux computer:
# tar -cvzf /tmp/cups-$(hostname).tar.gz /etc/cups
Copy /tmp/cups* to new system using SCP or use USB pen driver:
# scp /tmp/cups* new.linux.server.com:/tmp
Now login to new system and type the following commands:
# mv /etc/cups /etc/cups.backup
# cd /
# tar -xzvf /tmp/cups*
Also please copy /etc/printcap to new server.
Then
# /etc/init.d/cups restart

**Printer disabled due to missing cups library files.

End up I have to copy entire /usr/lib/cups from sfa-ebs01 to sfa-fail01 server

---

### 116. NFS Mount Options for Oracle

**Topic ID:** 301

OptionsSymptom:
*(public)*In /etc/fstab file - on destination server

ah7-l.appshosting.com:/backup /backup nfs rw,bg,hard,nointr,tcp,vers=3,timeo=300,rsize=32768,wsize=32768 2 2

In /etc/exports file - on source server

/u01/backup/rman**tp-dr02**(rw,no_root_squash,async)

Make sure to put hostname in previous line (bolded), otherwise anyone can write to the mount...

Make sure to restart NFS

/etc/init.d/nfs restart
/etc/init.d/nfslock restart

on client and server.

Problem:
*(public)*

---

### 101. Implement FreeDup

**Topic ID:** 301

OptionsSymptom:
*(public)*How to installProblem:
*(public)*How to save disk space for backups?Solution:
*(public)*

# Backup with Affa and FreeDup

### From SME ServerJump to:navigation,search

## Contents[hide]

- 1Purpose
- 2Installation
- 3Usage
- 4Various Tests
- 5User experience
- 6References

### PurposeThere are situations in backup process thatAffa(with or without Rsync) can't handle well.
Imagine backing up user files in a company where documents are distributed on regular basis. It is very likely that all of your users will have a copy of the same file in their documents.
Freedup walks through the file trees (directories) you specify. When it finds two identical files on the same device, it hard links them together. In this case two or more files still exist in their respective directories, but only one copy of the data is stored on disk; both directory entries point to the same data blocks.
Rsync partially does this, but it won't search for identical files within your backup. This software does just that.
This document describes the installation and configuration options of the freedup in Affa's post job for the purpose to reclaim free space on your disk occupied by duplicate files.

### InstallationThe FreeDup package is in the Dag repository, if you have not installed it already you need to do that first.
The following command will configure the Dag repository on SME Server.

```
/sbin/e-smith/db yum_repositories set dag repository \\
Name 'Dag - EL4' \\
BaseURL 'http://apt.sw.be/redhat/el4/en/$basearch/dag' \\
EnableGroups no \\
GPGCheck yes \\
GPGKey http://dag.wieers.com/packages/RPM-GPG-KEY.dag.txt \\
Visible no \\
Exclude freetype,htop,iptraf,rsync,syslinux \\
status disabled

```
After adding it to the database we have to update the changes to the configuration file:

```
signal-event yum-modify

```
To install the package issue the following command:

```
yum install freedup --enablerepo=dag

```

### UsageTo use FreeDup with Affa, first install and setup latest version of Affa. Installation instructions for Affa can be foundhere.
Then add this

```
freedup -Tv 

```
into

```
/usr/lib/affa/postJob.sh

```
Command line options are beyond the scope of this document, in my case I only use -T to preserve timestamps and -v for some verbosity.

### Various TestsTo see how much your backup occupies, you may find these commands below useful.
Find out real, physical space occupied by your backup:

```
du -sh 

```
Find out the space occupied by your backup if you weren't using hardlinks (counts sizes many times if hard linked):

```
du -shl 

```
Find out what files are hardlinked:

```
find  -xdev -type f -links +1 -printf '%i %p\\n' | sort -n > links.txt

```
**Note:**
Please be aware that once you launch FreeDup, it can take several hours to complete, depending on the size of backups as it its algorithm is making sure that files that are to be hardlinked are the same.

**Note:**
Also, make sure you have the latest version of Affa installed. At the time of writing this document, it was Affa 1.0.0-2.

### User experienceIn my case I saved ONE THIRD of the backup diskspace on one single backup alone. And what is more, FreeDup found more identical files within backups' trees themselves, hence correcting Rsync and saving me terabytes of space.
Without FreeDup's hardlinks my current off-site backup would be 3.4TB, but instead it is only 270MB. That is 12 backups in total - 3x monthly, 4x weekly and 5x daily backups + the current backup running. -Giskaard(talk|contribs)

### References

- Wikipedia articlehttp://en.wikipedia.org/wiki/Freedup
- FreeDup homepagehttp://freedup.org
- Wiki articleAffa

---
Retrieved from "http://wiki.contribs.org/Backup_with_Affa_and_FreeDup"Category:Backup

---

### 105. Install and Configure Tripwire

**Topic ID:** 301

OptionsSymptom:
*(public)*

- refer to docs: http://www.akadia.com/services/tripwire.html
- http://www.redhat.com/docs/manuals/linux/RHL-9-Manual/ref-guide/ch-tripwire.html
- 
- download tripwire from http://sourceforge.net/projects/tripwire/ , untar the sources
- 
- before configuring the sources, edit install/install.cfg as below
- TWDB="${prefix}/lib/tripwire" >> TWDB="${prefix}/db"
- TWDOCS="${prefix}/doc/tripwire" >> TWDOCS="${prefix}/doc"
- TWREPORT="${TWDB}/report" >> TWREPORT="${prefix}/report"
- TWSYSLOG=false >> TWSYSLOG=true
- 
- and uncomment mail delivery settings and add ah59 for relaying
- #TWMAILMETHOD=SMTP
#TWSMTPHOST="mail.domain.com"
#TWSMTPPORT=25
- >>
- TWMAILMETHOD=SMTP
TWSMTPHOST="ah59.appshosting.com"
TWSMTPPORT=25
- 
- then run configure with a prefix followed by make and make install
- ./configure --prefix=/etc/tripwire; make; make install
- need to give some pass phrases during installation carefully as these cant be recollected and a reinstallation is a must
- if it says installation as successful then .. its done, or else need to check the errors reported..
- 
- please refer to doc/policyguide.txt and add modifications to etc/twpol.txt as required and create a policy file
- ./sbin/twadmin --create-polfile ./etc/twpol.txt
- 
- as well we can check mail delivery >> ./sbin/twadmin -m t -e your.mail.id@your.domain
- 
- and its time to generate a snapshot of the system.. as below and pass the passphrases .. as earlier
- ./sbin/tripwire --init
- 
- and add the following perl script (tw.pl) to cron as below..
- 
- #!/usr/bin/perl

system("/etc/tripwire/sbin/tripwire --check");

$today = `date +%u`;

if( $today == 6 ){

$latest_twrfile = `/bin/ls -ltr /etc/tripwire/report | /usr/bin/tail -1`;
system("/etc/tripwire/sbin/tripwire --update --twrfile $latest_twrfile -P 'n3wadmmn1^'");

}
- 
- update cron as below >>
- 
- 55 5 * * * root /etc/tripwire/tw.pl | /bin/mail sa@appshosting.com -s "`hostname --short` / TW Report `date \\+\\%D`" 2>&1
- 
- and send a HUP to crond >> pkill -HUP crond
- 
- and wait for receiving mails..
- 

Problem:
*(public)*Solution:
*(public)*

---

### 108. LVM Software RAID Administration

**Topic ID:** 301

OptionsSymptom:
*(public)***How to setup Linux LVM in 3 minutes at command line?**

- Login with root user ID and try to avoidusing sudo commandfor simplicity reason.

- Using the whole secondary hard disk for LVM partition:
`fdisk /dev/hdb`

At the Linux fdisk command prompt,

  - press`n`to create a new disk partition,
  - press`p`to create a primary disk partition,
  - press`1`to denote it as 1st disk partition,
  - press**ENTER**twice to accept the default of 1st and last cylinder - to convert the whole secondary hard disk to a single disk partition,
  - press`t`(will automatically select the only partition - partition 1) to change the default Linux partition type (0×83) to LVM partition type (0×8e),
  - press`L`to list all the currently supported partition type,
  - press`8e`(as per the L listing) to change partition 1 to 8e, i.e. Linux LVM partition type,
  - press`p`to display the secondary hard disk partition setup. Please take note that the first partition is denoted as /dev/hdb1 in Linux,
  - press`w`to write the partition table and exit fdisk upon completion.

- Next, this LVM command will create a LVM physical volume (PV) on a regular hard disk or partition:
`pvcreate /dev/hdb1`

- Now, another LVM command to create a LVM volume group (VG) called vg0 with a physical extent size (PE size) of 16MB:
`vgcreate -s 16M vg0 /dev/hdb1`

**Beproperly planning ahead of PE size before creating a volume group with vgcreate -soption!**

- Create a 400MB logical volume (LV) called lvol0 on volume group vg0:
`lvcreate -L 400M -n lvol0 vg0`

This lvcreate command will create a softlink /dev/vg0/lvol0 point to a correspondence block device file called /dev/mapper/vg0-lvol0.

- The Linux LVM setup is almost done. Now is the time to format logical volume lvol0 to create a Red Hat Linux supported file system, i.e. EXT3 file system, with 1%reserved block count:
`mkfs -t ext3 -m 1 -v /dev/vg0/lvol0`

- Create a mount point before mounting the new EXT3 file system:
`mkdir /mnt/vfs`

- The last step of this LVM tutorial - mount the new EXT3 file system created on logical volume lvol0 of LVM to /mnt/vfs mount point:
`mount -t ext3 /dev/vg0/lvol0 /mnt/vfs`

To confirm the LVM setup has been completed successfully, the`df -h`command should display these similar message:

*/dev/mapper/vg0-lvol0 388M 11M 374M 3% /mnt/vfs*Problem:
*(public)*Solution:
*(public)*

---

### 109. Linux Active Directory Integration - Windows Domain

**Topic ID:** 301

OptionsSymptom:
*(public)*

**Join Linux Workstations to Active Directory: PAM****
**

Samba and winbind provide authentication and identity resolution for Linux hosts that are part of an Active Directory domain, since Active Directory does not deign to provide a method for authenticating them directly. Follow the steps for joining a Samba server to AD. Then comes the hairy part -- if your Linux users require access to network services that require authentication, you'll have to configure PAM (pluggable authentication modules). This can be a bit vexing, but the advantage is it saves users from having to manage multiple logins. And it allows you to control access to services very precisely.

In the olden days there was but a single*/etc/pam.conf*file. Then it was improved and gained all kinds of flexibility, using a single file for each service in*/etc/pam.d*. Adding to the fun is Red Hat, SuSE, Debian, and doubtless other distributions configure PAM a little differently, bless their individualistic little souls. Note to distribution maintainers: just because you can be different doesn't mean you have to.

Your very first job is to make a backup of*/etc/pam.d*, because any mistake can prevent you from being able to login. So keep a bootable rescue disk handy or boot to single-user if you get in trouble, and restore your original configuration.

Stop both the**smbd**and**windbindd**services, if they are running. At the very least you must configure winbind authentication in*/etc/pam.d/login*. Here is a sample configuration that works on Debian:

authrequired/lib/security/pam_securetty.so

authsufficient/lib/security/pam_winbind.so

authsufficient/lib/security/pam_unix.so use_first_pass

authrequired/lib/security/pam_nologin.so

accountsufficient/lib/security/pam_winbind.so

sessionrequired/lib/security/pam_mkhomedir.so skel=/etc/skel

umask=0022

@include common-auth

@include common-account

@include common-session

sessionoptional/lib/security/pam_console.so

@include common-password

The order of the directives is important. Make sure that*pam_winbind.so*is either copied or linked to*/lib/security*. PAM automatically looks in*/lib/security*for modules so you don't have to spell out the full path, but it's a good habit to get into anyway. The files*common-auth, common-account, common-session*, and*common-password*define common settings for all services.

The**use_first_pass**argument tells PAM to re-use the previously entered password. This works only for*auth*and*password*modules.

*session required /lib/security/pam_mkhomedir.so skel=/etc/skel umask=0022*is a slick little PAM feature that creates home directories for users on the fly.

This does the same thing on Red Hat:

#/etc/pam.d/login

authrequired/lib/security/pam_securetty.so

authsufficient/lib/security/pam_winbind.so

authsufficient/lib/security/pam_unix.so use_first_pass

authrequired/lib/security/pam_stack.so service=system-auth

authrequired/lib/security/pam_nologin.so

accountsufficient/lib/security/pam_winbind.so

accountrequired/lib/security/pam_stack.so service=system-auth

passwordrequired/lib/security/pam_stack.so service=system-auth

sessionrequired/lib/security/pam_stack.so service=system-auth

sessionrequired/lib/security/pam_mkhomedir.so skel=/etc/skel

umask=0022

sessionoptional/lib/security/pam_console.so

What if you want to authenticate SSH logins via PAM? Do this in*/etc/pam.d/ssh*:

authrequired/lib/security/pam_securetty.so

authsufficient/lib/security/pam_winbind.so

authsufficient/lib/security/pam_unix.so

authrequired/lib/security/pam_pwdb.so use_first_pass

accountsufficient/lib/security/pam_unix.so

accountrequired/lib/security/ pam_winbind.so

sessionrequired/lib/security/pam_unix.so

sessionrequired/lib/security/pam_winbind.so

passwordrequired/lib/security/pam_unix.so

passwordrequired/lib/security/pam_winbind.so

How to configure other services? As a general rule, stick your*pam_winbind.so*module next to any existing line that references a standard Linux*auth, account, session*, or*password*module. I don't promise that this will always work, but it's a good starting point. Or you can study the PAM documentation. Or wait for my detailed PAM howto.

Make sure that you do not have more than one account that has UID=0 in the password database. If there are two accounts in the passdb backend that have the same UID, winbind will break.

Now you can restart**smbd**and**windbindd**and try logging in from a Linux workstation. If you run into trouble look for help in Resources. The Samba mail list archives contain a wealth of excellent information.

Problem:
*(public)*Solution:
*(public)*

---

### 123. Reset Moodle Password for "admin"

**Topic ID:** 301

OptionsSymptom:
*(public)*Log into cdb1

mysql -u moodle -p moodle
(m00m001)

mysql> update mdl_user SET password=md5('m00m001') where username='admin';
Problem:
*(public)*Solution:
*(public*

---

### 125. Reset lost Mysql root Password

**Topic ID:** 301

OptionsSymptom:
*(public)*

### Linux Users:Log on to your Linux machine as the root user. The steps involved in resetting the MySQL root password are to stop the MySQL server, restart it without the permissions active so you can log into MySQL as root without a password, set a new password, and then restart it normally. Heres how you do it. First, stop the MySQL server:
**# /etc/init.d/mysql stop**
Now start the MySQL server using the**--skip-grant-tables**option, which will run the server without loading the permissions settings:
**# mysqld_safe --skip-grant-tables &**
The**&**option at the end makes the command you have executed run as a background process. Now log on to your MySQL server as root:
**# mysql -u root**
It should allow you in without prompting for a password. The following steps will set the new password:
mysql> use mysql;
mysql> update user set password=PASSWORD(NewMySQLPassword) where User=root;
mysql> flush privileges;
mysql> quit
Replace NewMySQLPassword with your own password. Heres what happens here. The first line selects the MySQL configuration tables. The second line updates the value of the field Password for the user root to NewMySQLPassword. The third line flushes the old set of privileges and makes sure your new password is used everywhere. Now, the last step is to restart the server normally and use your new root password to log in:
# /etc/init.d/mysql stop
# /etc/init.d/mysql start
# mysql -u root -pNewMySQLPassword
Problem:
*(public)*Solution:
*(public)*

---

### 131. Sendmail MRTG Configuration

**Topic ID:** 301

OptionsSymptom:
*(public)***

Graphing mailstats with MRTG

This document will outline the steps to graph Sendmails basic mail stats on another box

running Apache and MRTG.
***

Sendmail Server Configurations

Configure Sendmail to capture mail statistics by:

less sendmail.mc | grep statistics

dnl define(`STATUS_FILE', `/etc/mail/statistics')dnl

If you changed the Sendmail configuration files, restart Sendmail.

Example output of the mailstats program:

mailstats

Statistics from Wed Dec 8 14:10:17 2004

M msgsfr bytes_from msgsto bytes_to msgsrej msgsdis Mailer

4 274468 3674715K 285318 3752439K 78 0 esmtp

9 9205 178716K 3475 70676K 9071 0 local

=============================================================

T 283673 3853431K 288793 3823115K 9149 0

C 4431008 296105 9149

The monitoring box will telnet into port 7256 on the Sendmail box to retrieve the

mailstats output. To get this service running on port 7256:

Create this script on the Sendmail server:

cat /usr/local/smtp-stats.sh

#!/bin/sh

if [ -x "/usr/sbin/mailstats" ]

then

exec /usr/sbin/mailstats -f /etc/mail/statistics

fi

Edit the /etc/services file and add (port 7256 was used because there isnt a defined

port number associated with it):

cat /etc/services | grep 7256

smtp-stats 7256/tcp # Stats for sendmail

Create a new service to be controlled by xinetd.d

cat /etc/xinetd.d/smtp-stats

service smtp-stats

{

disable = no

socket_type = stream

wait = no

user = root

server = /usr/local/smtp-stats.sh

port = 7256

}

Restart xinetd. Testing the port from the monitoring box:

telnet mail_box_ip 7256

Trying mail_box_ip...

Connected to mail_box_ip.

Escape character is '^]'.

Statistics from Wed Dec 8 14:10:17 2004

M msgsfr bytes_from msgsto bytes_to msgsrej msgsdis Mailer

4 274489 3674846K 285339 3752570K 78 0 esmtp

9 9205 178716K 3475 70676K 9071 0 local

=============================================================

T 283694 3853562K 288814 3823246K 9149 0

C 4431041 296129 9149

Connection closed by foreign host.
***

Monitoring Server Configurations

We need to create a Perl script that will telnet to the Sendmail box on port 7256, parse

the data (were only interested with the esmtp line), and perform so basic calculations.

Just copy and paste the script in your shell.

The script uses a temp file to calculate the data, so

touch /tmp/mailstat.old

cat /usr/local/get-smtp-stats.sh

#!/usr/bin/perl

#

# rachel polanskis - 240297

# this script relies on the sendmail.st file being activated.

# the data is called via "mailstats" which comes with SunOS/Solaris.

# mailstats is run out of inetd, on port 7256.

#

#require 5.002;

use strict;

use Socket;

#the "d" variable is for reject mail

my ($remote, $port, $iaddr, $paddr, $proto, $line, $count, $oldfrm, $oldto, $curfrm, $curto,

$msgsfrm, $msgsto, $a, $b, $c, $d, $oldreject, $msgsreject);

##

# open the old stats file for reading - we use this to get the differences

#

open (OLD,"

# read the old data

#

while () {

if ($. == "1") {

$count = $_;

}

($oldfrm, $oldto, $oldreject) = split (' ',$count);

}

close (OLD);

#debug

#print "$oldfrm, $oldto\\n";

##

# Straight out of the blue Camel - pp. 349

#

# Change these next 2 lines to suit yourself.

#

$remote = "10.64.4.4";

$port = "7256";

#

if ($port =~ /\\D/) {$port = getservbyname ($port, 'tcp')}

die "No port" unless $port;

$iaddr = inet_aton($remote) or die "no host: $remote";

$paddr = sockaddr_in($port, $iaddr);

$proto = getprotobyname ('tcp');

socket (SOCK, PF_INET, SOCK_STREAM, $proto) or die "socket: $!";

connect (SOCK, $paddr) or die "connect: $!";

##

# munge the output data

#

while () {

if ($. == "3" ) {

$line = $_;

#debug

#print "$line\\n";

($a, $curfrm, $b, $curto, $c, $d) = split(' ',$line);

#debug

#print "$remote, $port, $iaddr, $paddr, $proto, $line, $count, $oldfrm, $oldto, $curfrm, $curto,

$msgsfrm, $msgsto, $a, $b, $c, $d\\n";

# do some sums

$msgsfrm = $curfrm - $oldfrm;

$msgsto = $curto - $oldto;

$msgsreject = $d - $oldreject;

chomp $msgsfrm;

chomp $msgsto;

chomp $msgsreject;

# open the old file for overwrite

open (OLD,">/tmp/mailstat.old") or die "can't open file!\\n";

# print the data for mrtg

print "$msgsfrm\\n$msgsto\\n$msgsreject\\n1\\nsmtp01\\n";

# print the data to the old file

print OLD "$curfrm $curto $d\\n";

} #endif

}

close (SOCK) or die "close: $!";

exit;

Heres my MRTG configuration file:

cat /etc/mrtg/smtp.cfg

#

# Mail: MRTG.cfg file for sendmail stats on mailhost.

#

RunAsDaemon: yes

WorkDir: /var/www/html/mrtg/smtp

#---------------------------------------------------------------

Target[mail]: `/usr/local/get-smtp-stats.sh`

#The above line is the script from the previous step

MaxBytes[mail]: 150

Options[mail]: gauge

Title[mail]: smtp01 Sendmail Statistics

PageTop[mail]: smtp01 Sendmail Statistics

XSize[mail]: 500

Supress[mail]: my

YSize[mail]: 200

WithPeak[mail]: dwmy

YLegend[mail]: No. of messages

ShortLegend[mail]: 

... [Content truncated for readability]

---

### 132. Setting up Sendmail Log Analyzer

**Topic ID:** 301

OptionsSymptom:
*(public)*This is How to setup sendmail log Analyzer on Unix/LinuxProblem:
*(public)*To setup sendmail log analyzer upon customer request to get mailstat reports on daily basis.Solution:
*(public)*1) The source code is located on AH23:/backup/software/sma/sma-1.4.tar.gz

2) Copy the tarball to the target host or you can download from internet directly.
wget http://www.klake.org/sma/dl/sma-1.4.tar.gz

3) Extract the tarball into some temporary directory.

4) cd sma-1.4; then make; make install

5) copy sma.conf to /etc directory

6) edit the sma.conf file appropriately. sample is attched here.

cat sma.conf
#
# sma.conf -- configuration file for SMA
#
# All configuration options are key-value pairs separated with one
# or more space characters:
#
# "Key" [spaces] "Value"
#
# Quotation marks are optional - they are needed only if the value contains
# space characters (space or tab). Quotation marks inside the value string
# must be escaped using a backslash:
#
# "Key" [spaces] "Value \\"containing quotation marks\\"
#
# Comment lines (lines starting with '#') and empty lines are discarded.
#

# This always is printed at the top of the report.

Comment "Sendmail Log Analysis Report"

# You need this if SMA cannot find your hostname from the log files
# (Sendmail for NT) or if you want to override it.

HostName prod-db-emtek.epi

# Print output as file (same as command line option -o)
# If not given, write to stdout

OutFile /a01/mailgraph/report.html

#
# Filtering
#
# Simple substring filters for envelopes and relays. All filters are ANDed.
# If compiled with USE_REGEXP, full suite of extended regexp may be used.
# If you set "ShowUsers" as "no", be sure that your filters are applied
# against only the domain portion of addresses.
#
EnvelopeSenderFilter *
EnvelopeRecipientFilter *
RelaySenderFilter *
RelayRecipientFilter *

# If compiled with USE_REGEXP, set case sensitivity
CaseSensitive no

# Start and end times - process log entry only if the time is between
# these two. Format: YYYY/MM/DD-HH:MM:SS (example: 2002/06/30-16:25:00
# means Jun 30 16:25:00 2002)

#StartTime YYYY/MM/DD-HH:MM:SS
#EndTime YYYY/MM/DD-HH:MM:SS

#
# Output format (html/ascii/clog)
#
# html - HTML report
# ascii - ASCII report
# clog - Custom Log format

Format html

#
# HTML Formatting
#
# Include ASCII report as HTML comment?
# Great for easy reading of html docs or mailing the report off to admin.
IncludeAscii no

# Background colors for HTML
BgColor E9E5DF
TbColor CCCCCC

# Picture for HTML appears in the upper left corner
# If you include this, make sure that your web browser finds it!!
#PictureURL "logo.jpg"
#PictureALT "Logo"

# Normal HTML parameters for Picture IMG Tag (for scaling etc..)
#PictureParameters "BORDER=0"

# Set this if you want your picture to point somewhere
#PictureLink "http://www.company.com"

# Header -and footer texts
# These are those funky "Generated by..." and "Copyright..." notices.
#HeaderText "This is header"
#FooterText "This is footer"

#
# Flags for Custom Log (clog) Formatting
# Available formatting flags are:
#
# %U time in UNIX time format
# %D time in form "Wed Jun 30 21:49:08 1993"
# %y year, four digits
# %m month, in digits
# %M month, three letter English
# %n minute
# %s second
# %d day
# %h hour
# %H hostname
# %z size in bytes
# %f envelope sender
# %t envelope recipient
# %F relay sender
# %T relay recipient
# %S status (1 = sent, 0 = error)
# %i message id
# %% %-character
# \\n newline
# \\t tab stop
# \\\\ single backslash
#
ClogFormat "%D: %i from=%f, to=%t, size=%z"

# Print only sent messages (status = 1) (yes/no)
ClogSentOnly yes

# Syslog Tag, typically sendmail
# If set, process only lines with a specified tag.

#SyslogTag sendmail

# Bounce address, typically MAILER-DAEMON
# This is used when DSN messages are checked against filters

BounceAddress MAILER-DAEMON

#
# The number of envelope addresses and relays
# Individual sections can be disabled by defining "0" as the value.
# It might be a good idea to disable all the sections you don't
# need, it improves the performance notably.
#
EnvelopePairs 10
EnvelopeSenders 10
EnvelopeRecipients 10
RelayPairs 5
RelaySenders 5
RelayRecipients 5

# The number of top status messages and ruleset rejections
# If set as "0", do not print the section.
# Note that Status messages are affected by filters!

PrintStatus 10
PrintRuleset 10
RulesetRelays 10

# Print time distribution (yes/no)?

PrintTime yes

# Print general information (yes/no)?

PrintGeneralInfo yes

# Show full addresses (yes/no)?
# If "no", only the domain portion of addresses are printed (i.e. the
# right side of the '@'). If you are filtering, be careful.

ShowUsers no

# Sort order (number/transfer)

Sorting number

# Normal log files contain a lot of useless information. With this switch,
# you can keep SMA quiet

Silent yes

# Print debug information (yes/no)?

Debug no

# Internal hash table size - possible values are:
# "normal", "big", "huge" or custo

... [Content truncated for readability]

---

### 465. Nanometrics Clone Document - OLD

**Topic ID:** 2105

**Nanometrics Clone

**
******
****
****
****
**
****01-FEB-2018 : Transaction managers setup after clone :https://docs.google.com/document/d/1Ssir5ZzmPaaKzgO_I8Y8I6PQiWm8qRTdxdcNTRR28CY/edit

30-05-2018 : Verify profile option for user mdubbaka whose profile****ICX_FORMS_LAUNCHER is set to point tohttp://c1prdebsapp1.nanometrics.com:8001/OA_HTML/frmservlet , need to change it to respective instance .****
**
29-NOV-2017 : New update to run after clone.

****
****update fnd_user
set end_Date = start_date
where user_name not in ('MDUBBAKA','HDHULIPALLA','CFROST','LLY','BRAJENDRAN','NANOSCHEDULE','SYSADMIN','GMUNSHI','JTRAN','RPOTHULA',
'AGARCIA','KADMAS','CCRUZ','ADEVERA','CGONZALEZ','PHSIEH','CVU','MKIRSTEN','ELIBRIE','ADO')
and start_date >='01-JAN-2013'
and end_Date is null;

**--11/Nov/2017 : Edit /u01/oracle/STGASCP/apps/tech_st/10.1.3/opmn/bin/opmnctl file and correct instance name/path**
****
******-- 19/oct/2017 -- RAC_to_RAC clone please review the attached clone_rac_to_rac database clone document
**
**---07/28/17---Need to deactivate Standard Manager2 after clone in the target instance and disable it from concurrent-define screen--Query for standmanager 2 and uncheck enable box
Copy xxnm from /b01/PRODEBS/xxnm to $APPL_TOP/

-- 23.August.2017--- > Make sure the you hold all concurrent requests after refresh and no scheduled jobs gets executed
**-- 03.May.2017**--> Updated post-clone steps for Demantra: attached demantra-post-step.docx

**-- 13.Jun.2017**--> Update XXNM top link :

[appstg@c1stgebsapp2 appl]$ pwd
/u01/oracle/STGEBS/apps/apps_st/appl
[appstg@c1stgebsapp2 appl]$ ls -l xxnm
lrwxrwxrwx 1 appstg oinstall 17 May 24 06:56 xxnm -> /b01/PRODEBS/xxnm
[appstg@c1stgebsapp2 appl]$ unlink xxnm
[appstg@c1stgebsapp2 appl]$ ln -s /b01/STGEBS/xxnm .
[appstg@c1stgebsapp2 appl]$ ls -l xxnm
lrwxrwxrwx 1 appstg oinstall 16 Jun 13 14:03 xxnm -> /b01/STGEBS/xxnm

[appstg@c1stgebsapp1 bin]$ rm nmitmcstload[appstg@c1stgebsapp1 bin]$ ls -ltr nmitmcstloadls: cannot access nmitmcstload: No such file or directory[appstg@c1stgebsapp1 bin]$ ln -s /u01/oracle/STGEBS/apps/apps_st/appl/fnd/12.0.0/bin/fndcpesr nmitmcstload[appstg@c1stgebsapp1 bin]$ ls -ltr nmitmcstloadlrwxrwxrwx 1 appstg oinstall 60 Jun 27 02:58 nmitmcstload -> /u01/oracle/STGEBS/apps/apps_st/appl/fnd/12.0.0/bin/fndcpesr[appdev@c1pdevebsapp1 bin]$ ln -s /u01/oracle/STGEBS/apps/apps_st/appl/fnd/12.0.0/bin/fndcpesr XX_INV_IB_LOAD[appdev@c1pdevebsapp1 bin]$ ln -s /u01/oracle/STGEBS/apps/apps_st/appl/fnd/12.0.0/bin/fndcpesr XX_COM_POSPAY_TRANS[appdev@c1pdevebsapp1 bin]$ ln -s /u01/oracle/STGEBS/apps/apps_st/appl/fnd/12.0.0/bin/fndcpesr XX_COM_ACH_TRANS[appdev@c1pdevebsapp1 bin]$ ln -s /u01/oracle/STGEBS/apps/apps_st/appl/fnd/12.0.0/bin/fndcpesr XX_BANK_STMT_LOAD[appdev@c1pdevebsapp1 bin]$ ln -s /u01/oracle/STGEBS/apps/apps_st/appl/fnd/12.0.0/bin/fndcpesr nmcusload[appdev@c1pdevebsapp1 bin]$ ln -s /u01/oracle/STGEBS/apps/apps_st/appl/fnd/12.0.0/bin/fndcpesr nmarinvload

1. Restore db on db tier2. Clone db tier (cd $ORACLE_HOME/appsutil/clone/bin; perl adcfgclone.pl dbTier or dbTechStack)
3.1. Copy apps tier (rsync $APPL_TOP, $COMMON_TOP, Tools $ORACLE_HOME, Web $IAS_ORACLE_HOME)
3.2. Clone apps tier (cd /u01/oracle/????/apps/apps_st/comn/clone/bin; perl adcfgclone.pl appsTier with base /u01/oracle/????)
4. Perform the following postclone procedure:
4.1 Update database init parameter[oraimp@c1pchebsdb1 dbs]$ vi IMPEBS_c1pchebsdb1_ifile.ora[oraimp@c1pchebsdb1 dbs]$ cat IMPEBS_c1pchebsdb1_ifile.ora# 11.2.0.2 paramtersparallel_force_local=TRUE #MPsessions = 1000processes = 500sga_target = 10Gpga_aggregate_target = 3Gpre_page_sga =trueopen_cursors = 1200log_checkpoint_timeout = 3600log_checkpoint_interval = 500000log_checkpoints_to_alert = TRUE#log_buffer = 100mshared_pool_size = 2048mshared_pool_reserved_size = 200m
# Restart databaseSQL> connect / as sysdbaConnected.SQL> shutdown immediate;Database closed.Database dismounted.ORACLE instance shut down.SQL> startupORACLE instance started.Total System Global Area 1.0689E+10 bytesFixed Size 2237776 bytesVariable Size 2214595248 bytesDatabase Buffers 8455716864 bytesRedo Buffers 16924672 bytesDatabase mounted.Database opened.

4.2 Change passwords[appimp@c1pchebsapp1 appl]$ FNDCPASS apps/nanoapps345 0 Y system/nanomgr123 SYSTEM APPLSYS apps
Log filename : L784651.log
Report filename : O784651.out
[appimp@c1pchebsapp1 appl]$ sqlplus apps/apps
SQL*Plus: Release 10.1.0.5.0 - Production on Fri Dec 27 03:54:40 2013
Copyright (c) 1982, 2005, Oracle. All rights reserved.
Connected to:
Oracle Database 11g Enterprise Edition Release 11.2.0.3.0 - 64bit Production
With the Partitioning, OLAP, Data Mining and Real Application Testing options
SQL> exit
Disconnected from Oracle Database 11g Enterprise Edition Release 11.2.0.3.0 - 64bit Production
With the Partitioning, OLAP, Data Mining and Real Application Testing options
[appimp@c1pchebsapp1 appl]$
[appimp@c1pchebsapp1 bin]$ FNDCPASS apps/apps 0 Y system/nanomgr123 USER sysadm

... [Content truncated for readability]

---

### 134. Solaris XSCF Configuration

**Topic ID:** 301

OptionsSymptom:
*(public)*Sun XSCF

showhardconf

showdomainstatus -a
showdomainstatus -d 00

poweron -d 0

To Connect to a domain
XSCF> console -d domainhere

To Show status of a domain
XSCF> showdomainstatus -d domainhere

To displays the domain information specified for a system board.
XSCF> showdevices

To displays the temperature, humidity, voltage, and fan rotation speed.
XSCF> showenvironment

To lists degraded components.
XSCF> showstatus

To displays users who login to the XSCF.
XSCF> who

Network Configuration

Start by setting up the network information:

setnetwork lan#0 196.168.1.100
setnetwork -c up lan#0
sethostname -d domainname.com
sethostname xscf#0 mgmthostname
setroute -c add -n 0.0.0.0 -g 192.168.1.1 lan#0

Now setup name resolution:

setnameserver -c add 192.168.1.10
setnameserver -c add 192.168.1.20

Now lets get ntp configured (these commands take awhile):

setntp -c add 192.168.1.10
setntp -c add 192.168.1.20

Now that we are done with all networking related settings, you need to apply those settings, even though they won't take effect till you reboot.

applynetwork -y

The next concept may be a little foreign to those who haven't worked on big boxes, but since these boxes have a concept of domains you need to configure the DSCP (Domain to Service Processor Communication Protocol) so that the running domains can communicate with the XSCF, this is an interactive command, it will prompt you for several pieces of data, more or less depending on the size of your box (number of domains you can have). Just make sure that the subnet information you pick doesn't and will never exist on your routable network.

setdscp

Lets not forget about remote access, time to configure ssh (this command will take awhile):

setssh -c enable -y

And if you remember you logged in with "default" you will need to create a user for yourself unless you like physically swapping the key position every-time you access the server. Hey who knows, maybe it's a good workout routine! (one of these takes awhile)

adduser yourusername
setprivilieges yourusername useradm platadm
password yourusername

Now you should be ready to reset the xscf to make your changes take effect.

rebootxscf -y

SCRIPT

adduser ashb
setprivileges ashb useradm platadm
password ashb

LOGIN as ASHB

setdomainmode -d 00 -m secure=off
poweron -d 00
y

sendbreak -d 00

console -d 00
boot cdrom

Exit from console #.

Problem:
*(public)*Solution:
*(public)*

---

### 135. Synchronize the packages between two servers and compare the packages and install oracle prerequisites

**Topic ID:** 301

OptionsAttachment:script1.txt2.5 KBytesscript2.txt2.7 KBytesSymptom:
*(public)*If you want the packages installed on one server, the same packages to be installed on another server.This script is useful for that requirement.

Open the script and read the top lines first before proceeding.
Problem:
*(public)*Solution:
*(public)*Comment:
*(internal)*It will try to install the same version of package if presented in the repository , if the same version is not found then it will install the package presented in the repository.

Finally it will give you the package comparison list , if the different versions are installed on both the servers.

script2 is for installing the required packages for and checking for the kernel parameters.

Please contact me if you have any issues.

Email : sagar.choudary@appshosting.com
IM :sagarchoudary@yahoo.com

---

### 136. Tomcat Cpanel - Adding Database Connections for Users

**Topic ID:** 301

OptionsSymptom:
*(public)*Create a "WEB-INF" directory in the App root, and create the following file, and add a database connection setting for each new user:

/usr/local/jakarta/tomcat/conf/context.xml

jdbc/myoracle" auth="Container"
type="javax.sql.DataSource" driverClassName="oracle.jdbc.OracleDriver"
url="jdbc:oracle:thin:@ah3.appshosting.com:1522:ahdb07"
username="opam" password="01)aMpy" maxActive="45" maxIdle="40"
maxWait="-1"/>

The resource name must be unique for each customer.

Restart Tomcat after the changes:

/usr/sbin/stoptomcat
/usr/sbin/starttomcatProblem:
*(public)*Solution:
*(public)*

---

### 49. SSH tunneling to 11g APEX database

**Topic ID:** 2104

Options
Attachment:
SSH tunneling to shared database.doc
93.5 KBytes
Symptom:
*(public)*
Problem:
*(public)*Customers need to access shared 11g APEX database
Solution:
*(public)*Setup SSL tunneling by following instruction

To access database from client tool including sqlplus or sqldeveloper
1. Login to prod.appshosting.com as your Unix account
2. Setup SSH tunneling in putty as following:
Source port: 1522
Destination: ah3.appshosting.com:1522
Click add to add the SSH tunneling entry and save it
3. Add following TNS entry in your local sql*net configuration tnsnames.ora file
apex11g=(DESCRIPTION = (ADDRESS_LIST = (ADDRESS = (PROTOCOL =
TCP)(HOST=localhost)(PORT = 1522))) (CONNECT_DATA =
(SERVICE_NAME=ahdb07.appshosting.com)))
4. Now you will be able to connect to apex11g using your database account and password.

---

### 143. mondo backup and restore procedure

**Topic ID:** 301

OptionsAttachment:afio-2.4.7-1.x86_64.rpm62.1 KBytesbuffer-1.19-1.x86_64.rpm10.6 KBytesmindi-2.0.3-1.rhel5.x86_64.rpm257.7 KBytesmindi-busybox-1.7.3-1.rhel5.x86_64.rpm283.0 KBytesmondo-2.2.6-1.rhel5.x86_64.rpm923.8 KBytesSymptom:
*(public)*Problem:
*(public)*Solution:
*(public)*Taking the mondo iso image ( Source ):
--------------------------------------
Install the following RPM packages on the server. Only the following versions of RPMs will work fine.
These RPMs are attached here.
afio-2.4.7-1.x86_64.rpm
buffer-1.19-1.x86_64.rpm
mindi-2.0.3-1.rhel5.x86_64.rpm
mindi-busybox-1.7.3-1.rhel5.x86_64.rpm
mondo-2.2.6-1.rhel5.x86_64.rpm
After installing these RPMs do the following steps.
Step 1 - Modify the mindi script to add MPTBASE and MPTSCSIH drivers which are essential for VMWare to find the disk.
# Force some modules to be included
FORCE_MODS="diskdumplib diskdump mptbase mptscsi mptfc mptspi mptsas mptscsih ata_piix crc32 mii pcnet32 sunrpc nfs nfs_acl lockd loop"
Step 2 - Run the following command to make iso image. Exclude the data directories. So can sync the data later.
mondoarchive -Oi -d /mondobackup -p ah1 -N -E "/mondobackup /home /u01 /u02 /u03 /u04 /u05" -s 4200m
Step 3 - Copy the created iso image to VM ESX Server
Restoring the mondo iso image on new VM ( Destination ):
---------------------------------------------------------
Step 1 - Create a new VM with the required disk sizes and mount iso image, don't enable networking
Step 2 - Boot the new VM with the iso image and follow the instructions on the screen to restore the data.
Step 3 - Reboot the server and login to check that everything restored as expected.
After restoring the data on new VM take care of the following checklist.
1. Assign any free private IP to this server by enabling only the Intranet network. Don't enable the public network.
2. Sync the data from Source server to Destination server. ( Use rsync only. so that permissions will restore on new server )
3. change the hostname.
4. Enable public networking after shutting down the source server.
5. Check the public and private IP addresses of source server and make sure all those are assigned to this server.
6. Check all the applications ( database, http, etc ... ) are working fine.

Commands executed in servers:
---------------------------------------
prod:
------
mondoarchive -Oi -d /data -p prod-22jun-2010-mondo-image -N -E "/home /u03 /home_new /data /usr/local/jakarta " -s 10000m

root@prod[/data]# df -TH
Filesystem Type Size Used Avail Use% Mounted on
/dev/mapper/vg00-root
ext3 8.4G 4.5G 3.5G 57% /
/dev/mapper/vg00-u03
ext3 16G 8.0G 6.9G 54% /u03
/dev/mapper/vg00-usr
ext3 21G 12G 7.7G 61% /usr
/dev/mapper/vg00-tmp
ext3 4.2G 151M 3.8G 4% /tmp
/dev/mapper/vg00-opt
ext3 2.1G 119M 1.9G 7% /opt
/dev/mapper/vg00-var
ext3 11G 1.9G 7.9G 19% /var
/dev/mapper/vg00-home
ext3 32G 27G 3.2G 90% /home
/dev/mapper/vg01-home
ext3 53G 28G 24G 54% /home_new
/dev/sda1 ext3 255M 20M 223M 9% /boot
tmpfs tmpfs 2.5G 0 2.5G 0% /dev/shm
ah3.appshosting.com:/home/famzoo
nfs 36G 12G 22G 35% /home/virtfs/fzops/famzoo
/dev/mapper/vg02-lv1
ext3 53G 28G 23G 56% /data
ah3.appshosting.com:/home/oraapex/customers/dmt/public_html
nfs 36G 12G 22G 35% /home/virtfs/dmt/home_new/dmt/public_html/fileuploads
ah3.appshosting.com:/home/oraapex/customers/mediprog/images/mediemr
nfs 36G 12G 22G 35% /home/virtfs/mediprog/home_new/mediprog/images/mediemr
ah3.appshosting.com:/home/oraapex/customers/ngv
nfs 36G 12G 22G 35% /home/virtfs/ndr/home/ndr/mount
ah3.appshosting.com:/home/oraapex/customers/ngv
nfs 36G 12G 22G 35% /home/ndr/mount
ah3:/home/oraapex/customers/jerome
nfs 36G 12G 22G 35% /home_new/jerome/newdir

ah1:
----
mondoarchive -Oi -d /u02 -p ah1-22jun-2010-mondo-image -N -E "/home /u01 /u02 /u03 /u04 /u05 " -s 10000m
ah3:
----
mondoarchive -Oi -d /u03 -p ah3-22jun-2010-mondo-image -N -E "/home /u01 /u02 /u03 /u04 /var/www/test " -s 20000m
gc2:
----
mondoarchive -Oi -d /mondobackup -p gc2-02jul-2010-mondo-image -N -E "/mondobackup /var/www/html " -s 6000m

---

### 145. 11g R2 RAC Database Installation

**Topic ID:** 1801

OptionsSymptom:
*(public)*Problem:
*(public)*Solution:
*(public)*
dba:x:500:
oinstall:x:501:
oper:x:502:
asmadmin:x:503:
asmdba:x:504:
asmoper:x:505:
oaa:x:506:
groupadd -g 500 dba
groupadd -g 501 oinstall
groupadd -g 502 oper
groupadd -g 503 asmadmin
groupadd -g 504 asmdba
groupadd -g 506 asmoper
useradd -u 501 -g oinstall -G dba,asmdba,oper orarac
groupadd -g 506 oaa

From node1: as oracle:
mkdir ~/.ssh ; chmod 755 ~/.ssh/usr/bin/ssh-keygen -t rsa
Cut and paste the following line separately:
/usr/bin/ssh-keygen -t rsa
/usr/bin/ssh-keygen -t dsa
Enter passphrase (empty for no passphrase):Enter same passphrase again:Your identification has been saved in /home/oracle/.ssh/id_dsa.
cat ~/.ssh/id_rsa.pub >> ~/.ssh/authorized_keys ; cat ~/.ssh/id_dsa.pub >> ~/.ssh/authorized_keys
Now copy the keys to the other node so that we can ssh to the remote node without being prompted for a password.
chmod 644 ~/.ssh/authorized_keys

---

### 466. EBS log-in page throws session no longer active error

**Topic ID:** 2105

Problem:EBS log-in page throws below error (in IE8).You are trying to access a page that is no longer active.- The referring page may have come from a previous session. Please select Home to proceed.
Solution:Add hostname to trusted site in IE.
Tools -> Internet Options -> Security -> Trusted Sites

---

### 146. Anonymous block for granting resolve privilege to a user

**Topic ID:** 1801

OptionsSymptom:
*(public)*In the below example resolve privilege is given to medidata user for executing utl_inaddr.get_host_name() , reference metalink note**453786.1**

set serveroutput on
DECLARE
ACL_PATH VARCHAR2(32767);
BEGIN
-- Look for the ACL currently assigned to '*' and give MEDIDATA
-- the "resolve" privilege if MEDIDATA does not have the privilege yet
SELECT ACL INTO ACL_PATH FROM DBA_NETWORK_ACLS
WHERE HOST = '*' AND LOWER_PORT IS NULL AND UPPER_PORT IS NULL;
dbms_output.put_line('acl_path = '|| acl_path);
dbms_output.put_line('ACL already Exists. Checks for Privilege and add the Privilege');
IF DBMS_NETWORK_ACL_ADMIN.CHECK_PRIVILEGE(ACL_PATH,'MEDIDATA','resolve')
IS NULL THEN
DBMS_NETWORK_ACL_ADMIN.ADD_PRIVILEGE(ACL_PATH,'MEDIDATA', TRUE, 'resolve');
END IF;
EXCEPTION
-- When no ACL has been assigned to '*'
WHEN NO_DATA_FOUND THEN
dbms_output.put_line('MEDIDATA does not have privilege, create ACL now');
DBMS_NETWORK_ACL_ADMIN.CREATE_ACL('users.xml',
'ACL that lets MEDIDATA to use the UTL Package',
'MEDIDATA', TRUE, 'resolve');
dbms_output.put_line('MEDIDATA does not have privilege, assign ACL now');
DBMS_NETWORK_ACL_ADMIN.ASSIGN_ACL('users.xml','*');
END;
/
Problem:
*(public)*Solution:
*(public)*In the below example resolve privilege is given to medidata user for executing utl_inaddr.get_host_name() , reference metalink note**453786.1**

set serveroutput on
DECLARE
ACL_PATH VARCHAR2(32767);
BEGIN
-- Look for the ACL currently assigned to '*' and give MEDIDATA
-- the "resolve" privilege if MEDIDATA does not have the privilege yet
SELECT ACL INTO ACL_PATH FROM DBA_NETWORK_ACLS
WHERE HOST = '*' AND LOWER_PORT IS NULL AND UPPER_PORT IS NULL;
dbms_output.put_line('acl_path = '|| acl_path);
dbms_output.put_line('ACL already Exists. Checks for Privilege and add the Privilege');
IF DBMS_NETWORK_ACL_ADMIN.CHECK_PRIVILEGE(ACL_PATH,'MEDIDATA','resolve')
IS NULL THEN
DBMS_NETWORK_ACL_ADMIN.ADD_PRIVILEGE(ACL_PATH,'MEDIDATA', TRUE, 'resolve');
END IF;
EXCEPTION
-- When no ACL has been assigned to '*'
WHEN NO_DATA_FOUND THEN
dbms_output.put_line('MEDIDATA does not have privilege, create ACL now');
DBMS_NETWORK_ACL_ADMIN.CREATE_ACL('users.xml',
'ACL that lets MEDIDATA to use the UTL Package',
'MEDIDATA', TRUE, 'resolve');
dbms_output.put_line('MEDIDATA does not have privilege, assign ACL now');
DBMS_NETWORK_ACL_ADMIN.ASSIGN_ACL('users.xml','*');
END;
/

---

### 147. Clone database through RMAN duplicate

**Topic ID:** 1801

OptionsSymptom:
*(public)*Clone database using RMAN duplicate
Problem:
*(public)*Solution:
*(public)*1. Prepare init file
DB_FILE_NAME_CONVERT so that it captures all the target datafiles and converts them appropriately, for example, from /oracle/oradata/ to /dup/oracle/oradata/.
LOG_FILE_NAME_CONVERT so that it captures all the online redo logs and converts them appropriately, for example, /oracle/oradata/redo to /dup/oracle/oradata/redo.
$ vi $ORACLE_HOME/dbs/initlbx.ora
db_file_name_convert=('/u01/oracle/ldev/db/apps_st/data','/u01/oracle/lsbx/db/apps_st/data')
log_file_name_convert=('/u01/oracle/ldev/db/apps_st/data','/u01/oracle/lsbx/db/apps_st/data')
2. create password file
$ su - orasbx
$ cd $ORACLE_HOME/dbs
$ orapwd password=manager file=orapwlsbx
3. Create password file on source if it is not there
$ su - ora
$ cd $ORACLE_HOME/dbs
orapwd password=manager file=orapwldev
4. Fix tns entries
Add both source and target tns entry in $TNS_ADMIN/tnsnames.ora file
Start up listener on lsbx database
5. Start target nomount
sqlplus /nolog
SQL> connect / as sysdba
SQL> startup nomount
6. Duplicate database
rman log=rman_duplicate.log
RMAN> connect targetSYS/manager@ldev
If there is no source database rman backup on disk, run 'RMAN> backup database;'
RMAN> sql "alter system switch logfile";
RMAN> CONNECT AUXILIARYSYS/manager@lsbx;
RMAN> duplicate target database to lsbx FROM ACTIVE DATABASE;;

---

### 148. Error applying log to standby database

**Topic ID:** 1801

OptionsSymptom:
*(public)*Error applying log to standby prdnProblem:
*(public)*Error applying log to standby prdnSolution:
*(public)*1. log in as oracle owner (oraprdn) into the DR server (em1.appshosting.com).
2. run chksync.sh from /ahi/bin
3. find out the last log that was synced on DR
4. then execute fixsync.sh

Some times if there are too many archives generated and autosync is failing , scp archives manually and apply them on DR , in this case on vdr1.taipingcarpets.com

scp available archives from prod.taipingcarpets.com to vdr1.taipingcarpets.com:u01/archive/prd

[oraprd@vdr1 ~]$ cd /u01/archive/prd
[oraprd@vdr1 prd]$ pwd
/u01/archive/prd
[oraprd@vdr1 prd]$

then apply all available archives on DR by

[oraprd@vdr1 prd]$ sqlplus /nolog
SQL*Plus: Release 10.2.0.4.0 - Production on Thu Sep 13 19:56:03 2012
Copyright (c) 1982, 2007, Oracle. All Rights Reserved.
SQL> conn /as sysdba
Connected.
SQL> select open_mode from v$database;
OPEN_MODE
------------------------------
MOUNTED
SQL> recover standby database;

and give AUTO when prompted ,

once all available archives are appliied run fixsync.sh

In the case that old archivelog files missing on ah3 due to rman backup job purging or house keeping scripts, DBA needs to restore old archivelog files from RMAN backup then run fixsync.sh.

[oraapex@ah3 ahdb07]$ rman target /
Recovery Manager: Release 11.1.0.6.0 - Production on Sun Nov 4 18:54:41 2012
connected to target database: AHDB07 (DBID=638617360)
RMAN> run {
2> allocate channel d1 type disk;
3> restore archivelog from logseq 103660 until logseq 103663;
4> release channel d1;
5> }
using target database control file instead of recovery catalog

## Due to current logic in DR script, DBA needs to manually change timestamp on the restored archivelog files to make then in sequence in terms of timestamp.
## touch -t MMDDHHMM file
[oraapex@ah3 ahdb07]$ touch -t 11041140 1_103662_727150737.dbf

[oraapex@ah3 bin]$ ./fixsync.sh 103662
Getting the last applied log info from DR environment.
All archive logs after sequence 103662 will be synchronized.

---

### 150. How to find all roles granted to a database user

**Topic ID:** 1801

OptionsSymptom:
*(public)*Problem:
*(public)*Solution:
*(public)*

**How to find all roles granted to a database user

**From sqlplus, run:

set head off
set pages 0
set long 9999999

SELECT DBMS_METADATA.GET_GRANTED_DDL('ROLE_GRANT','GRACE') FROM DUAL
union all
SELECT DBMS_METADATA.GET_GRANTED_DDL('SYSTEM_GRANT','GRACE') FROM DUAL
union all
SELECT DBMS_METADATA.GET_GRANTED_DDL('OBJECT_GRANT','GRACE') FROM DUAL

---

### 151. How to fix DR sync error due to missing data file

**Topic ID:** 1801

OptionsSymptom:
*(public)*Applying archive on standby fails with the following:

DR[oracle@cdb1 bin]$ tail applylog.log
Specify log: {=suggested | filename | AUTO | CANCEL}
ORA-00283: recovery session canceled due to errors
ORA-01274: cannot add datafile '/u01/oracle/oradata/cdb/FLOW_2.dbf' - file
could not be created

ORA-01112: media recovery not started

SQL> Disconnected from Oracle Database 11g Release 11.1.0.6.0 - 64bit Production
DR[oracle@cdb1 bin]$ tail chklog.log
SQL> ORA-00283: recovery session canceled due to errors
ORA-01111: name for data file 9 is unknown - rename to correct file
ORA-01110: data file 9: '/u01/oracle/product/11.1.0/db_1/dbs/UNNAMED00009'
ORA-01157: cannot identify/lock data file 9 - see DBWR trace file
ORA-01111: name for data file 9 is unknown - rename to correct file
ORA-01110: data file 9: '/u01/oracle/product/11.1.0/db_1/dbs/UNNAMED00009'

SQL> SP2-0042: unknown command "cancel" - rest of line ignored.
SQL> Disconnected from Oracle Database 11g Release 11.1.0.6.0 - 64bit Production
DR[oracle@cdb1 bin]$ ls -l /u01/oracle/oradata/cdb/FLOW_2.dbf
ls: /u01/oracle/oradata/cdb/FLOW_2.dbf: No such file or directory
DR[oracle@cdb1 bin]$ ls -l /u01/oracle/product/11.1.0/db_1/dbs/UNNAMED00009
ls: /u01/oracle/product/11.1.0/db_1/dbs/UNNAMED00009: No such file or directory

Also, chksync.sh does not return archive log seq # on standby.
Problem:
*(public)*Data file created on primary databas and it didn't get propagated to standby.Solution:
*(public)***1. Shut down standby database.**
DR[oracle@cdb1 bin]$ sqlplus / as sysdba
SQL*Plus: Release 11.1.0.6.0 - Production on Tue Nov 17 19:29:51 2009
Copyright (c) 1982, 2007, Oracle. All rights reserved.

Connected to:
Oracle Database 11g Release 11.1.0.6.0 - 64bit Production
SQL> shtudown immediate;
SP2-0734: unknown command beginning "shtudown i..." - rest of line ignored.
SQL> shutdown immediate;
ORA-01109: database not open

Database dismounted.
ORACLE instance shut down.
SQL> exit
Disconnected from Oracle Database 11g Release 11.1.0.6.0 - 64bit Production
DR[oracle@cdb1 bin]$ ssh cdb3
Last login: Tue Nov 17 19:28:00 2009 from 67.213.70.60
==========================================================
Oracle Application Database Variables for CDB instance
==========================================================

**2) Create new standby control file from primary database and bring over to standby as new controlfiles.**

SQL> alter database create standby controlfile as '/home/oracle/std.ctl';
Database altered.
SQL> exit
Disconnected from Oracle Database 11g Release 11.1.0.6.0 - 64bit Production
[oracle@cdb3 ~]$ pwd
/home/oracle
[oracle@cdb3 ~]$ ls -l *ctl
-rw-r----- 1 oracle oinstall 35766272 Nov 17 19:34 std.ctl
[oracle@cdb3 ~]$ gzip std.ctl
[oracle@cdb3 ~]$ pwd
/home/oracle
[oracle@cdb3 ~]$ df -k
Filesystem 1K-blocks Used Available Use% Mounted on
/dev/sda3 70419824 42540212 24244720 64% /
/dev/sda1 247903 12097 223007 6% /boot
tmpfs 4091236 867732 3223504 22% /dev/shm
[oracle@cdb3 ~]$ exit
logout
Connection to cdb3 closed.
DR[oracle@cdb1 bin]$ pwd
/ahi/drsync/bin
DR[oracle@cdb1 bin]$ cd $ORACLE_HOME/dbs
DR[oracle@cdb1 dbs]$ ls -l in*ora
-rw-r--r-- 1 oracle oinstall 1203 Apr 6 2009 initcdb.ora
-rw-r--r-- 1 oracle oinstall 12920 May 3 2001 initdw.ora
-rw-r--r-- 1 oracle oinstall 8385 Sep 11 1998 init.ora
DR[oracle@cdb1 dbs]$ more
DR[oracle@cdb1 dbs]$ grep -i control initcdb.ora
control_files='/u01/oracle/oradata/cdb/control01.ctl','/u01/oracle/oradata/cdb/control02.ctl','/u01/oracle/oradata/cdb/control03.ctl'
DR[oracle@cdb1 dbs]$ ps -eaf | grep ora

DR[oracle@cdb1 dbs]$ grep -i control initcdb.ora
control_files='/u01/oracle/oradata/cdb/control01.ctl','/u01/oracle/oradata/cdb/control02.ctl','/u01/oracle/oradata/cdb/control03.ctl'
DR[oracle@cdb1 dbs]$ scp cdb3:/home/oracle/std.ctl.gz .
std.ctl.gz 100% 1188KB 1.2MB/s 00:00
DR[oracle@cdb1 dbs]$ gunzip std.ctl.gz
DR[oracle@cdb1 dbs]$ cp std.ctlstd.ctl
DR[oracle@cdb1 dbs]$ cp std.ctl /u01/oracle/oradata/cdb/control01.ctl
DR[oracle@cdb1 dbs]$ cp std.ctl /u01/oracle/oradata/cdb/control02.ctl
DR[oracle@cdb1 dbs]$ cp std.ctl /u01/oracle/oradata/cdb/control03.ctl
DR[oracle@cdb1 dbs]$ pwd
/u01/oracle/product/11.1.0/db_1/dbs
DR[oracle@cdb1 dbs]$ ls *ctl
std.ctl
DR[oracle@cdb1 dbs]$ rm *ctl
DR[oracle@cdb1 dbs]$ sqlplus / as sysdba
**3) Start the standby database.**
SQL> startup nomount;
ORA-32004: obsolete and/or deprecated parameter(s) specified
ORACLE instance started.
Total System Global Area 730714112 bytes
Fixed Size 2147992 bytes
Variable Size 608176488 bytes
Database Buffers 117440512 bytes
Redo Buffers 2949120 bytes
SQL> alter database mount standby database;
Database altered.
SQL> alter database create datafile '/u01/oracle/oradata/cdb/FLOW_2.dbf'
2 as '/u01/oracle/oradata/cdb/FLOW_2.dbf';
Database altered.
**4) Copy over all new archives and apply them to standby database to avoid following errors:
**Specify log: {=suggested | filename | AUTO | CANCEL}
ORA-01547: warning: RECOVER succeeded but O

... [Content truncated for readability]

---

### 152. How to identify sessions executing stored programs

**Topic ID:** 1801

OptionsSymptom:
*(public)*Hangs when trying to drop stored programs in databaseProblem:
*(public)*Session executing program stillSolution:
*(public)*column type format a9
column owner format a25
column name format a30
column sid format 9999
column serial format 999999

select
decode(o.kglobtyp,
7, 'PROCEDURE',
select
decode(o.kglobtyp,
7, 'PROCEDURE',
8, 'FUNCTION',
9, 'PACKAGE',
12, 'TRIGGER',
13, 'CLASS'
) "TYPE",
o.kglnaown "OWNER",
o.kglnaobj "NAME",
s.indx "SID",
s.ksuseser "SERIAL"
from
sys.x$kglob o,
sys.x$kglpn p,
sys.x$ksuse s
where
o.inst_id = userenv('Instance') and
p.inst_id = userenv('Instance') and
s.inst_id = userenv('Instance') and
o.kglhdpmd = 2 and
o.kglobtyp in (7, 8, 9, 12, 13) and
p.kglpnhdl = o.kglhdadr and
s.addr = p.kglpnses
and o.kglnaobj like 'XX%'
order by 1, 2, 3
/
SQL> /

TYPE OWNER NAME SID SERIAL
--------- ------------------------- ------------------------------ ----- -------
PACKAGE APPS XXCUS_EMTEK_INV_VAL_COLLECT 1073 14555
SQL> alter system kill session '1073,14555';
System altered.
SQL> DROP PACKAGE apps.xxcus_emtek_inv_val_collect;
Package dropped.

---

### 172. Clean up node for clone

**Topic ID:** 2105

OptionsSymptom:
*(public)*concurrent managers not starting up after cloneProblem:
*(public)*Solution:
*(public)*SQL> exec fnd_conc_clone.setup_clean;
PL/SQL procedure successfully completed.
SQL> commit;
Commit complete.

In Release 12, need to run AutoConfig on db tier followed by apps tier.

old node info causing problems after clone

---

### 153. How to recreate TEMP tablespace to smaller size

**Topic ID:** 1801

OptionsSymptom:
*(public)*temp filled upProblem:
*(public)*Solution:
*(public)*SQL> create temporary tablespace temp2 tempfile '/u01/oracle/oradata/cdb/temp02' size 200m extent management local uniform size 1m;

Tablespace created.
SQL> SQL> SQL> ALTER DATABASE DEFAULT TEMPORARY TABLESPACE temp2;
Database altered.
SQL> drop tablespace temp INCLUDING CONTENTS AND DATAFILES;
Tablespace dropped.
1* drop tablespace temp INCLUDING CONTENTS AND DATAFILES
SQL> CREATE TEMPORARY TABLESPACE TEMP TEMPFILE
'/u01/oracle/oradata/cdb/temp01.dbf'
size 4000m
EXTENT MANAGEMENT LOCAL UNIFORM SIZE 1M;
2 3 4
Tablespace created.
SQL> SQL> ALTER DATABASE DEFAULT TEMPORARY TABLESPACE temp;
Database altered.
SQL>
SQL> DROP TABLESPACE temp2 INCLUDING CONTENTS AND DATAFILES;
Tablespace dropped.
SQL>

---

### 154. How to set up Shared Server Listener (formerly MTS) Configuration

**Topic ID:** 1801

OptionsSymptom:
*(public)*Problem:
*(public)*Solution:
*(public)*Prestep:
Determine how many sessions you want to support in the database using shared server listener:
In this case, 250 sessions using 5 dispatchers, each supporting 50 sessions

1. Set the # dispatchers for TCP or bequeath:

alter system set dispatchers = "(PRO=TCP)(DIS=5)" scope=both;
System altered.

2. Set max # of dispatchers.
SQL> alter system set max_dispatchers=5 scope=both;
System altered.

3. Set minimum # of shared servers.
SQL> show parameter shared_s
NAME TYPE VALUE
------------------------------------ ----------- ------------------------------
max_shared_servers integer
shared_server_sessions integer
shared_servers integer 1

SQL> alter system set shared_servers=3 scope=both;
System altered.

4. Set maximum # of sessions handled by shared server:
SQL> alter system set shared_server_sessions = 250 scope=both;
System altered.

Make sure client is not specifying SERVERS=DEDICATED in tns connect string or in tnsnames.ora.

---

### 155. How to wrap PL/SQL code and export

**Topic ID:** 1801

OptionsSymptom:
*(public)*PL/SQL code shows in plain text in xxx_source.Problem:
*(public)*Need to protect PL/SQL code. Need to send out wrapped code.Solution:
*(public)***How to wrap PL/SQL code so it's unreadable in xxx_source view:
**(This is billable taks for client such as Boaz who request it.)

1. Go to the directory where the source code is.
2. Count the number of valid and invalid objects in the schema to compare to after wrapping.
select status, count(*) from user_objects group by status;

3. Generate unreadable code by using "wrap" utility in $ORACLE_HOME/bin (specify input and output file).

For example:

wrap iname=amgen_func_20090916.txt oname=amgen_func_20090916_wrap.sql
PL/SQL Wrapper: Release 10.2.0.4.0- 64bit Production on Thu Sep 17 12:25:19 2009
Copyright (c) 1993, 2004, Oracle. All rights reserved.
Processing amgen_func_20090916.txt to amgen_func_20090916_wrap.sql
4. Log in as the schema owner, and compile
sqlplus eqcamgen/3qcd3v! @amgen_func_20090916_wrap.sql
5. Count the number of valid and invalid objects in the schema to compare to counts done in Step 2 above:
select status, count(*) from user_objects group by status;

If any more programs are invalid, manually compile and correct the invalid objects.

6. If requested, export the schema with wrapped code:
exp userid=eqcamgen file=eqcamgen02.dmp log=eqcamgen02.log consistent=y owner=EQCAMGEN

Also if requested, send out the instructions for importing into another database:

1. Create a new tablespace at 500 MB.
2. Create user EQCAMGEN using user_script.sql. (See script below in Comments section).
3. Import using the eqcamgen.dmp (imp userid=eqcamgen file=eqcamgen.dmp full=y log=eqcamgen.log)

Comment:
*(internal)***Note:
**1. You can only wrap code once. If you wrap a wrapped code, and compile, it creates corrupted code in the database.
2. You can use lower version wrap utility, and then compile in higher version database, but not the other way around.

**user_script.sql :
**CREATE USER "EQCAMGEN" IDENTIFIED by "urpaswd"
DEFAULT TABLESPACE "SYSAUX"
TEMPORARY TABLESPACE "TEMP"
quota unlimited on "SYSAUX"
/

GRANT "CONNECT" TO "EQCAMGEN"
/

GRANT CREATE JOB TO "EQCAMGEN"
/
GRANT CREATE ANY CONTEXT TO "EQCAMGEN"
/
GRANT CREATE DIMENSION TO "EQCAMGEN"
/
GRANT CREATE INDEXTYPE TO "EQCAMGEN"
/
GRANT CREATE OPERATOR TO "EQCAMGEN"
/
GRANT CREATE TYPE TO "EQCAMGEN"
/
GRANT CREATE MATERIALIZED VIEW TO "EQCAMGEN"
/
GRANT CREATE TRIGGER TO "EQCAMGEN"
/
GRANT CREATE PROCEDURE TO "EQCAMGEN"
/
GRANT CREATE SEQUENCE TO "EQCAMGEN"
/
GRANT CREATE VIEW TO "EQCAMGEN"
/
GRANT CREATE SYNONYM TO "EQCAMGEN"
/
GRANT CREATE CLUSTER TO "EQCAMGEN"
/
GRANT CREATE TABLE TO "EQCAMGEN"
/
GRANT EXECUTE ON "SYS"."DBMS_RLS" TO "EQCAMGEN"
/
GRANT EXECUTE ON "CTXSYS"."CTX_DDL" TO "EQCAMGEN"
/
GRANT EXECUTE ON "CTXSYS"."CTX_DOC" TO "EQCAMGEN"
/

Category:DatabaseState:internal (agent)Language:enResult:0.00 %Votes:0Keywords:wrapPL/SQLcodeandexport/importCreated:09/17/2009 13:32:50 (sam)Changed:09/17/2009 13:53:10 (sam)<>

### Did this article help?
100 %
75 %
50 %
25 %
0 %

---

### 156. Information on Temporary tablespace

**Topic ID:** 1801

OptionsSymptom:
*(public)*Problem:
*(public)*Solution:
*(public)*To see the default temporary tablespace for a database, execute the following query:

`SQL> SELECT * FROM DATABASE_PROPERTIES where PROPERTY_NAME='DEFAULT_TEMP_TABLESPACE';`
``
`Altering temp tablespace to a different one`
``
`ALTER DATABASE DEFAULT TEMPORARY TABLESPACE temp1;`
``
`DBA_FREE_SPACE does not record free space for temporary tablespaces. Use V$TEMP_SPACE_HEADER instead:

`
```
SQL> select TABLESPACE_NAME, BYTES_USED, BYTES_FREE from V$TEMP_SPACE_HEADER
```

---

### 492. JDK 8 and Tomcat 8 Installation

**Topic ID:** 901

JDK 8 and Tomcat 8 Installation
JDK 1.8.0_112 Installation:1. Download JDK version from http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html2. Extract to /usr/local (cd /usr/local; tar xvfz jdk-8u112-linux-x64.tar.gz)
Tomcat 8 Installation:1. Update tomcat user's .bash_profile with new JDK home (JAVA_HOME=/usr/local/jdk1.8.0_112).2. Extract Tomcat to /home/tomcat (tar xvfz apache-tomcat-8.5.8_bfst.tar.gz)3. Configure contents.xml and server.xml with appropriate values as before.4. Update startup.sh with new heap value.

---

### 182. How to compile forms/library in R12

**Topic ID:** 2105

OptionsSymptom:
*(public)*Problem:
*(public)*Solution:
*(public)*frmcmp module=/EBSr12/oracle/dev/apps/apps_st/appl/au/12.0.0/resource/USER_RCVRCERC.pll userid=apps/apps output_file=/EBSr12/oracle/dev/apps/apps_st/appl/au/12.0.0/resource/USER_RCVRCERC.plx module_type=library compile_all=special

---

### 157. Install RMAN backup scripts

**Topic ID:** 1801

OptionsAttachment:ah_install.tar120.0 KBytesSymptom:
*(public)*Install RMAN backup scriptsProblem:
*(public)*Install RMAN backup scriptsSolution:
*(public)*AppsHosting Oracle utility installation
1. Copy ah_install.tar file to oracle $HOME directory
2. Untar the file to create bin directory
$ tar xpf ah_install.tar
3. Modify rman*.sh and rman*.cmd files to local directories.
4. Create backup directories as needed
5. Test rman backup manually
6. Schedule cronjob for RMAN backup
7. Follow up scheduled rman backup to make sure it works and notification is sent when fails

---

### 159. MTS and Oracle listener network performance

**Topic ID:** 1801

OptionsSymptom:
*(public)*Nobody can connect to database
Problem:
*(public)*TNS-12518: TNS:listener could not hand off client connection
TNS-12547: TNS:lost contact
TNS-12560: TNS:protocol adapter error
TNS-00517: Lost contact
Linux Error: 32: Broken pipe
Solution:
*(public)*High-volume connections into a dedicated listener are anticipated, it may be beneficial to implement the Multi-Threaded Server (MTS) and use pre-spawned Oracle connections.

Connection Pooling and Network Performance

An MTS dispatcher requires fewer physical network connections. Connection pooling allows the administrator to take full advantage of this. This resource utilization feature is achieved by sharing a dispatcher’s set of connections among multiple client processes.

Connection pooling reuses physical connections. Older connections are made available for incoming clients while a logical session with the previous idle connection is maintained. Connections that have been idle for a specified period of time are temporarily released by a timeout mechanism. The idle connection can be used by another process until the previous client resumes work. At that time another physical connection is established with the dispatcher.

Connection pooling is disabled on both incoming and outgoing network connections by default. To enable connection pooling, add the POOL argument to the mts_dispatchers parameter in the init.ora file.
MTS_DISPATCHERS = "(PROTOCOL=TCP)(DISPATCHERS=3)(POOL=3)"

Connection pooling is enabled for both incoming and outgoing network connections whenever a number is specified. The number sets the timeout in ticks for both types of network connections.

To enable connection pooling for both incoming and outgoing networks while using the Oracle NET default timeout, set the POOL argument to ON, YES, TRUE, or BOTH.
MTS_DISPATCHERS = "(PROTOCOL=TCP)(DISPATCHERS=3)(POOL=ON)"

The POOL argument IN or OUT enables connection pooling for incoming or outgoing network connections respectively. The Oracle NET default timeout will be used.

---

### 160. Migrate 10g/11g database accross platform

**Topic ID:** 1801

OptionsAttachment:Migrate Apex Database from Linux to Solaris - Public Version.pdf166.9 KBytesSymptom:
*(public)*Migrate 10g/11g database accross platform
Problem:
*(public)*Migrate 10g/11g database accross platformSolution:
*(public)*

---

### 161. ORA-00600: internal error code, arguments

**Topic ID:** 1801

OptionsSymptom:
*(public)*ORA-00600: internal error code, arguments: [17059], [0x0C7951CE0], [0x0C7952008], [0x0DE94DEB0], [], [], [], [] when trying to update/edit a record.
Problem:
*(public)*ORA-00600: internal error code, arguments: [17059], [0x0C7951CE0], [0x0C7952008], [0x0DE94DEB0], [], [], [], [] when trying to update/edit a record.
Solution:
*(public)*Execute the following sql:

alter system flush SHARED_POOL

---

### 162. Oracle 10g RAC Cloning (Real Application Cluster) - Best Practices

**Topic ID:** 1801

OptionsSymptom:
*(public)***Overview**
This article will show users two different ways to clone a RAC (Real Application Cluster) database in Oracle E-Business Suite environment.
Problem:
*(public)*The concepts presented here will also work for other non-apps Oracle databases also. Staged Oracle Home refers to a preconfigured and working Oracle Home where the RAC database will run from.- Option 1: With Staged Oracle Home
- Option 2: Without Staged Oracle Home
Solution:
*(public)***1: RAC to RAC Clone with Staged Oracle Home**
1. Make sure Oracle Home is staged and working.
2. Change ODM (Oracle Data Manager) library to non-RAC which resides in ORACLE_HOME/lib after Oracle installation.
libodm10.so -> libodmd10.so
3. Unset Oracle environment by logging out and back in.
4. Set Oracle HOME and SID for non-RAC.
. oraenv (may need to set LD_LIBRARY_PATH)
5. Start up nomount using the following init.ora:
db_name = MYRAC
db_block_size = 8192
compatible = 10.2.0
db_files=512
control_files = /oracle/app/ora06/myrac/cntrl01.dbf,/oracle/app/ora
08/myrac/cntrl02.dbf,/oracle/app/ora09/myrac/cntrl03.dbf
_no_recovery_through_resetlogs=TRUE
6. Perform RMAN restore and recovery.
7. Shut down the database.
8. Change ODM library to RAC. Should point to where Veritas software is installed.
9. Startup the primary RAC node sourcing RAC environment.
Add thread 2 and enable:
alter database add logfile thread 2
'/oracle/app/ora08/myrac1/log12a.dbf' size 100m;
alter database enable thread 2;
Add second undo tablespace, if not existing.
create undo tablespace apps_undots2 datafile
'/oracle/app/ora08/myrac/undo20.dbf' size 2000m extent
management local
10. Start the secondary RAC node after sourcing RAC environment.
**2: RAC to RAC Clone without Staged Oracle Home**
1. Change ODM library to non-RAC which resides in $ORACLE_HOME/lib after Oracle installation.
libodm10.so -> libodmd10.so.
2. Unset Oracle environment by logging out and back in.
3. Set Oracle HOME and SID for non-RAC SID.
. oraenv
4. Start up nomount using the following init.ora:
db_name = MYRAC
db_block_size = 8192
compatible = 10.2.0
db_files=512
control_files = /oracle/app/ora06/myrac/cntrl01.dbf,/oracle/app/ora
08/myrac/cntrl02.dbf,/oracle/app/ora09/myrac/cntrl03.dbf
_no_recovery_through_resetlogs=TRUE
5. Perform RMAN restore and recovery.
6. Shut down the database.
7. Update oraInst.loc and template to avoid below error during clone.
/var/opt/oracle/oraInst.loc
adlnkoh.sh:
# make -if $ORACLE_HOME/network/lib/ins_nau.mk ioklist >> $LOGF 2>
&1
if [ ! $? -eq 0 ]; then RESULT=1; printf "Failed...\\n" >> $LOGF;
else printf "Completed...\\n" >> $LOGF; fi
printf "\\nStarting: \\"make -if $ORACLE_HOME/network/lib/ins_nau.
mk iokinit\\"\\n" >> $LOGF 2>&1
# make -if $ORACLE_HOME/network/lib/ins_nau.mk iokinit >> $LOGF 2>
&1
if [ ! $? -eq 0 ]; then RESULT=1; printf "Failed...\\n" >> $LOGF;
else printf "Completed...\\n" >> $LOGF; fi
printf "\\nStarting: \\"make -if $ORACLE_HOME/network/lib/ins_nau.
mk iokdstry\\"\\n" >> $LOGF 2>&1
# make -if $ORACLE_HOME/network/lib/ins_nau.mk iokdstry >> $LOGF 2
>&1
StackTrace:
java.lang.Exception: java.lang.NullPointerException
at oracle.apps.ad.clone.ApplyDBTechStack.runRelinkOH(ApplyDBTechStack.java:847)
at oracle.apps.ad.clone.ApplyDBTechStack.(ApplyDBTechStack.java:421)
at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
at sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source)
at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source)
at java.lang.reflect.Constructor.newInstance(Unknown Source)
at oracle.apps.ad.clone.util.CloneProcessor.run(CloneProcessor.java:68)
at java.lang.Thread.run(Unknown Source)
8. Clone first node.
perl adcfgclone.pl dbTechStack (use virtual host name if possible)
11. Change ODM library in ORACLE_HOME/lib to RAC. Should point to where Veritas software is installed.
12. Startup the primary RAC node sourcing RAC environment.
13. Clean up old node information by purging fnd_nodes table.
14. Clone secondary node.
perl adcfgclone.pl dbTechStack (use virtual host name if possible)
Correct tns port from default 1521.
Correct control file path.
Note: On earlier versions of Oracle, you may need to regenerate the Oracle binaries with RAC off option.
make -f ins_rdbms.mk rac_off ioracle

---

### 158. Logging in to apps throws Error due to block corruption

**Topic ID:** 1801

Options
Symptom:
*(public)*

# R12 Error:
500 Internal Server Error

```
java.lang.NoClassDefFoundError
 at oracle.apps.fnd.sso.AppsLoginRedirect.doGet(AppsLoginRedirect.java:613)
 at javax.servlet.http.HttpServlet.service(HttpServlet.java:743)
 at javax.servlet.http.HttpServlet.service(HttpServlet.java:856)
 at com.evermind[Oracle Containers for J2EE 10g (10.1.3.0.0) ].server.http.ResourceFilterChain.doFilter(ResourceFilterChain.java:64)
 at oracle.apps.jtf.base.session.ReleaseResFilter.doFilter(ReleaseResFilter.java:26)
 at com.evermind[Oracle Containers for J2EE 10g (10.1.3.0.0) ].server.http.EvermindFilterChain.doFilter(EvermindFilterChain.java:15)
 at oracle.apps.fnd.security.AppsServletFilter.doFilter(AppsServletFilter.java:318)
 at com.evermind[Oracle Containers for J2EE 10g (10.1.3.0.0) ].server.http.ServletRequestDispatcher.invoke(ServletRequestDispatcher.java:610)
 at com.evermind[Oracle Containers for J2EE 10g (10.1.3.0.0) ].server.http.ServletRequestDispatcher.forwardInternal(ServletRequestDispatcher.java:359)
 at com.evermind[Oracle Containers for J2EE 10g (10.1.3.0.0) ].server.http.HttpRequestHandler.doProcessRequest(HttpRequestHandler.java:870)
 at com.evermind[Oracle Containers for J2EE 10g (10.1.3.0.0) ].server.http.HttpRequestHandler.processRequest(HttpRequestHandler.java:451)
 at com.evermind[Oracle Containers for J2EE 10g (10.1.3.0.0) ].server.http.AJPRequestHandler.run(AJPRequestHandler.java:299)
 at com.evermind[Oracle Containers for J2EE 10g (10.1.3.0.0) ].server.http.AJPRequestHandler.run(AJPRequestHandler.java:187)
 at oracle.oc4j.network.ServerSocketReadHandler$SafeRunnable.run(ServerSocketReadHandler.java:260)
 at oracle.oc4j.network.ServerSocketAcceptHandler.procClientSocket(ServerSocketAcceptHandler.java:230)
 at oracle.oc4j.network.ServerSocketAcceptHandler.access$800(ServerSocketAcceptHandler.java:33)
 at oracle.oc4j.network.ServerSocketAcceptHandler$AcceptHandlerHorse.run(ServerSocketAcceptHandler.java:831)
 at com.evermind[Oracle Containers for J2EE 10g (10.1.3.0.0) ].util.ReleasableResourcePooledExecutor$MyWorker.run(ReleasableResourcePooledExecutor.java:303)
 at java.lang.Thread.run(Thread.java:595)

```

Caused by: oracle.apps.jtf.base.resources.FrameworkException: ORA-01578: ORACLE data block corrupted (file # 28, block # 232413)ORA-01110: data file 28: '/u01/oracle/adev/db/apps_st/data/a_txn_data03.dbf'ORA-26040: Data block was loaded using the NOLOGGING option

**11i Error:
**
Unknown exception. Please contact your System Administrator.Problem:
*(public)*
dbv file=/u01//oracle/adev/db/apps_st/data/a_txn_data03.dbf
DBVERIFY: Release 10.2.0.4.0 - Production on Sat Dec 5 13:18:56 2009
Copyright (c) 1982, 2007, Oracle. All rights reserved.
DBVERIFY - Verification starting : FILE = /u01//oracle/adev/db/apps_st/data/a_txn_data03.dbf

DBV-00201: Block, DBA 117672509, marked corrupt for invalid redo applicationDBV-00201: Block, DBA 117672861, marked corrupt for invalid redo application

DBVERIFY - Verification completeTotal Pages Examined : 239040
Total Pages Processed (Data) : 191483
Total Pages Failing (Data) : 0
Total Pages Processed (Index): 1579
Total Pages Failing (Index): 0
Total Pages Processed (Other): 41926
Total Pages Processed (Seg) : 0
Total Pages Failing (Seg) : 0
Total Pages Empty : 4052
Total Pages Marked Corrupt : 2
Total Pages Influx : 0
Highest block SCN : 455513023 (0.455513023)
[oracoa@tp-dr02 ~]$
Solution:
*(public)*
1. Determine the corrupted object.

Confirm bad block by doing select * on the table.
SQL> select * from wf_local_roles
Got same error.
2.
oracle> exp system tables=APPLSYS.WF_LOCAL_USER_ROLES log=exp_user.log
4. Imported WF_LOCAL_ROLES into adev. (Be careful here. Only do this if you know that the records between source and target are or should be the same. count(*) should be the same of course also)
[oradev@tp-test01 ~]$ imp
Import: Release 10.2.0.4.0 - Production on Mon Dec 31 22:05:20 2012
Copyright (c) 1982, 2007, Oracle. All rights reserved.
Username: system
Password:
Connected to: Oracle Database 10g Enterprise Edition Release 10.2.0.4.0 - 64bit Production
With the Partitioning, OLAP, Data Mining and Real Application Testing options
Import file: expdat.dmp > WF_LOCAL_ROLES.dmp
Enter insert buffer size (minimum is 8192) 30720>
Export file created by EXPORT:V10.02.01 via conventional path
import done in AL32UTF8 character set and AL16UTF16 NCHAR character set
import server uses UTF8 character set (possible charset conversion)
List contents of import file only (yes/no): no >
Ignore create error due to object existence (yes/no): no > Yes
Import grants (yes/no): yes >
Import table data (yes/no): yes >
Import entire export file (yes/no): no > Yes
. importing SYSTEM's objects into SYSTEM
. importing APPLSYS's objects into APPLSYS
. . importing partition "WF_LOCAL_ROLES":"WF_LOCAL_ROLES" 100494 rows imported
. . importing partition "WF_LOCAL_ROLES":"FND_USR" 570 rows imported
. . importing partition "WF_LOCAL_ROLES":"FND_RESP" 4633 rows import

... [Content truncated for readability]

---

### 642. Ichor Printer Add or Delete

**Topic ID:** 11

1) Login as af user to the concurrent node
2) verify if the printer queue name is already register by following command
lpstat -p |grep OR1POWSSHIPPI (lpstat -p |grep)
3) Add the printer to the printer queue (maximum length od characters allowed is 13 characters)
sudo /opt/hpnpl/bin/addqueue -q-h-boff -i9998
see printer added to spooler.
4) Then proceed with adding the printer in the Oracle EBS with given printer name and model
To Remove printer from the Queue and Oracle
1) Login as af user to the concurrent node
2) verify if the printer queue name is already register by following command
lpstat -p |grep
3) Execute the following command to delete from the queue
sudo /opt/hpnpl/bin/removequeue -q
see printer deleted.
cancel pl_05_rpt-2030 (from imax user) ---> to cancel printing jobs
AF456$​

---

### 184. How to turn on debug log for 11i applications server

**Topic ID:** 2105

OptionsSymptom:
*(public)*Problem:
*(public)*Solution:
*(public)*Subject:**How To Collect Apache and Jserv Debugging Details For Applications 11i**Doc ID:**249669.1**Type:**HOWTO**Modified Date :**29-JAN-2009**Status:**PUBLISHED**
```
\nPURPOSE\n-------\n\nThis purpose of this document is to advise Applications DBAs how to configure debugging \nfor the Apps 11i Middle Tier Apache processes and collect diagnostic information appropriately \nfor troubleshooting.\n\nIMPORTANT NOTES\n---------------\n\n- Capturing debug information can impact system performance. \n\n- Backup your current system configuration files before commencing with this procedure.\n\n- Autoconfig customers are recommended to install the latest AutoConfig templates patch. See Note 165195.1 \n"Using AutoConfig to Manage System Configurations with Oracle Applications 11i" for the latest patch.\n\n- If you have configured a Shared Application Tier File System as described in \nNote 233428.1 "Sharing the Application Tier File System in Oracle E-Business Suite 11i" then \nplease substitute $IAS_CONFIG_HOME for the $IAS_ORACLE_HOME values below.\n\n\nHow To Collect Apache and Jserv Debugging Information For Applications 11i\n--------------------------------------------------------------------------\nIf a user experiences an error, request a screen shot of the error and any further error \ndetails that they can report.\n\nIf the error is reproducible, enable the following middle tier debug settings following \nthese steps:\n\nNOTE - If you have configured a Shared Application Tier File System as described in \nNote 233428.1 "Sharing the Application Tier File System in Oracle E-Business Suite 11i" then \nplease substitute $IAS_CONFIG_HOME for the $IAS_ORACLE_HOME values below.\n\n\n1. Shut down iAS 10222 (Apache) using the adapcctl.sh (or adstpall.sh) script\n\n\n2. Backup the existing files in the following files:\n  $IAS_ORACLE_HOME/Apache/Apache/logs\n  $IAS_ORACLE_HOME/Apache/Jserv/logs\n  $IAS_ORACLE_HOME/Apache/Jserv/logs/jvm\n\nAfter making a copy of these files, please archive these files into a separate directory, \nor remove them completely if not needed.  This enables new log files to be created when \nthe applications server is restarted and will help you to focus on the current problem.\n\n\nNOTE : In the following section AutoConfig users should modify the .xml file as noted \nbelow then run AutoConfig to recreate the configuration files. If you are not using AutoConfig \nyou can manually update the configuration file directly\n\n3. Enable debug logging for Apache\nAutoConfig variable\n	s_apache_loglevel  Change to "debug"  Default value is "warn"\n\nManual update\n	**Modify $IAS_ORACLE_HOME/Apache/Apache/conf/httpd.conf** \n		LogLevel debug\n\n\n4. Enable debug logging for mod_jserv\nAutoConfig variable\n	s_apjservloglevel  Change to "debug"  Default value is "warn"\n\nManual update\n	**Modify $IAS_ORACLE_HOME/Apache/Jserv/etc/jserv.conf\n		ApJServLogLevel debug**\n\n\n5. Enable debug logging for Jserv\nAutoConfig variable\n	s_oacorelog  Change to "true"  Default value is "false"\n\nManual update\n	**Modify $IAS_ORACLE_HOME/Apache/Jserv/etc/jserv.properties\n		log=true\n		log.channel=true\n		log.channel.info=true\n		log.channel.debug=true\n\n**\n6. Enable debug logging for Forms Listener Servlet JVM (Optional)\n\nThis step is only relevant if you have implemented Forms Listener Servlet as \ndescribed in Note 201340.1 "Using Forms Listener Servlet with Oracle Applications 11i" \nand the reported problem is to do with the Core Forms \n\nAutoConfig variable\n	s_oaformslog  Change to "true"  Default value is "false"\n\nManual update\n	Modify $IAS_ORACLE_HOME/Apache/Jserv/etc/forms.properties\n		log=true\n		log.channel=true\n		log.channel.info=true\n		log.channel.debug=true\n\n\n7. AutoConfig users should now run AutoConfig to update the configuration files\n\n\n8. Restart iAS 10222 for these changes to take effect using the adapcctl.sh (or adstrtal.sh) script\n\n\n9. Replicate the problem\n\n\n10. Review the log files for errors and warning messages relevant to the reported issue\n\nThe following files from the $IAS_ORACLE_HOME/Apache/Apache/logs directory\na) access_log.\n	by default rotatelogs is enabled, so there is a separate log file for every 24 hours.  \nb) access_log_pls.\n	PLSQL requests. By default rotatelogs is enabled, so there is a separate log file for every 24 hours.  \nc) error_log\nd) error_log_pls\n\nThe following files from the $IAS_ORACLE_HOME/Apache/Jserv/logs directory\nd) mod_jserv.log\ne) jserv.log\nf) All files from the $IAS_ORACLE_HOME/Apache/Jserv/logs/jvm directory\n	These will have filenames of the form ..stdout|stderr\n	For example OACoreGroup.0.stderr\ng) $COMMON_TOP/rgf/_/javacache.log\n\n\nReporting your issue to Oracle Support\n--------------------------------------\nIf you are obtaining this information for a Service Request logged with Oracle Support, please upload all of \nthe log files from step (8) 

... [Content truncated for readability]

---

### 163. RMAN point in time restore

**Topic ID:** 1801

OptionsSymptom:
*(public)*RMAN restore is successful, but RMAN recovery keeps asking for newer archive logs.Problem:
*(public)*Deleted the requested archive log files.Solution:
*(public)***1. Restore control file from a backup
**
connect target;
set DBID=1756819485;
run
{
allocate channel c1 device type disk format '/u01/backup/rman/FULL_%d_t%t_s%s_p%
p';
RESTORE CONTROLFILE FROM '/u01/oracle/prd/db/tech_st/10.2.0/dbs/c-1756819485-20
090728-00';
release channel c1;
}

**2. Restore database to a sequence (or point in time)

## Find out archivelog sequence number from source database closest to the point-of-time.
**
connect target;
run
{
allocate channel c1 device type disk format '/u01/backup/rman/FULL_%d_t%t_s%s_p%
p';
set until sequence 69;
restore database;
recover database;
release channel c1;
}

---

### 164. Reconfigre Oracle Enterprise Manager Database Control or DB Console

**Topic ID:** 1801

OptionsSymptom:
*(public)*Problem:
*(public)*Solution:
*(public)*

1. Change the`%ORACLE_HOME%\\network\\admin\\listener.ora`file from an IP number to machine name.
2. Change the`%ORACLE_HOME%\\network\\admin\\tnsnames.ora`file from an IP number to a machine name.
3. Change the`C:\\WINDOWS\\System32\\drivers\\etc\\hosts`file by adding this line beneath the default localhost line:

```
127.0.0.1       localhost
172.1.0.177 d2tvztf1 d2tvztf1.appshosting.com
```
4. Change the Windows`hostname`by navigating: Start > Control Panel > System (classic view). Confirm by running hostname command.
5. Reboot the machine, and then drop the`em`configuration with the following commands:

```
C:\\app\\oracle\\product\\11.1.0\\db_1\\BIN> set ORACLE_SID=digitron
C:\\app\\oracle\\product\\11.1.0\\db_1\\BIN> emca -deconfig dbcontrol db -repos drop

6. Youll receive the following prompts, enter the Oracle SID and Port number without double quotes but you must enter all passwords with double quotes (at least in Oracle Database 11g):

```
STARTED EMCA at Jul 13, 2008 8:26:42 AM\n\nEM Configuration Assistant, Version 11.1.0.7.0 Production\n\nCopyright (c) 2003, 2005, Oracle.  All rights reserved.\n\n \n\nEnter the following information:\n\nDatabase SID: digimgr\n\nListener port number: 1521\n\nPassword for SYS user:\n\nPassword for SYSMAN user:\n\nPassword for SYSMAN user:\n\nDo you wish to continue? [yes(Y)/no(N)]: y
```
7. You should then drop the`SYSMAN`user manually because it doesnt happen without your assistance (or, it didnt happen when I did it). If you***dont drop***the`SYSMAN`schema, youll raise an error when you try to recreate it:Drop the user and dependent on version a few other objects, like:

```
DROP USER sysman CASCADE;
DROP USER mgmt_view cascade;
DROP PUBLIC SYNONYM setemviewusercontext;
DROP ROLE mgmt_user;
DROP PUBLIC SYNONYM mgmt_target_blackouts;
drop public synonym MGMT_AVAILABILITY;
drop public synonym MGMT_CURRENT_AVAILABILITY;
drop PUBLIC SYNONYM MGMT_SEVERITY_OBJ;

```
****

8. You can then create the`em`environment with the following syntax:
**Delete other PUBLIC synonyms pointing to SYSMAN user.**

```

C:\\app\\oracle\\product\\11.1.0\\db_1\\BIN> emca -config dbcontrol db -repos create
STARTED EMCA at Jan 21, 2010 2:38:12 AM
EM Configuration Assistant, Version 11.1.0.7.0 Production
Copyright (c) 2003, 2005, Oracle.  All rights reserved.
```

```
Enter the following information:
Database SID: digitron
Listener port number: 1521
Password for SYS user:
Password for DBSNMP user:
Password for SYSMAN user:
Password for SYSMAN user: Email address for notifications (optional): sup@appsho
sting.com
Outgoing Mail (SMTP) server for notifications (optional): ah59.appshosting.com
-----------------------------------------------------------------
```

```
You have specified the following settings
```

```
Database ORACLE_HOME ................ C:\\app\\oracle\\product\\11.1.0\\db_1
```

```
Local hostname ................ d2tvztf1
Listener port number ................ 1521
Database SID ................ digitron
Email address for notifications ............... sup@appshosting.com
Outgoing Mail (SMTP) server for notifications ............... ah59.appshosting.c
om
```

```
-----------------------------------------------------------------
Do you wish to continue? [yes(Y)/no(N)]: Y
Jan 21, 2010 2:42:34 AM oracle.sysman.emcp.EMConfig perform
INFO: This operation is being logged at C:\\app\\oracle\\cfgtoollogs\\emca\\digitron
emca_2010_01_21_02_38_12.log.
Jan 21, 2010 2:42:35 AM oracle.sysman.emcp.EMReposConfig createRepository
INFO: Creating the EM repository (this may take a while) ...
Jan 21, 2010 2:48:31 AM oracle.sysman.emcp.EMReposConfig invoke
INFO: Repository successfully created
Jan 21, 2010 2:48:35 AM oracle.sysman.emcp.EMReposConfig uploadConfigDataToRepo
itory
INFO: Uploading configuration data to EM repository (this may take a while) ...
Jan 21, 2010 2:49:38 AM oracle.sysman.emcp.EMReposConfig invoke
INFO: Uploaded configuration data successfully
Jan 21, 2010 2:49:39 AM oracle.sysman.emcp.util.DBControlUtil configureSoftware
ib
INFO: Software library configured successfully.
Jan 21, 2010 2:49:39 AM oracle.sysman.emcp.EMDBPostConfig configureSoftwareLibr
ry
INFO: Deploying Provisioning archives ...
Jan 21, 2010 2:49:45 AM oracle.sysman.emcp.EMDBPostConfig configureSoftwareLibr
ry
INFO: Provisioning archives deployed successfully.
Jan 21, 2010 2:49:45 AM oracle.sysman.emcp.util.DBControlUtil secureDBConsole
INFO: Securing Database Control (this may take a while) ...
Jan 21, 2010 2:49:56 AM oracle.sysman.emcp.util.DBControlUtil secureDBConsole
INFO: Database Control secured successfully.
Jan 21, 2010 2:49:56 AM oracle.sysman.emcp.util.DBControlUtil startOMS
INFO: Starting Database Control (this may take a while) ...
Jan 21, 2010 2:50:37 AM oracle.sysman.emcp.EMDBPostConfig performConfiguration
INFO: Database Control started successfully
Jan 21, 2010 2:50:37 AM oracle.sysman.emcp.EMDBPostConfig performConfigur

... [Content truncated for readability]

---

### 165. SNMP Monitoring for Oracle Database

**Topic ID:** 1801

OptionsSymptom:
*(public)*Problem:
*(public)*Solution:
*(public)*Subject:**How to start the Enterprise Manager subagent in 10.2.0.4**Doc ID:**737629.1**Type:**HOWTO**Modified Date :**16-SEP-2008**Status:**MODERATED**
**In this Document**
Goal
Solution

---

*This document is being delivered to you via Oracle Support'sRapid Visibility(RaV) process, and therefore has not been subject to an independent technical review.*

## Applies to:Enterprise Manager Grid Control - Version: 10.2.0.4 to 10.2.0.4
Information in this document applies to any platform.

## GoalHow to start the 10.2.0.4 subagent supplied with the Enterprise Manager management agent and why is it used?

## SolutionThe subagent is used in order to browse the MIBS via a mib browser. The subagent can be used on
its own without any other EM Grid components (such as the OMS). However the subagent does not
send snmp traps to alert of metric alert conditions (unlike for example the 9i agent did). If
snmp traps are needed then this can be set up by notify methods on the OMS machine.

The subagent can be started using the command "emctl start subagent". But there are various
conditions under which it may not start. To start the subagent correctly:-

1) delete the emsubagent*. files in $agenthome/sysman/log
2) make sure that no snmp processes are running

ps -ef | grep snmp

if they are kill them.

3) cd $ORACLE_HOME/network/snmp/peer

su root
start_peer -a

confirm that all 3 sub processes are started.

ps -ef |grep peer
ps -ef |grep snmpd
ps -ef |grep snmp

If there are any problems starting the sub processes the *.out files will be written to.

4) then log out of root user
and as oracle user:-

emctl start subagent

5) query the emsubagent*. files in agenthome/sysman/log.
If the subagent has started correctly it should create a emsubagent.trc and emsubagent.log

POTENTIAL PROBLEMS :
------------------------------
The subagent can fail to start (and sometimes core dump ) if:-

a) there is no sqlnet.ora in the $ORACLE_HOME/network/admin directory.
If there is no sqlnet.ora in the $agenthome/network/admin directory then create an empty file called sqlnet.ora.

b) TNS_ADMIN is set - make sure that TNS_ADMIN is NOT set

c) subagent hasn't been relinked.
It can be relinked as follows:-

$ cd $OH/sysman/lib/
$ make -f ins_emagent.mk emsubagent

d) All the databases which have been discovered by the agent have not been configured in grid control . If the databases have not been configured in grid control then the password property will not be specified in the agenthome/sysman/emd/targets.xml file

eg.:-

for each database there should be an entry like this:-

-

If there is no "password" and a value, then the subagent cannot log inot the database. It needs to log into the database in order to populate the agenthome/network/admin/snmp_rw.ora and snmp_ro.ora files. It needs to be able to do this for *ALL* the databases which are listed in targets.xml file. If for example 9 databases have been discovered and only 1 doesn't have a password specified , then this will cause the subagent not to start.

If the password property does not exist for the database (or one of the databases) any of the following options can be done.

1) delete the database (showing in targets.xml but which hasn't been configured) from grid control - this should delete the entry for that database from targets.xml

2) configure the database in grid control (this will populate targets.xml with the password property).

3) Manually edit the targets.xml file. This would need to be done if for example the subagent is being used without grid control (eg. if the subagent is being used just for mib browsing purposes).

If the subagent is being used without grid then take the following steps:-

- take a backup of the targets.xml file
- make sure that the dbsnmp password is known for the database
- add these entries into targets.xml file for the database:-

in this example the dbsnmp account has a password of "dbsnmp"
- start the agent (not the subagent - but the emagent) using the command:-

emctl start agent

*(this is needed in order to encrypt the password). After the agent has started - check that the password which was added is now encrypted.

- now start the subagent

emctl start subagent

*(the agent which was started using emctl start agent) does not need to be started in order to browse the mibs. But it just needs to be started this one time to make sure that the password which was added gets encrypted)

Comment:
*(internal)*To query the SNMP, from ah46-l server:

snmpwalk -v 2c -c public localhost

This pulls all available snmp info. The oracle specific MIBS start with .1.3.6.1.2.1, as far as I can tell.

If snmpwalk does not exist, run as root:
yum install net-snmp-utils

[sam@cdb1 ~]$ sudo su - root
Password:
[root@cdb1 ~]# ps -eaf | grep snmp
root 29153 1 0 14:46 ? 00:00:09 /usr/sbin/snmpd -Lsd -Lf /dev/null -p /var/run/snmpd.pid -a
root 29174 1 0 14:46 ? 00:00:00 /usr/sbin/snmptrapd -Lsd -

... [Content truncated for readability]

---

### 166. Setup standby database for DR

**Topic ID:** 1801

*** On Standby database,**
1. Copy /ahi/drsync/bin files from another DR server with latest DR sync in place, i.e. cdb1.**Update drsync.env.**
Attachment:DR sync process detail.vsd72.5 KBytesDR sync process detail.pdf22.2 KBytesSymptom:
*(public)*To setup standby database and synchronizationProblem:
*(public)*To setup standby database and synchronizationSolution:
*(public)***Configure Manual Standby Database
**(Note: Default location of the DR sync utility ($DRTOP) changed from $HOME/bin in ver. 1 & 2 to /ahi/drsync/bin in ver 3.)

*** On Primary database, take a full backup and create standby controlfile:**
1. Take full backup including archive log files.
2. alter database create standby controlfile as '/backup/oracle/rman/stdbycdb.ctl';
3. Copy /ahi/drsync/bin files from another primary server with latest DR sync in place, i.e. cdb3.**Update drsync.env.**

*** Mount the backups or transfer all the backup files and appropriate archive log files.
**If the bandwidth is very low and unreliable, zip the big files and then split the big files into smaller ones:
cat [backup piece] | gzip > [backup gzip]
split -b 15m [backup piece].gz [prefix]

To get back the backup file on the destination, do the following:
cat [small files] > [backup piece].gz
gunzip [backup piece].gz

*** Set up user equivalence between the node servers:**
From node1: as oracle:
mkdir ~/.ssh ; chmod 755 ~/.ssh
Cut and paste the following line separately:
/usr/bin/ssh-keygen -t rsa
/usr/bin/ssh-keygen -t dsa
Enter passphrase (empty for no passphrase):Enter same passphrase again:Your identification has been saved in /home/oracle/.ssh/id_dsa.
cat ~/.ssh/id_rsa.pub >> ~/.ssh/authorized_keys ; cat ~/.ssh/id_dsa.pub >> ~/.ssh/authorized_keys
Now copy the keys to the other node so that we can ssh to the remote node without being prompted for a password.
chmod 644 ~/.ssh/authorized_keys

*** Restore Standby database**
1. Shutdown and clean up standby database, if running.
2. Copy the standby control files into place as shown in init.ora.
3. rcvstdby.sh (start mount and recover --> see actual command below in Comments section). Note: Make sure the backup directory on standby is the same as the primary since rman will be looking for the backups in the same location. If it complains about failed to identify backup file, execute rman command "crosscheck backup;". If it complains about failing to create system file 1 or if the backup file location has changed, then execute rman command "catalog start with '/NEW_LOCATION/';".
4. Shutdown the database to bring up in standby mode in next step.

**NOTE:**If rcvstdby.cmd not restoring and list backup shows expired, then run
rman "crosscheck backup";

starting media recovery

unable to find archived log
archived log thread=1 sequence=16496
released channel: d1
RMAN-00571: ===========================================================
RMAN-00569: =============== ERROR MESSAGE STACK FOLLOWS ===============
RMAN-00571: ===========================================================
RMAN-03002: failure of recover command at 07/28/2008 22:35:24
RMAN-06054: media recovery requesting unknown archived log for thread 1 with sequence 16496 and starting SCN of 36149438

------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
**To set up standby database for recovery:
**Shutdown database

SQL> startup nomount;

SQL> alter database mount standby database;

SQL>recover standby database == (done by syncstdby.sh)

Start sync job and schedule sync report job.
nohup ./syncstdby.job &
45 3 * * * (/ahi/drsync/bin/rptsync.job)

------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
**To pause and resume DR sync:
**To pause: pause.sh
To resume: resume.sh

------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
**To open for read-only mode:**
SQL> alter database open read only;

------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
**To fail over to the standby database:
**SQL> alter database activate standby database;

For 11g databases, execute:
@aclpower.sql
@acluser.sql

--------------------------------------------------------------------------------
**NOTE:
**If the databases get out of sync in archive logs, do the following:
1. Determine the sequence number of the archive that last synchrnonized successfully (chksync.sh).
2. Run "fixsync.sh" which tells the DR sync script that all archive logs that came after the last successful sync (fixsync.sh<"last sync'ed archive seq

... [Content truncated for readability]

---

### 167. Shared Pool Utilization

**Topic ID:** 1801

OptionsSymptom:
*(public)*Problem:
*(public)*Solution:
*(public)*set echo off
spool pool_est
/*
*********************************************************
* *
* TITLE : Shared Pool Estimation *
* CATEGORY : Information, Utility *
* SUBJECT AREA : Shared Pool *
* DESCRIPTION : Estimates shared pool utilization *
* based on current database usage. This should be *
* run during peak operation, after all stored *
* objects i.e. packages, views have been loaded. *
* NOTE: Modified to work with later versions 4/11/06 *
* *
********************************************************/
Rem If running MTS uncomment the mts calculation and output
Rem commands.

set serveroutput on;

declare
object_mem number;
shared_sql number;
cursor_ovh number;
cursor_mem number;
mts_mem number;
used_pool_size number;
free_mem number;
pool_size varchar2(512); -- same as V$PARAMETER.VALUE
begin

-- Stored objects (packages, views)
select sum(sharable_mem) into object_mem from v$db_object_cache
where type<> 'CURSOR';

-- Shared SQL -- need to have additional memory if dynamic SQL used
select sum(sharable_mem) into shared_sql from v$sqlarea;

-- User Cursor Usage -- run this during peak usage.
-- assumes 250 bytes per open cursor, for each concurrent user.
select sum(250*users_opening) into cursor_ovh from v$sqlarea;
select sum(sharable_mem) into cursor_mem from v$db_object_cache;

-- For a test system -- get usage for one user, multiply by # users
-- select (250 * value) bytes_per_user
-- from v$sesstat s, v$statname n
-- where s.statistic# = n.statistic#
-- and n.name = 'opened cursors current'
-- and s.sid = 25; -- where 25 is the sid of the process

-- MTS memory needed to hold session information for shared server users
-- This query computes a total for all currently logged on users (run
-- during peak period). Alternatively calculate for a single user and
-- multiply by # users.
select sum(value) into mts_mem from v$sesstat s, v$statname n
where s.statistic#=n.statistic#
and n.name='session uga memory max';

-- Free (unused) memory in the SGA: gives an indication of how much memory
-- is being wasted out of the total allocated.
-- For pre-9i issue
-- select bytes into free_mem from v$sgastat
-- where name = 'free memory';
-- with 9i and newer releases issue
select bytes into free_mem from v$sgastat
where name = 'free memory'
and pool = 'shared pool';

-- For non-MTS add up object, shared sql, cursors and 20% overhead.
used_pool_size := round(1.2*(object_mem+shared_sql+cursor_mem));

-- For MTS mts contribution needs to be included (comment out previous line)
-- used_pool_size := round(1.2*(object_mem+shared_sql+cursor_mem+mts_mem));
-- Pre-9i or if using manual SGA management, issue
-- select value into pool_size from v$parameter where name='shared_pool_size';
-- With 9i and 10g and and automatic SGA management, issue
select c.ksppstvl into pool_size from x$ksppi a, x$ksppcv b, x$ksppsv c
where a.indx = b.indx and a.indx = c.indx
and a.ksppinm = '__shared_pool_size';

-- Display results
dbms_output.put_line ('Obj mem: '||to_char (object_mem) || ' bytes ' || '('
|| to_char(round(object_mem/1024/1024,2)) || 'MB)');
dbms_output.put_line ('Shared sql: '||to_char (shared_sql) || ' bytes ' || '('
|| to_char(round(shared_sql/1024/1024,2)) || 'MB)');
dbms_output.put_line ('Cursors: '||to_char (cursor_mem+cursor_ovh) || ' bytes '
|| '('|| to_char(round((cursor_mem+cursor_ovh)/1024/1024,2)) || 'MB)');
-- dbms_output.put_line ('MTS session: '||to_char (mts_mem) || ' bytes');
dbms_output.put_line ('Free memory: '||to_char (free_mem) || ' bytes ' || '('
|| to_char(round(free_mem/1024/1024,2)) || 'MB)');
dbms_output.put_line ('Shared pool utilization (total): '||
to_char(used_pool_size) || ' bytes ' || '(' ||
to_char(round(used_pool_size/1024/1024,2)) || 'MB)');
dbms_output.put_line ('Shared pool allocation (actual): '|| pool_size ||
'bytes ' || '(' || to_char(round(pool_size/1024/1024,2)) || 'MB)');
dbms_output.put_line ('Percentage Utilized: '||to_char
(round(((pool_size-free_mem) / pool_size)*100)) || '%');
end;
/

spool off

---

### 168. Trace Listener

**Topic ID:** 1801

OptionsSymptom:
*(public)*Problem:
*(public)*Solution:
*(public)*Tracing Externel Procedures (Extproc)
External procedure can be traced using the following parameter in the SQLNET.ORA file, where extproc is setup.
TRACE_LEVEL_AGENT= SUPPORT
TRACE_DIRECTORY_AGENT =
TRACE_TIMESTAMP_AGENT =ON

Tnsping Trace
TNSPING.TRACE_LEVEL = SUPPORT
TNSPING.TRACE_DIRECTORY =

Enabling Dynamic Listener Tracing
There might be situations when you cannot reload or restart the listener to enable the traces.Such times, you can fmake use of the dynamic tracing for the listener .
LSNRCTL> set current_listener listener
Current Listener is listener
LSNRCTL> set trc_level 16
Connecting to (ADDRESS=(PROTOCOL=tcp)(HOST=)(PORT=1521))
LISTENER parameter "trc_level" set to support
The command completed successfully
LSNRCTL> set trc_directory /home/oracle
Connecting to (ADDRESS=(PROTOCOL=tcp)(HOST=)(PORT=1521))
LISTENER parameter "trc_directory" set to /home/oracle
The command completed successfully
LSNRCTL> exit
This would create sqlnet support level tracing on the listener under directory /home/oracle with name listener.trc
Only for 11g
11g has new method of tracing Automatic Diagnostic Repository(ADR) which will create the trace to the ADR directories
Reference
Note 454927.1Using and Disabling the Automatic Diagnostic Repository (ADR) with Oracle Net for 11g
To create the trace files to the desired directory,
For client tracing & server tracing add:
DIAG_ADR_ENABLED= OFF
For listener tracing:
DIAG_ADR_ENABLED_= OFF

---

### 170. 11i Post Installation Setup

**Topic ID:** 2105

OptionsSymptom:
*(public)*11i Post Installation SetupProblem:
*(public)*11i Post Installation Setup
The document covers step to configure
A. Forms Servlet Configuration
B. Changing password of Apps and all schema's.
C. Changing Home Page Logo to Corporate Logo.
D. Disable TNS security
Solution:
*(public)*11i Post Installation Setup
The document covers step to configure
A. Forms Servlet Configuration (use one of following methods)
-----------------------------------------------
1. OAM Configuration Wizards
Requires OAM 2.2 or higher (OAM G)
Navigation: OAM Site Map -> AutoConfig -> Configuration Wizards -> Forms Listener Servlet
Choose the Enable or Disable button
or
2. Enable forms servlet manually
2.1 Edit the context file ($APPL_TOP/admin/.xml)
Locate the following two variables:
server_url oa_var="s_forms_servlet_serverurl">
to enable set to /forms/formservlet
eg: /forms/formservlet
to disable set to blank
eg: server_url oa_var="s_forms_servlet_serverurl"/
servlet_comment oa_var="s_forms_servlet_comment"
to enable set to blank
eg: servlet_comment oa_var="s_forms_servlet_comment"/
to disable set to #
eg: #
2.2 Source the environment on the application tier.
Stop all the application tier services:
On UNIX:
$COMMON_TOP/admin/scripts/${CONTEXT_NAME}/adstpall.sh apps/
2.3 If Autoconfig was not automatically executed as part of the preceding step, then run AutoConfig on the application tier:
On UNIX:
$COMMON_TOP/admin/scripts/${CONTEXT_NAME}/adautocfg.sh
2.4 Start all the application tier services:
On UNIX:
$COMMON_TOP/admin/scripts/${CONTEXT_NAME}/adstrtal.sh apps/
B. Changing password of Apps and all schema's.
----------------------------------------------------------------------------
The FNDCPASS commands have to be run from the Unix command Line after sourcing the Application Tier Environment File. The value is brackets<> indicate that it has to be replaced with the new value. The exact syntax is shown below:
1. Changing APPS Password :
FNDCPASS apps/apps 0 Y system/SYSTEM APPLSYS
2. Changing Password for All other application Schema's other than APPS
3. Changing SYSADMIN Password
FNDCPASS apps/0 Y system/USER SYSADMIN
C. Changing Home Page Logo to Corporate Logo.
-----------------------------------------------------------------------------
1. Make a backup copy of the FNDSSCORP.gif file. Name it FNDSSCORP.bak
2. Make the name of the custom logo FNDSSCORP.gif
3. Upload the new FNDSSCORP.gif file to the $OA_MEDIA directory
4. Log out and log back into the application
Reference Metalink Note : 421636.1

D. Disable TNS security
----------------------------------------------------------------------------
1. Remove following lines from sqlnet.ora file in 9i ORACLE_HOME
tcp.validnode_checking = yes
tcp.invited_nodes=(ERDNEW.appshosting.com)
2. Bounce 11i application and 9i Oracle listener.

---

### 171. 11i Vision Demo Installation issue (RW-50004)

**Topic ID:** 2105

OptionsSymptom:
*(public)*11i Vision Demo installation failed at 40% with RW-50004 error.Problem:
*(public)*11i Vision Demo installation failed at 40% with RW-50004 error.Solution:
*(public)*

To continue with the Install copy the following files manually from Stage location to the datafile location where we are installing 11i or check the logfile if any other files are missing(Database logfile - /u01/oracle/visdb/9.2.0/appsutil/log/VIS_ah201/05070928.log).

tx_idx3.dbf

sys2.dbf

Once you have copied the files you can Click on "Retry" to start the installation.

Example: ./b02/software/oracle/Stage11i/oraAppDB/Disk14/data/stage to /u01/oracle/visdata/.

---

### 174. E-Business R12 show blank page

**Topic ID:** 2105

OptionsSymptom:
*(public)*You see blank page when accessing E-business suite R12 home page
Problem:
*(public)*You see blank page when accessing E-business suite R12 home page
Solution:
*(public)*$INST_TOP/logs/ora/10.1.3/j2ee/oacore/oacore_default_group_1/application.log
09/03/03 15:28:14.177 html: chain failed
javax.servlet.ServletException: java.lang.RuntimeException: Unable to create user session. Please contact your System Administrator.

Check database alert.log file it shows table can not extend 1024 bytes in tablespace xxxxx.

Solution: Extend xxxxx tablespace for additional space then bounce R12 application
select 'alter database datafile '''||file_name||''' autoextend on maxsize '||to_char(round(bytes*1.25/(1024*1024)))||'m;'
from dba_data_files order by tablespace_name;

This issue also happens when DBA manually clean $COMMON_TOP/_pages cache.
Solution:
Use the vi editor to edit the $CONTEXT_NAME.xml context file used by AutoConfig and change the value for "s_jsp_main_mode" from justrun to recompile. Then run autoconfig.
Change $CONTEXT_FILE value back after login page working and run autoconfig again.
Or
Compile JSP manually using following method:
cd $FND_TOP/patch/115/bin
perl ojspCompile.pl --compile --flush -p 2

If still not working, sync wf_local table:
begin
apps.wf_local_synch.BULKSYNCHRONIZATION(P_ORIG_SYSTEM=>'ALL',
P_PARALLEL_PROCESSES=>2,
P_LOGGING=>'LOGGING', P_RAISEERRORS=>TRUE,
P_TEMPTABLESPACE=>'APPS_TS_TX_DATA');
END;
/ 2 3 4 5 6 7

---

### 175. EBS 12.0.6 with Database 10.2.0.4

**Topic ID:** 2105

OptionsAttachment:R12 build install-ver4.0.doc263.5 KBytesSymptom:
*(public)*Problem:
*(public)*Solution:
*(public)*

---

### 176. EBS Failover Primary to Standby

**Topic ID:** 2105

OptionsSymptom:
*(public)*Problem:
*(public)*Solution:
*(public)*1. Stop DR sync process by killing syncstdby.job.
ps -eaf | grep syncstdby.job.
kill -9

2. Shut down apps
3. Shut down database listener
4. From primary server, run one last sync.
syncstdby.sh

5. Shut down primary database.
6. Switch hostname (Data Center team task).
7. Activate standby database.
8. Start vnc on display used by apps (:1).
9. If the IP address did not carry over from primary to DR, then run AutoConfig.
10. Start all services.

**Problem:**
[oraprd@prod ~]$ lsnrctl start prd
LSNRCTL for Linux: Version 10.2.0.4.0 - Production on 19-DEC-2009 11:07:35
Copyright (c) 1991, 2007, Oracle. All rights reserved.
Starting /u01/oracle/prd/db/tech_st/10.2.0/bin/tnslsnr: please wait...
TNSLSNR for Linux: Version 10.2.0.4.0 - Production
System parameter file is /u01/oracle/prd/db/tech_st/10.2.0/network/admin/prd_prod/listener.ora
Log messages written to /u01/oracle/prd/db/tech_st/10.2.0/network/admin/prd.log
Error listening on: (ADDRESS=(PROTOCOL=IPC)(KEY=EXTPROCprd))
TNS-12555: TNS:permission denied
TNS-12560: TNS:protocol adapter error
TNS-00525: Insufficient privilege for operation
Linux Error: 1: Operation not permitted
Listener failed to start. See the error message(s) above...
**Solution:
**/var/tmp/.oracle
chown -R oraprd:dba .oracle
chmod -R 777 .oracle

**Problem:**
Executing service control script:
/u01/oracle/prd/inst/apps/prd_prod/admin/scripts/adoacorectl.sh start
script returned:
****************************************************
You are running adoacorectl.sh version 120.11.12000000.3
Starting OPMN managed OACORE OC4J instance ...
adoacorectl.sh: exiting with status 150
adoacorectl.sh: check the logfile /u01/oracle/prd/inst/apps/prd_prod/logs/appl/admin/log/adoacorectl.txt for more information ...
****************************************************
**Solution:**
Remove persistence lock files from:
$INST_TOP/ora/10.1.3/j2ee/forms/persistence/forms_default_group_1/*.lock
$INST_TOP/ora/10.1.3/j2ee/oacore/persistence/oacore_default_group_1/*.lock
$INST_TOP/ora/10.1.3/j2ee/oafm/persistence/oafm_default_group_1/*.lock

****************************************************
**Problem:**
Login in page throws 500 page not display error

**Solution:**
rm $COMMON_TOP/_pages & _TldCache
mkdir $COMMON_TOP/_pages & _TldCache
$FND_TOP/patch/115/bin/ojspCompile.pl --compile --flush -p 20
**
Solution for 500 Internal Server Error:
If still not working, sync wf_local table:
begin
apps.wf_local_synch.BULKSYNCHRONIZATION(P_ORIG_SYSTEM=>'ALL',
P_PARALLEL_PROCESSES=>2,
P_LOGGING=>'LOGGING', P_RAISEERRORS=>TRUE,
P_TEMPTABLESPACE=>'APPS_TS_TX_DATA');
END;
/

**EBS login page not coming up after running autoconfig.**(https://helpdesk.appshosting.com/AddSolution.do?solID=380)

» FAQ » Database » Logging in to apps throws 500 Internal Server Error due to block corruptionhttps://otrs.appshosting.com/oraotrs/index.pl?Action=AgentFAQ&CategoryID=21&ItemID=3401

Murali did autoconfig and run wf role sync job so non-sysamdin users could log in.

---

### 177. EBS R12 forms fails to launch

**Topic ID:** 2105

OptionsAttachment:oracle installation on rhel 5 prerequisites.txt3.5 KBytesSymptom:
*(public)*Forms fails to launch and /u01/oracle/lcoa/inst/apps/lcoa_tp-dr01/logs/ora/10.1.3/j2ee/forms/forms_default_group_1/application.log shows error:

09/06/26 21:33:23.316 formsweb: Forms session<1> aborted: runtime process failed during startup with errors /u01/oracle/lcoa/apps/tech_st/10.1.2/bin/frmweb: error while loading shared libraries: libXm.so.2: cannot open shared object file: No such file or directory

error while loading shared libraries: libXp.so.6: wrong ELF class: ELFCLASS64Problem:
*(public)*Problem with the 32-bit and 64-bit architectures RPMs.
Check the OS version and install the RPMsSolution:
*(public)*When you are installing the 32-bit openmotif RPM you need to install libXp 32-bit RPM ( i386 architecture ).
In the same way when you are installing the 64-bit openmotif RPM you need to install libXp 64-bit RPM ( x86-64 architecture )

Example :

If you need 32-bit support install the following RPMs

libXp-1.0.0-8.1.el5.i386.rpm
openmotif21-2.1.30-11.EL5.i386.rpm

If you need 64-bit support install the following RPMs

libXp-1.0.0-8.1.el5.x86_64.rpm
openmotif22-2.2.3-18.x86_64.rpm

For any RPM , the same architecture libraries needed. For 32-bit RPM,32-bit libraries and for 64-bit RPM, 64-bit libraries needed.

Because tp-dr01 server running with 64-bit OS, i have installed both 64-bit and 32-bit RPMs.

Let me know whether we need 32-bit support or not. Because some applcations require 32-bit support also.

=================================================================================================

Additionally, the following were done:
1. Make sure the display pointed in correct in context file is correct and working.
2. Recreate java cache by stopping apps, and doing the following:
i. Remove $COMMON_TOP/_pages
ii. Compile JSP manually using following method:
cd $FND_TOP/patch/115/bin
perl ojspCompile.pl --compile --flush -p 2**Created the NFS share on tp-dr01 server for use in the Hongkong network.

mount tp-dr01.appshosting.com:/san-001 /

We can mount it to any server in Hongkong network and place the files.

---

### 178. EBS R12 with Database 10.2.0.4

**Topic ID:** 2105

OptionsSymptom:
*(public)*Database is not the latest release of 10g
Problem:
*(public)*Need to upgrade database for R12 to 10.2.0.4Solution:
*(public)*1. Apply RDBMS server 10.2.0.4 Patch set, 6810189. (If OUI does not detect your database home, then don't panic as the Installer will create entry and upgrade.)
2. Apply additional 10.2.0.4 RDBMS patches
For all UNIX/Linux platforms, apply RDBMS patches:
4247037
6870937
7014646

3. Upgrade database (dbua). Start up the listener but keep database down when using "dbua".

4. Gather statistics for SYS schema
Copy $APPL_TOP/admin/adstats.sql from the administration server node to the database server node. Note that adstats.sql has to be run in restricted mode. Use SQL*Plus to connect to the database as SYSDBA and use the following commands to restart the database in restricted mode, run adstats.sql, and restart the database in normal mode:
$ sqlplus "/ as sysdba"
SQL> shutdown normal;
SQL> startup restrict;
SQL> @adstats.sql
Note: Make sure that you have at least 1.5 GB of free default temporary tablespace.
**Reference:**Oracle Apps Release 12 with Oracle Database 10.2.0 interoperability notes**Doc ID:**454750.1**

---

### 179. Enable forms servlet in 11i

**Topic ID:** 2105

OptionsSymptom:
*(public)*Enable forms servlet in Oracle E-business 11iProblem:
*(public)*Solution:
*(public)*1. Enable/Disable the Forms Listener Servlet in 11i

There are three methods than can be used to enable or disable the Forms Listener Servlet.

1. OAM Configuration Wizards.
* Requires OAM 2.2 or higher (OAM G)
* Navigation:
o OAM Site Map -> AutoConfig -> Configuration Wizards -> Forms Listener Servlet
* Choose the Enable or Disable button
2. OAM Context Editor
* Navigation:
o OAM Site Map -> AutoConfig -> Edit Parameters (of required Applications Tier Context file)
* Go to the System Tab
* Expand the oa_web_server node
* Modify the following two variables
o Forms Servlet URL (s_forms_servlet_serverurl)
+ to enable set to /forms/formservlet
+ to disable set to blank
o Forms Servlet Comment (s_forms_servlet_comment)
+ to enable set to blank
+ to disable set to #
3. Edit the context file ($APPL_TOP/admin/.xml)
* Locate the following two variables:
o
+ to enable set to /forms/formservlet
# eg:/forms/formservlet
+ to disable set to blank
# eg:
o
+ to enable set to blank
# eg:
+ to disable set to #
# eg:#

If you are migrating from Forms Listener and using Forms Metric Server load balancing the context variable, Metrics Server Load Balancing Host (s_leastloadedhost) will contain a value %LeastLoadedHost%. This must be changed to the Forms Server Host (s_formshost) value. This change is required even if using the Configuration Wizard.

OAM Context Editor navigation paths to these variables under the System Tab:

* oa_met_server
o Metrics Server Load Balancing Host (s_leastloadedhost)
* oa_forms_server
o Forms Server Host (s_formshost)

2. Run AutoConfig

Once the context file has been modified AutoConfig must be run to generate all configuration files for the APPL_TOP and the ORACLE_HOMEs in its supporting technology stack. AutoConfig is run using the following scripts:

* On UNIX:/admin/scripts//adautocfg.sh
* On NT:\\admin\\scripts\\\\adautocfg.cmd

For more details see the AutoConfig document 165195.1 on OracleMetaLink.

3. Forms Listener Servlet and Forms Listener

If you wish to test/use the Forms Listener Servlet side by side with the Forms Listener:

* and the Forms Listener is the default:
o add a servlet config section to the end of the appsweb.cfg
[servlet]
serverURL=/forms/formservlet
o To use Forms Listener Servlet using this this configuration, the URL would be: http://.:/dev60cgi/f60cgi?config=servlet
o At the same time, to use the Forms Listener the URL would be: http://.:/dev60cgi/f60cgi
* and the Forms Listener Servlet is the default:
o add a socket (or https) config section to the end of the appsweb.cfg
[socket]
serverURL=
serverPort=9000
connectMode=socket
o To connect using this configuration, the URL would be: http://.:/dev60cgi/f60cgi?config=socket

On NT, replace f60cgi with ifcgi60.exe

These changes to appsweb.cfg are added at the end of the file in the section:

;# Begin customizations
;# ********************
;# Customizations below this line will be preserved if patching this
;# file via the instantiation utility.

--- Add config section here ---

;# ********************
;#
;# End customizations
;#
;# ********************

The value assigned to the site level ICX: Forms Launcher profile option by AutoConfig will be http://.:/dev60cgi/f60cgi and therefore take the default options from the appsweb.cfg file. If you wish to use the other value at application, responsibility or user level you will have to manually assign the connection value to the profile option http://.:/dev60cgi/f60cgi?config=

---

### 180. How To Setup Action Export Functionality in Release 11i

**Topic ID:** 2105

OptionsSymptom:
*(public)***How To Setup Action Export Functionality in Release 11i**Problem:
*(public)*Goal
----
The purpose of this note is to summarize the minimal setup needed to use
Action Export functionality within Oracle Applications 11.x versions.
Solution:
*(public)*Fix
---

Action Export functionality is used to export data from several forms to Excel
spreadsheet file. To setup Action Export in v.11.x you just need to perform
two steps:

1. Set System Profile Options 'Export: Mime type' to 'text/tab-separated-values'
2. Setup your browser and Windows Explorer with this new mime type:

=> if using Internet Explorer :

- start Windows Explorer
- choose menu Tools => Folder Options...
- click on 'File Types' tab
- click on 'New' button to add a new type:
File Extension: tsv
- click on 'Advanced' button and complete with:
Associated File Type: 'Microsoft Office Excel Comma Separated File'
(select it from from the list)

- enable 'Automatic promting for file downloads' option from Internet Explorer:
menu Tools => Internet Options...
Security tab => click on 'Custom Level' button => 'Downloads' section

=> if using Netcape :

- menu Edit => Preferences...
- for Category of preferences choose Navigator/Applications
- edit a new type:
description of file: tab separated values
file extension: tsv
MIME type: txt/tab-separated-values
application:

---

### 185. Increase java heap size in R12 to resolve out of memory error

**Topic ID:** 2105

OptionsSymptom:
*(public)*Not able to start MWA service on R12 due to out of memory java error. Refer to Ticket 2009010510000016.Problem:
*(public)*$ ./mwactl.sh -login apps/apps stop force
MWA Telnet Server Release: 1.0.8.4 [December 12th 2002]
Exception in thread "main" java.lang.OutOfMemoryError: Java heap space
mwactl: Error shutting down Telnet server$ ./mwactl.sh -login apps/apps stop force
MWA Telnet Server Release: 1.0.8.4 [December 12th 2002]
Exception in thread "main" java.lang.OutOfMemoryError: Java heap space
mwactl: Error shutting down Telnet serverSolution:
*(public)*To implement the solution, please execute the following steps:

1. Login appl[SID] to application tier where MWA service is located on
2. Navigate to oc4j.properties at $INST_TOP/ora/10.1.3/j2ee/oacore/config
3. Change heap size as following. Add the line if it is not there.
wrapper.bin.parameters=-Xms500M -Xmx3000M -XX:NewSize=128M -XX:MaxNewSize=128M
4. Bounce MWA service as following and retest the issue.
$ $ADMIN_SCRIPTS_HOME/mwactl.sh -login apps/stop
$ $ADMIN_SCRIPTS_HOME/mwactl.sh -login apps/start

---

### 186. Increasing Session Timeout in R12

**Topic ID:** 2105

OptionsSymptom:
*(public)*Increasing Session Timeout in R12Problem:
*(public)*Solution:
*(public)*Change the context variable "session_timeout" to the requested value in the Context file of the Apps tier.

Run Autoconfig on Apps tier.

---

### 187. Integrating Oracle E-Business Suite Release 12 with Oracle Database Vault 10.2.0.4

**Topic ID:** 2105

OptionsSymptom:
*(public)*Need Database VaultProblem:
*(public)*Protect from prvileged users, i.e. DBA's
Solution:
*(public)*Subject:**Integrating Oracle E-Business Suite Release 12 with Oracle Database Vault 10.2.0.4**Doc ID:**566841.1**Type:**WHITE PAPER**Modified Date :**28-NOV-2008**Status:**PUBLISHED**

## Integrating Oracle E-Business Suite Release 12 with Oracle Database Vault 10.2.0.4

#### Last Updated: November 28, 2008This document contains information required for integrating Oracle Database Vault 10.2.0.4 with Oracle E-Business Suite Release 12. You should read and understand all content described here before you begin your installation.
Customers planning to Integrating Database Vault 10.2.0.3 with Oracle E-Business Suite Release 12 , please refer the Metalink Note744363.1. However, Oracle strongly recommends you to integrate the latest version with Oracle E-Business Suite as documented in this Note.

**Note**: Oracle Database Vault 10.2.0.4 integration with Oracle E-Business Suite Release 12 is currently certified for the Linux x86, Sun Solaris SPARC, IBM AIX,HP-UX Itanium, Windows 32bit, Linux x84-64 (64-bit) and HP-UX PA-RISC operating systems. This note will be updated with details of support for additional platforms as they become available. You may periodically check Certify onOracle*MetaLink*for more information.
The most current version of this document can be obtained in Metalink Note566841.1.
There is achange logat the end of this document.
The document is divided into the following logical parts:

- Part 1: Installation and Integration of Oracle Database Vault 10.2.0.4 with E-Business Suite Release 12
- Part 2: Upgrading an Existing Oracle E-Business Suite integrated with Oracle Database Vault 10.2.0.3
- Appendix A: Management Scripts
- Appendix B: Known Issues
- Appendix C: Troubleshooting

## Part 1: Installation and Integration of Oracle Database Vault 10.2.0.4 with Oracle E-Business Suite R12

- Section 1: Overview
- Section 2: Before You Begin
- Section 3: Pre-Integration Tasks
- Section 4: Integrate Oracle Database Vault 10.2.0.4 with Oracle E-Business Suite Release 12
- Section 5: Oracle E-Business Suite Release 12 Patching and Administration Implications
- Section 6: Extending Oracle-Supplied Realms (Optional)
- Section 7: Oracle External or Third-Party Technology Integration

## Section 1: OverviewThis document contains information about integrating Oracle Database Vault 10g with Oracle E-Business Suite Release 12. It assumes the reader is familiar with Database Vault concepts.
Oracle Database Vault helps you address some of the most difficult security problems such as protecting against insider threats, meeting regulatory compliance requirements, and enforcing separation of duties. It provides a number of flexible features that can be used to apply fine-grained access control to your sensitive data. Most importantly, it protects your data from super privileged users but still allows them to maintain your Oracle databases.
The following definitions will be used in this document:**Named Database User**- Non-default database user connecting to the database - this user must not connect as APPS or any of the other seeded applications accounts. These are the users you create to perform special activity in database; for example, a custom user you create for database administration, maintenance, regular database backup/restore process, or any individual user to fulfil specific tasks such as new application development.
**Named DBA User**- A named user who has been granted DBA role in the database
**Applications DBA**- A DBA who has been given access to the APPS and SYSTEM passwords for the purpose of running privileged operations.
The Realms defined below in this document are intended to provide the following protections.

- Prevent a Named Database User from connecting to the database and seeing or modifying Applications data. This user will also be unable to query certain Data Dictionary views as specified by the Oracle Data Dictionary Realm.
- Prevent a Named DBA User from querying or modifying Applications data.
- Prevent a Named Database User or a named DBA User from creating any database Users. Only the Database Vault Account Manager user (or any user assigned the DV_ACCTMGR role) can create a database user or change password for other users.
- Prevent a Named user or a named DBA user from granting execute on the DBMS_RLS packages to other users. Only the Database Vault owner can grant these.
The Realms and the associated certification are not intended to provide:

- Protection from Applications data to a user logged into the SYSTEM schema - When using the realms provided the APPS, APPLSYS, SYSTEM, CTXSYS and EBS product schemas have access to data in the protected realm. The passwords for all of these should only be available to Applications DBAs. SeeSection 4 : Integrating Oracle Database Vault 10.2.0.4 for Oracle E-Business Suite Release 12for more information.
- Protecti

... [Content truncated for readability]

---

### 188. Issues with starting listener for new Vision install

**Topic ID:** 2105

OptionsSymptom:
*(public)*onnecting to (DESCRIPTION=(ADDRESS=(PROTOCOL=TCP)(HOST=rkg.appshosting.com)(PORT=1531)))
TNS-12535: TNS:operation timed out
TNS-12560: TNS:protocol adapter error
TNS-00505: Operation timed out
Linux Error: 110: Connection timed out

after the fresh install of R12.1 installProblem:
*(public)*onnecting to (DESCRIPTION=(ADDRESS=(PROTOCOL=TCP)(HOST=rkg.appshosting.com)(PORT=1531)))
TNS-12535: TNS:operation timed out
TNS-12560: TNS:protocol adapter error
TNS-00505: Operation timed out
Linux Error: 110: Connection timed outSolution:
*(public)*Since the hostname alias was used in this case for ah123.appshosting.com to rkg.appshosting.com the hosts file entry had to be updated with the internal IP address with new hostname as below in /etc/hosts

172.1.0.246 rkg.appshosting.com rkg
172.1.0.246 ah123.appshosting.com ah12

---

### 189. Print to HP Deskjet/Inkjet PCL Printer from Oracle EBS

**Topic ID:** 2105

OptionsSymptom:
*(public)*HP Deskjet printer printing junk from Oracle EBS
Problem:
*(public)*HP Deskjet printer prints junk from Oracle EBS
Solution:
*(public)*Subject:**How to Setup Pasta for PCL Based Printers**Doc ID:**365111.1**Type:**HOWTO**Modified Date :**30-OCT-2008**Status:**PUBLISHED****In this Document**
Goal
Solution
References

---

## Applies to:Pasta - Version: 11.5.1 to 11.5.10
Information in this document applies to any platform.
FNDPSTAX, PASTA
Checked for relevance on 15-SEP-2008

## GoalHow to setup an E-Business Suite PCL Based (non-Postscript ready) printer using the Pasta utility in order to print seeded and custom reports registered in the Text output format.

**NOTE 1:**Neither Pasta or the following configuration will convert the output from a concurrent program registered in the bitmap format (Postscript, PDF, HTML, etc) to ASCII Text. Reports registered in a bitmap format will require a printer that understand and supports the selected bitmap language.

Since most printers and/or applications do not fully support the UTF8 character set yet, Pasta can be configured to produce an output file in a character set that the printer supports.

## Solution01. On server where the concurrent manager resides, setup the printer at the OS level. As the applmgr, verify that the OS print queue is working by submitting a print job, from the OS command line to the target printer, with a simple ASCII text file. Check the OS vendor manual for the command and syntax required for printing from a command line.

02. On UTF8 character set environments (UNIX only), ensure the toolkit Tk2Motif.rgb resource files, under the 8.0.6 Oracle Home, are configured for UTF8. For all Tk2Motif.rgb files located at $ORACLE_HOME/guicommon6/tk60/admin and $ORACLE_HOME/guicommon6/tk60/admin/open the file using any text editor and modify the line that looks like this:

!Tk2Motif*fontMapCs: iso8859-2=EE8ISO8859P2

**Change the line to look like this:**
Tk2Motif*fontMapCs: iso8859-1=UTF8

Make sure you remove the "!" character to uncomment the line. The Tk2Motif.rgb file can have only one entry for the Tk2Motif*fontMapCs parameter, so if there is one defined already comment it out with an exclamation mark.**(Note: For eachonly changed the lines that had iso8859-2=EE8ISO8859P2)**

Copy the file named:
$ORACLE_HOME/guicommon6/tk60/admin/Tk2Motif.rgb
to:
$ORACLE_HOME/guicommon6/tk60/admin/Tk2Motif_UTF8.rgb
03. If Pasts is not already at the latest version of 3.0.4, install the latest released Pasta patch (3325651). Use the following command to determine the current version of Pasta: FNDPSTAX -v
04. Ensure the instance is at Developer 6i patch set 10 or higher (Oracle Forms version 6.0.8.19 or greater), preferably patch set 16 (3596539) and Interop patch (3392966)--reference Note 125767.1 and 232313.1 for Dev 6i patch set information.
Use the following command to determine the current patch set level of Developer 6i:

rwrun60 \\? | head -2
f60run \\? | head -2

05. Copy the default Pasta configuration file in order to create a configuration files that support non-Postscript printers (any name can be used *.cfg):

a. cp $FND_TOP/resource/pasta.cfg pasta_pcl.cfg

b. Edit the pasta_pcl.cfg file and change the outputFormat parameter to text and/or a character set that the printer supports, as follows:

i.e. outputFormat=text.WE8ISO8859P1 or outputFormat=text

**NOTE 2:**If the instances character set is UTF8many printers do not support UTF8. The "5.4.2 IANA to Oracle Character-Set Equivalents" section ofNote 111712.1"Oracle Reports Developer and Reports Server 6i Release Notes" lists some commonly used Oracle character set names that can be used to convert to another character set that the printer may support.

06. Create new printer drivers that can be associated with the new Pasta configuration file. Utilize the F option in the argument field in order to specify the new Pasta configuration file. Also populate the Initialization and reset field with any commands needed to control the target printer.

a. Responsibility = System Administrator
b. Navigate --> Install: Printer: Driver

c. Copy the three main Pasta drivers (PASTA_LANDSCAPE, PASTA_LANDWIDE, PASTA_PORTRAIT) and any other driver that is needed--give it a new name such as PASTA_PCL_LANDSCAPE, etc.

d. In the Argument field append the Pasta option F with the new Pasta configuration
i.e. -pn$PROFILES$.PRINTER -c$PROFILES$CONC_COPIES -f$PROFILES$.FILENAME l -Fpasta_pcl.cfg

e. Populate the Initialization and reset string.

**NOTE 3:**The printer initialization string is printer dependent information that Oracle cannot supply. Please reference the printer's technical manual and/or contact the printer vendor for an initialization string that supports the target printer. However, the following "generic" strings work well for several HP printers or printers that can emulate the PCL language. If you encounter any carriage return problems with this string, append the line

... [Content truncated for readability]

---

### 190. R12 500 Internal Error due to end dated GUEST user

**Topic ID:** 2105

OptionsSymptom:
*(public)*Going to log in page throws 500 Internal Server ErrorProblem:
*(public)*500 Internal Server Error
oracle.apps.fnd.cache.CacheException at oracle.apps.fnd.cache.AppsCache.get(AppsCache.java:228) at oracle.apps.fnd.profiles.Profiles.getProfileOption(Profiles.java:1485) at oracle.apps.fnd.profiles.Profiles.getProfile(Profiles.java:354) at oracle.apps.fnd.profiles.ExtendedProfileStore.getSpecificProfileFromDB(ExtendedProfileStore.java:211) at oracle.apps.fnd.profiles.ExtendedProfileStore.getSpecificProfile(ExtendedProfileStore.java:171) at oracle.apps.fnd.profiles.ExtendedProfileStore.getProfile(ExtendedProfileStore.java:148) at oracle.apps.fnd.common.logging.DebugEventManager.configureUsingDatabaseValues(DebugEventManager.java:1259) at oracle.apps.fnd.common.logging.DebugEventManager.configureLogging(DebugEventManager.java:1114) at oracle.apps.fnd.common.logging.DebugEventManager.internalReinit(DebugEventManager.java:1083) at oracle.apps.fnd.common.logging.DebugEventManager.reInitialize(DebugEventManager.java:1050) at oracle.apps.fnd.common.logging.DebugEventManager.reInitialize(DebugEventManager.java:1037) at oracle.apps.fnd.common.AppsLog.reInitialize(AppsLog.java:595) at oracle.apps.fnd.common.AppsContext.initLog(AppsContext.java:593) at oracle.apps.fnd.common.AppsContext.initializeContext(AppsContext.java:570) at oracle.apps.fnd.common.AppsContext.initializeContext(AppsContext.java:524) at oracle.apps.fnd.common.AppsContext.(AppsContext.java:292) at oracle.apps.fnd.common.WebAppsContext.(WebAppsContext.java:1081) at oracle.apps.fnd.sso.Utils.getAppsContext(Utils.java:539) at oracle.apps.fnd.sso.AppsLoginRedirect.AppsSetting(AppsLoginRedirect.java:120) at oracle.apps.fnd.sso.AppsLoginRedirect.init(AppsLoginRedirect.java:170) at com.evermind[Oracle Containers for J2EE 10g (10.1.3.0.0) ].server.http.HttpApplication.loadServlet(HttpApplication.java:2232) at com.evermind[Oracle Containers for J2EE 10g (10.1.3.0.0) ].server.http.HttpApplication.findServlet(HttpApplication.java:4622) at com.evermind[Oracle Containers for J2EE 10g (10.1.3.0.0) ].server.http.HttpApplication.findServlet(HttpApplication.java:4546) at com.evermind[Oracle Containers for J2EE 10g (10.1.3.0.0) ].server.http.HttpApplication.getRequestDispatcher(HttpApplication.java:2822) at com.evermind[Oracle Containers for J2EE 10g (10.1.3.0.0) ].server.http.HttpRequestHandler.doProcessRequest(HttpRequestHandler.java:740) at com.evermind[Oracle Containers for J2EE 10g (10.1.3.0.0) ].server.http.HttpRequestHandler.processRequest(HttpRequestHandler.java:451) at com.evermind[Oracle Containers for J2EE 10g (10.1.3.0.0) ].server.http.AJPRequestHandler.run(AJPRequestHandler.java:299) at com.evermind[Oracle Containers for J2EE 10g (10.1.3.0.0) ].server.http.AJPRequestHandler.run(AJPRequestHandler.java:187) at oracle.oc4j.network.ServerSocketReadHandler$SafeRunnable.run(ServerSocketReadHandler.java:260) at com.evermind[Oracle Containers for J2EE 10g (10.1.3.0.0) ].util.ReleasableResourcePooledExecutor$MyWorker.run(ReleasableResourcePooledExecutor.java:303) at java.lang.Thread.run(Thread.java:595)Caused by: oracle.apps.jtf.base.resources.FrameworkException: Error in IAS Cache: oracle.apps.fnd.common.PoolException: Not able to create new database connection: FNDSECURITY_APPL_USERID_INVALID at oracle.apps.jtf.cache.IASCacheProvider.get(IASCacheProvider.java:833) at oracle.apps.jtf.cache.CacheManager.getInternal(CacheManager.java:4802) at oracle.apps.jtf.cache.CacheManager.get(CacheManager.java:4624) at oracle.apps.fnd.cache.AppsCache.get(AppsCache.java:216) ... 30 moreCaused by: oracle.apps.jtf.base.resources.FrameworkException: An exception occurred in the method CacheAccess.getnullThe base exception is:Not able to create new database connection: FNDSECURITY_APPL_USERID_INVALID at oracle.apps.jtf.base.resources.FrameworkException.convertException(FrameworkException.java:607) at oracle.apps.jtf.base.resources.FrameworkException.addException(FrameworkException.java:585) at oracle.apps.jtf.base.resources.FrameworkException.(FrameworkException.java:66) at oracle.apps.jtf.base.resources.FrameworkException.(FrameworkException.java:88) at oracle.apps.jtf.base.resources.FrameworkException.(FrameworkException.java:202) at oracle.apps.jtf.base.resources.FrameworkException.(FrameworkException.java:218) at oracle.apps.jtf.base.resources.FrameworkException.(FrameworkException.java:249) ... 34 more
Solution:
*(public)*1. Remove end date on GUEST user.

SQL> select end_date from fnd_user where user_name = 'GUEST';

END_DATE
------------------
01-JAN-06

SQL>
SQL>
SQL> update fnd_user set end_date = null where user_name = 'GUEST';

1 row updated.

SQL>
SQL> commit;

Commit complete.

2. Recreate java cache ($COMMON_TOP/_pages).
i. Shutdown apps
ii. Remove _pages.
iii. perl $FND_TOP/patch/115/bin/ojspCompile.pl --compile --flush -p 2

---

### 494. update workflow mailer settings from backend

**Topic ID:** 2105

below script allows you to reset the parameters from backend
SQL> @$FND_TOP/sql/afsvcpup.sql
Component Id Component Name Component Status Type Containe------------ ------------------------------ ---------------- --------------- --------10000 ECX Inbound Agent Listener RUNNING WF_AGENT_LISTEN GSM10001 ECX Transaction Agent Listener RUNNING WF_AGENT_LISTEN GSM10002 Workflow Deferred Agent Listen RUNNING WF_AGENT_LISTEN GSM10003 Workflow Deferred Notification RUNNING WF_AGENT_LISTEN GSM10004 Workflow Error Agent Listener RUNNING WF_AGENT_LISTEN GSM10005 Workflow Inbound Notifications RUNNING WF_AGENT_LISTEN GSM10006 Workflow Notification Mailer DEACTIVATED_USER WF_MAILER GSM10020 Web Services IN Agent RUNNING WF_JAVA_AGENT_L GSM10021 Web Services OUT Agent RUNNING WF_DOCUMENT_WEB GSM10022 Workflow Java Deferred Agent L RUNNING WF_JAVA_AGENT_L GSM10023 Workflow Java Error Agent List RUNNING WF_JAVA_AGENT_L GSM10040 WF_JMS_IN Listener(M4U) RUNNING WF_JAVA_AGENT_L GSM10041 Workflow Inbound JMS Agent Lis RUNNING WF_AGENT_LISTEN GSM
Enter Component Id: 10006

Comp Param Id Parameter Name Default Value Value Req Reload------------- --------------------------------------------- ------------------------------ ------------------------------ --- ------10055 Allow Forwarded Response Y Y N Y10160 Alternate email parser oracle.apps.fnd.wf.mailer.Dire oracle.apps.fnd.wf.mailer.Dire Y NctEmailParser ctEmailParser
10161 Attach images to outbound emails Y N Y Y10162 Attach stylesheet to outbound email Y Y Y Y10056 Attached URLs WFMAIL:ATTACHED_URLS WFMAIL:ATTACHED_URLS Y Y10057 Autoclose FYI Y Y Y Y10061 Debug Mail Session N N N N10163 Direct response N N N N10062 Discard Folder DISCARD DISCARD Y N10063 Email Parser oracle.apps.fnd.wf.mailer.Temp oracle.apps.fnd.wf.mailer.Temp Y NlatedEmailParser latedEmailParser
10178 Enable stylesheet references N N Y Y10064 Expunge Inbox on Close Y Y Y Y10166 Framework Application ID 1 1 Y N10165 Framework Responsiblity 20420 20420 Y N10167 Framework URL timeout 30 30 Y N10164 Framework User 0 0 Y N10065 From Workflow Mailer PROD Workflow Mailer Y Y10066 HTML Agent http://c1prdebsapp1.nanometric Y Ys.com:8001/
10231 HTML delimiter DEFAULT DEFAULT Y N10168 HTTP User Agent Mozilla/4.76 Mozilla/4.76 Y Y10068 Inbound Protocol imap IMAP Y N10226 Inbound SSL Enabled N Y Y N10069 Inbound Server Name outlook.office365.com:993 Y N10082 Inbound Thread Count 1 0 Y Y10169 Inbound connection time out 120 120 Y N10170 Inbound message fetch size 100 100 Y N10070 Inbox Folder INBOX INBOX Y N10071 Inline Attachments N N N Y10175 Invalid More Information Response Notificatio WFMAIL:OPEN_INVALID_MORE_INFO WFMAIL:OPEN_INVALID_MORE_INFO Y Yn
10074 Invalid Response Notification WFMAIL:OPEN_INVALID WFMAIL:OPEN_INVALID Y Y10230 Invalid address list size 100 100 Y N10060 Log Level 5 1 Y Y10073 Mailer Node Name WFMAIL WFPROD Y N10084 Max Error Count 10 10 Y N10171 Maximum Ignore List size 1000 1000 Y N10172 Maximum Response lookup code cache size 100 100 Y N10173 Maximum returned email list size 100 100 Y N10072 Message Formatter oracle.apps.fnd.wf.mailer.Noti oracle.apps.fnd.wf.mailer.Noti Y NficationFormatter ficationFormatter
10240 More Information Response Warning Notificatio WFMAIL:MORE_INFO_ANSWERED WFMAIL:MORE_INFO_ANSWERED Y Yn
10077 Open FYI Notification WFMAIL:OPEN_MAIL_FYI WFMAIL:OPEN_MAIL_FYI Y Y10075 Open Notification WFMAIL:OPEN_MAIL WFMAIL:OPEN_MAIL Y Y10076 Open Notification (Direct Response Parsing) WFMAIL:OPEN_MAIL_DIRECT WFMAIL:OPEN_MAIL_DIRECT Y Y10176 Open Notification (More Information Request) WFMAIL:OPEN_MORE_INFO WFMAIL:OPEN_MORE_INFO Y Y10058 Outbound Cancelled Notification WFMAIL:CANCELED WFMAIL:CANCELED N Y10059 Outbound Closed Notification WFMAIL:CLOSED WFMAIL:CLOSED N Y10179 Outbound HTML Summary Notification WFMAIL:SUMHTML WFMAIL:SUMHTML Y Y10078 Outbound Protocol smtp SMTP Y N10232 Outbound SSL Enabled N N Y N10079 Outbound Server Name localhost Y N10092 Outbound Summary Notification WFMAIL:SUMMARY WFMAIL:SUMMARY Y Y10086 Outbound Thread Count 1 1 Y Y10094 Outbound Warning Notification WFMAIL:WARNING WFMAIL:WARNING Y Y10177 Outbound connection time out 120 120 Y N10274 OutboundUser N N10080 Processed Folder PROCESS PROCESS Y N10088 Processor Close on Read Timeout Y Y Y N10081 Processor Error Loop Sleep 60 60 Y N10085 Processor Max Loop Sleep 60 60 Y N10083 Processor Min Loop Sleep 5 5 Y N10087 Processor Read Wait Timeout 10 10 Y N10233 Processor defer reading event data Y Y Y N10089 Reply-to Address oracleprod@nanometrics.com Y Y10090 Reset NLS N N Y Y10229 SSL Trust store NONE /home/appprod/.keystore N N10091 Send Access Key Y N Y Y10228 Send e-mails for canceled notifications Y N Y N10227 Send warning for unsolicited e-mail Y Y Y Y10093 Test Address NONE NONE N Y10174 Unsolicited event threshold 2 2 Y N10054 Username oracleprod@nanometrics.com Y N
Enter the Comp Param Id to update : 10082
You have selected parameter : Inbound Thread CountCurrent value of parameter : 0

Enter a value

... [Content truncated for readability]

---

### 191. R12 Post Installation Setup

**Topic ID:** 2105

OptionsSymptom:
*(public)*R12 Post Installation Setup
Problem:
*(public)*R12 Post Installation Setup

The document covers step to configure

1. Forms Servlet Configuration
2. Changing password of Apps and all schema's.
3. Changing Home Page Logo to Corporate Logo.

Solution:
*(public)*R12 Post Installation Setup

The document covers step to configure

**A. Forms Servlet Configuration
-----------------------------------------------**
1. Source the environment on the application tier.
2. Stop all the application tier services:

On UNIX:
$INST_TOP/admin/scripts/adstpall.sh
3. Run the following script to disable Forms Socket Mode and re-enable Forms Servlet Mode:
$FND_TOP/bin/txkrun.pl -script=ChangeFormsMode \\
[-contextfile=] \\
[-mode=servlet] \\
-runautoconfig=\\
-appspass=

For example, on UNIX:
$FND_TOP/bin/txkrun.pl -script=ChangeFormsMode \\
-contextfile=$INST_TOP/appl/admin/mycontext.xml \\
-mode=servlet \\
-runautoconfig=No

The script prompts for the parameters if they are not passed as command line arguments.
4. If Autoconfig was not automatically executed as part of the preceding step, then run AutoConfig on the application tier:

On UNIX:$INST_TOP/admin/scripts/adautocfg.sh

5. Start all the application tier services:

On UNIX:$INST_TOP/admin/scripts/adstrtal.sh

----------------------------------------------------------------------------------------------------------------------------

**B. Changing password of Apps and all schema's.**
----------------------------------------------------------------------------
The FNDCPASS commands have to be run from the Unix command Line after sourcing the Application Tier Environment File. The value is brackets<> indicate that it has to be replaced with the new value. The exact syntax is shown below:

1. Changing APPS Password :

FNDCPASS apps/apps 0 Y system/SYSTEM APPLSYS

2. Changing Password for All Schema's other than APPS

FNDCPASS apps/0 Y system/ALLORACLE

3. Changing SYSADMIN Password

FNDCPASS apps/0 Y system/USER SYSADMIN

**
C. Changing Home Page Logo to Corporate Logo.**
-----------------------------------------------------------------------------

A. Make a backup copy of the FNDSSCORP.gif file. Name it FNDSSCORP.bak
B. Make the name of the custom logo FNDSSCORP.gif
C. Upload the new FNDSSCORP.gif file to the $OA_MEDIA directory
D. Log out and log back into the application

Reference Metalink Note :**421636.1**

---

### 192. R12 SSO

**Topic ID:** 2105

OptionsSymptom:
*(public)*R12 SSOProblem:
*(public)*R12 SSOSolution:
*(public)*BookmarkGo to End
Subject:**Integrating Oracle E-Business Suite Release 12 with 10g AS Oracle Internet Directory and Oracle Single Sign-On**Doc ID:**376811.1**Type:**HOWTO**Modified Date :**03-FEB-2009**Status:**PUBLISHED**

## Integrating Oracle E-Business Suite Release 12 with Oracle Internet Directory and Oracle Single Sign-On

#### January 2009This document contains information for integrating Oracle Application Server 10g Enterprise Edition with Oracle E-Business Suite release 12. You should read and understand all content described here before you begin your installation.The most current version of this document can be obtained in Metalink Note376811.1
There is achange logat the end of this document.
Section 1: Overview
Section 2: Features and Supported Architectures
Section 3: Components and Build Versions
Section 4: Before You Begin
Section 5: Pre-Install Tasks
Section 6: Implement Single Sign-On Support for the E-Business Suite
Section 7: Available Documentation
Appendix A: Advanced Configuration - Manual SSO/OID Registration
Appendix B: Known Issues

## ConventionsConventionMeaning\\Represents 'line continuation character'. It can be used to to break command (in UNIX) into two or more lines.`Mono space text`Represents command line text. Type this text exactly as shown.<> or [ ] or { }Text enclosed in angled or square brackets represents a variable. Substitute an appropriate value for the variable text. Do not type the brackets.Directory PathsDirectory paths in this document are relative to the top level installation directory for the Oracle E-Business Suite. e.g. if you installed the Oracle E-Business Suite under a directory named**/my/appsinstall**then**/Apache**in this document will mean the fully qualified path:**/my/appsinstall/apps/tech_st/10.1.3/Apache**.
CONTEXT_FILEFull path to the Applications context file on the application tier or database tier. The default locations are as follows.
Application tier context file:
$INST_TOP/admin/.xml

Database tier context file:
/appsutil/.xml

CONTEXT_NAMEThe CONTEXT_NAME variable specifies the name of the Applications context that is used by AutoConfig. The default is_. To find exact value of your instance CONTEXT_NAME you can refer variable s_contextname in Application tier context file.

## Important Directory LocationsThis section helps you identify some important directories of E-Business suite Instance, which are relevant for this document. Make sure you understand the purpose and location of these directories as explained below:
AbbreviationDirectory Location**[DB_ORACLE_HOME]**The ORACLE_HOME where your applications database is installed. The default location is .../db/tech_st/10.2.0**[ORIGINAL_ORACLE_BASE]**This is the directory under which the HTTP ORACLE_HOME and the 10.1.2 technology stack ORACLE_HOME is installed. The default location for this directory is/apps/tech_st**[ORAHTTP_TOP]**The directory where your HTTP Server is installed. The default location is [HTTP_ORACLE_HOME]/Apache**[HTTP_ORACLE_HOME]**The ORACLE_HOME where 10.1.3.0 or your HTTP Server is installed. The default location is .../apps/tech_st/10.1.3**AS 10.1.2 ORACLE_HOME**ORACLE_HOME installed by Oracle Applications on Application Tier used for forms/reports.**Ex. [ORIGINAL_ORACLE_BASE]/10.1.2****AS 10.1.3 ORACLE_HOME**ORACLE_HOME installed by Oracle Applications on Application Tier used for HTTP server and JAVA.**Ex. [ORIGINAL_ORACLE_BASE]/10.1.3**

## Advisory for E-Business Suite Customers using Oracle Application Server 10gOracle recommends that customers apply only OracleAS 10g Enterprise Edition releases and patches that have been certified with the E-Business Suite Release 12, as documented in the following Metalink Notes:

- Integrating Oracle E-Business Suite Release 12 with Oracle Internet Directory and Oracle Single Sign-On (Note 376811.1)
- Using Discoverer 10.1.2 with Oracle E-Business Suite Release 12 (Note 373634.1)
- Enabling SSL in Oracle E-Business Suite Release 12 (Note 376700.1)
- Using Oracle Portal 10g with Oracle E-Business Suite Release 12 (Note 380484.1)
- Installing and Configuring Web Cache 10g and Oracle E-Business Suite 12 (380486.1)

There may be specific circumstances where it is necessary for E-Business Suite customers to apply uncertified OracleAS 10g Enterprise Edition one-offs, patchsets, or MLRs. Oracle strongly recommends applying such patches only if the circumstances clearly demand it. Customers apply uncertified OracleAS 10g Enterprise Edition patches at their own risk, and Oracle strongly recommends that customers take complete backups of their OracleAS 10g + E-Business Suite integrated environments prior to patch application.
E-Business Suite customers may verify the certification status of specific OracleAS 10g Enterprise Edition patches by logging Service Requests via Oracle Metalink using the following information:

- Product: "Oracle Applications Tec

... [Content truncated for readability]

---

### 193. R12 log-in error 500 Internal ServerError java.lang.NoClassDefFoundError

**Topic ID:** 2105

OptionsSymptom:
*(public)*Errors:
Browser:
500 Internal ServerError
java.lang.NoClassDefFoundError at oracle.apps.fnd.sso.AppsLoginRedirect.AppsSetting(AppsLoginRedirect.java:120) at oracle.apps.fnd.sso.AppsLoginRedirect.init(AppsLoginRedirect.java:161)
Application.log:
html: Error initializing servlet
java.lang.NoClassDefFoundError

Problem:
*(public)*Errors:
Browser:
500 Internal ServerError
java.lang.NoClassDefFoundError at oracle.apps.fnd.sso.AppsLoginRedirect.AppsSetting(AppsLoginRedirect.java:120) at oracle.apps.fnd.sso.AppsLoginRedirect.init(AppsLoginRedirect.java:161)
Application.log:
html: Error initializing servlet
java.lang.NoClassDefFoundError

Solution:
*(public)*

#### Compiled JSP files are removed or corruptedIn Applications Release 12, class files for .jsp's are not compiled at runtime for performance reasons. If the files are removed, directories may be changed or files may become corrupted
Example Error in Debug Mode:
Missing class: _OA
Missing class: _AppsLocalLogin
Missing class: _OAInfo
Missing class: _jsp._fnd._aoljtest
javax.servlet.ServletException: oracle.classloader.util.AnnotatedClassNotFoundException:
Solution:
Compile associated class files using ojspCompile.pl:
`$FND_TOP/patch/115/bin/ojspCompile.pl --compile --flush -p 20`
Oracle*MetaLink*Note 215268.1 contains complete syntax and definition

---

### 194. R12.0.6 maintenance patch upgrade

**Topic ID:** 2105

OptionsSymptom:
*(public)*Need to upgrade to EBS R12.0.6Problem:
*(public)*Need to upgrade to EBS R12.0.6Solution:
*(public)*The Oracle E-Business Suite 12.0.6 Release Update Pack is available for download from Oracle MetaLink (Patch 6728000). Individual product family RUPs, fully translated patches for supported languages, and consolidated online help (Patch 7109200) are also available. The*Oracle E-Business Suite Release Update Pack Readme, Release 12.0.6*(Note 743368.1) lists the patches included in RUP6 and provides instructions for applying them. New and changed functionality is described in the*Oracle E-Business Suite Release Content Document, Release 12.0.6*(Note 404152.1).

Subject:**Oracle E-Business Suite Release Update Pack Readme, Release 12.0.6**Doc ID:**743368.1**Type:**BULLETIN**Modified Date :**08-DEC-2008**Status:**PUBLISHED****In this Document**
Purpose
Scope and Application
Oracle E-Business Suite Release Update Pack Readme, Release 12.0.6
Applying the Release Update Pack
Post-Update Steps
List of Included Patches
Change Record
Documentation Accessibility

---

## Applies to:Application Install
Information in this document applies to any platform.

## Purpose

The 12.0.6 Release Update Pack (RUP6) combines patches created across the E-Business Suite after the initial release of Oracle Applications 12.0 into a thoroughly tested, high-quality release pack. You apply it*only*to an existing Release 12.0, 12.0.1, 12.0.2, 12.0.3, 12.0.4, or FIN and HRMS family RUP5 system. Note that RUP6 is cumulative and delivers error corrections and system updates included in RUP1 (12.0.1), RUP2 (12.0.2), and RUP3 (12.0.3), RUP4 (12.0.4), FIN and HRMS family RUP5, along with those included in RUP6 (12.0.6), to bring your 12.0 system to the full 12.0.6 Release Update level.

## Scope and Application

Several product family RUPs included in RUP6 are available individually and as such, may contain conditions and prerequisites that apply to its application. TheList of Included Patcheslater in this readme contains links for each product family RUP. These links connect you to a readme with specific instructions for that product family. You should read each of these individual readmes carefully to determine the steps for applying the associated RUP if you plan to apply the product family RUP separately.
**Note:**It is important that you read and follow the instructions in the***latest****Oracle Applications Release Installation and Upgrade Notes, Release 12*for your platform. These notes contain the most up-to-date requirements for a successful application of RUP6. You can find these notes,along with other Release 12.0 documentation, in*Oracle Applications Documentation Resources, Release 12*(Doc ID: 394692.1).

## Oracle E-Business Suite Release Update Pack Readme, Release 12.0.6

### Applying the Release Update Pack

To apply RUP6, follow these steps. If you are upgrading from 11i to Release 12.0, complete the upgrade, including the post-upgrade steps, before you apply RUP6.

**Pre-requisite to 7305220 patch:**
Run the adgrants.sql script as a user that can connect as SYSDBA to grant privileges to selected SYS objects and create PL/SQL profiler objects.

Usage:

1. Create $ORACLE_HOME/appsutil/admin on the database server.

2. Copy adgrants.sql (UNIX) from this patch directory to
$ORACLE_HOME/appsutil/admin.
Or, copy adgrants_nt.sql (Windows) from this patch directory to
%ORACLE_HOME%\\appsutil\\admin.

3. Set the environment to point to ORACLE_HOME on the database server.

4. Use SQL*Plus to run the script:

UNIX:
$ sqlplus /nolog
SQL> connect / as sysdba
SQL> @$ORACLE_HOME/appsutil/admin/adgrants.sql
(Note: critical patch 6767273 skipped)

- Use AutoPatch to apply R12.AD.A.DELTA.6 (patch7305220) before you complete any of the other steps in this section. Do not merge this patch with any other patch. R12.AD.A.DELTA.6 must be applied separately. Refer to*Oracle Applications DBA Software Updates, Release 12.0.6*(Doc ID: 736655.1) for more information about R12.AD.A.DELTA.6.
- Use AutoPatch to apply RUP6 (patch6728000) and follow the instructions in the patch readme file.
- Use AutoPatch to apply the latest consolidated online help patch (7109200) and follow the instructions in the patch readme file.

### Post-Update Steps

- Update database tier nodes with the RUP6 code level.
After you have updated to Release 12.0.6, perform the following post-update steps to update all database tier nodes with the code level provided by RUP6:
**Application tier**:

- As the APPLMGR user, run the environment (UNIX) or the command (WINDOWS) file for the current APPL_TOP.
**UNIX**
.`.//APPS.env`

**Windows**
`\\envshell.cmd`

- Run AutoConfig on the APPL_TOP.
- Run the admkappsutil.pl utility to create the file appsutil.zip in the/admin/out directory.
`perl/bin/admkappsutil.pl`
**Note:**For details on how to run AutoConfig and create appsutil.zip, refer to*Using AutoConfig to Manage System Configurations in Oracle Applications Rele

... [Content truncated for readability]

---

### 195. Report Builder:Warning: REP-0004: Unable to open user preference file.

**Topic ID:** 2105

OptionsSymptom:
*(public)*

### Report Builder:Warning: REP-0004: Unable to open user preference file.**Oracle E-Business Suite R12 Report Builder:Release 10.1.2.2.0 Warning: REP-0004: Unable to open user preference file.
**
**Error:**

REP-0004: Warning: Unable to open user preference file.

Problem:
*(public)*Solution:
*(public)***Solution

**Copy prefs.ora from $ORACLE_HOME/tools/admin to $HOME

cp $ORACLE_HOME/tools/admin/prefs.ora $HOME/prefs.ora

---

### 196. Setup IE8 to work with EBS R12 (forms)

**Topic ID:** 2105

OptionsSymptom:
*(public)*Not able to launch forms in EBS R12 on IE8 an both XP and Vista.Problem:
*(public)*Not able to launch forms in EBS R12 on IE8 an both XP and Vista.Solution:
*(public)*Go to IE8 -> Tools -> Internet Options -> Security -> Internet -> Custom Level -> Disable XSS Filter.

Repeat the same process for Trusted Sites

---

### 248. Install Agile 9.3

**Topic ID:** 2114

OptionsSymptom:
*(public)*Install Agile 9.3Problem:
*(public)*Install Agile 9.3Solution:
*(public)*1. Install Oracle 10.2.0.1
2. Install Oracle 10.2.0.1 companion products into same
ORACLE_HOME as step1
3. Install Oracle 10.2.0.4 into same ORACLE_HOME as step1
4. Create Agile database (refer to Database Installation Guide)
Sournce environment
copy agile9300db folder from existing server to new server
Copy .profile from existing server to new server and modify
ORACLE_SID, ORACLE_HOME, PATH accordingly
# mkdir -p /u01/oradata
# chown oracle:dba /u01/oradata
$ su - oracle
$ mkdir -p /u01/app/oracle/admin
$ cd /home/oracle/agile9301db
Modify the agile9dbinstance.sh script to match the mount points
on your computer.
$ chmod u+x agile9dbinstance.sh
$ ./agile9dbinstance.sh
Configuring the listener.ora File
$ vi $ORACLE_HOME/network/admin/listener.ora
$ vi $ORACLE_HOME/network/admin/tnsnames.ora
5. Create ORABPEL schema
cd /home/oracle/1013AS_linux32/install/soa_schemas/irca
sh irca.sh
Enter database "host port serviceName" [localhost 1521 orcl]:
sfa-agl03 1531 agile9
Enter password for ORABPEL: orabpel
Enter password for ORAESB: oraesb
Enter password for ORAWSM: orawsm
6. Install Oracle Application Server 10.1.3.1
cd /home/oracle/1013AS_linux32/
./runInstaller -ignoreSysPrereqs
Go with advance option
User with DB privilges: system
Database user password:
Hostname and Port: sfa-agl03:1531
Service Name: agile9
Specify port configuration option: Automatic
AS Instance Name: agile
AS Administrator username: oc4jadmin
AS Administrator password: admin1
Configure this as an Administration OC4J instance: unchecked
OC4J instance Name: oc4j_soa
Cluster Topology Configuration: unchecked Access this OC4J
from a separate Oracle HTTP Server
Check status
/u01/app/oracle/OracleAS/10.1.3/opmn/bin/opmnctl status
7. Upgrade SOA to 10.1.3.4
Download and apply patch 7272722 into above installed SOA
10.1.3 ORACLE_HOME
$ unzip p7272722_101340_LINUX.zip
$ cd Disk1
$ ./runInstaller
8. Install Agile PLM 9.3
Copy Disk1_Linux folder to stage area
$ cd Disk1_Linux
$ chmod u+rx setup_lin.bin
Linux:
$ ./setup_lin.bin
username: admin
Commpany: Sakura FineTek USA Inc
Installation Set: Custom
Select all three application: Application server,
FileManager and API
Select Basic Mode
Select where to install Agile 9.3 components: /u01/app/agile93
Oracle Application Server home directory:
/u01/app/oracle/oracleAS/10.1.3
Hostname: default
Java Heap size: 1024
Web server information
Host: sfa-agl04.sakuraus.com
Port: 7777
Agile Viewer:
Host: sfa-agl04.sakuraus.com
Port: 5099
Agile 9.3 database details
Admin user password: admin1
Agile File Manager:
Host: sfa-agl04.sakuraus.com
Port: 8080
Tomcat: 8080
Agile File Manager Vault Storage Directory: /u01/app/agilevault
Recycle opmn services
9. Configuring JMS Resources
Restart the Oracle Application Server instance:
oracle_home\\opmn\\bin\\opmnctl stopall
oracle_home\\opmn\\bin\\opmnctl startall
Check the status of the Oracle Application Server (OC4JGroup)
and HTTP Server components:
oracle_home\\opmn\\bin\\opmnctl status
All of the OC4JGroup and HTTP Server components should be alive.
Run the configuration script to configure the Agile application
-related JMS settings:
UNIX: /u01/app/agile93/agileDomain/bin/configure.sh
10. Deploying Agile PLM
Run the following command:
UNIX: /AGILE_HOME/agileDomain/bin/DeployAgilePLM.sh
Check the default_group~home~default_group~1.log file in the
following directory to verify that the Agile application is deployed: oracle_home\\opmn\\logs\\
11. Start agile filemanager
To start the File Manager on UNIX:
11.1 Open a terminal window.
11.2 Change to the /u01/app/agile93/apache-tomcat-6.0.18/bin
directory.
11.3 Set and export the JAVA_HOME variable on the command line:
JAVA_HOME=/u01/app/agile93/jdk
export JAVA_HOME
11.4 Start the File Manager:
./startup.sh
11.5 Stop the File Manager
./shutdown.sh -force
11.6 Validating the File Manager Installation
http://sfa-agl03.sakuraus.com:8080/Filemgr/Configuration
http://sfa-agl03.sakuraus.com:8080/Filemgr/AttachmentServlet

12 Install AutoVue 19.3.2
12.1 Copy AutoVue software to destination
12.2 Launch installer
./setup_av_lin.bin

User name: admin
Company name: Sakura FineTek USA Inc
Choose install components
Select 'AutoVue for Agile PLM' and 'Upgrade AutoVue 19.3 client libraries'
AutoVue product
select 'AutoVue 2D professional for Agile
AutoVue Server Installation type
select 'New Install'
Install location: /u01/app/agile93
Hostname: sfa-agl08.sakuraus.com
Port: 5099
12.3 Re-deploy FileManager
Stop tomcat services
mkdir $AGILE_TOP/webapps.old
mv $AGILE_TOP/webapps/Filemgr $AGILE_TOP/webapps.old/
Start tomcat service
Check to make sure $AGILE_TOP/webapps/Filemgr is re-
deployed
12.4 Start AutoVue for Agile PLM
Connect to vnc session (very important)
cd $AGILE_HOME/AVS/bin
./jvueserver &
Open a web browser on client pc to verifyhttp://sfa-
agl08.sakuraus.com:8080/Filemgr/Configuration

Agile Viewer
Host: sfa-agl03.sakuraus.com
Port: 5099

... [Content truncated for readability]

---

### 198. Start/Stop mwa services on R12

**Topic ID:** 2105

OptionsSymptom:
*(public)*Problem:
*(public)*Start/Stop mwa services on R12 e-business environmentSolution:
*(public)*http://troubleshootingappsdba.blogspot.com/2009/10/mwa-server-in-r12.html

Login as application owner and source the environment file

1. Startup the MWA servermwactl.sh start2. Shutdown the MWA servermwactl.sh -login adminuid/pwd stop_force3. Startup MWA Dispatchermwactl.sh start_dispatcher4. Shutdown MWA Dispatchermwactl.sh stop_dispatcher
By default these scripts were not included in adstpall.sh and adstrtal.sh scripts. To add them enable1. s_other_service_group_status2. s_mwastatusin context file and run autoconfig.
If you want to check port number for mwa. Look at following paramters in context file:1. s_mwaPortNo.2. s_mwaTelnetPortNo.Comment:
*(internal)*Prior to R12:1. The MWA server startup files were located under "$MWA_TOP/bin" directory.2. The MWA Server configuration files were located under "$MWA_TOP/secure" directory.In R121. Scripts are under $INST_TOP/admin/scripts2. Config files are under $INST_TOP/admin/install

From 12.0.6:
Stop mwa service
$ $ADMIN_SCRIPTS_HOME/mwactl.sh -login apps/stop

Start mwa service
$ $ADMIN_SCRIPTS_HOME/mwactl.sh -login apps/start

Check mwa status
$ $ADMIN_SCRIPTS_HOME/mwactl.sh -login apps/status

---

### 199. adpatch fails with aijmtabAddTaskTimingColumns: Error running adtasktim.sql, error code (1)

**Topic ID:** 2105

OptionsSymptom:
*(public)*adpatch fails with aijmtabAddTaskTimingColumns: Error running adtasktim.sql, error code.
apps account is locked
Problem:
*(public)*adpatch fails to apply patch #5753621 with aijmtabAddTaskTimingColumns: Error running adtasktim.sql, error code (1)

apps account shows locked(timed)

Solution:
*(public)*The profile has not been set to unlimited and is still set at the default value of # as per :

AD_PATCH_MONITOR_PROFILE FAILED_LOGIN_ATTEMPTS PASSWORD #
Checked by sql

set pagesize 300
col profile format a25
col limit format a10
select PROFILE, RESOURCE_NAME, RESOURCE_TYPE, LIMIT
from dba_profiles
where profile='AD_PATCH_MONITOR_PROFILE';

PROFILE RESOURCE_NAME RESOURCE LIMIT
------------------------- -------------------------------- -------- ----------
AD_PATCH_MONITOR_PROFILE COMPOSITE_LIMIT KERNEL DEFAULT
AD_PATCH_MONITOR_PROFILE SESSIONS_PER_USER KERNEL DEFAULT
AD_PATCH_MONITOR_PROFILE CPU_PER_SESSION KERNEL DEFAULT
AD_PATCH_MONITOR_PROFILE CPU_PER_CALL KERNEL DEFAULT
AD_PATCH_MONITOR_PROFILE LOGICAL_READS_PER_SESSION KERNEL DEFAULT
AD_PATCH_MONITOR_PROFILE LOGICAL_READS_PER_CALL KERNEL DEFAULT
AD_PATCH_MONITOR_PROFILE IDLE_TIME KERNEL DEFAULT
AD_PATCH_MONITOR_PROFILE CONNECT_TIME KERNEL DEFAULT
AD_PATCH_MONITOR_PROFILE PRIVATE_SGA KERNEL DEFAULT
AD_PATCH_MONITOR_PROFILE FAILED_LOGIN_ATTEMPTS PASSWORD 3
AD_PATCH_MONITOR_PROFILE PASSWORD_LIFE_TIME PASSWORD 60
AD_PATCH_MONITOR_PROFILE PASSWORD_REUSE_TIME PASSWORD DEFAULT
AD_PATCH_MONITOR_PROFILE PASSWORD_REUSE_MAX PASSWORD DEFAULT
AD_PATCH_MONITOR_PROFILE PASSWORD_VERIFY_FUNCTION PASSWORD DEFAULT
AD_PATCH_MONITOR_PROFILE PASSWORD_LOCK_TIME PASSWORD .0416
AD_PATCH_MONITOR_PROFILE PASSWORD_GRACE_TIME PASSWORD 10
16 rows selected.
SQL> select profile , resource_name, limit from dba_profiles where resource_name like '%FAIL%';
PROFILE RESOURCE_NAME LIMIT
------------------------- -------------------------------- ----------
DEFAULT FAILED_LOGIN_ATTEMPTS 10
AD_PATCH_MONITOR_PROFILE FAILED_LOGIN_ATTEMPTS 3
EM_OAM_MONITOR_PROFILE FAILED_LOGIN_ATTEMPTS 3
SQL> select username, profile from dba_users where username='APPS';
USERNAME PROFILE
------------------------------ -------------------------
APPS DEFAULT
SQL> select username, profile from dba_users where username='APPLSYS';

USERNAME PROFILE
------------------------------ -------------------------
APPLSYS DEFAULT
SQL> SQL> SQL>
SQL> alter profile AD_PATCH_MONITOR_PROFILE limit failed_login_attempts unlimited;
Profile altered.
SQL> alter profile default limit failed_login_attempts unlimited password_lock_time 1/1440;
Profile altered.
*)*MLSubject:**adpatch Ora-28000 Account Locked apps**Doc ID:**420001.1**

---

### 200. Discoverer service

**Topic ID:** 2113

OptionsSymptom:
*(public)*Discoverer 10g is downProblem:
*(public)*Discoverer 10g is downSolution:
*(public)*1. Start 10g infrastructure service
$ sshoasprdn@prod-app
[prod-app.emtek.epi:oasprdn] /d01/oas/prdnas/as10g/dbs
> . oraenv
ORACLE_SID = [prdnas] ?
[prod-app.emtek.epi:oasprdn] /d01/oas/prdnas/as10g/dbs
>
[prod-app.emtek.epi:oasprdn] /d01/oas/prdnas/as10g/dbs
> sqlplus /nolog
SQL*Plus: Release 10.1.0.5.0 - Production on Mon Jun 1 11:09:41 2009
Copyright (c) 1982, 2005, Oracle. All rights reserved.
SQL> connect / as sysdba
Connected to an idle instance.
SQL> startup
ORACLE instance started.
Total System Global Area 281018368 bytes
Fixed Size 779000 bytes
Variable Size 228859144 bytes
Database Buffers 50331648 bytes
Redo Buffers 1048576 bytes
Database mounted.
Database opened.
SQL> exit
Disconnected from Oracle Database 10g Enterprise Edition Release 10.1.0.5.0 - Production
With the Partitioning, OLAP and Data Mining options
[prod-app.emtek.epi:oasprdn] /d01/oas/prdnas/as10g/dbs
> cd ../network/admin
[prod-app.emtek.epi:oasprdn] /d01/oas/prdnas/as10g/network/admin
> ls
listener.ora samples shrept.lst sqlnet.ora tnsnames.ora
[prod-app.emtek.epi:oasprdn] /d01/oas/prdnas/as10g/network/admin
> vi *
5 files to edit
# listener.ora Network Configuration File: /d01/oas/prdnas/as10g/network/admin/listener.ora
# Generated by Oracle configuration tools.
SID_LIST_LISTENER =
(SID_LIST =
(SID_DESC =
(SID_NAME = PLSExtProc)
(ORACLE_HOME = /d01/oas/prdnas/as10g)
(PROGRAM = extproc)
)
)
LISTENER =
(DESCRIPTION_LIST =
(DESCRIPTION =
(ADDRESS_LIST =
(ADDRESS = (PROTOCOL = TCP)(HOST = prod-app.emtek.epi)(PORT = 1521))
)
(ADDRESS_LIST =
(ADDRESS = (PROTOCOL = IPC)(KEY = EXTPROC1521))
)
)
[prod-app.emtek.epi:oasprdn] /d01/oas/prdnas/as10g/network/admin
> lsnrctl start
LSNRCTL for Linux: Version 10.1.0.5.0 - Production on 01-JUN-2009 11:10:37
Copyright (c) 1991, 2004, Oracle. All rights reserved.
Starting /d01/oas/prdnas/as10g/bin/tnslsnr: please wait...
TNSLSNR for Linux: Version 10.1.0.5.0 - Production
System parameter file is /d01/oas/prdnas/as10g/network/admin/listener.ora
Log messages written to /d01/oas/prdnas/as10g/network/log/listener.log
Listening on: (DESCRIPTION=(ADDRESS=(PROTOCOL=tcp)(HOST=prod-app.emtek.epi)(PORT=1521)))
Listening on: (DESCRIPTION=(ADDRESS=(PROTOCOL=ipc)(KEY=EXTPROC1521)))
Connecting to (DESCRIPTION=(ADDRESS=(PROTOCOL=TCP)(HOST=prod-app.emtek.epi)(PORT=1521)))
STATUS of the LISTENER
------------------------
Alias LISTENER
Version TNSLSNR for Linux: Version 10.1.0.5.0 - Production
Start Date 01-JUN-2009 11:10:37
Uptime 0 days 0 hr. 0 min. 0 sec
Trace Level off
Security ON: Local OS Authentication
SNMP ON
Listener Parameter File /d01/oas/prdnas/as10g/network/admin/listener.ora
Listener Log File /d01/oas/prdnas/as10g/network/log/listener.log
Listening Endpoints Summary...
(DESCRIPTION=(ADDRESS=(PROTOCOL=tcp)(HOST=prod-app.emtek.epi)(PORT=1521)))
(DESCRIPTION=(ADDRESS=(PROTOCOL=ipc)(KEY=EXTPROC1521)))
Services Summary...
Service "PLSExtProc" has 1 instance(s).
Instance "PLSExtProc", status UNKNOWN, has 1 handler(s) for this service...
The command completed successfully

$ $ORACLE_HOME/opmn/bin/opmnctl startall

2. Start 10g discoverer
$ sshobiprdn@prod-app
[prod-app.emtek.epi:obiprdn] /d01/oas/prdnbi/as10g/opmn/bin
> ./opmnctl startall
3. Test discoverer 10g
http://prod-app.emtek.epi:7778/discoverer/viewer
http://prod-app.emtek.epi:7778/discoverer/plus

To resolve OEM web server conflict with Discoverer web service, performed the following:

/d01/oem10g/oms10g/opmn/bin/opmnctl stopall

cd /d01/oem10g/oms10g/opmn/bin
mv opmnctl opmnctl.notrun
mv opmn opmn.norun

We disabled OEM console startup at system level as well. This scripts is dated 10/31/2006 originally.
# vi /etc/rc3.d/S99gcstartup
Comment out following lines
if [ -f /d01/oem10g/oms10g/install/unix/scripts/omsstup ]; then
. /d01/oem10g/oms10g/install/unix/scripts/omsstup
fi

Disabled discoverer 4i startup script on prod-app server
$ vi $CONTEXT_FILE

$ mv $COMMON_TOP/admin/scripts/${CONTEXT_NAME}/addisctl.sh $COMMON_TOP/admin/scripts/${CONTEXT_NAME}/addisctl.sh.norun

---

### 201. Emtek DMZ Configuration

**Topic ID:** 2113

OptionsSymptom:
*(public)*Emtek DMZ ConfigurationProblem:
*(public)*Emtek DMZ ConfigurationSolution:
*(public)*Subject:**DMZ Configuration with Oracle E-Business Suite 11i**Doc ID:**287176.1**
To allow external user authentication, need to make the following update due to different internal and external domain name:

update icx_parameters set session_cookie_domain = null;
1 row updated.
SQL> SQL> commit;

============================================================================

Development DMZ URL:
https://web-dev.emtek.com
Production DMZ URL:
https://web.emtek.com

===============================================================================================================
DMZ Configurations:
1. Make sure $IAS_ORACLE_HOME/Apache/Apache/conf/httpd.conf has the following line uncommented:

include "/uxx/app/xxxlora/iAS/Apache/Apache/conf/url_fw.conf"

2. Make sure url_fw.conf has the following settings:

For DEV DMZ:
RewriteRule ^/$https://web-dev.emtek.com:443/oa_servlets/AppsLogin[R,L]

For Prod DMZ:
RewriteRule ^/$https://web.emtek.com:443/oa_servlets/AppsLogin[R,L]

Make sure INITIAL PAGE does not have any specific URL like "RewriteRule ^/$ /OA_HTML/ibeCZzpHome.jsp [R,L]" which can override the log-in page.

For both Dev and Prod DMZ:

#RewriteRule ^/$ /OA_HTML/ibeCZzpHome.jsp [R,L]

RewriteRule ^/OA_HTML/jsp/fnd/fndhelp\\.jsp$ - [L]
RewriteRule ^/pls/[^/]*/fnd_help.search$ - [L]
RewriteRule ^/pls/[^/]*/fnd_help.Advanced_Search_Page$ - [L]
RewriteRule ^/pls/[^/]*/fndgfm/fnd_help.get/(.*) - [L]

#RewriteRule ^/OA_HTML/oksEntitlementsUsageDetails\\.jsp$ - [L]
#RewriteRule ^/OA_HTML/oksEntitlementsProductDetails\\.jsp$ - [L]

RewriteRule ^/OA_HTML/AnonymousLogin\\.jsp$ - [L]
RewriteRule ^/OA_HTML/SelfRegistration\\.jsp$ - [L]

RewriteRule ^/OA_HTML/ibeC.*\\.jsp$ - [L]
RewriteRule ^/OA_HTML/ibcGetAttachment\\.jsp$ - [L]
RewriteRule ^/OA_HTML/jtfdload\\.jsp$ - [L]
RewriteRule ^/OA_HTML/jtfDownload\\.jsp$ - [L]
RewriteRule ^/OA_HTML/jtftmplh\\.jsp$ - [L]
Add the following:
RewriteRule ^/OA_HTML/xxEmtekibeCAcdLogin\\.jsp$ - [L]
RewriteRule ^/OA_HTML/ibeCZzpHome.jsp$ - [L]

================================================================================================
To enable new responsiblity in DMZ, do the following:
1. Set the "Responsibility Trust Level" profile to External for the requested responsiblity.

Login to Oracle E-Business Suite as sysadmin user using the internal URL

Select System Administrator Responsibility

Select Profile / System

From the 'Find system profile option Values' window, select the responsibility that you want to make external

Query for %RESP%TRUST%. You will see a profile option named 'Responsibility trust level'. The value for this profile option at site level will be Normal.

Set the value of this profile option for the chosen responsibility to External at responsibility level (not site level). The site-level value should remain Normal
2. Bounc Apache on DMZ external app server. (No need to bounce internal app server)

3. Confirm you can see the responsiblity from DMZ/external URL.

---

### 202. Emtek DR Failover Procedure

**Topic ID:** 2113

OptionsSymptom:
*(public)*Problem:
*(public)*Solution:
*(public)***Emtek Disaster Recovery Process**

**Database (See em1:/home/oraprdn/readme.stdby):**
--------------------------------------------------------------------------------------------------
Set up DR database for synchronization.
SQL> startup nomount;
SQL> alter database mount standby database;
SQL>recover standby database == (done by syncstdby.job on the primary database, see prod-db:/home/oraprdn/bin/syncstdby.job)
Start sync job and schedule check sync job.
nohup ./syncstdby.job &
45 3 * * * (cd /home/oracle/bin; ./chksync.sh)
--------------------------------------------------------------------------------------------------
To open for read-only mode:
SQL> alter database open read only;
--------------------------------------------------------------------------------------------------
To fail over to the standby database:
SQL> alter database activate standby database;
SQL> alter database open; (alternatively, recycle database)
-- Need to create redo logs as DR instance has very small ones by default.
SQL> alter database add logfile group 10 ('/d01/oradata/prdndata/log10a.dbf',
'/d01/oradata/prdndata/log10b.dbf') size 500m;

**Note:
1.**How to propagate new datafiles from primary to standby database
RECOVER MANAGED STANDBY DATABASE CANCEL;
select file#,name from v$datafile where name like '%UNNAMED%';
ALTER DATABASE CREATE DATAFILE unnamed datafile AS proper filename;
RECOVER MANAGED STANDBY DATABASE DISCONNECT FROM SESSION;
alter system set STANDBY_FILE_MANAGEMENT = AUTO;

**2.**Please make sure to check Daily DR Synchronization report, and confirm that the primary and DR database are not off by more than couple sequences. Else you need to intervene and bring the database to synchronization.

**3.**Prior to activating DR database for testing, make a backup of all database files:
/d01/oradata/prdndata
/d02/oradata/prdndata
select member from v$logfile; -- not exist in DR
select name from v$controlfile;
select name from v$datafile;
select name from v$tempfile;

**4.**If the primary and DR database ever becomes out of sync, then run /ahi/bin/chksync.sh script to find out what the sync is at the DR site compared to the primary site. And then run /ahi/bin/fixsync.sh passing in the sequence # of the DR instance retrieved from the chksync.sh script.
***********************************************************************************************************************************************************************
**Applications (See em1:/home/applprdn/readme.dr):
**--------------------------------------------------------------------------------------------------
**Note:
**1. Make sure hosts file has the IP address of DR server.
2. After bringing over binaries from Emtek, need to make changes to oprocmgr.conf and httpd_pls.conf to include DR server name.
See $HOME/DR.
Start DR environment:
Start database:
1. Log in as root.
2. Change hostname to admin server by running "hostname prod-db.emtek.epi".
3. Start database and listener.
Start concurrent admin tier:
1. Confirm hostname is prod-db.
2. Log in as applprdn.
3. . prod_adm.env
4. Start all services.
Start apps tier:
1. Log in as root
2. Change hostname to app server by running "hostname prod-app.emtek.epi".
3. Log in as applprdn.
4. . prod_app.env
5. Start all services except for 806 listener (adalnctl.sh).

Start DR environment:
To stop, follow the reverse order starting with apps tier using adstpall.sh.
===============================================================================
APPENDIX:
When bringing the database in read-write mode, need to activate standby database to avoid below errors in apps:
AD Administration error:
The following ORACLE error:
ORA-00604: error occurred at recursive SQL level 1
ORA-16000: database
occurred while executing the SQL statement:
SELECT to_char(APPLSYS.AD_SESSIONS_S.NEXTVAL) FROM SYS.DUAL
-------------------------------------------------------------------------------
"Unexpected error" when trying to log in to self-service home page:
JSP Error
Exception:
oracle.apps.fnd.common.PoolException: Exception creating new Poolable object.
You have encountered an unexpected error. Please contact the System Administrator for assistance.
ML 418130.1 which gives this cause and solution:
Cause: Un-synchronized data in APPLSYS.WF_LOCAL_USER_ROLES:HZ_PARTY
begin apps.wf_local_synch.BULKSYNCHRONIZATION(P_ORIG_SYSTEM=>'ALL',
P_PARALLEL_PROCESSES=>2,
P_LOGGING=>'LOGGING', P_RAISEERRORS=>TRUE,
P_TEMPTABLESPACE=>'APPS_TS_TX_DATA'); END;
-------------------------------
Tue Jan 20 05:07:41 PST 2009
-------------------------------
[Jan 20, 2009 5:07:58 AM PST]:1232456878809:Thread[Thread-16,10,main]:-1:-1:prod-app.emtek.epi:172.1.0.80:8100:16000:UNEXPECTED:[fnd.common.logging.DebugEventManager.handlerException]:java.lang.Exception: /aferror.log (Permission denied)
at oracle.apps.fnd.common.logging.FileHandler.(FileHandler.java:103)
at oracle.apps.fnd.common.logging.FileHandler.(

... [Content truncated for readability]

---

### 203. Emtek PIX configuration

**Topic ID:** 304

OptionsSymptom:
*(public)*Document PIX configurationProblem:
*(public)*Solution:
*(public)*Current Configuration is:

: Saved
:
PIX Version 6.3(5)
interface ethernet0 auto
interface ethernet1 auto
interface ethernet2 auto
nameif ethernet0 outside security0
nameif ethernet1 inside security100
nameif ethernet2 dmz security50
enable password p09XHEldAuRZC.V. encrypted
passwd p09XHEldAuRZC.V. encrypted
hostname epifw
domain-name emtek
clock timezone PDT -8
clock summer-time PDT recurring
fixup protocol dns maximum-length 512
fixup protocol ftp 21
fixup protocol h323 h225 1720
fixup protocol h323 ras 1718-1719
fixup protocol http 80
fixup protocol pptp 1723
fixup protocol rsh 514
fixup protocol rtsp 554
fixup protocol sip 5060
fixup protocol sip udp 5060
fixup protocol skinny 2000
fixup protocol smtp 25
fixup protocol sqlnet 1521
fixup protocol tftp 69
names
object-group network out_acl
description internet access
network-object host 10.10.10.3
network-object host 10.10.10.4
network-object host 10.10.10.6
network-object host 10.10.10.7
network-object host 10.10.10.8
network-object host 10.10.10.9
network-object host 10.10.10.11
network-object host 10.10.10.17
network-object host 10.10.10.20
network-object host 10.10.10.21
network-object host 10.10.10.23
network-object host 10.10.10.24
network-object host 10.10.10.25
network-object host 10.10.10.26
network-object host 10.10.10.27
network-object host 10.10.10.28
network-object host 10.10.10.29
network-object host 10.10.10.86
network-object host 10.10.10.95
network-object host 10.10.11.22
network-object host 10.10.11.195
network-object host 10.10.11.196
network-object host 10.10.11.202
network-object host 10.10.11.204
network-object host 10.10.11.205
network-object host 10.10.10.215
network-object host 10.10.10.155
network-object host 10.10.10.51
object-group network VPN
network-object host 10.10.10.80
network-object host 10.10.10.68
network-object host 10.10.10.121
network-object host 10.10.10.82
network-object host 10.10.10.88
network-object host 10.10.30.53
network-object host 10.10.30.30
network-object host 10.10.10.99
network-object host 10.10.20.20
network-object host 10.10.30.18
network-object host 10.10.30.208
network-object host 10.10.11.190
network-object host 10.10.11.199
network-object host 10.10.10.87
network-object host 10.10.11.224
network-object host 10.10.11.230
network-object host 10.10.11.236
network-object host 10.10.10.40
network-object host 10.10.11.205
network-object host 10.10.10.89
network-object host 10.10.10.125
network-object host 10.10.11.235
network-object host 10.10.11.234
network-object host 10.10.11.254
network-object host 10.10.10.24
network-object host 10.10.10.23
network-object host 10.10.10.25
network-object host 10.10.10.26
network-object host 10.10.10.27
network-object host 10.10.10.28
object-group network vpn
network-object host 10.10.10.51
access-list 105 permit tcp object-group out_acl any eq ftp-data
access-list 105 permit tcp object-group out_acl any eq ftp
access-list 105 permit tcp object-group out_acl any eq ssh
access-list 105 permit tcp object-group out_acl any eq smtp
access-list 105 permit tcp object-group out_acl any eq www
access-list 105 permit tcp object-group out_acl any eq pop3
access-list 105 permit tcp object-group out_acl any eq https
access-list 105 permit tcp object-group out_acl any eq domain
access-list 105 permit udp object-group out_acl any eq 20
access-list 105 permit udp object-group out_acl any eq 21
access-list 105 permit udp object-group out_acl any eq domain
access-list 105 permit tcp object-group out_acl any eq 8000
access-list 105 permit tcp object-group out_acl any eq pptp
access-list 105 permit ip any host 205.178.146.50
access-list 105 permit ip any host 194.22.107.232
access-list 105 permit ip host 10.10.10.109 any
access-list 105 permit ip host 10.10.11.187 any
access-list 105 permit ip host 10.10.10.10 any
access-list 105 permit ip host 10.10.10.12 any
access-list 105 permit ip host 10.10.10.13 any
access-list 105 permit ip host 10.10.10.14 any
access-list 105 permit ip host 10.10.10.22 any
access-list 105 permit ip host 10.10.10.41 any
access-list 105 permit ip host 10.10.10.9 any
access-list 105 permit ip host 10.10.30.35 any
access-list 105 permit ip host 10.10.11.186 any
access-list 105 permit ip host 10.10.11.227 any
access-list 105 permit ip host 10.10.30.56 any
access-list 105 permit ip host 10.10.11.192 any
access-list 105 permit ip host 10.10.10.11 any
access-list 105 permit ip host 10.10.11.226 any
access-list 105 permit ip host 10.10.30.17 any
access-list 105 permit ip host 10.10.30.19 any
access-list 105 permit ip host 10.10.10.169 any
access-list 105 permit ip host 10.10.11.155 any
access-list 105 permit ip host 10.10.11.170 any
access-list 105 permit ip host 10.10.10.71 any
access-list 105 permit ip host 10.10.10.76 any
access-list 105 permit ip host 10.10.10.16 any
access-list 105 permit ip host 10.10.10.18 any
access-list 105 permit ip host 10.10.10.38 any
access-list 10

... [Content truncated for readability]

---

### 204. Emtek Prod DMZ startup and shutdown

**Topic ID:** 2113

OptionsSymptom:
*(public)*start/stop prod-dmz
Problem:
*(public)*start/stop emtek prod-dmzSolution:
*(public)*Startup:
(1) make sure Dell agent is not running. (root: renamed /opt/dell/srvadmin/iws/bin )
(2) make sure iptables is stopped (root: /etc/init.d/iptables stop)
(3) start oracle stuff (oracle)
(4) start apache by: /usr/sbin/apachectl startssl ; /usr/sbin/apachectl start
(5) Test by going to https://web.emtek.com

Shutdown:
(1) when shutting down, shut down oracle stuff first
(2) if apache is shut down first, it will automatically shut down oracle web server

---

### 205. Emtek cloning QA

**Topic ID:** 2113

OptionsSymptom:
*(public)*Problem:
*(public)*Emtek cloning QASolution:
*(public)*7. QA testing after cloning
7.1 Test Forms login and query data in forms
Login to application as SYSADMIN and launch forms
Navigation: System Administrator -> Concurrent -> Requests (Submit 'Active Users' job and check the output and log file)
7.2 Check to make sure all concurrent managers are up

Login from Unix level as Apps Owner and grep for 'LIBR' process.
Command: ps -ef|grep -i LIBR (we should see more than one LIBR process with that Apps owner)

7.3 Submit 'active user' report to make sure reports run successfully.
Navigation: System Administrator -> Concurrent -> Requests (Submit 'Active Users' job and check the output and log file)
7.4 Check to make sure xxcus_top set correctly within application on conc tier and forms tier

vi $APPL_TOP/custom*.env
Change XXCUS_TOP to $APPL_TOP/xxcus/11.5.0 (Give full path instead of $APPL_TOP)
comment out forms60 line
----------------------------------------------------------------------------
vi $APPL_TOP/admin/adovars.env
Check whether customization section is commented out during post clone steps
----------------------------------------------------------------------------
7.5 Verify XML temp path set correctly.
Go into the responsibility: XML Publisher Administrator
Navigate to Home > Administration > Properties > General
Set the Temporary directory to $COMMON_TOP/temp (give the full path instead of $COMMON_TOP)

7.6 Test workflow notification

Verify workflow settting is to set outbound SMTP server to 'localhost' and disable inbound service.
Check 'Reply to address' is set to'oraXXX@emtek.com'
Testing: Login to Application as SYSADMIN

Navigation: Workflow Administrator Web Applications -> Oracle Applications Manager -> Workflow Manager
check if 'Notification Mailers' are up then click on 'Notification Mailers' -> Workflow Notification Mailer (click on Workflow Notification Mailer)
check all the settings.
To send a Test Notification Click on 'Test Mailer' from the above screen and select 'Larry' from the list and click ok.
A test notification will be sent tosupport@appshosting.comif the workflow is configured correctly.

7.7 Verify font file location set correctly $OA_JRE_TOP/jre/lib/xdo.cfg on conc tier only.
Check whethercomn is changed tocomn.

7.8 Test DMZ tier using Appendix B in Emtek cloning Document
» FAQ » Emtek » Emtek cloning procedure

---

### 206. Emtek cloning procedure

**Topic ID:** 2113

OptionsSymptom:
*(public)*Clone e-business 11.5.10.2Problem:
*(public)*Clone e-business 11.5.10.2 from production to refresh non-production environmentSolution:
*(public)*Emtek 11i cloning

1. Clean existing application and database
1.1 Shutdown existing application and database
$ ssh appl@
$ $COMMON_TOP/admin/scripts/${CONTEXT_NAME}/stpall.sh apps/
$ ssh appl@
$ $COMMON_TOP/admin/scripts/${CONTEXT_NAME}/stpall.sh apps/
$ ssh ora@
$ $ORACLE_HOME/appsutil/scripts/${CONTEXT_NAME}/addlnctl.sh stop
$ $ORACLE_HOME/appsutil/scripts/${CONTEXT_NAME}/addbctl.sh stop
1.2 Backup keyfiles
$ ssh ora@
$ $HOME/util/clone/backup_db_keyfiles.sh
$ ssh appl@
$ $HOME/util/clone/backup_apps_keyfiles.sh
$ ssh appl@
$ $HOME/util/clone/backup_apps_keyfiles.sh
1.3 Remove database and application files
$ ssh appl@
$ nohup rm -rf $COMMON_TOP &
$ nohup rm -rf $APPL_TOP &
$ nohup rm -rf $IAS_ORACLE_HOME &
$ ssh appl@
$ nohup rm -rf $COMMON_TOP &
$ nohup rm -rf $APPL_TOP &
$ nohup rm -rf $IAS_ORACLE_HOME &
$ ssh ora@
$ nohup rm -rf $ORACLE_HOME &

2. Prepare source for cloning
2.1 Run preclone on source tiers
$ ssh ora@
$ $ORACLE_HOME/appsutil/scripts/${CONTEXT_NAME}/adpreclone.pl
$ ssh appl@
$ $COMMON_TOP/admin/scripts/${CONTEXT_NAME}/adpreclone.pl
$ ssh appl@
$ $COMMON_TOP/admin/scripts/${CONTEXT_NAME}/adpreclone.pl
2.2 Tar files on source tiers
$ ssh ora@
$ cd $ORACLE_HOME/../..
$ tar cpf ${ORACLE_SID}db.tar ${ORACLE_SID}db
$ ssh appl@
$ cd $COMMON_TOP/..
$ tar cpf ${TWO_TASK}appl.tar ${TWO_TASK}appl
$ nohup tar cpf ${TWO_TASK}comn.tar ${TWO_TASK}comn \\
--exclude 'prdncomn/_pages' \\
--exclude 'prdncomn/temp' \\
--exclude 'prdncomn/admin/log' \\
--exclude 'prdncomn/admin/out' &
$ tar cpf ${TWO_TASK}ora.tar ${TWO_TASK}ora
$ ssh appl@
$ nohup tar cpf ${TWO_TASK}appl.tar ${TWO_TASK}appl &
$ nohup tar cpf ${TWO_TASK}comn.tar ${TWO_TASK}comn &
$ nohup tar cpf ${TWO_TASK}ora.tar ${TWO_TASK}ora &

3. Clone db tier
3.1 Copy db binaries
$ ssh ora@
$ scp -p ora@:/a01/app/db.tar /d01/app/
$ cd /d01/app
$ tar cpfdb.tar
3.2 Fix catalog issue
$ ssh ora@
$ rman
RMAN> connect catalog rman/rmanrcat@rcat
RMAN> connect target
RMAN> startup nomount
RMAN> list backup
3.3 Prepare for database restore
$ ssh ora@
$ vi $ORACLE_HOME/dbs/init.ora
Change sga_target to 800m and pga_xx_target to 600m
Check following directories exist
$ ls /d01/oradata/data
$ ls /d02/oradata/data
3.4 Restore database
Review source database RMAN backup log file to find last archivelog sequence included in the backup set.
$ vi $HOME/restore_.cmd
# RMAN script to restore source rman back to destination server
connect catalog rman/rmanrcat@rcat
connect target
shutdown
startup nomount
run {
allocate channel c1 device type disk;
allocate channel c2 device type disk;
## set until time "to_date('04/21/2008 21:15:00','mm/dd/yyyy hh24:mi:ss')";
set until sequence<64050>;
restore controlfile;
alter database mount;
restore database;
## recover database;
## sql 'alter database open resetlogs';
release channel c1;
release channel c2;
}
$ rman cmdfile=restore_.cmd
Copy neccessary archive log files (up to last log sequence in source RMAN backup log) from source server to destination server
$ scp -p ora@:/**/
$ sqlplus /nolog
SQL> connect / as sysdba
SQL> recover database using backup controlfile until cancel;
SQL> alter database open resetlogs;
SQL> shutdown
SQL> startup
SQL> shutdown
3.5 Clone database
$ su - root
$ mv /d01/app/db /d01/app/db
$ chown -R ora:dba /d01/app/db
$ mv /d01/oradata/data /d01/oradata/data
$ chown -R ora:dba /d01/oradata/data
$ mv /d02/oradata/data /d02/oradata/data
$ chown -R ora:dba /d02/oradata/data
$ ssh ora@
$ cp $HOME/util/clone/_.xml $ORACLE_HOME/appsutil/
$ rm /d0*/oradata/data/cntrl*.*
$ perl /a01/app/db/10.2.0/appsutil/clone/bin/adcfgclone.pl dbTier $ORACLE_HOME/appsutil/
/_.xml
Change init parameters
$ vi $ORACLE_HOME/dbs/init.ora
Change sga_target to 800m. Change pga_aggregate_target to 700m
Change processes to 400 and sessions to 800
Verify UTL_FILE_DIR parameter

4. Clone concurrent node
4.1 Copy binaries
$ ssh appl@
$ cd /a01/app
$ scp -p appl@:$APPL_TOP/../appl.tar .
$ tar xpfappl.tar
$ scp -p appl@:$COMMON_TOP/../comn.tar .
$ tar xpfcomn.tar
$ scp -p appl@:$COMMON_TOP/../ora.tar .
$ tar xpfora.tar
$ mvapplappl
$ mvcomncomn
$ mvoraora
$ mkdir /a01/app/comn/_pages
$ mkdir /a01/app/comn/temp
$ mkdir /a01/app/comn/admin/log
$ mkdir /a01/app/comn/admin/out
$ chmod 777 /a01/app/comn/temp
4.2 Clone concurrent tier
$ cp -p $HOME/util/clone/_.xml /a01/app/appl/admin/
$ perl /a01/app/comn/clone/bin/adcfgclone.pl appsTier /a01/app/appl/admin/_.xml

5. Clone forms tier
5.1 Copy binaries
$ ssh appl@
$ cd /d01/app
$ scp -p appl@:$APPL_TOP/../appl.tar .
$ tar xpfappl.tar
$ scp -p appl@:$COMMON_TOP/../comn.tar .
$ tar xpfcomn.tar
$ scp -p appl@:$COMMON_TOP/../ora.tar .
$ tar xpfora.tar
$ mvapplappl
$ mvcomncomn
$ mvoraora
$ mkdir /a01/app/comn/_pages
$ mkdir /a01/app/comn/temp
5.2 Clone forms tier
$ cp -p $HOME/util/clone/_.xml /d01/app/appl/admin/
$ perl /a01/app/comn/

... [Content truncated for readability]

---

### 210. Oracle Email Problem For PO

**Topic ID:** 2113

OptionsSymptom:
*(public)*Email to Supplier for PO documents has stopped functioning.Problem:
*(public)*Purchasing has reported that the Email to Supplier for PO documents has stopped functioning.This was functioning normal and sending emails.Solution:
*(public)*1. In OAM, navigate to Site Map / Notification Mailer / Edit

2. Change the value of "Reply-To Address" parameter to a correctly formatted email address ,
wfprod1@emtek.comand Apply

---

### 211. PROD-DB RAM usage baseline

**Topic ID:** 304

OptionsSymptom:
*(public)*Taking baseline of RAM usage on prod-db serverProblem:
*(public)*Solution:
*(public)*Server: prod-db

With everything down
[root@prod-db ~]# free
total used free shared buffers cached
Mem: 8304488 2938212 5366276 0 27812 221528
-/+ buffers/cache: 2688872 5615616
Swap: 4096564 0 4096564

DB up
[root@prod-db ~]# free
total used free shared buffers cached
Mem: 8304488 3055436 5249052 0 33296 293784
-/+ buffers/cache: 2728356 5576132
Swap: 4096564 0 4096564

Apps up
$ free
total used free shared buffers cached
Mem: 8304488 4050244 4254244 0 59280 767780
-/+ buffers/cache: 3223184 5081304
Swap: 4096564 0 4096564

30 minutes after everything up
[root@prod-db ~]# free
total used free shared buffers cached
Mem: 8304488 5402804 2901684 0 84216 1962764
-/+ buffers/cache: 3355824 4948664
Swap: 4096564 0 4096564

---

### 212. Oracle Email Problem For PO

**Topic ID:** 304

OptionsSymptom:
*(public)*Email to Supplier for PO documents has stopped functioning.Problem:
*(public)*Purchasing has reported that the Email to Supplier for PO documents has stopped functioning.This was functioning normal and sending emails.Solution:
*(public)*1. In OAM, navigate to Site Map / Notification Mailer / Edit

2. Change the value of "Reply-To Address" parameter to a correctly formatted email address ,
wfprod1@emtek.comand Apply

---

### 223. Blackberry Error Adding User "user is in delete pending state on server please recover the user before adding user"\r\n

**Topic ID:** 301

OptionsSymptom:
*(public)*If user is stuck in pending delete,youcan drop user from database using the following:

1. Open command prompt
2. Type "osql -E"
3. 1>use BESMgmt
4. 2>go
5. 1>delete from userconfig where mailboxsmtpaddr=''''
6. 2>go
Problem:
*(public)*Solution:
*(public)*

---

### 216. Troubleshoot Emtek backup issue

**Topic ID:** 304

OptionsSymptom:
*(public)*RMAN backup failsProblem:
*(public)*RMAN backup failsSolution:
*(public)*Troubleshooting Emtek backup issue
1. Emtek prdn Incremental RMAN Backup failed
=============================
RMAN-00569: =============== ERROR MESSAGE STACK FOLLOWS ===============
RMAN-00571: ===========================================================
RMAN-03002: failure of backup command at 05/20/2009 22:20:19
RMAN-06059: expected archived log not found, lost of archived log compromises recoverability
ORA-19625: error identifying file /a02/oradata/prdnarch/prdn_arch1_78400_645467994.dbf
ORA-27037: unable to obtain file status
Linux Error: 2: No such file or directory
Additional information: 3
ANALYSIS:
This error is due to archivelog files are out of sync with RMAN catalog.
Solution:
Manually run crosscheck in RMAN or run RMAN maintenance job. Then resubmit rman incremental job by add a one time cron job
# su - root
# crontab -e
30 00 21 5 4 /bin/su - oraprdn -c "/home/scripts/rman/backup_prdn_incr1.sh 2>&1 > /home/scripts/rman/rmancron.log"
Minute Hour DAY MONTH DAY OF WEEK

---

### 217. Troubleshoot application locking

**Topic ID:** 2113

OptionsSymptom:
*(public)*Application database lock
Problem:
*(public)*Application database lock
Solution:
*(public)*FIND BLOCKING LOCK in DATABASE:
select s1.username ||'@'|| s1.machine
|| ' ( SID=' || s1.sid || ' ) is blocking '
|| s2.username ||'@'|| s2.machine || ' ( SID=' || s2.sid || ' ) ' AS blocking_status
from v$lock l1, v$session s1, v$lock l2, v$session s2
where s1.sid=l1.sid and s2.sid=l2.sid
and l1.BLOCK=1 and l2.request > 0
and l1.id1 = l2.id1
and l2.id2 = l2.id2 ;
BLOCKING_STATUS
--------------------------------------------------------------------------------
APPS@prod-app.emtek.epi( SID=793 ) is blockingAPPS@prod-db.emtek.epi( SID=10
95 )
SQL> select * from v$lock where block=1
FIND OUT LOCKED OBJECTS:
select
c.owner,
c.object_name,
c.object_type,
b.sid,
b.serial#,
b.status,
b.osuser,
b.machine,
a.locked_mode
from
v$locked_object a ,
v$session b,
dba_objects c
where
b.sid = a.session_id
and
a.object_id = c.object_id
and
b.sid=793;

FIND OUT WHICH USER is BLOCKING:
select vs.sid, vs.serial#, vp.pid, vp.spid, sa.user_name, vs.action, vs.module
from fnd_signon_audit_view sa, v$process vp, v$session vs
where sa.process_spid = vp.spid and sa.pid = vp.pid
and vp.addr = vs.paddr
and vs.sid in (793, 1095)
If no rows select above, then run following query to identify user
select Sid,serial#, username,lockwait, status, OSUSER, PROCESS, MACHINE,TERMINAL,PROGRAM,MODULE,MODULE_HASH from v$SESSION where sid=793;

KILL UNIX PROCESS

---

### 219. ipayment and paypal integration

**Topic ID:** 2113

OptionsAttachment:OracleiPayment.pdf1.3 MBytesroots.zip125.4 KBytesSymptom:
*(public)*Config ipayment and paypal integrationProblem:
*(public)*Config ipayment and paypal integrationSolution:
*(public)*

**Configuration Steps for iPayment
**

**Node: dev-app, DB: devl
**

1.Add following in /etc/hosts

# Verisign Server for IPayment punchout

#216.113.190.200pilot-payflowpro.paypal.com

New IP address: 66.211.171.140

2.To generate Bank End Payment ECApp Servlet logging, add following in**$IAS_ORACLE_HOME/Apache/Jserv/etc/jserv.properties**

between# Begin customizations & # End customization:

#wrapper.bin.parameters=-DAFLOG_ENABLED=TRUE

#wrapper.bin.parameters=-DAFLOG_MODULE=iby%

#wrapper.bin.parameters=-DAFLOG_LEVEL=STATEMENT

#wrapper.bin.parameters=-DAFLOG_FILENAME=$IAS_ORACLE_HOME/Apache/Jserv/logs/iby.log

3.Update the CLASSPATHin**$APPL_TOP/admin/adovars.env**

/oracle/apps/db15ora/iAS/Apache/Jsdk/lib/jsdk.jar

/oracle/apps/db15ora/iAS/Apache/Jserv/libexec/ApacheJServ.jar

Regenerate your environment after the change

4.Verify/update the following profile options:

**Profile Option
**

**Value
**

ICX: Oracle Payment Server URL

**http://dev-app.emtek.epi:8005/oa_servlets/ibyecapp
**

IBY: ECAPP URL

**http://dev-app.emtek.epi:8005/oa_servlets/ibyecapp
**

IBY: HTTP Proxy

**http://dev-app.emtek.epi:8005
**

**
**

5.Verifying profiles are set at Site level only

```
col "Profile Option" for a30

```

```
col "Level" for a20

```

```
col "Level Value" for a15 trunc

```

```
SELECT t.user_profile_option_name "Profile Option",

```

```
       decode(a.level_id,10001,'Site',10002,'Application',10003,'Responsibility',10004,'User') "Level",

```

```
       decode(a.level_id,10001,'Site',10002,b.application_short_name,10003,c.responsibility_key,10004,d.user_name) "Level Value"

```

```
FROM   fnd_profile_option_values a,

```

```
       fnd_application b,

```

```
       fnd_responsibility c,

```

```
       fnd_user d,

```

```
       fnd_profile_options e,

```

```
       fnd_profile_options_tl t

```

```
WHERE  a.profile_option_id = e.profile_option_id

```

```
  AND  e.profile_option_name in ('ICX_PAY_SERVER','IBY_ECAPP_URL','IBY_WALLET_LOCATION','IBY_WALLET_PASSWD','FND_DB_WALLET_DIR')

```

```
  AND  a.level_value = b.application_id(+)

```

```
  AND  a.level_value = c.responsibility_id(+)

```

```
  AND  a.level_value = d.user_id(+)

```

```
  AND  t.profile_option_name = e.profile_option_name

```

```
  AND  t.language = 'US'

```

ORDER BY a.level_id desc;

Onlyone row for each profilemust be returned. All rows must indicate profile is set at'Site'level. Should more rows be returned, query results will show at which level and level detail (E.g: Application = AR, or USER = SYSADMIN) are the profiles set. Delete settings at all levels except Site Level.

**
**

**Installation Steps of VeriSign Servlet
**

**Node: dev-app, DB: devl
**

1.ftp following file under/d01/patches/ipayment

pfpro_ipayment_v432.zip

2.unzippfpro_ipayment_v432.zip

3.cd$PAYPAL_TOP

4.Stop Apache Server

$SCRIPTS/adapcctl.sh stop

5.Copy Verisign Files:

cp -rp $PAYPAL_TOP/payflowpro/ipayment/classes/com $IAS_ORACLE_HOME/Apache/Jserv/servlets/

cp -rp $PAYPAL_TOP/payflowpro/ipayment/classes/ibyextend $IAS_ORACLE_HOME/Apache/Jserv/servlets/

cp -rp $PAYPAL_TOP/payflowpro/ipayment/lib/* $APPL_TOP/iby/11.5.0/lib/.

cp -pr $PAYPAL_TOP/payflowpro/ipayment/paypal $ORACLE_TOP/8.0.6/

6.Download the Xerces-J 2.7.1 package (XML parser) called Xerces-J-bin.2.7.1.tar.gz from Apache�s archive download Web site at

http://archive.apache.org/dist/xml/xerces-j/

7.Extract the following files from this package and place them in the$APPL_TOP/iby/11.5.0/libdirectory:

  - xercesImpl.jar

  - xml-apis.jar

8.Not for JDK 1.4.x or higher: Download the JSSE from the following location:

http://java.sun.com/products/jsse/index-103.html

9.Not for JDK 1.4.x or higher: Place the following JSSE jar files into the$IAS_ORACLE_HOME/Apache/jdk/jre/lib/extdirectory:

  - jcert.jar

  - jnet.jar

  - jsse.jar

10.Encrypt your database password (no longer needed for v432 and above version)

cd $IAS_ORACLE_HOME/Apache/Jserv/servlets

/usr/java14/bin/java -classpath "." com/paypal/iPayment/util/EncryptPassword

11.Modify$ORACLE_HOME/paypal/vpsipayment.properties with following. (Very important)**Copy**$ORACLE_HOME/paypal to $ORACLE_HOME/verisign

hostname=pilot-payflowpro.paypal.com

port=443

timeout=45

proxyHost=

proxyPort=0

proxyUser=

proxyPwd=

baurl=pilot-payflowpro.paypal.com

termurl=http://dev-app.emtek.epi:8005/servlets/oramipp_Payee2VPS

# dburl=jdbc:oracle:thin:@dev-db.emtek.epi:1526:devl

dbuid=apps

# dbpwd=**

12.Modify$IAS_ORACLE_HOME/Apache/Jserv/etc/zone.properties with non-Windows contents of following between begin and end customization from $VERISIGN_TOP/payflowpro/ipayment/zone.properties.verisign

# Begin customizations

#

################################################

# VeriSign Servlet Customizations

#########

... [Content truncated for readability]

---

### 221. Install GRC, GCC, and PCG

**Topic ID:** 11

OptionsSymptom:
*(public)*Problem:
*(public)*Solution:
*(public)*

**PCG 7.3.1 (formerly Logical Apps):
**URL:http://oraapps.appshosting.com:8001<http://oraapps.appshosting.com:8001/>
User: sysadmin
Password: R!2p5apps
Responsibility: GRC Controls

**GRCC 8.5 (AACG and TCG):**
URL:http://ah46.appshosting.com:8080/grcc

**CCG 5.5.1:**
URL:http://ah46.appshosting.com:8080/ccg

Note 603186.1 - "Install Integra Apps CCG 5.X Login issue.'Page Cannot Be Displayed' or missing Graphics or Name JDBC is not bound in this Context".
Download the sample configuration file provided in the above note and compare it with your files

---

### 565. Rename Apex Workspace

**Topic ID:** 2104

---

### 233. SSM Datasheet

**Topic ID:** 901

OptionsSymptom:
*(public)*Problem:
*(public)*Solution:
*(public)*
**OS:
**oracle / cle!ora on ah99
orafus / fus!ora on ah103
VNC: :13 on ah103 , :99 on ah99 (same passwords as the OS user password.)
**
Database:**
ah99.appshosting.com / ssmdb.appshosting.com
elperico /Ssm#e1p (case sensitive with number 1 instead of lower case L)

SID: ssmp
system/ Ssm#Fus1

dbsnmp - dbsnmp991
sysman - sy5fus

**WebLogic:
**ah103.appshosting.com / ssm.appshosting.com
weblogic / Ssm#fus123

Log-on URL: http://ssm.appshosting.com:7001/console
https://ssm.appshosting.com:7002/console

Start weblogic on ah103:
From VNC session, /u01/app/oracle/Middleware/user_projects/domains/ssm_domain/startWebLogic.sh

Stop weblogic on ah103:
From any shell session, /u01/app/oracle/Middleware/user_projects/domains/ssm_domain/bin/stopWebLogic.shInstallation Notes:
1. Install JRockit JVM/JDK. (JRockit Mission Control 3.1.2 which includes Java 6,http://www.oracle.com/technology/software/products/jrockit/index.html)

2. Install Fusion Middleware 11gR1 (WebLogic Server 10.3.1).
http://www.oracle.com/technology/software/products/ias/htdocs/wls_main.html

3. Install ADF runtime to existing WebLogic server:
**WebLogic Server Installation document, section 35.6 Installing the ADF Runtime to the Weblogic iInstallation**and**35.7 Creating and Extending Oracle WebLogic Server Domains**describe the installation and configuration steps. The documentation mentions the Oracle Fusion Middleware 11g Application Developer Installer which includes the Oracle Enterprise Manager for Fusion Middleware but I was not able to find this online. OEM is recommended for managing the standalone environment like we have, so if you staff can install the OEM that would help greatly in our deployment.

Please verify that the**11.1.1.1.0**version of the libraries are installed. That should be accessible from the WebLogic server installation. It's possible that the libraries are installed but the domain has not yet been configured to accept ADF applications.
Customer Application URL:https://elperico.synergetic.org
test.cunderwood / Test123!

---

### 235. Install OBIEE 10g

**Topic ID:** 901

OptionsAttachment:obiee.swf977.3 KBytesobiee.swf.html663 BytesSymptom:
*(public)*Problem:
*(public)*Solution:
*(public)*Start install "setup -console" for non-GUI install.

Welcome page at /u00/oraobi/OracleBI/index_bi_ee.html

**Start OC4j:**/u01/obiee/OracleBI/setup/oc4j -start

**Start OBIEE services:**Needed to avoid java errors on log-in to Analytics and BI Publisher
cd /u01/obiee/OracleBI/setup
./run-saw.sh start (Needed for BI Analytics log-in)
./run-ccs.sh start
./run-sa.sh start

Installation directories:
OBIEE Home: /u01/obiee/OracleBIOBIEE Data: /u01/obiee/OracleBIData
Comment:
*(internal)*
BI Analytics:http://ctr.appshosting.com:9704/analytics(User ID/password: Administrator/Administrator)

BI Publisher:http://ctr.appshosting.com:9704/xmlpserver(User ID/password: Administrator/Administrator)

---

### 329. Create ACL for APEX mail

**Topic ID:** 2104

REPRODUCE apex_mail ACL issue
You can logon to throughhttp://ah128.appshosting.com:7780/pls/apexusing following test credantial.
Workspace: testmail
account: admin
password: admin
Got to 'SQL workshop' tab->SQL script->run script 'testmail' that I saved->This script sends a mail tosupport-group@appshosting.com
Loginhttp://ah128.appshosting.com:7780/pls/apex/apex_adminas admin user. Go to 'Manage service' tab ->mail queue-> send all mail. Then you will see following error in status column.
ORA-24247: network access denied by access control list (ACL)

To test mail funtion using utl_mail, you can use follwing procedure in sqlplus. This works fine.
SQL> connect TORACLE0
SQL> Begin
UTL_MAIL.SEND (
sender =>'leahc@trontechconsulting.com',
recipients =>'larry.zhao@appshosting.com');
end;
/

---PROCEDURE to test APEX_MAIL
DECLARE

l_body CLOB;
BEGIN

l_body := 'Thank you for your interest in the APEX_MAIL
package.'||utl_tcp.crlf||utl_tcp.crlf;

l_body := l_body ||' Sincerely,'||utl_tcp.crlf;

l_body := l_body ||' The APEX Dev Team'||utl_tcp.crlf;

apex_mail.send(
p_to =>'support-group@appshosting.com', -- change to your email address

p_from =>'support@appshosting.com', -- change to a real senders email address

p_body => l_body,

p_subj => 'APEX_MAIL Package - Plain Text message');
END;
/

CHECK ACL grants in the database as following
SQL> SELECT acl, principal, privilege, is_grant, TO_CHAR(start_date, 'DD-MON-YYYY') AS start_date,TO_CHAR(end_date, 'DD-MON-YYYY') AS end_date
FROM dba_network_acl_privileges;
ACL PRINCIPAL PRIVILE
---------------------------------------- -------------------- -------
IS_GRANT START_DATE END_DATE
-------------------- -------------------- -------------------
/sys/acls/local-access-users.xml APEX_030200 connect

GRANT local user ACL to APEX_30200 user
SQL> @grant1.sql
DECLARE
*
ERROR at line 1:
ORA-31003: Parent /sys/acls/ already contains child entry
local-access-users.xml
ORA-06512: at "SYS.DBMS_NETWORK_ACL_ADMIN", line 252
ORA-06512: at line 29
ORA-01403: no data found
SQL> begin
2 DBMS_NETWORK_ACL_ADMIN.DROP_ACL('local-access-users.xml');
3 end;
4 /
PL/SQL procedure successfully completed.
SQL> @grant1.sql
PL/SQL procedure successfully completed.
ACL
--------------------------------------------------------------------------------
PRINCIPAL
--------------------------------------------------------------------------------
PRIVILE IS_GRANT START_DATE END_DATE
------- -------------------- -------------------- --------------------
/sys/acls/local-access-users.xml
APEX_030200
connect true

CREATE mailserver ACL
SQL> @mailserver_acl.sql

GRANT mailserver_acl to APEX_030200 and end user
SQL> BEGIN
DBMS_NETWORK_ACL_ADMIN.add_privilege (
acl => 'mailserver_acl.xml',
principal => 'APEX_030200',
is_grant => TRUE,
privilege => 'connect',
position => NULL,
start_date => NULL,
end_date => NULL);
COMMIT;
END;
/
SQL> BEGIN
DBMS_NETWORK_ACL_ADMIN.add_privilege (
acl => 'mailserver_acl.xml',
principal => '',
is_grant => TRUE,
privilege => 'connect',
position => NULL,
start_date => NULL,
end_date => NULL);
COMMIT;
END;
/

APPENDIX A MAILSERVER_ACL defination
[orattc@ah3 ~]$ cat create_utl_smtp_acl.sql
set serveroutput on
show user;
create or replace procedure mailserver_acl(
aacl varchar2,
acomment varchar2,
aprincipal varchar2,
aisgrant boolean,
aprivilege varchar2,
aserver varchar2,
aport number)
is
begin
begin
DBMS_NETWORK_ACL_ADMIN.DROP_ACL(aacl);
dbms_output.put_line('ACL dropped.....');
exception
when others then
dbms_output.put_line('Error dropping ACL: '||aacl);
dbms_output.put_line(sqlerrm);
end;
begin
DBMS_NETWORK_ACL_ADMIN.CREATE_ACL(aacl,acomment,aprincipal,aisgrant,aprivilege);
dbms_output.put_line('ACL created.....');
exception
when others then
dbms_output.put_line('Error creating ACL: '||aacl);
dbms_output.put_line(sqlerrm);
end;
begin
DBMS_NETWORK_ACL_ADMIN.ASSIGN_ACL(aacl,aserver,aport);
dbms_output.put_line('ACL assigned.....');
exception
when others then
dbms_output.put_line('Error assigning ACL: '||aacl);
dbms_output.put_line(sqlerrm);
end;
commit;
dbms_output.put_line('ACL commited.....');
end;
/
show errors
begin
mailserver_acl(
'mailserver_acl.xml',
'ACL for used Email Server to connect',
'CONNECT',
TRUE,
'connect',
'localhost',
25);
end;
/
APPENDIX B ACL for UTL_MAIL
[orattc@ah3 ~]$ cat create_utl_mail_acl.sql
begin
DBMS_NETWORK_ACL_ADMIN.CREATE_ACL(
Acl => 'utlmailpkg.xml',
Description => 'Normal Access',
Principal => 'CONNECT',
Is_Grant => True,
Privilege => 'connect',
Start_Date => Null,
End_Date => Null);
End;
/
begin
DBMS_NETWORK_ACL_ADMIN.ADD_PRIVILEGE(
acl => 'utlmailpkg.xml',
principal => 'CONNECT',
is_grant => true,
privilege => 'resolve');
end;
/
begin dbms_network_acl_admin.assign_acl (
acl => 'utlmailpkg.xml',
host => 'localhost',
lower_port => 25,
upper_port => NULL);
end;
/

---

### 236. Install SOA Suite 11g and Web Center Suite 11g

**Topic ID:** 901

OptionsSymptom:
*(public)*Problem:
*(public)*Solution:
*(public)*
Repository Creation Utility:
processes >= 500
open_cursors >= 300
Use stand-alone WebLogic server which comes with ADF/ARF (instead of jdeveloper 11g with weblogic)
web logic domain: ahi_domain
user: weblogic/s0aw3b123
port 7001 / http
port 7002 / https

yum -y install elfutils-libelf-devel.x86_64
yum -y install libaio-devel.x86_64
Oracle_SOA1 under MWhome
$SOA_ORACLE_HOME/common/bin/config.sh
web logic domain: ahi_bam_domain
user: weblogic/s0aw3b123
admin BAM port 9001
web logic domain: ahi_soa_domain
user: weblogic/s0aw3b123
admin BAM port 9001

Install all of the components into a single domain at one time.

---

### 237. Installing Fusion Middleware Identity Management Suite

**Topic ID:** 901

# Installing Fusion Middleware Identity Management SuiteOptionsAttachment:WLS Install.doc134.5 KBytesRCU and New Domain Config.doc408.5 KBytesIDM Suite Install.doc798.5 KBytesSymptom:
*(public)*Problem:
*(public)*Solution:
*(public)***Pre-requisites:
**1. Install Web Logic Server (See WLS Install.doc).
2. Create repository for Fusion middleware (See RCU and New Domain Config.doc).

**Installation:**
1. Installation Oracle Fusion Middleware Identity Management Suite (See IDM Suite Installd.doc).**

---

### 238. Starting Oracle Fusion on Shared Fusion Server ah71

**Topic ID:** 901

OptionsSymptom:
*(public)*Problem:
*(public)*Solution:
*(public)*1. Log in as oradb and start fusdb listener and database.
2. Log in as oracle user and go to /u01/apps/oracle/fusion/middleware/user_projects/domains.
3. From each of the domain directory, run "startfusion.sh" to start Fusion admin servers.
4. Start managed servers by logging into WebLogic console.
i. Go tohttp://fusion.appshosting.com:port #>/console
ii. Log in as weblogic user
iii. Go to "Servers" link and then start all managed servers.

---

### 239. Bounce OTRS service

**Topic ID:** 1801

OptionsSymptom:
*(public)*Bounce OTRS servicesProblem:
*(public)*Solution:
*(public)***Stop OTRS service**
$ ssh username@otrs-l.appshosting.com
$ su - root
# /etc/init.d/otrs stop

$ su - oraotrs
kill postmaster services
$ crontab -e
comment out the line for Postmaster

$ su - oracle
$ . otrs.env
$ lsnrctl stop
$ sqlplus /nolog
SQL> connect /as sysdba
SQL> shutdown immediate

**Start OTRS service**
$ ssh username@otrs-l.appshosting.com
$ su - oracle
$ . otrs.env
$ sqlplus /nolog
SQL> connect /as sysdba
SQL> start
$ lsnrctl start

$ su - oraotrs
$ crontab -e
uncomment the line for Postmaster

$ su - root
# /etc/init.d/otrs start

---

### 240. Close OTRS ticket from backend

**Topic ID:** 1801

OptionsSymptom:
*(public)*Can't close some OTRS ticket from front end
Problem:
*(public)*When closing certain ticket (sent fromsupport@appshosting.com), OTRS creates new ticket.Solution:
*(public)*Logon to otrs-l.appshosting.com as oracle user password New...
Source environment
sqlplus /nolog
SQL> connect / as sysdba
Using following SQL to update tickets status.

1. Close individual ticket in database
update otrs.ticket set ticket_state_id='2' where tn='2009012710000636';
select * from otrs.ticket where tn='2009012010000149';
update otrs.ticket set ticket_state_id='2' where tn='2009012410000632';
select * from otrs.ticket where tn='2009012910000776';
2. Close tickets by title
select * from otrs.ticket where title like '%Emtek Tape Backup failed with 96%';
select * from otrs.ticket where lower(title) like '%greeting-cards%' and ticket_state_id<>'2';
update otrs.ticket set ticket_state_id='2' where title like '%Emtek Tape Backup failed with 96%';
update otrs.ticket set ticket_state_id='2' where lower(title) like '%greeting-cards%' and ticket_state_id<>'2';
3. Close tickets in particular queue
update otrs.ticket set ticket_state_id='2' where queue_id='42';

---

### 401. Adding printer in Linux

**Topic ID:** 2403

Follow the attached document.
**Prerequisite:
**First find out which server runs the concurrent managers. The printer should be set up on that server.
For E-Business Suite, concurrent manager server where the printer should be installed will run processes FNDLIBR.

**We need to email like this:**
Surya,There are multiple production servers and this printer needs to be set up on the concurrent manager server. Can you confirm and tell me which server runs the production concurrent managers? The DBA managing production should know this.

---

### 241. How to split large files and transfer over slow or unreliable network

**Topic ID:** 301

OptionsSymptom:
*(public)*network drops or stalls in middle of file transfer over slow or unreliable networkProblem:
*(public)*Solution:
*(public)*
1. Go to where the backup files are on source server, i.e. tp-prod02:/u03/oracle/backup/app2. Create one big compressed tar file for the backup files before splitting it to small files, i.e. tar... ; gzip.3. Split the big compressed tar file to bunch of small files using split.sh, i.e. split.sh.gz4. Transfer files using 4 scp sessions (use 4 different terminal sessions), i.e.scp spdir1/* tp-dr02:/u01/oracle/backup/sbx/appscp spdir2/* tp-dr02:/u01/oracle/backup/sbx/appscp spdir3/* tp-dr02:/u01/oracle/backup/sbx/appscp spdir4/* tp-dr02:/u01/oracle/backup/sbx/appOnce the transfer is complete, you can recreate the original files by doing the following on destination, i.e. tp-dr02 in this case:1. Go to where the backup files were transferred to, tp-dr02:/u01/oracle/backup/sbx/app
2. Recreate the compressed tar file by combining all small files, i.e. cat spfile* >.gz
3. Uncompress and untar the file, i.e. gunzip.gz; tar xvf
Comment:
*(internal)*spilt.sh:

if [ "$1" = " ]; then
echo "Specify valid file to split up."; exit 1
else
zFile=$1
fi
zNumStr=4
split -b 15m $zFile spfile
zTot=`ls spfile* | wc -l`
zEach=`expr $zTot / $zNumStr`
ls spfile* > total.lst
split -l $zEach total.lst totsp
#-> for begin
for i in $(seq $zNumStr); do
mkdir spdir$i
zSp=`ls | grep totsp | head -$i | tail -1`
for j in `cat $zSp`; do
mv $j spdir$i
done

done
#<- for end
stat spfile* 2>&1 >/dev/null
if [ "$?" = "0" ]; then
for i in spfile*; do
echo "Remaining split file $i going to spdir1."
mv $i spdir1
done
rm totsp*
fi
echo "Total number of files in split dir is `ls spdir?/* | wc -l`"
echo "Total number of files in total.lst file is `wc -l total.lst | awk '{print $1}'`"

---

### 332. BIB-7000 Cannot access X Server error in Notification Mailers

**Topic ID:** 2105

Symptom:

Getting error - "BIB-7000 Cannot access X Server" when tried clicking on Notification Mailer from
> System Admin -> Workflow Manger -> Throughput - Notification Mailers to check the status.

Solution:

**ATTEMPING TO VIEW GRAPHICS OR TRYING TO CONFIGURE THE JAVA MAILER HANGS [ID 351839.1]**
****
*Modified*10-JAN-2010*Type*PROBLEM*Status*PUBLISHED
**In this Document**
Symptoms
Changes
Cause
Solution
References

---

## Applies to:Oracle Applications Manager - Version: 11.5.9 to 11.5.10
Information in this document applies to any platform.

## SymptomsOn entering Oracle Applications Manager (OAM) to check on the status of workflow components (Workflow Manager, "Go" button), under Workflow Metrics, both Work Items and Agent Activity displayed the message .
"BIB-7000 Cannot access X Server"
Navigating to OAM to view Activity Monitors or other Graphics reflects the same error.
Also, when configuring the Java Mailer in OAM - the page hangs and then displays
"Page Cannot be Displayed"

## ChangesOAM requires the jserv.properties "wrapper.env=DISPLAY" setting to be consistent throughout the application environment and also it needs to correspond to the correct server where xhost is enabled.

## CauseThe DISPLAY setting is not consistent throughout the environment or xhost has not been enabled on the server where the DISPLAY setting is directed to.
If DISPLAY is set and xhost was enabled, another cause is, that the xhost session was not left running on the Xserver machine.

## SolutionAs ROOT on the Console machine with the Graphics Display
1) $ uname -n
>> record the exact value returned
2) - For LINUX:
$ cd /usr/X11/bin
or
$ cd /usr/X11R6/bin
- For SOLARIS:
$ cd /usr/openwin/bin
3) As root
$ xhost +
>> LEAVE THIS SESSION OPEN ON CONSOLE -- DO NOT "SU APPLMGR"

4) Open a New Session and signon as APPLMGR at the console

- echo $DISPLAY (Will show hostname:0. This is still incorrect)
- xclock (This will fail)
- export DISPLAY=:0
- xclock (Successful!)
- xhost +
- start services

5) On all the Nodes in this environment -- if this is a multiple node, then repeat on cp, forms/web & admin nodes
$ cd $IAS_ORACLE_HOME/Apache/Jserv/etc
$ cp jserv.properties jserv.properties.bak
6) $ vi jserv.properties
>> Search down for "wrapper.env=DISPLAY"

7) Reassure or change the setting to match the following syntax ( repeat on cp, forms/web & admin nodes)
wrapper.env=DISPLAY=:0

>> Setting this in OAM > AutoConfig > Edit Parameters and then running AutoConfig on all nodes
with accomplish the same thing

8) Restart all the services in the same APPLMGR sessions

9) If problem still exists when using VNC or Xvfb with JDK 1.4.2 or 1.5, proceed with instructions for setup below:
You are using J2SE 1.4.2 or J2SE 1.5 (this feature is not available in JDK 1.3.1)
You have jserv_ux_ias1022.properties version 15.80.115105.2 or higher. (patch TXK (FND) AUTOCONFIG TEMPLATE ROLLUP PATCH L (NOV 2005) or higher deliver support for this new feature)
The setting controlling the 'Headless' support for J2SE in the jserv.properties is the following:

wrapper.bin.parameters=-Djava.awt.headless=[true|false]
By default this is set to 'false'. To change this to 'true' and thus enabling the 'Headless' support feature perform the following steps:

Use context-editor to change value for %s_java_awt_headless% to 'true'
Run Autoconfig to recreate the configuration files
Verify that now the above mentioned setting in jserv.properties is set to 'true'
Run the AOLJ test "X Server Accessibility" and verify it shows the success message

Remarks:

The DISPLAY setting is not used anymore when 'Headless' support is enabled.
This Note only applies to Jserv. Non-java tools like Reports 6i may still require the X-server to be available in the environment.

---

### 245. Utilities need for working

**Topic ID:** 301

OptionsAttachment:AHVPN.pcf646 Bytesemtek_admin.pcf745 BytesSakura.pcf669 BytesSymptom:
*(public)*Problem:
*(public)*New employee to install utilities
Solution:
*(public)*
You can get started on your first day by getting the following utilities installed and getting familiar with our environment. You can just go through this one by one, and contact me with any questions. I will also schedule a time to go over these with you.D
Download CISCO VPN fromhttp://www.appshosting.com/vpn/vpnclient.exethen install it on your desktop or laptop. Import attached pcf file into cisco vpn client
Putty SSH tool
Download putty fromhttp://www.putty.org/
Server list: ah1.appshosting.com
ah3.appshosting.com
prod.appshosting.com
ah7-i.appshosting.com
ah9.appshosting.com
ah15.appshosting.com
ah17.appshosting.com
ah19.appshosting.com
ah23.appshosting.com
ah25.appshosting.com
ah43.appshosting.com
ah31.appshosting.com
cdb1.appshosting.com
cdb3.appshosting.com
em1.appshosting.com
otrs.appshosting.com
erdsystem1.appshosting.com
ise11i.appshosting.com
oraapps.appshosting.com
VNC tool
Download vnc viewer fromhttp://www.filewatcher.com/m/vnc-4_1_2-x86_win32_viewer.zip.138558.0.0.html
Winscp secure ftp tool
Download and install winscp fromhttp://www.filewatcher.com/m/winscp417.exe.1305600.0.0.html

Mostly used website for work. You can create a favorite folder called AppsHosting and save following URL link there.
http://www.appshosting.com
http://mail.appshosting.com
http://otrs.appshosting.com
http://monitor.appshosting.com/bb/
OTRS ticketing system athttp://otrs.appshosting.com

Once you get into OTRS, download and install CamStudio to record Windows sessions for documentation:
http://otrs.appshosting.com/oraotrs/index.pl?Action=AgentFileManager&Location=/Utility/CamStudio20.exe

Please install Yahoo messenger on your PC. Create ID (if you don't have one) and email us.
Yahoo Messenger contacts:
Sam Yun: isumyun
Ashok: ashok522
Larry She: database9i
Muhammed Ali: ah_voip
Srini: m_slu
Chao Zhao: zhchao9033
Jenny Manuel: jp_jameop
Kiran Kukunoor: kkiran.reddy
Murali cherukupalli: mcherukupalli

---

### 246. DSAKUI cloning procedure

**Topic ID:** 2114

OptionsSymptom:
*(public)*Cloning DSAKUIProblem:
*(public)*Cloning DSAKUISolution:
*(public)*DSAKUI cloning procedure
1. Backup key files on DSAKUI
2. Clean up existing DSAKUI application
3. Clean up existing DSAKUI database and software
4. Copy 920 ORACLE_HOME from production
4.1 Run preclone
4.2 Tar 920 ORACLE_HOME
4.3 Copy 920 ORACLE_HOME
5. Clone DSAKUI db from production cold backup
5.1 Copy cold backup to oracledev server
5.2 Clone DSAKUI database
6. Copy application binaries
6.1 Run preclone on production
6.2 Tar APPL_TOP, COMMON_TOP, 806_ORACLE_HOME and IAS_ORACLE_HOME
cat exclude.common
common/_pages
common/temp
common/admin/log
common/admin/out
nohup tar -cpfX /psakui/backup/patches/common.tar exlude.common common &
cat exclude.ora
product/iAS/Apache/Apache/logs
nohup tar -cpfX /psakui/backup/patches/ora.tar exclude.ora product &
for i in `ls *.gz`
do
ls $i
gunzip $i
sleep 7
done
6.3 copy above tar files to oracledev server
6.4 untar application binaries on oracledev
6.5 mkdir /dsakui/applmgr/product/iAS/Apache/Apache/logs
7. Clone application
7.1 Restore xml from backup dir
7.2 perl adcfgclone.pl appsTier /dsakui/applmgr/11510/admin/DSAKUI_oracledev.xml
8. Post clone steps
8.1 Fix customize environment variable
$ vi $APPL_TOP/custom*.env
Change XBOL_TOP to $APPL_TOP/xxcus/11.5.0
8.2 Fix concurrent manger not starting issue
$ ssh ora@
$ sqlplus apps
SQL>
CREATE OR REPLACE TRIGGER fndsm
AFTER INSERT OR UPDATE ON FND_NODES
FOR EACH ROW
BEGIN
if ( :new.NODE_NAME<> 'AUTHENTICATION' ) then
if ( (:new.SUPPORT_CP='Y')
or (:new.SUPPORT_FORMS='Y')
or (:new.SUPPORT_WEB='Y') ) then
fnd_cp_fndsm.register_fndsm_fcq(:new.NODE_NAME);
end if;
if (:new.SUPPORT_CP = 'Y') then
fnd_cp_fndsm.register_fndim_fcq(:new.NODE_NAME);
end if;
end if;
END;
/
SQL> commit;
SQL> EXEC FND_CONC_CLONE.SETUP_CLEAN;
SQL> COMMIT;
SQL> EXIT;
$ $ORACLE_HOME/appsutil/scripts/${CONTEXT_NAME}/adautocfg.sh
$ ssh appl@
$ $COMMON_TOP/admin/scripts/${CONTEXT_NAME}/adautocfg.sh
8.3 Update site name
System Administrator-> profile->system profile->Set 'Site Name' to 'cloned from production as of'
8.4 Update XML temp dir
Go into the responsibility: XML Publisher Administrator
Navigate to Home > Administration > Properties > General
Set the Temporary directory to $COMMON_TOP/temp
Restart services
8.5 Fix custom form not working issue
$ vi $IAS_ORACLE_HOME/Apache/Jserv/etc/formservlet.ini
XBOL_TOP=/dsakui/applmgr/CUSTOM/xbol/11.5.0

CONC-SM INIT NODE ERROR
or
"Could not initialize the Service Manager &SM_NAME. Verify that &NODE has been registered for concurrent processing."
This suggests a problem occurred in the initialization of the Service Manager. Did you register all nodes used in your system in FND_NODES? You must add entries to FND_NODES for all nodes you are using, even in single node environments. These entries are used to seed Service Manager entries. If you look at the Administer Concurrent Managers form and do not see any entries for Service Managers - one for each node, (and the profile option switch has been turned on) then you have not successfully registered your nodes.
Note:: Do NOT simply edit an already registered node to reflect your new node_name. For GSM you must register your node anew. If you have your node registered and there is a service manager listed and you still get this error, this would suggest a problem in the environment the FNDSM process is being spawned from. Test the environment script specified as 'MYAPPSORA' in the listener.ora entry and make sure it successfully creates an environment

---

### 253. Sakura data purging run book

**Topic ID:** 2114

OptionsSymptom:
*(public)*Purge dataProblem:
*(public)*Purge dataSolution:
*(public)*1. Purge workflow
1.1 Query all the Parent and Child Processes for XDPWFSTD
select item_type, parent_item_type, count(item_key)
from wf_items
where item_type in ('XDPWFSTD','WFERROR')
group by item_type, parent_item_type;
(record the result here)
1.2 Create a spooled list of XDPWFSTD parent & child process item_keys to purge
spool abortXDPWFSTD.sql
select 'exec WF_ENGINE.abortProcess('''||ITEM_TYPE||''','''||item_key||''');'
from wf_items
where item_type = 'XDPWFSTD'
and end_date is null
spool off
1.3 Abort these processes by running the script you just created
SQL> @abortXDPWFSTD.sql
1.4 Purge that Item Type
SQL> exec WF_PURGE.TotalPERM('XDPWFSTD');
1.5 Purge WFERROR
set pagesize 10000
spool abortWFERROR.sql
select 'exec WF_ENGINE.abortProcess('''||wi.ITEM_TYPE||''','''||wi.item_key||''');'
from wf_items wi
where wi.begin_date<'31-MAR-2004' and wi.end_date is null
and wi.item_type = 'WFERROR' and wi.parent_item_type is NULL;
spool off
SQL> @abortWFERROR.sql
SQL> execute wf_purge.total;
1.6 Purge notification
SQL> exec WF_PURGE.NOTIFICATIONS('WFERROR',SYSDATE,FALSE);
SQL> update WF_NOTIFICATIONS set mail_status = 'SENT' where mail_status = 'MAIL';
SQL> commit
SQL> @wfntfqup.sql
2. PURGE FND_LOG_MESSAGES 735138.1 and 332103.1
Run 'Purge Debug and Log messages' concurrent program
SQL> select count(1) from fnd_log_messages;
SQL> connect applsys/simple4u
SQL> truncate table fnd_log_messages;
SLQ> connect / as sysdba
SQL> select owner,segment_name,segment_type,bytes from dba_segments where segment_name='FND_LOG_MESSAGES'
3. PURGE FND_ENV_CONTEXT
Doc ID: 730617.1
3.1 Drop and recreate the FND_CONCURRENT_PROCESSES_N1 index.
SQL> select owner,object_type,object_name from all_objects where object_id in (33060,33064);
OWNER OBJECT_TYPE OBJECT_NAME
------------------------------ ------------------ ------------------------------
APPLSYS INDEX FND_CONCURRENT_PROCESSES_N1
SQL> @/dsakui/backup/patch/purge/cr_fnd_conc_processes_idx.sql
3.2 Rerun 'Purge concurrent request and/or Manager Data'

4. PURGE FND_STATS_HIST
Doc ID: 745442.1
4.1 Cleaned all history found in FND_STATS_HIST table be executing (FND_STATS.PURGE_STAT_HISTORY)
SQL> create index fnd_stats_hist_u2 on fnd_stats_hist(request_id) storage (initial 5m next 5m maxextents unlimited pctincrease 0 ) tablespace APPLSYSX ;
begin
for i in 1..565 loop
dbms_output.put_line(i*10000);
fnd_stats.purge_stat_history(i*10000,(i+1)150000);
end loop;
end;
/
4.2 Check that FND_STATS_HIST table is purged by executing following query:
SQL> SELECT COUNT(*) FROM FND_STATS_HIST;

5. PURGE FND_LOBS
Doc ID: 742822.1
5.1
select count(*) from fnd_lobs
where program_name in ('FNDATTCH','FND_HELP')
and expiration_date is null;
update fnd_lobs
set expiration_date=sysdate-30
where program_name in ('FNDATTCH','FND_HELP')
and expiration_date is null
and trunc(upload_date)5.2 Run the "Purge Obsolete Generic File Manager Data" job with parameters "Y,FNDATTACH"

6. Re-organize tables and indexes
6.1 Reorganize FND_ENV_CONTEXT table and index
SQL> alter table fnd_env_context move;
Table altered.
SQL> alter index FND_ENV_CONTEXT_U1 rebuild;
Index altered.
6.2 Re-organize FND_STATS_HIST table and indexes
SQL> connect applsys/simple4u
SQL> alter table FND_STATS_HIST move;
SQL> alter index FND_STATS_HIST_U1 rebuild;
SQL> drop index FND_STATS_HIST_U2;
6.3 REBUILD unusable indexes
SQL> select 'alter index '||owner||'.'||index_name||' rebuild;' from all_indexes
where status='UNUSABLE';

---

### 254. Sakura data purging run book

**Topic ID:** 2114

OptionsSymptom:
*(public)*Purge dataProblem:
*(public)*Purge dataSolution:
*(public)*1. Purge workflow
1.1 Query all the Parent and Child Processes for XDPWFSTD
select item_type, parent_item_type, count(item_key)
from wf_items
where item_type in ('XDPWFSTD','WFERROR')
group by item_type, parent_item_type;
(record the result here)
1.2 Create a spooled list of XDPWFSTD parent & child process item_keys to purge
spool abortXDPWFSTD.sql
select 'exec WF_ENGINE.abortProcess('''||ITEM_TYPE||''','''||item_key||''');'
from wf_items
where item_type = 'XDPWFSTD'
and end_date is null
spool off
1.3 Abort these processes by running the script you just created
SQL> @abortXDPWFSTD.sql
1.4 Purge that Item Type
SQL> exec WF_PURGE.TotalPERM('XDPWFSTD');
1.5 Purge WFERROR
set pagesize 10000
spool abortWFERROR.sql
select 'exec WF_ENGINE.abortProcess('''||wi.ITEM_TYPE||''','''||wi.item_key||''');'
from wf_items wi
where wi.begin_date<'31-MAR-2004' and wi.end_date is null
and wi.item_type = 'WFERROR' and wi.parent_item_type is NULL;
spool off
SQL> @abortWFERROR.sql
SQL> execute wf_purge.total;
1.6 Purge notification
SQL> exec WF_PURGE.NOTIFICATIONS('WFERROR',SYSDATE,FALSE);
SQL> update WF_NOTIFICATIONS set mail_status = 'SENT' where mail_status = 'MAIL';
SQL> commit
SQL> @wfntfqup.sql
2. PURGE FND_LOG_MESSAGES 735138.1 and 332103.1
Run 'Purge Debug and Log messages' concurrent program
SQL> select count(1) from fnd_log_messages;
SQL> connect applsys/simple4u
SQL> truncate table fnd_log_messages;
SLQ> connect / as sysdba
SQL> select owner,segment_name,segment_type,bytes from dba_segments where segment_name='FND_LOG_MESSAGES'
3. PURGE FND_ENV_CONTEXT
Doc ID: 730617.1
3.1 Drop and recreate the FND_CONCURRENT_PROCESSES_N1 index.
SQL> select owner,object_type,object_name from all_objects where object_id in (33060,33064);
OWNER OBJECT_TYPE OBJECT_NAME
------------------------------ ------------------ ------------------------------
APPLSYS INDEX FND_CONCURRENT_PROCESSES_N1
SQL> @/dsakui/backup/patch/purge/cr_fnd_conc_processes_idx.sql
3.2 Rerun 'Purge concurrent request and/or Manager Data'

4. PURGE FND_STATS_HIST
Doc ID: 745442.1
4.1 Cleaned all history found in FND_STATS_HIST table be executing (FND_STATS.PURGE_STAT_HISTORY)
SQL> create index fnd_stats_hist_u2 on fnd_stats_hist(request_id) storage (initial 5m next 5m maxextents unlimited pctincrease 0 ) tablespace APPLSYSX ;
begin
for i in 1..565 loop
dbms_output.put_line(i*10000);
fnd_stats.purge_stat_history(i*10000,(i+1)150000);
end loop;
end;
/
4.2 Check that FND_STATS_HIST table is purged by executing following query:
SQL> SELECT COUNT(*) FROM FND_STATS_HIST;

5. PURGE FND_LOBS
Doc ID: 742822.1
5.1
select count(*) from fnd_lobs
where program_name in ('FNDATTCH','FND_HELP')
and expiration_date is null;
update fnd_lobs
set expiration_date=sysdate-30
where program_name in ('FNDATTCH','FND_HELP')
and expiration_date is null
and trunc(upload_date)5.2 Run the "Purge Obsolete Generic File Manager Data" job with parameters "Y,FNDATTACH"

6. Re-organize tables and indexes
6.1 Reorganize FND_ENV_CONTEXT table and index
SQL> alter table fnd_env_context move;
Table altered.
SQL> alter index FND_ENV_CONTEXT_U1 rebuild;
Index altered.
6.2 Re-organize FND_STATS_HIST table and indexes
SQL> connect applsys/simple4u
SQL> alter table FND_STATS_HIST move;
SQL> alter index FND_STATS_HIST_U1 rebuild;
SQL> drop index FND_STATS_HIST_U2;
6.3 REBUILD unusable indexes
SQL> select 'alter index '||owner||'.'||index_name||' rebuild;' from all_indexes
where status='UNUSABLE';

---

### 256. Creating a dblink for Taiping for FSG migration

**Topic ID:** 2112

OptionsAttachment:dblink.rtf6.1 MBytesSymptom:
*(public)*Create database link for FSG migrationProblem:
*(public)*Solution:
*(public)*For creating Database link for FSG migration , first of all we need to have the connect string for the source database in the target tnsnames.ora file ,

In this example dev is taken as the target and COAU as source instance , so we need to add the connect string of COAU in dev tnsnames.ora file

COAU=
(DESCRIPTION=
(ADDRESS=(PROTOCOL=tcp)(HOST=tp-dr02.appshosting.com)(PORT=1528))
(CONNECT_DATA=
(SID=COAU)
)
)

once this is done we can test the connectity as

[oradev@tp-prod01 ~]$ sqlplusapps@coauby giving the apps password of coau instance , if the connection establishes we can proceed with the application part as attached screenshot ,

the navigation for the same is

Responsibility: TPCL GL Super UserPath: Setup > System > Database Links

---

### 258. EBS 12.0.6 Upgrade 10.2.0.4 Database

**Topic ID:** 2112

OptionsAttachment:R12 build upgrade-ver4.0.doc160.0 KBytesTai Ping Upgrade and Linux Migration-uat1.xls45.5 KBytesTai_Ping_Upgrade_and_Linux_Migration-uat1_updated.xls54.5 KBytesSymptom:
*(public)*Problem:
*(public)*Solution:
*(public)*

---

### 260. Increasing maxprocs and maxSessions for Discoverer

**Topic ID:** 2112

OptionsSymptom:
*(public)*When attempting to connect to a Discoverer Portlet page using Viewer or Plus, the following error is encountered:

ERROR
- A connection error has occured.
- Attempt 1. CORBA proto : Hard limit on number of sessions reached. Please contact your
administrator or retry after some time. Hint: An administrator can further diagnose connection
problems by running the "checkdiscoverer" script under/discoverer/util.Problem:
*(public)*Solution:
*(public)***Attempt 1 Corba Protocol Error: Hard Limit On Number Of Sessions Reached On Portlet Refresh [ID 415444.1]**
---
*Modified*16-JAN-2009*Type*PROBLEM*Status*MODERATED**In this Document**
Symptoms
Cause
Solution
References

---

*This document is being delivered to you via Oracle Support'sRapid Visibility(RaV) process, and therefore has not been subject to an independent technical review.*

## Applies to:Oracle Discoverer - Version: 10.1.2.48.18
This problem can occur on any platform.

## CauseThe opmn.xml maxprocs variable and the configuration.xml maxSessions variable are set to the default values which is not sufficient for the current number of Discoverer Portlet sessions.

The variable opmn.xml maxprocs: Specifies the maximum number of Discoverer sessions (default 50) that can run at the same time (for Discoverer Plus, Discoverer Viewer, and Discoverer Portlet Provider).

The variable configuration.xml maxSessions: Specifies the number of sessions (default 20) that Discoverer
Portlet Provider uses for portlet refreshes and portlet publishing.

The variable maxSessions in the configuration.xml must be equal to or less than the value of the maxprocs setting in opmn.xml.

**Solution**
Both of the varaibles maxprocs and maxSessions should be increased to a capacity level that will accomodate the total number of portlets and the refresh schedule.

To implement the solution, please execute the following steps:

1. Stop the mid tier services. Cd $ORACLE_HOME/opmn/bin and run opmnctl stopall.

2. Edit $ORACLE_HOME/discoverer/config/configuration.xml
and set
maxSessions="50" useCachedSession="true" maxSessionAgeHour="1"
maxSessionInactivityPeriodMinute="5" maxRefreshWaitMinute="2" maxRefreshRetries="3"

3. Edit $ORACLE_HOME/opmn/conf/opmn.xml
and set
process-set id="SessionServer" minprocs="0" maxprocs="100"

---

### 275. Sales and Marketing Worklist

**Topic ID:** 11

# OptionsSymptom:
*(public)*Problem:
*(public)*Solution:
*(public)*Comment:
*(internal)*

**Sales and Marketing Worklist
**
**New:
**1. David Apex quotation (Ashok to do)

**In Progress:
**1. Certified Partner
2. OpenWorld
3. HCL
4. Certified Partner

**Upcoming:**

---

### 263. Oracle Alerts Setup

**Topic ID:** 2112

OptionsAttachment:Oracle Alerts Setup.doc178.5 KBytesSymptom:
*(public)*Problem:
*(public)*Solution:
*(public)*Oracle Alerts

---

### 269. Upgrade EBS from 12.0.6 yo 12.1.1

**Topic ID:** 2112

OptionsSymptom:
*(public)*Upgrade EBS from 12.0.6 to 12.1.1Problem:
*(public)*Upgrade EBS from 12.0.6 to 12.1.1Solution:
*(public)*1. Shutdown apps
2. Turn on maitenance mode
3. Upgrading database to 10.2.0.4 (skip)
4. Upgrade OracleAS 10g Release 3 (10.1.3) to Patchset 4 (10.1.3.4)
4.1 Backup 10.1.3 home
4.2 Set environment by 'export ORACLE_HOME=/u01/oracle/dev/apps/tech_st/10.1.3'
4.3 Apply 10.1.3.4 Patchset
Set inventory
$ vi /etc/oraInst.loc
inventory_loc=/u01/oracle/dev/inst/apps/dev_tp-dr02/admin/oraInventory

Invoke the runInstaller program by running the command:
$ cd /u01/oracle/patches/12.1.1/7272722
$ ./runInstaller
Provide the Release 12 10.1.3 Oracle Home Name and Path as a value in 'Name' and 'Path' field of 'Destination region'. If you set the Release 12 10.1.3 Oracle Home properly, you will see Oracle Home name in the drop down list of 'Name' field.
Enter theuser default password is 'secret'. Otherwise the default password is 'oafm', if it was not changed after Release 12 installation. Proceed to the end of the installation.
4.4 Run AutoConfig
4.5 Apply opatch Patch 6880880 into 10.1.3 Home
To install this patch simply extract the zipped file using unzip or winzip, depending upon the platform. You should extract the zip file directly under the ORACLE_HOME.
4.6 Apply additional patches into 10.1.3 home
Patch 6702510
Patch 7484199*
Patch 7411481
Patch 7139320
Patch 7139339
4.7 Verify 10.1.3.4 is installed
$ /u01/oracle/dev/apps/tech_st/10.1.3/OPatch/opatch lsinventory
4.8 Regenerate appsborg.zip and appsborg2.zip files
Run adadmin, and choose Generate product JAR files (with the no force option) to generate the appsborg.zip and appsborg2.zip files.
5. Upgrade OracleAS 10g Release (10.1.2) for Forms and Reports to Patchset 3 (10.1.2.3)
5.1 Back Up OracleAS 10.1.2 ORACLE_HOME and Inventory folder
5.2 Set environment by 'export ORACLE_HOME=/u01/oracle/dev/apps/tech_st/10.1.2'
5.3 Apply 10.1.2.3 Patchset 5983622 (runInstaller)
Set inventory
$ vi /etc/oraInst.loc
inventory_loc=/u01/oracle/dev/inst/apps/dev_tp-dr02/admin/oraInventory

Invoke the runInstaller program by running the command:
$ cd /u01/oracle/patches/12.1.1/5983622
$ ./runInstaller
Supply the ias_admin default password 'secret' when prompted.
5.4 Apply opatch Patch 6880880 into 10.1.2 Home
To install this patch simply extract the zipped file using unzip or winzip, depending upon the platform. You should extract the zip file directly under the ORACLE_HOME.
5.6 Apply additiona patches into 10.1.2 home (opatch)
8374931
7121788
6995251 (for Linux 64)
6857221
4407272
4526825
7329300
7016961
5917053
6371228
7140392
8300196
5.7 Download and apply 10.1.0.5 RSF fixes (opatch)
3559326
5394728
5.8 Apply the Oracle E-Business Suite Release 12 Interoperability Patch (adpatch)
7120543
5.9 Redeploy the new Forms EAR file
Redeploy the formsapp.ear file by following the instructions given in OracleMetaLink Note 397174.1, "Deploying a New Forms EAR File in Oracle Applications Release 12".
5.10 Rebuild Forms and Reports executables
$ cd $ORACLE_HOME/forms/lib32
Note: if this directory does not exist: cd $ORACLE_HOME/forms/lib
$ make -f ins_forms.mk install
$cd $ORACLE_HOME/reports/lib32
Note: if this directory does not exist: cd $ORACLE_HOME/reports/lib
$ make -f ins_reports.mk install
5.11 Regenerate JAR files
$ run the AD Administration Utility to regenerate the JAR files:
Run the AD Administration Utility (adadmin)
Select Generate Applications Files
Generate Product JAR Files (Do not opt to force the regeneration of all JAR files.)
5.12 Verify upgrading
$ $ORACLE_HOME/bin/frmcmp help=y
6. Upgrade Oracle E-Business Suite Release 12 JDK to Java 6.0 latest update
6.1 Download Latest Update of JDK 6.0
http://java.sun.com/javase/downloads/index.jsp
6.2 Replace the JDK Home Used with Oracle EBS Release 12
$cd [IAS_ORACLE_HOME]/appsutil/
mv jdk jdk_old
mkdir jdk
cd jdk
Install the downloaded latest update of JDK 6.0 here, i.e., [IAS_ORACLE_HOME]/appsutil/jdk
mv/* jdk
After moving all files and subdirectories underone level up under [IAS_ORACLE_HOME]/appsutil/jdk, you can safely remove the empty subdirectory of.
6.3 Install Albany (Display) Font Release 4.02
$ cp $FND_TOP/resource/.ttf [IAS_ORACLE_HOME]/appsutil/jdk/jre/lib/fonts
6.4 Upgrading To Latest Update of JRE 6.0 for AutoConfig on Database Tier Nodes
Download Latest Update of JRE 6.0 athttp://java.sun.com/javase/downloads/index.jsp
$ cd [ORACLE_HOME]/appsutil/
$ mv jre jre_old
$ mkdir jre
$ cd jre
Install the downloaded latest update of JRE 6.0 here, i.e., [ORACLE_HOME]/appsutil/jre
$ mv/* jre
After moving all files and subdirectories underone level up under [ORACLE_HOME]/appsutil/jre, you can safely remove the empty subdirectory of.
7. Oracle Configuration Manager (OCM) (Required)
Refer to Upgrading OCM and Switching to Native Integration with Oracle E-Business Suite
Release 12 Note 727157.1 to perform the one-time OCM integration upgrade. You must do this even
if you are not using OCM with Oracle E

... [Content truncated for readability]

---

### 267. Taiping clone procedure

**Topic ID:** 2112

Team,
Please find below urls for all instance post clone steps .
**TDEV instance**
https://docs.google.com/document/d/1DZFZDpQ_zm2FNJ_s2BsVvfFcbOlfk2FgNd0cOfmLYa4/edit

**TDEV2 instance****
**https://docs.google.com/document/d/1AzEl1jsqdP3iaib_iZ9gKX5CdjtKusbVe0C-Bk2zIVo/edit

======================TDEV2 UAT login details.
Log intohttps://co.taipingcarpets.com/
with username =**Test0517b**and password =**Ctp!@#123****==============================================**
**HDEV2 instace**
https://docs.google.com/document/d/1l1R72FsXxBEkBjCeDSR1eXW4SX7pvKf5bCZNEzwQ7z0/edit

========================================================================
**
****
****--> Important : Updated TDEV Post clone steps Check attached doc : TDEV Post clone steps.docx****
****
****--> Important : Updated Avalara Post clone steps - 08/11/2014 - Check attached doc : avalara_postclone_steps.docx

--> Disable Triggers to avoid FNDCPASS error :

alter trigger RA_USER_UPDATE_SYNCH disable ;
alter trigger RA_RESPONSIBILITY_SYNCH disable;
alter trigger RA_USER_SYNCH disable ;

**

5.4 Change site name
System Administrator-> profile->system profile->Set 'Site Name' to 'cloned from production as of'
5.5 Update workflow settting if needed (shutdown mailers)
*****make sure to shutdown the notification mailer after every clone and also to clear the WF_out Queue*******
Set workflow override address to nobody@taipingcarpets.com (very important)
5.6 Update XML temp dir
Go into the responsibility: XML Publisher Administrator
Navigate to Home > Administration > Properties > General
Set the Temporary directory
Restart services
5.7 Fix custom environment issue
$ vi $APPL_TOP/customuat1_dev.env
IX_PRINTING=/EBSr12/oracle/uat1/apps/apps_st/appl/fnd/12.0.0/resource/ixlib.cfg
TPC_TOP=/EBSr12/oracle/uat1/apps/apps_st/appl/tpc/12.0.0
export IX_PRINTING TPC_TOP
5.8 For $APPLPTMP, make sure utl_file_dir includes $APPLPTMP directory path exactly and that orauser can write to the $APPLPTMP. Give Permissions 777 to $APPLPTMP

5.9 Compile custom.pll(NOT NEEDED)

ORA-01403: no data found

Please copy below pll files present in /home/appdev on tp-apps01.appshosting.com machine to the the instance where having the issue ,
backup the existing pll and plx files and copy
CUSTOM.pll
USER_OEXOEORD.pll
USER_RCVRCERC.pll
place them in $AU_TOP/resource and generate plx files using frmcmp logout and log in back to the application for testing.

Command:
frmcmp module=/uxx/oracle/xxx/apps/apps_st/appl/au/12.0.0/resource/CUSTOM.pll userid=apps/apps output_file=/uxx/oracle/xxx/apps/apps_st/appl/au/12.0.0/resource/CUSTOM.plx module_type=library compile_all=special

5.10. Discoverer Setup

5.11. Cancel a few scheduled concurrent jobs
Check if the following programs are scheduled and cancel/terminate the requests, if scheduled.
a. TPC Inbound Emails
b. TPC Change Request Summary Email to Salesreps

5.12 Change TPC Profiles
Change the values of following profile options at site level.

TPC: From Email Address for Change Requests Reportoracrp@taipingcarpets.com
TPC: Google Admin Email Account IDoracrp@taipingcarpets.com
TPC: Google Admin Email Account PasswordOraTest1234
TPC: Pack List File Upload Location $TPC_TOP/bin (Replace $TPC_TOP with its actual value)
POS: External URL (Change to match the instance url)
POS: Internal URL (Change to match the instance url)

Need to update profile at user level to avoid URL redirecting to production in ticket 36468
--Changed profile apps servlet agent for adali to target from prod.
SQL> select PROFILE_OPTION_ID, PROFILE_OPTION_VALUE from fnd_profile_option_values where PROFILE_OPTION_VALUE like '%prod.taipingcarpets.com:4443%';
SQL> update fnd_profile_option_values set PROFILE_OPTION_VALUE=replace(PROFILE_OPTION_VALUE,'https://prod.taipingcarpets.com:4443','http://:') where PROFILE_OPTION_VALUE like '%prod.taipingcarpets.com:4443%';

5.13. Recreate the softlinks in $TPC_TOP/bin by executing following commands in this directory
rm TPCDATAMIG
rm TPCADATAMIG
rm TPCENGSUMRPT
ln -s $FND_TOP/bin/fndcpesr TPCDATAMIG
ln -s $FND_TOP/bin/fndcpesr TPCADATAMIG
ln -s $FND_TOP/bin/fndcpesr TPCENGSUMRPT

5.14. Run following script using user APPS through sqlplus to reset iSupplier user level profiles.[As Per Metalink ID 729942.1]
$POS_TOP/patch/115/sql/pos_upg_usr.sql

5.15 After clone LSBX url was pointing tohttps://tp-test01.appshosting.com:4451. I have made the following changes to make it non-ssl (http://tp-test01.appshosting.com:8008).

I backed up existing context file

Change following values in the Context File

Variable Value
s_url_protocol http
s_local_url_protocol http
s_webentryurlprotocol http
s_active_webportlabel="Active Web Port">8008
s_webssl_port leave as it is
s_https_listen_parameter leave as it is
s_help_web_agent leave as it is
s_login_page replace with http login url (http://tp-test01.appshosting.com:8008/......)
s_external_url replace with http login url (http://tp-test01.appshosting.com:8008/......)

Run autoconfig
$ cd $ADMIN_SCRIPTS_

... [Content truncated for readability]

---

### 270. Web Discoverer 10g installation steps

**Topic ID:** 2112

OptionsAttachment:Web_discoverer.doc56.0 KBytesSymptom:
*(public)*

Web Discoverer 10g installation stepsProblem:
*(public)*Solution:
*(public)*Please refer to the attached document for Web Discoverer 10g installation steps

Software Download steps For Discoverer Desktop and Admin versions:
----------------------------------------------------------------------------------------------------

You can download and install 10g Discoverer Admin/Desktop for Windows by doing this:1. Go tohttp://www.oracle.com/technology/software/products/ids/htdocs/101202winsoft.html.2. Download by clicking the following link:Oracle Business Intelligence Tools 10g (10.1.2.0.2) for Microsoft Windows
as_windows_x86_bi_tools_101202.zip (597,006,669 bytes)
3. Choose Custom Installation type, then pick Administration Edition and Desktop Edition only by unselecting all the others.

**Please follow the below link for configuring Discoverer Desktop and Admin editions on PC**

http://apps2fusion.com/at/66-pramod-bellamkonda/360-discoverer-eul-end-user-layer-apps

Also double check the Environment Variables on your PC. You should be having the following values.FND_SECURE =\\secure
FND_TOP=

---

### 271. Character set conversion

**Topic ID:** 2115

# OptionsSymptom:
*(public)*Convert character set on umd daabaseProblem:
*(public)*Convert character set on umd daabaseSolution:
*(public)*# export icondata entire database
expdp system DUMPFILE=icondata_full.dmp full=y

# Export icondata database again using export method
exp userid=system file=exp_icondata.dmp compress=y grants=n indexes=n constraints=n full=y log=exp_icondata.log
SQL> @$HOME/charconv/cr_ctrl.sql
SQL> ALTER DATABASE OPEN RESETLOGS;
-- Commands to add tempfiles to temporary tablespaces.
-- Online tempfiles have complete space information.
-- Other tempfiles may require adjustment.
SQL> ALTER TABLESPACE TEMP ADD TEMPFILE '/u01/oracle/product/oradata/icondata/temp01.dbf'
SIZE 500m REUSE AUTOEXTEND ON NEXT 655360 MAXSIZE 32767M;
SQL> @$HOME/migration/cr_tablespaces.sql

# import user schemas into icontest database
impdp system/manager dumpfile=icondata_full.dmp schemas=QUESTION,HIGHERED,TRAINING,STAFF,ICONS,RESLIB,ADMIN,SIMICONS,SECONDARY,EDUCATION,USRICONS,ICONSNET,PROGRAMS,PROFESSIONAL,DEVICONS logfile=imp_icontest.log

SQL> @$ORACLE_HOME/rdbms/admin/utlrp.sql
# resolve column conversion issues
alter table "USRICONS"."REGMAIL" modify (subject varchar2(100));
"ICONSNET"."PROP_TEXT"
column INTRO (actual: 7546, maximum: 4000)
"USRICONS"."PROPSTRUCTURED"
column TEXTQUAL1 (actual: 4019, maximum: 4000)
alter table "QUESTION"."FIPSE_STUD_PRE_2004" modify (comments varchar2(600));
COMMENTS (actual: 501, maximum: 500)
alter table "RESLIB"."ISSUE_LINKS" modify (description varchar2(600));
column DESCRIPTION (actual: 502, maximum: 500)
alter table "USRICONS"."REGMAIL_FOLDERS" modify (folder varchar2(45));
column FOLDER (actual: 33, maximum: 30)
alter table "QUESTION"."FIPSE_STUD_POST_2002" modify (comments varchar2(600));
COMMENTS (actual: 502, maximum: 500)
alter table "STAFF"."OLD_INSTRUCTOR" modify (institution varchar2(120));
column INSTITUTION (actual: 104, maximum: 100)
alter table "QUESTION"."FIPSE_FAC_POST_2004" modify (comments varchar2(600));
column COMMENTS (actual: 508, maximum: 500)
# Import failed conversion tables again
truncate table "USRICONS"."REGMAIL";
truncate table "QUESTION"."FIPSE_STUD_PRE_2004";
truncate table "RESLIB"."ISSUE_LINKS";
truncate table "USRICONS"."REGMAIL_FOLDERS";
truncate table "QUESTION"."FIPSE_STUD_POST_2002";
truncate table "STAFF"."OLD_INSTRUCTOR";
truncate table "QUESTION"."FIPSE_FAC_POST_2004";
imp userid=system/manager file=exp_icondata.dmp ignore=y tables=REGMAIL log=imp_USRICONS_REGMAIL.log fromuser=USRICONS touser=USRICONS
imp userid=system/manager file=exp_icondata.dmp ignore=y tables=FIPSE_STUD_PRE_2004 log=imp_QUESTION_FIPSE_STUD_PRE_2004.log fromuser=QUESTION touser=QUESTION
imp userid=system/manager file=exp_icondata.dmp ignore=y tables=ISSUE_LINKS log=imp_RESLIB_ISSUE_LINKS.log fromuser=RESLIB touser=RESLIB
imp userid=system/manager file=exp_icondata.dmp ignore=y tables=REGMAIL_FOLDERS log=imp_USRICONS_REGMAIL_FOLDERS.log fromuser=USRICONS touser=USRICONS
imp userid=system/manager file=exp_icondata.dmp ignore=y tables=FIPSE_STUD_POST_2002 log=imp_QUESTION_FIPSE_STUD_POST_2002.log fromuser=QUESTION touser=QUESTION
imp userid=system/manager file=exp_icondata.dmp ignore=y tables=OLD_INSTRUCTOR log=imp_STAFF_OLD_INSTRUCTOR.log fromuser=STAFF touser=STAFF
imp userid=system/manager file=exp_icondata.dmp ignore=y tables=FIPSE_FAC_POST_2004 log=imp_QUESTION_FIPSE_FAC_POST_2004.log fromuser=QUESTION touser=QUESTION

#install Oacle Apache as iastest
port 8000

---

### 272. Old ICON database and iAS information

**Topic ID:** 2115

# Old ICON database and iAS informationOptionsAttachment:ICONS_Database_and_Webserver_Info.doc27.0 KBytesiconsnet_icons_umd_edu_ora.doc25.0 KBytesTablespacesList.html10.6 KBytesDatafilesList.html21.0 KBytesICONS_Database_Schemas.doc33.5 KBytesUsersList.html22.3 KBytesdads.conf.doc35.0 KByteshttpd.conf.doc114.5 KBytesSymptom:
*(public)*Old ICON database informationProblem:
*(public)*Old ICON database informationSolution:
*(public)*

---

### 273. Old ICON database and iAS information

**Topic ID:** 2115

# Old ICON database and iAS informationOptionsAttachment:ICONS_Database_and_Webserver_Info.doc27.0 KBytesiconsnet_icons_umd_edu_ora.doc25.0 KBytesTablespacesList.html10.6 KBytesDatafilesList.html21.0 KBytesICONS_Database_Schemas.doc33.5 KBytesUsersList.html22.3 KBytesdads.conf.doc35.0 KByteshttpd.conf.doc114.5 KBytesSymptom:
*(public)*Old ICON database informationProblem:
*(public)*Old ICON database informationSolution:
*(public)*

---

### 274. Production migration steps

**Topic ID:** 2115

OptionsSymptom:
*(public)*Migrate UMD to Linux server on ah66
Problem:
*(public)*Migrate UMD to Linux server on ah66
Solution:
*(public)*Migrate UMD database
1. Create empty 10g database
2. Drop sample users
SQL> @$HOME/migration/dropusers.sql
3. Create additional tablespaces
SQL> @$HOME/migratino/cr_tablespaces.sql
SQL> alter database datafile '/u01/oracle/product/oradata/icondata/EXAMPLE01.dbf' resize 200m;
4. Import dmp file
Import without indexes
$ vi $HOME/migration/impdb.dat
(make sure indexes=N)
$ nohup imp parfile=impdb.dat &
$ tail -f nohup.out
Import indexes
$ vi $HOME/migration/impdb1.dat
(make sure index=y, rows=n, constraints=n,etc)
$ nohup imp parfile=impdb1.dat &
$ tail -f nohup.out
5. Recompile invalid objects
$ sqlplus '/ as sysdba'
SQL> $ORACLE_HOME/rdbms/admin/utlrp.sql
6. Collect statistics
$ sqlplus '/as sysdba'
SQL> execute DBMS_STATS.GATHER_DICTIONARY_STATS;
SQL> execute dbms_stats.gather_database_stats(options => 'GATHERAUTO);
7. Test client SQL*Net connection
ICONDATA =
(DESCRIPTION =
(ADDRESS = (PROTOCOL = TCP)(HOST = ah66.appshosting.com)(PORT = 1521))
(CONNECT_DATA =
(SERVER = DEDICATED)
(SERVICE_NAME = icondata)
)
)
DOS> tnsping icondata
8. Open firewall 1521 to access database from outside.
Setup http server
1. Create iasumd unix user with password Th1$1sfun
2. Install 10.2.0.1 for Linux 64 companion product http to
/u01/oracle/product/10gcomp
3. Change Apache default port.
Default URLhttp://ah66.appshosting.com:7780
$ . oraenv
SID: iconias
$ $ORACLE_HOME/opmn/bin/opmnctl stopall
$ vi $ORACLE_HOME/Apache/Apache/conf/httpd.conf
Change Port=7780 to Port=80
Change Listen=7780 to Listen=80
4. Open firewall 80 on Pix
5. Change DADS entry
$ vi $ORACLE_HOME/network/admin/tnsnames.ora
Add icondata tns entry to tnsnames.ora file
$ vi $ORACLE_HOME/Apache/modplsql/dads.conf
Add dads entry from UMD to this file
6. Start http service
$ su - root
# chown root:root @ORACLE_HOME/Apache/Apache/bin/apachectl
# $ORACLE_HOME/opmn/bin/opmnctl startall
7. Copy web contents
$ cp -pr /home/scp/* $ORACLE_HOME/Apache/Apache/htdocs/

---

### 276. Setting KeepAlives on Tomcat JDBC Connections

**Topic ID:** 601

Example server.xml:

docBase="/usr/local/jakarta/tomcat/server/webapps/manager">

---

### 278. Temporary workaround for accessing apex workspace if cpanel is down

**Topic ID:** 2104

Please use the following url as temporary access to your apex management site. The url is:

http://ah3.appshosting.com:8004/apex/

Use this url until we can resolve this issue. Please contact us if you need further assistance. If you could include your contact telephone number a technician will call you for further assistance. Thank you.

---

### 283. Oracle Fusion Administration Guide

**Topic ID:** 901

Oracle Fusion Administration Guide

---

### 285. Generating a CSR (Certificate Signing Request) from CPanel

**Topic ID:** 2401

Log into CPanel Webhost Manager, click on “Generate a SSL Certificate and Signing Request”
Provide the values against each columns mentioned
-Email Address the Cert will be sent to: sup@appshosting.com
Cert Info:
-Email: customer_email_address
-Passwd: admin123
-Host to make cert for: customer_website_url
-City: full name of customer city
-State: full name of customer state. Make sure State is fully spelled out. For Example, 'California'
-Make sure Country is a 2 letter abbreviation. For example, 'US'
-Company Name: customer_company_name
-Company Division: IT
-Key Size: 1024

The CSR will be stored in CPanel internal database.

Cut and paste the CSR from the following page and email to customer so they can buy the SSL certificate. If they want us to buy the certificate for them, we will need the text CSR info to submit to Godaddy to generate an SSL certificate.

---

### 323. Fix for FRM server connection error logging into forms in R12 environment

**Topic ID:** 2105

You need to disable "cross site scripting (XSS) filter". Here is the steps:1. Go to Internet Explorer Options (Tools->Options).2. Click on Security tab.3. Click on Custom Level button.4. Select "Disable" radio button on "Enable XSS filter".5. Restart IE.

---

### 289. Adding a virtual host in Apache

**Topic ID:** 2403

ADDING A VIRTUAL HOST in Apache for Fadi, and others using AH1 server
Added the following directives in /etc/httpd/conf/vhosts/Vhosts_ispconfig.conf on AH1 server.
Since Fadi's "lookjordan.com" is hosted on the old AH1 server (which can be found by SSH'ing to lookjordan.com).

ProxyPass /i http://ah1.appshosting.com:7781/i
ProxyPassReverse /i http://ah1.appshosting.com:7781/i
ProxyPass /pls/apex http://ah1.appshosting.com:7781/pls/apex
ProxyPassReverse /pls/apex http://ah1.appshosting.com:7781/pls/apex
ServerName lookfilipino.appshosting.com
ServerAlias lookfilipino.appshosting.com
ServerAlias lookfilipino.com
ServerAlias www.lookfilipino.com
ServerAdmin support@appshosting.com
DocumentRoot /var/www/lookjordan.appshosting.com/web.lookfilipino
DirectoryIndex index.html index.htm index.php index.php5 index.php4 index.php3 index.shtml index.cgi index.pl index.jsp Default.htm default.htm
ScriptAlias /cgi-bin/ /var/www/lookjordan.appshosting.com/cgi-bin/
AddHandler cgi-script .cgi
AddHandler cgi-script .pl
ErrorLog /var/www/lookjordan.appshosting.com/log/error.log
CustomLog /var/www/lookjordan.appshosting.com/log/access.log combined
AddType application/x-httpd-php .php .php3 .php4 .php5

SetOutputFilter PHP
SetInputFilter PHP

SetOutputFilter PHP
SetInputFilter PHP

SetOutputFilter PHP
SetInputFilter PHP

SetOutputFilter PHP
SetInputFilter PHP

php_admin_flag safe_mode Off
Alias /error/ "/var/www/lookjordan.appshosting.com/web/error/"
ErrorDocument 400 /error/invalidSyntax.html
ErrorDocument 401 /error/authorizationRequired.html
ErrorDocument 403 /error/forbidden.html
ErrorDocument 404 /error/fileNotFound.html
ErrorDocument 405 /error/methodNotAllowed.html
ErrorDocument 500 /error/internalServerError.html
ErrorDocument 503 /error/overloaded.html

Once the above directives are added,

run /etc/init.d/httpd configtest to check for errors

NOTE: The following error is normal:

[Sat Jul 11 18:47:57 2009] [warn] VirtualHost 66.152.169.35:443 overlaps with VirtualHost 66.152.169.35:443, the first has precedence, perhaps you need a NameVirtualHost directive

Then: Restart the web server /etc/init.d/httpd restart

When it asks for SSL password type "t1t@n"

---

### 291. Linux LVM Create New Logical Volume - Disk RAID

**Topic ID:** 306

pvcreate /dev/xvdb
pvcreate /dev/xvdc
pvcreate /dev/xvde
pvcreate /dev/xvdf
pvcreate /dev/xvdg

vgcreate -s 32M VolGroupBackupData /dev/xvdb /dev/xvdc /dev/xvde /dev/xvdf /dev/xvdg

lvcreate -L 1500000M -n LogVolBackupData-b01 VolGroupBackupData
lvcreate -L 1500000M -n LogVolBackupData-b02 VolGroupBackupData
lvcreate -L 7000000M -n LogVolBackupData-b03 VolGroupBackupData

---

### 296. "SAN-Less" iSCSI configuration for Oracle RAC (target & initiator)

**Topic ID:** 2404

"SAN-Less" iSCSI configuration for Oracle RAC (target & initiator)

---

### 298. compile php, pdo, pdo-oci , oci8 oraapps

**Topic ID:** 2402

http://in3.php.net/manual/en/install.unix.apache2.php

./configure --with-apxs2=/usr/local/apache2/bin/apxs --with-pdo-oci=instantclient,/usr/,11.1 --with-oci8=instantclient,/usr/lib/oracle/11.1/client/lib,11.1

The following is the procedure for oraaps server
--------------------------------------------------------

## Apache 2.x on Unix systems

This section contains notes and hints specific to Apache 2.x installs of PHP on Unix systems.
**Warning**

We do not recommend using a threaded MPM in production with Apache 2. Use the prefork MPM, which is the default MPM with Apache 2.0 and 2.2. For information on why, read the related FAQ entry on usingApache2 with a threaded MPM

The» Apache Documentationis the most authoritative source of information on the Apache 2.x server. More information about installation options for Apache may be found there.

The most recent version of Apache HTTP Server may be obtained from» Apache download site, and a fitting PHP version from the above mentioned places. This quick guide covers only the basics to get started with Apache 2.x and PHP. For more information read the» Apache Documentation. The version numbers have been omitted here, to ensure the instructions are not incorrect. In the examples below, 'NN' should be replaced with the specific version of Apache being used.

There are currently two versions of Apache 2.x - there's 2.0 and 2.2. While there are various reasons for choosing each, 2.2 is the current latest version, and the one that is recommended, if that option is available to you. However, the instructions here will work for either 2.0 or 2.2.

- 

Obtain the Apache HTTP server from the location listed above, and unpack it:

```
gzip -d httpd-2_x_NN.tar.gz\ntar -xf httpd-2_x_NN.tar\n
```

- 

Likewise, obtain and unpack the PHP source:

```
gunzip php-NN.tar.gz\ntar -xf php-NN.tar\n
```

- 

Build and install Apache. Consult the Apache install documentation for more details on building Apache.

```
cd httpd-2_x_NN\n./configure --enable-so\nmake\nmake install\n
```

- 

Now you have Apache 2.x.NN available under /usr/local/apache2, configured with loadable module support and the standard MPM prefork. To test the installation use your normal procedure for starting the Apache server, e.g.:

```
/usr/local/apache2/bin/apachectl start\n
```
and stop the server to go on with the configuration for PHP:
```
/usr/local/apache2/bin/apachectl stop\n
```

- 

Now, configure and build PHP. This is where you customize PHP with various options, like which extensions will be enabled. Run ./configure --help for a list of available options. In our example we'll do a simple configure with Apache 2 and MySQL support.

If you built Apache from source, as described above, the below example will match your path for apxs, but if you installed Apache some other way, you'll need to adjust the path to apxs accordingly. Note that some distros may rename apxs to apxs2.

```
cd ../php-NN\n./configure --with-apxs2=/usr/local/apache2/bin/apxs --with-mysql\nmake\nmake install\n
```

If you decide to change your configure options after installation, you'll need to re-run the configure, make, and make install steps. You only need to restart apache for the new module to take effect. A recompile of Apache is not needed.

Note that unless told otherwise, 'make install' will also install PEAR, various PHP tools such as phpize, install the PHP CLI, and more.

- 

Setup your php.ini

```
cp php.ini-development /usr/local/lib/php.ini\n
```

You may edit your .ini file to set PHP options. If you prefer having php.ini in another location, use --with-config-file-path=/some/path in step 5.

If you instead choose php.ini-production, be certain to read the list of changes within, as they affect how PHP behaves.

- 

Edit your httpd.conf to load the PHP module. The path on the right hand side of the LoadModule statement must point to the path of the PHP module on your system. The make install from above may have already added this for you, but be sure to check.

```
LoadModule php5_module modules/libphp5.so
```

- 

Tell Apache to parse certain extensions as PHP. For example, let's have Apache parse .php files as PHP. Instead of only using the Apache AddType directive, we want to avoid potentially dangerous uploads and created files such as exploit.php.jpg from being executed as PHP. Using this example, you could have any extension(s) parse as PHP by simply adding them. We'll add .php to demonstrate.

```
\n    SetHandler application/x-httpd-php\n
```

Or, if we wanted to allow .php, .php2, .php3, .php4, .php5, .php6, and .phtml files to be executed as PHP, but nothing else, we'd use this:

```
\n    SetHandler application/x-httpd-php\n
```

And to allow .phps files to be handled by the php source filter, and displayed as syntax-highlighted source code, use this:

```
\n    SetHandler application/x-httpd-php-source\n
```

mod_rewrite may be used To allow any arbitrary .php file to be displayed as syntax-high

... [Content truncated for readability]

---

### 300. Creating a XenServer 5.6 Local Storage Repository

**Topic ID:** 301

STEP 1
Type :*fdisk -l*
you’ll see the listÂ of allÂ volumes and hard drives, then :
Type :*pvcreate /dev/sdb*
*sdb*is my new volume

[root@nas01 by-scsibus]# cd /dev/disk/by-scsibus
[root@nas01 by-scsibus]# ls -lrt
total 0
lrwxrwxrwx 1 root root 9 Sep 1 11:12 36842b2b0194bc900141153790d327c14-0:2:1:0 -> ../../sdb lrwxrwxrwx 1 root root 9 Sep
1 11:12 36842b2b0194bc9001410d5970646af5d-0:2:0:0 -> ../../sda

STEP 2
[root@nas01 by-scsibus]# xe sr-create type=lvm content-type=user device-config:device=/dev/disk/by-
scsibus/36842b2b0194bc900141153790d327c14-0:2:1:0 name-label="LOCAL SR"
ec318d55-0a3a-ef88-adc9-a78135222c31

---

### 302. Oracle RAC iSCSI Persistent Device Names

**Topic ID:** 2404

## Setting a raw device in RedHat/CentOS 5 for Oracle RACApparently the issue got changed since RedHat 4, which had /etc/sysconfig/rawdevices, /etc/init.d/raw & /usr/bin/raw.
This version introduces /etc/udev/rules.d/60-raw.rules & /bin/raw.
**A. Doing it manually**(example):
/bin/raw /dev/raw/raw1 /dev/sdb1
of course, it’ll be forgotten after reboot. so:
**B. Doing it the right way –udev**(example)**:**

- Add to*/etc/udev/rules.d/60-raw.rules*:ACTION==”add”, KERNEL==”sdb1″, RUN+=”/bin/raw /dev/raw/raw1 %N”

- [Optional] to set permissions, create a new*/etc/udev/rules.d/99-raw-perms.rules*containing lines such as*:*KERNEL==”raw[1-2]“, MODE=”0640″, GROUP=”oinstall”, OWNER=”oracle”

The header of*rules.d/60-raw.rules*file mentions that this method of using raw devices is deprecated. But still, I think that’s the only available way if one wants to use raw devices with Oracle RAC, Either for cluster issues (Voting+OCR) or simple Oracle data files.
**C. Oracle RAC raw device permissions**
You might ask: what permissions should I give the Oracle RAC disks? This is what I’ve found out with Roman, a DBA expert who came to help:

- *OCR Device(s)*: root:oinstall , mode 0640
- *Voting device(s)*: oracle:oinstall, mode 0660

  - CRS cannot run if user oracle can’t access the device!

- Other devices (i.e. data): I guess also oracle:oinstall mode 0660, because oracle user might need to access them.

---

### 304. How to kill data pump job

**Topic ID:** 1801

SQL> select * from dba_datapump_jobs;

OWNER_NAME JOB_NAME
------------------------------ ------------------------------
OPERATION JOB_MODE
------------------------------ ------------------------------
STATE DEGREE ATTACHED_SESSIONS DATAPUMP_SESSIONS
------------------------------ ---------- ----------------- -----------------
TSA SYS_IMPORT_SCHEMA_01
IMPORT SCHEMA
EXECUTING 1 0 2

SQL> SQL> SQL> exit
Disconnected from Oracle Database 11g Enterprise Edition Release 11.1.0.7.0 - 64bit Production
With the Partitioning, Real Application Clusters, OLAP, Data Mining
and Real Application Testing options
^[[oracle@ah213 esd]$
[oracle@ah213 esd]$
[oracle@ah213 esd]$ set -o vi
[oracle@ah213 esd]$ impdp tsa
Import: Release 11.1.0.7.0 - 64bit Production on Monday, 13 September, 2010 0:11:13
Copyright (c) 2003, 2007, Oracle. All rights reserved.
Password:
Connected to: Oracle Database 11g Enterprise Edition Release 11.1.0.7.0 - 64bit Production
With the Partitioning, Real Application Clusters, OLAP, Data Mining
and Real Application Testing options

ORA-39001: invalid argument value
ORA-39000: bad dump file specification
ORA-31640: unable to open dump file "/u01/base/rac/rdbms/log/expdat.dmp" for read
ORA-27037: unable to obtain file status
Linux-x86_64 Error: 2: No such file or directory
Additional information: 3

[oracle@ah213 esd]$
[oracle@ah213 esd]$
[oracle@ah213 esd]$ impdp tsa attach=SYS_IMPORT_SCHEMA_01
Import: Release 11.1.0.7.0 - 64bit Production on Monday, 13 September, 2010 0:12:43
Copyright (c) 2003, 2007, Oracle. All rights reserved.
Password:
Connected to: Oracle Database 11g Enterprise Edition Release 11.1.0.7.0 - 64bit Production
With the Partitioning, Real Application Clusters, OLAP, Data Mining
and Real Application Testing options
Job: SYS_IMPORT_SCHEMA_01
Owner: TSA
Operation: IMPORT
Creator Privs: TRUE
GUID: 901D077EA80966ABE04001ACBE003C3D
Start Time: Sunday, 12 September, 2010 23:52:56
Mode: SCHEMA
Instance: ORCL1
Max Parallelism: 1
EXPORT Job Parameters:
CLIENT_COMMAND tsa/******** directory=DP_DIR dumpfile=tsa/********prod.dmp schemas=TSA
IMPORT Job Parameters:
Parameter Name Parameter Value:
CLIENT_COMMAND tsa/******** directory=DP_DIR1 dumpfile=tsaprod.dmp schemas=TSA
State: EXECUTING
Bytes Processed: 3,721,424,792
Percent Done: 22
Current Parallelism: 1
Job Error Count: 0
Dump File: /backup/oracle/esd/tsaprod.dmp
Worker 1 Status:
Process Name: DW01
State: EXECUTING
Object Schema: TSA
Object Name: MULTISHIFT_REMOVE
Object Type: SCHEMA_EXPORT/PACKAGE/PACKAGE_BODY
Completed Objects: 499
Worker Parallelism: 1
Import> kill_job
Are you sure you wish to stop this job ([yes]/no): yes
[oracle@ah213 esd]$ sqlplus / as sysdba
SQL*Plus: Release 11.1.0.7.0 - Production on Mon Sep 13 00:13:29 2010
Copyright (c) 1982, 2008, Oracle. All rights reserved.

Connected to:
Oracle Database 11g Enterprise Edition Release 11.1.0.7.0 - 64bit Production
With the Partitioning, Real Application Clusters, OLAP, Data Mining
and Real Application Testing options
SQL> select * from dba_datapump_jobs;
no rows selected
SQL>

---

### 305. Staffing Angel Database Migration

**Topic ID:** 2701

Install Linux Enteprise Server 10 (SLES 10 SP3) 64-bit
1) export TSA schema from production
expdp tsa directory=DP_DIR dumpfile=tsaprod.dmp schemas=TSA logfile=exptsa.log

2) Capture all application users from production.
set head off
set pages 0
set long 9999999
spool user_script.sql
select 'create user ' || username || ' identified by values '''||password||''';' from dba_users;

3) Delete TSA schema from target if it exists.
on development
SQLPLUS > shutdown immediate
SQLPLUS > startup
SQLPLUS > drop user tsa cascade;

4) Create TSA database user that owns all application objects.

SQLPLUS > @/b01/backup/esd/create_tsa.sql

5) Create all application users in target database. (user_script.sql in step #2 above. Take out standard db schemas including MGMT_VIEW, MDDATA, SCOTT, etc.)
5.1) create custom roles (roles.txt), SCHEDULER_ADMIN already exists

SQL> create tablespace data ;
Tablespace created.

SQL> create tablespace indexes;
Tablespace created.

6) Import all TSA objects.
$ORACLE_HOME/bin/imp
import TSA objects
impdp tsa directory=DP_DIR dumpfile=tsaprod.dmp schemas=TSA logfile=/b01/backup/esd/imptsa.log

7) @utlrp.sql
compile all invalid packages

8) Manually update some info as TSA user.
update associate set cell_phone = 4194661818;
update associate set email ='ttorti@staffingangel.com';
commit;

9) Install plpdf (1_create_user.sql & 2_install_objects.sql & 3_compile_schema.sql )
install plpldf packages v.2.2.1: 1_create_user.sql as SYS, 2_install_objects.sql as plpdf, 3_compile_schema.sql as SYS

10) install sys packages for user creation (unzip sys-schema-objects.zip & run all scripts (by running pks.sql, pks.sql, and prc.sql in order) as SYS with SET SCAN OFF option to prevent & prompting)

10.1) Run grants_post_import.sql
10.2) Run grant-sys-packages.sql

Web server:
create dads.conf in modplsql

Request open ports on SuSE firewall for oracle (1158, 1521, 7780)

All files in NFS /b01/backup/esd.

**Notes:**

Please open port 7780 on both ah250 and ah251. We also need to have DNS entry load balancing between the following URLs:http://ah250.appshosting.com:7780/sart/tsa.chlogin.hphttp://ah251.appshosting.com:7780/sart/tsa.chlogin.hphttp://sadev.appshosting.com:7780/sart/tsa.chlogin.hp

---

### 308. Production RAC Configuration for Staffing Angel

**Topic ID:** 2701

**Production RAC Configuration for Staffing Angel**

http://download.oracle.com/docs/cd/E11882_01/install.112/e17214/chklist.htm#sthref72

---

### 326. We can use DBCA to delete and create new RAC database

**Topic ID:** 2701

http://download.oracle.com/docs/cd/E11882_01/install.112/e17214/dbcacrea.htm#RILIN404

Also read deep into SCAN naming and how it affects listener.
http://download.oracle.com/docs/cd/E11882_01/install.112/e17212/concepts.htm#CWLIN399

---

### 327. upgrading to 11.2.2 patchset

**Topic ID:** 2701

Here is the patch # and doc:

Patch 10098816: 11.2.0.2.0 PATCH SET FOR ORACLE DATABASE SERVER
http://download.oracle.com/docs/cd/E11882_01/install.112/e17212/procstop.htm#BABEHGJG

---

### 314. OPManager Configuration Backup

**Topic ID:** 301

Is it possible to take a backup of OpManager data and configurations?

Backup
------
To take a backup of the data and configurations in OpManager,

*ExecuteBackupDB.bat/sh from OpManager Home/bin/backup> directory
to start the data backup.

*Once the backup is over, a directory backup is created in OpManager Home directory and the backup file with .zip extension is placed in this directory.

The name of the backup file contains the date and time at which backup is taken. Example:BackUpConf_JUN25_2009_02_56_39_8020.zip

---

### 316. Westar Server and Network Details

**Topic ID:** 2110

Dell R410

DRAC: 192.168.0.130
Windows Server : VPN Server

Dell R510 - SAS Drives - westar11

DRAC: 192.168.0.131
Xen Server IP: 192.168.0.134
Linux IP: 192.168.0.137 westar13 ( root / P3ac0ck! )

Dell R510 - SATA Drives

DRAC: 192.168.0.132 ( root /calvin )
Xen Server IP: 192.168.0.135 - westar12
Linux IP: 192.168.0.138 - westar14 ( root / P3ac0ck! )
Windows IP : 192.168.0.140 ( administrator / U6... , user1 / P3ac0ck! )

---

Passwords:
Xenserver Root: w3$$r!

---

Wireless Passphrase

SSID: Private

l3tM31N
36AC783E5B hex

---

Task:

Log into Xenserver: westar.appshosting.com

---

Westar Firewall Login:

https://westar.appshosting.com:8080

admin/Delta1

---

PPTP VPN

Username: User1
Password: Apps123
Hostname: westar.appshosting.com

---------------------

Windows RDP Login

User1 / P3a...
administrator / ^U6...

---

### 319. Sakura DRAC Console info

**Topic ID:** 2403

10.16.3.205 - ebs03
10.16.3.204 - ebs01
10.16.3.203 - ebs02
10.16.3.207 - backup01
10.16.3.218 - Dell ML6000
10.16.3.222 - ( 10.16.5.31 ) ( VMWare Server )

---

### 320. Reset OPManager Admin Password

**Topic ID:** 2403

Edit "c:\\OpManager\\conf\\securitydbData.xml"
Replace OPManager encrypted admin password to "d7963B4t"

This resets the password to "admin"

---

### 336. out of memory and exhausted the OS min free Emtek sb-db server

**Topic ID:** 2403

Are they on 32 bit OS?

Can you check what was set now?

1) Recommended. Edit /etc/sysctl.conf and set "vm.min_free_kbytes =" or

2) "echo> /proc/sys/vm/min_free_kbytes" in /etc/rc.local or some other place in the boot process.

-----

should be 5120 or 10240 (or higher).

---

### 338. Configuring Discoverer for Emtek REPT

**Topic ID:** 2113

2.******Set Applications Profile Options for Discoverer using AutoConfig(PLEASE make this changes both on Concurrent Tier and forms Tier)**
To edit the context file using Oracle Applications Manager, login to Oracle Applications Manager and navigate to Site Map > AutoConfig > Edit Parameters.

Specify variables as listed in the table below:

TitleVariable NameDescriptionValueConfigure standalone discoverer`s_disco_standalone`Set the value of this variable to '`true`' if E-business suite 11i is configured to use a standalone discoverer server`true`*Discoverer machine name`s_disco_machine`Set the value of this variable to the machine configured to run Discoverer services
for example:`sb-app.emtek.epi`Discoverer port`s_disco_port`Set the value of this parameter to the port on which the HTTP listener is listening for Discoverer requests
for example:`7778`Discoverer protocol`s_disco_protocol`Set the value of this variable to the appropriate protocol used for accessing discoverer. Acceptable values for this parameter are`http`or`https``http | https`Disco Version Comma`s_disco_ver_comma`Disco Version`10,1,2`Discovery EUL prefix`s_disco_eul_prefix`Discovery EUL prefix`EUL`Discovery Service Status`s_discostatus`Discoverer 10.1.2 is being installed in a new standalone Oracle Application Server 10g OracleHome and replaces the Discoverer 4i service embedded in the iAS 1.0.2.2 based 11i OracleHome. This option disables the Discoverer 4i service.`disabled`Note* When s_disco_standalone is set to 'false', AutoConfig will configure Discoverer machine, port, protocol, version to use the Discoverer version installed in the Oracle Apps Rapid Install mid tier server node.
* When s_disco_standalone is set to 'true', AutoConfig will use specified AutoConfig variables Discoverer machine, port, protocol, version.
Other Discoverer related AutoConfig parameters are not relevant for Discoverer 10.1.2 configuration because AutoConfig does not control configuration of the remote, standalone Oracle Business Intelligence 10g Release 2 server node.

The changes will be saved in your Applications Context File`/admin/.xml`.
Run AutoConfig to generate all configuration files for the`APPL_TOP`and the`ORACLE_HOME`s in its supporting technology stack:
`%/admin/scripts//adautocfg.sh**(PLEASErun Autoconfig both on Concurrent Tier and forms Tier)
**`

3.**************Verify Applications profile options in Oracle Applications**
Log into Release 11i with the System Administrator responsibility
Navigate to the Profile > System form
Query the`%Discoverer%`profile options.
Verify the following ICX profile options in Oracle Applications:
ProfileDescriptionValue`ICX_DISCOVERER_LAUNCHER`URL that points to Discoverer Server Launch page
`http://:
/discoverer/plus
?Connect=[APPS_SECURE]``ICX_DISCOVERER_VIEWER_LAUNCHER`URL that points to Discoverer Viewer Servlet
`http://:
/discoverer/viewer
?Connect=[APPS_SECURE]``ICX_DISCOVERER_RELEASE`1 digit number specifying the Discoverer release
`10``ICX_DISCOVERER_USE_VIEWER`Specify whether Discoverer Viewer should be launched instead of Discoverer Plus (default).
`Y | N``ICX_DEFAULT_EUL`ICX: Discoverer End User Layer Schema Prefix
This is the`EULprefix`. The`EULprefix`in combination with the Language code make up the EUL owner at runtime.
`EUL``ICX_DISCOVERER_EUL_LANGUAGE`ICX: Discoverer End User Layer Language Override

Since the End User Layer content is currently available in US English only, it is possible to override the user's general language preference for the Discoverer End User Layer using this profile option. The specified End User Layer language will be used regardless of the individual user's language preferences.

This profile does not affect the National Language Support parameters passed to Discoverer. The Discoverer User Interface will still appear according to the users`ICX_LANGUAGE`and`ICX_TERRITORY`profiles. The User Interface language will only change for valid combinations of`ICX_LANGUAGE`and`ICX_TERRITORY`.`US``ICX_DISCOVERER_PARAMETERS`ICX: Discoverer Parameters
This profile can be used to configure the Exit URL.
In addition to that it may be used to optionally pass additional URL parameters to Discoverer. Compare Note186120.1on Oracle MetaLink.
`exitURL=

for example

exitURL=http://sb-app.emtek.epi:8000/OA_HTML/OA.jsp?OAFunc=OAHOMEPAGE`
``
``
``
APPENDIX:
--------------

REPT Discoverer details:

server : sb-app

OS users: oasrept
obirept

Urls:

Discoverer Viewer:

http://sb-app.emtek.epi:7778/discoverer/viewer

Discoverer Plus;

http://sb-app.emtek.epi:7778/discoverer/plus

Reference:

------------

**Using Discoverer 10.1.2 with Oracle E-Business Suite 11i [ID 313418.1]**

---

### 342. webhost servers mysql root password

**Topic ID:** 2403

The following is the mysql root password for both webhost servers.

fDkjfFR7^65

---

### 343. How to install Flash to get into Oracle support site

**Topic ID:** 2404

1. Go to Flash download web site, and download for Linux.
2. Unzip and untar the file.
3. Copy the flashplayer.so file to the users .mozilla/plugins directory.

Check by typing from brower: about:plugins

---

### 345. Connecting to SAIC

**Topic ID:** 308

Step 1

Log in via SSH to itlinux.appshosting.com
Create SSH tunnel as follows: Source Port: 5950 Destination Port: saic.appshosting.com:5950

Step 2

Using VNC client, VNC to localhost:50 (password wltdoww)
(For better performance in the VNC client options select lower colors)

Step 3

(Ensure Nortel VPN client is connected, otherwise contact Ashok)
RDP to 10.248.18.43
balasubraa / Wltc....!

Step 4

RDP to 204.94.80.200
ashb/wltd.....

Step 5<------ This is one of the DB servers

RDP to db-oak1
balasubraa / Wltc....!

---

### 346. Opening database after cloning crashes database with error ORA-00450: background process 'QMNC' did not start

**Topic ID:** 1801

Perform Media Recovery with Online Redo:
Issue the following statements from SQL.
1.Shutdown immediate.
2.Startup mount
3.SELECT member FROM v$log l, v$logfile f WHERE l.group# = f.group# AND l.status = 'CURRENT';
4.Recover database until cancel;
5.Apply the log member from step 3.
6.Alter database open resetlogs;
Once ur database is succssefully open then take immediate system backup.

If still not working, then do:
1.Mount the database
2. SELECT V1.GROUP#, MEMBER, SEQUENCE#, FIRST_CHANGE#
FROM V$LOG V1, V$LOGFILE V2
WHERE V1.GROUP# = V2.GROUP# ;
This will list all the redo log files and their change numbers.
3. SELECT FILE#, CHANGE# FROM V$RECOVER_FILE;
If the CHANGE# is GREATER than the minimum FIRST_CHANGE#
of your logs, the datafile can be recovered.
4.Recover datafile 'E:\\ORACLE\\ORADATA\\TRAIN1\\SYSTEM01.DBF';
5.keep on applying the redo logs it will request to aplly until u will see the message 'Media recovery complete'.
5.Then open database and take a full backup

WARNING: Be careful with this final action.Final action what I can sujjest is to use _allow_resetlogs_corruption=TRUE
Do as follows

1.Shutdown the database.

2. Add the following parameter in the init.ora file:

_allow_resetlogs_corruption=TRUE

3. Startup mount;

4. Recover database using backup controlfile until cancel;

5. If prompted for a logfile, type CANCEL.

6. alter database open resetlogs;

Since the database is in Noarchive mode this is the last option.u need to be careful while using _allow_resetlogs_corruption parameter as it may make ur database inconsistent.Since as per replies u only wants ur database open so u can use this option.

---

### 348. Create and Remove Load Test Environment Using Backup

**Topic ID:** 901

**Create and Remove Load Test Environment Using Backup of EASE Production
**

**Sets up load testing environment using a backup of Production.**Create Load Test Environment:
**

1.Stop app and web tier (Refer to Start and Stop Prod Environment document).

2.Set up app server for load testing (on prodapp00).

a.b.cp -Rp ease_prodc.mv ease_prod SAVE_ease_prod_ORIG (Save off Production domain)

d.mv prod3.Set up database server for load testing (on proddb00).

a.Log in to database and make note of the location of database files by querying v$datafile.name, v$logfile.member, and v$controlfile.name.

sqlplus / as sysdba

SQL>SQL>SQL>

b.Shut down database

sqlplus / as sysdba

SQL> shutdown immediate;

c.Make note of any other files such as archive log files that exist currently.ls /u01/app/oracle/archive/prod

d.Back up prod, save off original prod, and restore the prod backup to be used for load testing.

cd /u01/app/oracle/oradata

cp -Rp prod X_prod_COPYmv prod SAVE_prod_ORIG (Save off original prod data files)

mv X_prod_COPY prod

cd /u01/app/oracle/flash_recovery_area

cp -Rp prod X_prod_COPYmv prod SAVE_prod_ORIG (Save off original prod files)

mv X_prod_COPY prod**Make sure you captured all files by comparing against the results of queries in step (a) above.

4.Start database and application server (Refer to Start and Stop Prod Environment document).

**Restore Production after Load Test
**

1.Stop app and web tier (Refer to Start and Stop Prod Environment document).

2.Restore the domaina.b.mv ease_prod DEL_ease_prod_LoadTest

c.mv SAVE_ease_prod_ORIG ease_prod

3.Restore database server to prior to load testing (on proddb00).

a.Shut down database

sqlplus / as sysdba

SQL> shutdown immediate;

b.Restore Production database to prior to load testing

mv prod DEL_prod_LoadTest040611 (Move our prod data files used during load testing)

mv SAVE_prod_ORIG prod (Bring back Prod datafiles prior to load testing)

cd /u01/app/oracle/flash_recovery_area

mv prod DEL_prod_LoadTest040611 (Move out prod files used during load testing)

mv SAVE_prod_ORIG prod

c.Delete any archive log files generated during load testing.

ls /u01/app/oracle/archive/prod

rm

4.Start database and application server (Refer to Start and Stop Prod Environment document).

---

### 354. How to remove Oracle RAC software 11g R2/12c

**Topic ID:** 1801

http://download.oracle.com/docs/cd/E11882_01/rac.112/e16794/adddelclusterware.htm#CWADD1167

0) Disable the Oracle Clusterware applications and daemons running on the node.
1) Run the`rootcrs.pl`script as`root`from the`Grid_home``/crs/install`directory on the node to be deleted, as follows:
Note: /u01/app/11.2.0/grid/crs/install

Before you run this command, you must stop the`EMAGENT`.
# ./rootcrs.pl -deconfig -force
If you are deleting multiple nodes, then run the`rootcrs.pl`script on each node that you are deleting.
If you are deletingallnodes from a cluster, then append the`-lastnode`option to the preceding command to clear OCR and the voting disks, as follows:
# ./rootcrs.pl -deconfig -force -lastnode
Caution:
Only use the`-lastnode`option if you are deleting all cluster nodes because that option causes the`rootcrs.pl`script to clear OCR and the voting disks of data.
Notes:

(NOTE: After deconfiguring, remove,and /etc/oracle.)

If you do not use the`-force`option in the preceding command or the node you are deleting is not accessible for you to execute the preceding command, then the VIP resource remains running on the node. You must manually stop and remove the VIP resource using the following commands as`root`from any node that you are not deleting:

```
# srvctl stop vip -i vip_name -f\n# srvctl remove vip -i vip_name -f\n

```

([root@ah247 bin]# ./srvctl stop vip -i ah247-vip -f
****Unable to retrieve Oracle Clusterware home.
Start Oracle Clusterware stack and try again.)
Where`vip_name`is the VIP for the node to be deleted. If you specify multiple VIP names, then separate the names with commas and surround the list in double quotation marks (`"`).
From any node that you arenot deleting, run the following command from the`Grid_home``/bin`directory as`root`to delete the node from the cluster:
# crsctl delete node -nnode_to_be_deleted

([root@ah247 bin]# ./crsctl delete node -n ah247
CRS-4047: No Oracle Clusterware components configured.
CRS-4000: Command Delete failed, or completed with errors.)

On the nodeyou want to delete, run the following command as the user that installed Oracle Clusterware from the`Grid_home``/oui/bin`directory where`node_to_be_deleted`is the name of the node that you are deleting:
$ ./runInstaller -updateNodeList ORACLE_HOME=Grid_home"CLUSTER_NODES=
{node_to_be_deleted}" CRS=TRUE -silent -local
1.On the node that you are deleting, run the following command as the user that installed Oracle Clusterware. Depending on whether you have a shared or non-shared Oracle home, complete one of the following procedures:
2. If you have a shared home, then run the following command from the`Grid_home``/oui/bin`directory on the node you want to delete:

```
                    $ ./runInstaller -detachHome ORACLE_HOME=Grid_home -silent -local\n

```
(SY: Accidentally run on ah247, seems to have worked good.)

For a non-shared home, deinstall the Oracle Clusterware home from the node that you want to delete, as follows, by running the followingcommand, where`Grid_home`is the path defined for the Oracle Clusterware home:
$Grid_home/deinstall/deinstall –local
=> Keeps prompting. See Appendix A
Caution:
If you do not specify the`-local`flag, then the command removes the Grid Infrastructure home from every node in the cluster.
On any node other than the node you are deleting, run the following command from the`Grid_home``/oui/bin`directory where
`remaining_nodes_list`is a comma-delimited list of the nodes that are going to remain part of your cluster:
$ ./runInstaller -updateNodeList ORACLE_HOME=Grid_home"CLUSTER_NODES=
{remaining_nodes_list}" CRS=TRUE -silent

Note:

You must run this command a second time where`ORACLE_HOME=``ORACLE_HOME`and`CRS=TRUE -silent`is omitted from the syntax, as follows:

```
$ ./runInstaller -updateNodeList ORACLE_HOME=ORACLE_HOME\n "CLUSTER_NODES={remaining_nodes_list}"\n

```

Run the following CVU command to verify that the specified nodes have been successfully deleted from the cluster:

```
$ cluvfy stage -post nodedel -n node_list [-verbose]\n

```

See Also:
`"cluvfy stage -post nodedel"`for more information about this CVU command

**Appendix A:**
[orarac@ah247 deinstall]$ ./deinstall -local
Checking for required files and bootstrapping ...
Please wait ...
Location of logs /u01/app/oraInventory/logs/############ ORACLE DEINSTALL & DECONFIG TOOL START ############

######################## CHECK OPERATION START ########################
Install check configuration START
The deinstall tool cannot determine the home type needed to deconfigure the selected home. Please select the type of Oracle home you are trying to deinstall.
Single Instance database - Enter 1
Real Application Cluster database - Enter 2
Grid Infrastructure for a cluster - Enter 3
Grid Infrastructure for a stand-alone server - Enter 4
Client Oracle Home - Enter 5
Transparent Gateways Oracle Home - Enter 6
3The cluster node(s) on which the Oracle home exists are: (Please input nodes seperated by "

... [Content truncated for readability]

---

### 356. How to clone Oracle database home

**Topic ID:** 1801

**Prerequisites:**
Make sure the new Oracle home owner has read/write/execute permission on the oraInventory (given in /etc/oraInst.loc)

**11.2 or higher:**

When you clone Oracle homes using release 11.2 Database Control, you must update the exclude file list. This file list specifies files that need not be included when the source Oracle home is archived because these files are not required for the cloning operation. Do not included the following files in the archive:

- 

`sqlnet.ora`

- 

`tnsnames.ora`

- 

`listener.ora`

- 

`oratab`

1. Zip or tar up the source Oracle home directory you will clone from.
cd /u01/app/oracle/product/11.2.0
zip -r dbhome_1.zip dbhome_1

2. Copy the zipped file and unzip to new location.
unzip -d /u02/app/oracle/product/11.2.0 dbhome_1.zip

3. On the target computer, change the directory to the unzipped Oracle home directory, and remove all the .ora (*.ora) files present in the unzipped`$ORACLE_HOME/network/admin`directory.

4. Run clone command from $ORACLE_HOME/clone/bin.
[orauat@proddb00 bin]$ export ORACLE_HOME=/u02/app/oracle/product/11.2.0/dbhome_2
[orauat@proddb00 bin]$ ls
clone.pl prepare_clone.pl
[orauat@proddb00 bin]$ $ORACLE_HOME/perl/bin/perl clone.pl ORACLE_BASE="/u02/app/oracle" ORACLE_HOME="/u02/app/oracle/product/11.2.0/dbhome_2" OSDBA_GROUP=dba OSOPER_GROUP=dba -defaultHomeName

As root, run root.sh following the instructions on screen.

./runInstaller -clone -waitForCompletion "ORACLE_BASE=/u02/app/oracle" "ORACLE_HOME=/u02/app/oracle/product/11.2.0/dbhome_2" "oracle_install_OSDBA=dba" "oracle_install_OSOPER=dba" -defaultHomeName -defaultHomeName -silent -noConfig -nowait
Starting Oracle Universal Installer...
Checking swap space: must be greater than 500 MB. Actual 6734 MB Passed
Preparing to launch Oracle Universal Installer from /tmp/OraInstall2011-07-05_04-46-35PM. Please wait ...Oracle Universal Installer, Version 11.2.0.1.0 Production
Copyright (C) 1999, 2009, Oracle. All rights reserved.
You can find the log of this install session at:
/u01/app/oraInventory/logs/cloneActions2011-07-05_04-46-35PM.log
.................................................................................................... 100% Done.

Installation in progress (Tuesday, July 5, 2011 4:46:52 PM CDT)
............................................................................. 77% Done.
Install successful
Linking in progress (Tuesday, July 5, 2011 4:46:59 PM CDT)
Link successful
Setup in progress (Tuesday, July 5, 2011 4:47:36 PM CDT)
Setup successful
End of install phases.(Tuesday, July 5, 2011 4:48:31 PM CDT)
Starting to execute configuration assistants
The following configuration assistants have not been run. This can happen because Oracle Universal Installer was invoked with the -noConfig option.
--------------------------------------
The "/u02/app/oracle/product/11.2.0/dbhome_2/cfgtoollogs/configToolFailedCommands" script contains all commands that failed, were skipped or were cancelled. This file may be used to run these configuration assistants outside of OUI. Note that you may have to update this script with passwords (if any) before executing the same.
The "/u02/app/oracle/product/11.2.0/dbhome_2/cfgtoollogs/configToolAllCommands" script contains all commands to be executed by the configuration assistants. This file may be used to run the configuration assistants outside of OUI. Note that you may have to update this script with passwords (if any) before executing the same.
--------------------------------------
WARNING:
The following configuration scripts need to be executed as the "root" user.
/u02/app/oracle/product/11.2.0/dbhome_2/root.sh
To execute the configuration scripts:
1. Open a terminal window
2. Log in as "root"
3. Run the scripts
The cloning of OraHome1 was successful.
Please check '/u01/app/oraInventory/logs/cloneActions2011-07-05_04-46-35PM.log' for more details.
[orauat@proddb00 bin]$ cat /etc/oratab
#

# This file is used by ORACLE utilities. It is created by root.sh
# and updated by the Database Configuration Assistant when creating
# a database.
# A colon, ':', is used as the field terminator. A new line terminates
# the entry. Lines beginning with a pound sign, '#', are comments.
#
# Entries are of the form:
# $ORACLE_SID:$ORACLE_HOME::
#
# The first and second fields are the system identifier and home
# directory of the database respectively. The third filed indicates
# to the dbstart utility that the database should , "Y", or should not,
# "N", be brought up at system boot time.
#
# Multiple entries with the same $ORACLE_SID are not allowed.
#
#
Oracle Universal Installer starts, and then records the cloning actions in the`cloneActions``timestamp``.log`file. This log file is typically located in`/``orainventory_location``/logs`directory.

5. Configure and create database.
To configure the connection information for the new database, run Net Configuration Assistant:
$ cd $ORACLE_HOME/bin
$ ./netca

To create a new database for the newly cloned

... [Content truncated for readability]

---

### 357. Deleting a node from RAC

**Topic ID:** 2701

1.Ensure that Grid_home correctly specifies the full directory path for the Oracle Clusterware home on each node, where Grid_home is the location of the installed Oracle Clusterware software.
2.Run the following command as either root or the user that installed Oracle Clusterware to determine whether the node you want to delete is active and whether it is pinned:
$ olsnodes -s -t
3.Disable the Oracle Clusterware applications and daemons running on the node. Run the rootcrs.pl script as root from the Grid_home/crs/install directory on the node to be deleted, as follows:
# ./rootcrs.pl -deconfig -force
4.From any node that you are not deleting, run the following command from the Grid_home/bin directory as root to delete the node from the cluster:
crsctl delete node -n ah248
5.On the node you want to delete, run the following command as the user that installed Oracle Clusterware from the Grid_home/oui/bin directory where node_to_be_deleted is the name of the node that you are deleting
./runInstaller -updateNodeList ORACLE_HOME=/u02/app/11.2.0/grid "CLUSTER_NODES=
{ah248}" CRS=TRUE -silent -local
6. On the node that you are deleting, run the following command as the user that installed Oracle Clusterware. Depending on whether you have a shared or non-shared Oracle home, complete one of the following procedures:

- If you have a shared home, then run the following command from the`Grid_home``/oui/bin`directory on the node you want to delete:

```
$ ./runInstaller -detachHome ORACLE_HOME=/u02/app/11.2.0/grid -silent -local\n
```

- For a non-shared home, deinstall the Oracle Clusterware home from the node that you want to delete, as follows, by running the following command, where`Grid_home`is the path defined for the Oracle Clusterware home:

```
$ /u02/app/11.2.0/grid/deinstall/deinstall –local

```

**Caution:**
If you do not specify the`-local`flag, then the command removes the Grid Infrastructure home from every node in the cluster.

7.On any node other than the node you are deleting, run the following command from the Grid_home/oui/bin directory where remaining_nodes_list is a comma-delimited list of the nodes that are going to remain part of your cluster:
./runInstaller -updateNodeList ORACLE_HOME=/u02/app/11.2.0/grid "CLUSTER_NODES= {ah247}" CRS=TRUE -silent

8.Run the following CVU command to verify that the specified nodes have been successfully deleted from the cluster:
$ cluvfy stage -post nodedel -n node_list [-verbose]
9.Below is solution suggested by SR 3-3778509761
./runInstaller -updateNodeList "CLUSTER_NODES={ah247}" ORACLE_HOME="/u02/app/11.2.0/grid" ORACLE_HOME_NAME="Ora11g_gridinfrahome1" LOCAL_NODE="ah247" CRS=[false]

---

### 358. How to add new node to 11gR2 RAC cluster

**Topic ID:** 2701

**Prereq:**
* Set up user equivalence for new node.

### Adding a Cluster Node on Linux and UNIX SystemsThis procedure describes how to add a node to your cluster. This procedure assumes that:

- There is an existing cluster with two nodes named`node1`and`node2`

- You are adding a node named`node3`using a virtual node name,`node3-vip`, that resolves to an IP address, if you are not using Grid Naming Service (GNS)

- You have successfully installed Oracle Clusterware on`node1`and`node2`in a non-shared home, where`Grid_home`represents the successfully installed home

To add anode:

- Ensure that you have successfully installed Oracle Clusterware on at least one node in your cluster environment. To perform the following procedure,`Grid_home`must identify your successfully installed Oracle Clusterware home.

See Also:
Oracle Grid Infrastructure Installation Guidefor Oracle Clusterware installation instructions

- Verify the integrity of the cluster and`node3`:

```
$ cluvfy stage -pre nodeadd -n ah248 [-fixup [-fixupdir fixup_dir]] [-verbose]\n
```
You can specify the`-fixup`option and a directory into which CVU prints instructions to fix the cluster or node if the verification fails.

- Navigate to the`Grid_home``/oui/bin`directory on`node1`and run the`addNode.sh`script using the following syntax, where`node3`is the name of the node that you are adding and`node3-vip`is the VIP name for the node:
If you are using Grid Naming Service (GNS), run the following command:

```
$ ./addNode.sh "CLUSTER_NEW_NODES={ah248}"  ==> Threw some error about number of nodes not matching...  proceeded with non-GNS command next...\n
```
If you are not using GNS, run the following command:

```
$ ./addNode.sh "CLUSTER_NEW_NODES={ah248}" "CLUSTER_NEW_VIRTUAL_HOSTNAMES={ah248-vip}"              \nAlternatively, you can specify the entries shown in Example 5-1 in a response file, where file_name is the name of the file, and run the addNode.sh script, as follows:

```
$ ./addNode.sh -responseFile file_name\n
```

Example 5-1 Response File Entries for Adding Oracle Clusterware Home

```
RESPONSEFILE_VERSION=2.2.1.0.0\n\nCLUSTER_NEW_NODES="{node3}"\nCLUSTER_NEW_VIRTUAL_HOSTNAMES="{node3-vip}"\n
```

```

- 
```

```
 If you have an Oracle RAC or Oracle RAC One Node database configured on the cluster and you have a non-shared Oracle home, then do the following to extend the Oracle database home to node3:
```

```

- Navigate to the`Oracle_home``/oui/bin`directory on`node1`and run the`addNode.sh`script using the following syntax:

```
$ ./addNode.sh "CLUSTER_NEW_NODES={node3}"\n
```

- Run the`Oracle_home``/root.sh`script on`node3`as`root`, where`Oracle_home`is the Oracle RAC home.

5.Run the`Grid_home``/root.sh`script on the`node3`as`root`.
6. Run the following CVU command to check cluster integrity. This command verifies that any number of specified nodes has been successfully added to the cluster at the network, shared storage, and clusterware levels:

- 
```
$ cluvfy stage -post nodeadd -n node3 [-verbose]\n
```

See Also:
`"cluvfy stage [-pre | -post] nodeadd"`for more information about this CVU command

Check whether either a policy-managed or administrator-managed Oracle RAC database is configured to run on`node3`(the newly added node). If you configured an administrator-managed Oracle RAC database, you may need to use DBCA to add an instance to the database to run on this newly added node.

**NOTE:**To start/stop cluster, execute as root user "service ohasd start/stop" or "crsctl start/stop crs"

---

### 360. Commands to Manage Oracle RAC Environments

**Topic ID:** 2701

Set environment variables:

Database (orarac user):
For Grid and ASM:
. oraenv
(+ASM1, 2, 3, etc. depending on server)

For database instance:
. oraenv
(tsah1, 2, 3, etc.)

Start/stop cluster:
As root:
service ohasd start/stop

Check status of services:
After setting Grid environment,
crsctl status resource -t

To manage resources, database, instance listener, node services, etc.:
srvctl -help

Check status of ASM diskgroup and disks:
sqlplus / as sysasm
select name, state, type, total_mb, free_mb from v$asm_diskgroup;
col path format a12
select group_number, disk_number, name, label, path, mount_status, header_status, mode_status, state, total_mb, free_mb, failgroup from v$asm_disk;

Setting/Resetting ASM discovery path:
ALTER SYSTEM SET asm_diskstring = 'ORCL:ASM*' SCOPE=SPFILE;
ALTER SYSTEM RESET asm_diskstring SCOPE=SPFILE SID='*';

Add disks:
http://download.oracle.com/docs/cd/B28359_01/server.111/b31107/asmdiskgrps.htm#CHDBIFGA
ALTER DISKGROUP data ADD DISK
'ORCL:ASM5' NAME asm5,
'ORCL:ASM6' NAME asm6;

Resize disks in fail group:
ALTER DISKGROUP dgroup1
RESIZE DISKS IN FAILGROUP failgrp1 SIZE 100G;

---

### 361. adding iscsi disk to rhel - By Sagar

**Topic ID:** 2403

# CentOS / Red Hat Linux: Install and manage iSCSI Volume

Internet SCSI (iSCSI) is a network protocol s that allows you to use of the SCSI protocol over TCP/IP networks. It is good alternative to Fibre Channel-based SANs. You can easily manage, mount and format iSCSI Volume under Linux. It allows access to SAN storage over Ethernet.

## Open-iSCSI Project

Open-iSCSIproject is a high-performance, transport independent, multi-platform implementation of iSCSI. Open-iSCSI is partitioned into user and kernel parts.

Instructions are tested on:
[a] RHEL 5
[b] CentOS 5
[c] Fedora 7
[d] Debian / Ubuntu Linux

## Install Required Package

**iscsi-initiator-utils RPM package**- The iscsi package provides the server daemon for the iSCSI protocol, as well as the utility programs used to manage it. iSCSI is a protocol for distributed disk access using SCSI commands sent over Internet Protocol networks. This package is available under Redhat Enterprise Linux / CentOS / Fedora Linux and can be installed using yum command:
`# yum install iscsi-initiator-utils`

### A note about Debian / Ubuntu Linux

If you are using**Debian / Ubuntu**Linux install open-iscsi package, enter:
`$ sudo apt-get install open-iscsi`

## iSCSI Configuration

There are three steps needed to set up a system to use iSCSI storage:

- iSCSI startup using the init script or manual startup. You need to edit and configure iSCSI via /etc/iscsi/iscsid.conf file
- Discover targets.
- Automate target logins for future system reboots.
- You also need to obtain iSCSI username, password and storage server IP address (target host)

### Step # 1: Configure iSCSI

Open /etc/iscsi/iscsid.conf with vi text editor:
`# vi /etc/iscsi/iscsid.conf`
Setup username and password:
`node.session.auth.username = My_ISCSI_USR_NAME
node.session.auth.password = MyPassword
discovery.sendtargets.auth.username = My_ISCSI_USR_NAME
discovery.sendtargets.auth.password = MyPassword`

Where,

- **node.session.***is used to set a CHAP username and password for initiator authentication by the target(s).
- **discovery.sendtargets.***is used to set a discovery session CHAP username and password for the initiator authentication by the target(s)

You may also need to tweak and set other options. Refer to man page for more information. Now start the iscsi service:
`# /etc/init.d/iscsi start`

### Step # 2: Discover targets

Now use iscsiadm command, which is a command-line tool allowing discovery and login to iSCSI targets, as well as access and management of the open-iscsi database. If your storage server IP address is 192.168.1.5, enter:
`# iscsiadm -m discovery -t sendtargets -p 192.168.1.5
# /etc/init.d/iscsi restart`

Now there should be a block device under /dev directory. To obtain new device name, type:
`# fdisk -l`
or
`# tail -f /var/log/messages`
Output:

```
Oct 10 12:42:20 ora9is2 kernel:   Vendor: EQLOGIC   Model: 100E-00           Rev: 3.2\nOct 10 12:42:20 ora9is2 kernel:   Type:   Direct-Access                      ANSI SCSI revision: 05\nOct 10 12:42:20 ora9is2 kernel: SCSI device **sdd**: 41963520 512-byte hdwr sectors (21485 MB)\nOct 10 12:42:20 ora9is2 kernel: sdd: Write Protect is off\nOct 10 12:42:20 ora9is2 kernel: SCSI device sdd: drive cache: write through\nOct 10 12:42:20 ora9is2 kernel: SCSI device sdd: 41963520 512-byte hdwr sectors (21485 MB)\nOct 10 12:42:20 ora9is2 kernel: sdd: Write Protect is off\nOct 10 12:42:20 ora9is2 kernel: SCSI device sdd: drive cache: write through\nOct 10 12:42:20 ora9is2 kernel:  sdd: unknown partition table\nOct 10 12:42:20 ora9is2 kernel: sd 3:0:0:0: Attached scsi disk sdd\nOct 10 12:42:20 ora9is2 kernel: sd 3:0:0:0: Attached scsi generic sg3 type 0\nOct 10 12:42:20 ora9is2 kernel: rtc: lost some interrupts at 2048Hz.\nOct 10 12:42:20 ora9is2 iscsid: connection0:0 is operational now
```

**/dev/sdd**is my new block device.

### Step # 3: Format and Mount iSCSI Volume

You can now partition and create a filesystem on the target using usual fdisk and mkfs.ext3 commands:
`# fdisk /dev/sdd
# mke2fs -j -m 0 -O dir_index /dev/sdd1`
OR
`# mkfs.ext3 /dev/sdd1`

Tip: If your volume is large size like 1TB, run mkfs.ext3 in background using nohup:
`# nohup mkfs.ext3 /dev/sdd1 &`

Mount new partition:
`# mkdir /mnt/iscsi
# mount /dev/sdd1 /mnt/iscsi`

### Step #4: Mount iSCSI drive automatically at boot time

First make sure iscsi service turned on at boot time:
`# chkconfig iscsi on`
Open /etc/fstab file and append config directive:
`/dev/sdd1 /mnt/iscsi ext3 _netdev 0 0`
Save and close the file.

---

### 362. Oracle Applications (11.5.10.2) Installation on Enterprise Linux 4.5\r\nRHEL prerequisites prereqs

**Topic ID:** 2403

- 

  - Home
  - Articles
  - Scripts
  - Forums
  - Blog
  - Certification
  - Misc
  - Search
  - About
  - Printer Friendly

Oracle 8i|Oracle 9i|Oracle 10g|Oracle 11g|Miscellaneous|PL/SQL|SQL|Oracle RAC|Oracle Apps|Linux
Home»Articles»Apps» Here

# Oracle Applications (11.5.10.2) Installation on Enterprise Linux 4.5This article is intended as a brief guide to installing Oracle Applications (11.5.10.2) on Enterprise Linux 4.5. The article is based on a server installation with a minimum of 2G swap, secure Linux disabled and the following package groups installed:

- X Window System
- GNOME Desktop Environment
- Editors
- Graphical Internet
- Server Configuration Tools
- Development Tools
- Administration Tools
- System Tools
Alternative base installations may require additional packages to be loaded.

- Download Software
- Unpack Files
- Hosts File
- Set Kernel Parameters
- Setup
- Installation
- Post Installation
- Shutdown/Startup
- Rapid Installation Wizard Portal

## Download SoftwareDownload two additional packages from MetalinkPatch 4198954.

Make sure an appropriate Java JDK (1.3.1) is available on the system.

## Unpack FilesFirst unzip the Oracle patch:

```
unzip p4198954_21_LINUX.zip
```
Next, create a staging area for the Oracle Applications software:

```
mkdir /Stage11i\ncd /Stage11i\n\n# Start Here\nmkdir startCD\n\n# APPL_TOP\nmkdir oraApps\n\n# RDBMS\nmkdir oraDB\n\n# Tools\nmkdir oraiAS\n\n# Databases\nmkdir oraAppDB
```
Copy the contents of all the DVDs into the appropriate directories.

## Hosts FileThe /etc/hosts file must contain a fully qualified name for the server:

```
    
```

## Set Kernel ParametersAdd the following lines to the /etc/sysctl.conf file:

```
kernel.shmmax = 2147483648\nkernel.shmmni = 100\nkernel.shmall = 2097152\n# semaphores: semmsl, semmns, semopm, semmni\nkernel.sem = 100 256 100 100\nfs.file-max = 327679\nkernel.hostname   = testapps01.localdomain  #<--- full qualified hostname !!\nkernel.domainname = localdomain             #<--- correct domain name !!
```
Run the following command to change the current kernel parameters:
```
/sbin/sysctl -p
```
Add the following lines to the /etc/security/limits.conf file:

```
oracle soft nofile 65536\noracle hard nofile 65536\noracle soft nproc 16384\noracle hard nproc 16384
```

## SetupThe following additional packages are required. Depending on the update/respin version of Enterprise Linux, the exact package versions and locations may vary.

```
alsa-lib-devel-*\naudiofile-devel-*\ncompat-db-*\ncompat-gcc-32-3*\ncompat-gcc-32-c++-3*\ncompat-libcwait-2*\ncompat-libgcc-296-2*\ncompat-libstdc++-296-2*\ncompat-oracle-rhel4-1*\nesound-0*\nesound-devel-0*\nfontconfig-devel-2*\nfreetype-devel-2*\ngcc-3*\ngcc-c++-3*\nglib-1*\nglib-devel-1*\ngnome-libs-1*\ngnome-libs-devel-1*\ngtk+-devel-1*\ngtk2-devel-2*\nimlib-1*\nimlib-devel-1*\njdk-1*\nlibaio-0*\nlibaio-devel-0*\nlibjpeg-devel-*\nlibtiff-devel-*\nlibungif-devel-*\nlibungif-progs-*\nmake-3*\nopenmotif21*\nORBit-devel-*\nxorg-x11-deprecated-libs-6*\nxorg-x11-deprecated-libs-devel-6*\nxorg-x11-devel-*
```
Due to all the package inter-dependencies, it probably makes sense to copy all these packages from the CDs to a single directory, then install then using the following command. For convenience, I wrapped all the necessary packages for an OEL 4.5 installation into a single tar file (11i-rh4-rpms.tar), making subsequent installations much simpler.

```
rpm -Uvh *.rpm
```
Install the packages associated withPatch 4198954:

```
cd 4198954\nrpm -Uvh compat-oracle-rhel4-1*\nrpm -Uvh compat-libcwait-2*
```
Create the new groups and users:

```
groupadd oinstall\ngroupadd dba\ngroupadd oper\ngroupadd apache\n\nuseradd -g oinstall -G dba oracle\npasswd oracle\n\nuseradd -g oinstall -G apache apache\npasswd apache
```
Create the directories in which the Oracle software will be installed:

```
mkdir -p /u01\nchown -R oracle:oinstall /u01
```
Login as the oracle user and add the following line at the end of the .bash_profile file:

```
# Oracle 9i\nLD_ASSUME_KERNEL=2.4.19; export LD_ASSUME_KERNEL
```

## InstallationLog into the oracle user. If you are using X emulation then set the DISPLAY environmental variable:

```
DISPLAY=:0.0; export DISPLAY
```
Start the Rapid Install Wizard by issuing the following commands:

```
cd /Stage11i/startCD/Disk1/rapidwiz/\nchmod u+x rapidwiz\n./rapidwiz
```
Follow any instructions and rerun as requested. The Rapid Installation Wizard installation is shown below.

- Click the "Next" button on the welcome screen.

- Accept the default "Install Oracle Applications E-Business 11i" option by clicking the "Next" button.

- Select the "No" option, then click the "Next" button.

- Select the "Single-node" option, then click the "Next" button.

- Select the "fresh database" database type, enter a database name, in this case I used "PLAY", then click the "Next" button.

- Enter the appropriate base directory, in this case I used "/u01/oracle", then click the 

... [Content truncated for readability]

---

### 363. Reconfigure EBS after IP address change (new network)

**Topic ID:** 2105

With new IP address change, ran an in-place clone on database and apps tier.

Database:cd $RDBMS_HOME/appsutil/scriptsper adcfgclone.pl dbTechStack
Applications:
cd $COMMON_TOP/clone/bin
perl adcfgclone.pl appsTier

port pool: 0
SID: VIS
base directory: /u01/oracle/VIS

NOTE: Refer to solution #363 for disabling SSL

---

### 364. Tai Ping Bounce

**Topic ID:** 2105

Stop:
1. Stop apps
2. Enable maintenance page,https://docs.google.com/a/appshosting.com/document/d/1hPs5_gSZHoJUE8186Qi7V7Oh6LWejD91EKzwROAIDMI/edit
3. Stop Discoverer -https://docs.google.com/a/appshosting.com/document/d/1BLhgSpnSa_TNNRLE8aeP2W8o0xaeEG-MIMc9RE8u_OY/edit
4. Stop database and listener.

Start:
1. Start database and listener.
2. Disable maitenance page.
3. Start apps
4. Start Discoverer
5. Start Manual workflow Service Components:

---

### 366. Installing Fusion Middleware SOA Suite and WebCenter

**Topic ID:** 901

1. Install database (https://ah71.appshosting.com:1158/em). (sys/system password s0aw3b) -> See db1.jpg & db2.jpg
2. Alter system set processes = 200 scope=spfile; Bounce database for Spaces;
3. Run RCU (TRN prefix, all schema passwords s0aw3b1) -> See rcu1.jpg & rcu2.jpb
4. Install JRockit. -> See jdk1.jpg
5. Install WebLogic. Don't set checkbox for Quickstart at the end of installation -> See wls1.jpg
4. Install Oracle Service Bus. -> See osb1 & osb2.jpg
5. Install SOA Suite. -> See soa1.jpg
6. Install WC Portal & WC Content. (Do later)
7. Create single domain to support both SOA and OSB. Make sure to choose Enterprise Manager in the list of applications, else you won't be able to run EM Fusion console. -> See dom1-7.jpg
(http://docs.oracle.com/cd/E23943_01/doc.1111/e15017/configure_osb.htm#BGBFGBFF)

Domain location: /u04/apporafus6/admin/domains/trn_domain
Admin server URL:http://ah71.appshosting.com:7001
Node manager properties: /u04/app/orafus6/product/fmw/wlserver_10.3/common/nodemanager/nodemanager.properties

/u04/app/orafus6/product/fmw/oracle_common/common/bin/setNMProps.sh
If the Managed Servers are started by Node Manager (as is the case when the servers are started by the Oracle WebLogic Server Administration Console or Fusion Middleware Control), Node Manager must be instructed to use these start scripts so that the server environments are correctly configured for correct classpath and parameters. Specifically, Node Manager must be started with the property`StartScriptEnabled=true`.

If you are running WebLogic in Development mode, make sure to set debugFlag=false in setDomainEnv.sh to avoid multiple managed servers trying to use the same debug port and throwing "ERROR: transport error 202: bind failed: Address already in use".

To avoid connection problem deploy application to SOA server, set the "Listen Address" for soa_server1 managed server to match the hostname, i.e. ah71.appshosting.com. Otherwise, the IP address resolves to local IP and causes problem when connecting from outside.

As requested by trainer, create SOA paritiion from EM console. -> See soapart.jpg

---

### 367. Install Oracle Application Management Pack for Oracle E-Business Suite

**Topic ID:** 2105

**Install Enterprise Manager Cloud Control.

**Discover the Oracle E-Business Suite host and install a Management Agent on that

**Deploy the Fusion Middleware plug-in on all application nodes that run the web

**From the Enterprise Manager Cloud Control Setup menu, select**,

Plug-ins**2-3
**

**Select Oracle Fusion Middleware in the Plug-ins table. Select**and

Management Agent**Oracle Enterprise Manager Cloud Control Getting Started with Oracle Fusion
*

*for more information.

**Set up Software Library in Enterprise Manager.

**If the RDBMS version of the OMS database is 11.2.0.2.0 or greater, then apply

**Apply any additional prerequisite patches as described in "Getting Started with

Oracle Enterprise Manager Cloud Control
*

*, Chapter 8, "Installing Oracle Management Agents".

Oracle Enterprise Manager Cloud Control Administrator's
*

*, Chapter 14, "Updating Cloud Control", section "Deploying and Updating

**Enterprise Manager 12c introduces a new tool and methodology

Oracle Enterprise Manager Cloud Control Administrator's
*

*, Chapter 14, "Updating Cloud Control", section "Using Self

**Please ensure that the downloaded plug-in archive file has the

file type ".opar".

---

### 368. curl SSL issue

**Topic ID:** 2403

There is issue with curl SSL verification. Here is the error we got

curl: (60) SSL certificate problem, verify that the CA cert is OK. Details:
error:14090086:SSL routines:SSL3_GET_SERVER_CERTIFICATE:certificate verify failed
More details here:http://curl.haxx.se/docs/sslcerts.html
curl performs SSL certificate verification by default, using a "bundle"
of Certificate Authority (CA) public keys (CA certs). The default
bundle is named curl-ca-bundle.crt; you can specify an alternate file
using the --cacert option.
If this HTTPS server uses a certificate signed by a CA represented in
the bundle, the certificate verification probably failed due to a
problem with the certificate (it might be expired, or the name might
not match the domain name in the URL).
If you'd like to turn off curl's verification of the certificate, use
the -k (or --insecure) option.

Then do the following.

Put the cacert somewhere in the server. ( If it is godaddy gd_bundle )

Then use the command

/usr/bin/curl --cacert /root/gd-bundle.crt -o temp.txthttps://quote.dispensingsolutionsinc.com/updatedb/index.php

---

### 370. Forms issue on 32 bit IE9 after jre ((64 bit)) upgrade on R12 instance

**Topic ID:** 2105

Weare able to launch forms on IE9 64 bit on windows7.

https://blogs.oracle.com/stevenChan/entry/bulletin_disable_jre_auto_update
Until EBS is certified with JRE 7, EBS users should not rely on the windows auto-update mechanism for their client machines and should manually keep the JRE up to date with the latest versions of 6 on an ongoing basis.

---

### 371. Ask for running script for TPCM AUG2012 AR month end

**Topic ID:** 2111

SQL> @del_orphans_xla_120.sqlEnter value for read_only_mode: NEnter value for enter_ledger_id: 2104Enter value for start_gl_date: 01/08/2012Enter value for end_gl_date: 31/08/2012Entity Id Customer Trx Id Event Type Code Event Date Event Status Code Event Id================= ================= =================== ============= ================== ===================Entity Id Cash Receipt Id Event Type Code Event Date Event Status Code Event Id================= ================= =================== ============= ================== ===================2693834 33061 RECP_UPDATE 13-AUG-12 U 2684971
PL/SQL procedure successfully completed.
SQL> commit;
Commit complete.

---

### 374. adoacorectl.sh was existing with status 204

**Topic ID:** 2105

Got the following error after applying patches.

adoacorectl.sh was existing with status 204

Chedked the following logs
---------------------------------
vi $LOG_HOME/ora/10.1.3/opmn/oacore_default_group_1/oacorestd.err

----Noticed the following message

12/09/12 04:46:54 Error initializing server: Unable to find/read deployment info for
/u03/oracle/crp/apps/tech_st/10.1.3/j2ee/oacore/connectors/OracleASjms/OracleASjms
(/u03/oracle/crp/inst/apps/crp_tp-test01/ora/10.1.3/j2ee/oacore/application-deployments/default/OracleASjms/oc4j-ra.xml)

---Checked for the file if it exists or not

[appcrp@tp-test01 scripts]$ ls -l /u03/oracle/crp/inst/apps/crp_tp-test01/ora/10.1.3/j2ee/oacore/application-deployments/default/OracleASjms/oc4j-ra.xml
ls: /u03/oracle/crp/inst/apps/crp_tp-test01/ora/10.1.3/j2ee/oacore/application-deployments/default/OracleASjms/oc4j-ra.xml: No such file or directory

----The file "oc4j-ra.xml" was missing

I ran autoconfig and then i found the following file and adoacore started without any issues.

[appcrp@tp-test01 scripts]$ ls -l /u03/oracle/crp/inst/apps/crp_tp-test01/ora/10.1.3/j2ee/oacore/application-deployments/default/OracleASjms/oc4j-ra.xml
-rw-r--r-- 1 appcrp dba 5448 Dec 30 2006 /u03/oracle/crp/inst/apps/crp_tp-test01/ora/10.1.3/j2ee/oacore/application-deployments/default/OracleASjms/oc4j-ra.xml
[appcrp@tp-test01 scripts]$

Even though all the services started, we were not getting login page.

To fix that i did the following.

1. shutdown apps tier
2. Compile JSP manually using following method:
cd $FND_TOP/patch/115/bin
perl ojspCompile.pl --compile --flush -p 2

---

### 375. Purge workflow in TPC PTST environment

**Topic ID:** 2111

SQL> update WF_NOTIFICATIONS set mail_status = 'SENT' where mail_status = 'MAIL';
308 rows updated.
SQL> commit;
Commit complete.
SQL> exit

$ sqlplus apps/@$FND_TOP/patch/115/sql/wfntfqup.sql appsAPPLSYS
Copyright (c) 1982, 2005, Oracle. All rights reserved.

Connected to:Oracle Database 10g Enterprise Edition Release 10.2.0.4.0 - 64bit ProductionWith the Partitioning, OLAP, Data Mining and Real Application Testing options

PL/SQL procedure successfully completed.
Elapsed: 00:00:00.35
Commit complete.
Elapsed: 00:00:00.00**** TEMPORARY TABLES / AQs created ****
PL/SQL procedure successfully completed.
Elapsed: 00:00:00.13**** Messages backed up ****
Commit complete.
Elapsed: 00:00:00.00
PL/SQL procedure successfully completed.
Elapsed: 00:00:03.79*** Re-enqueing messages
PL/SQL procedure successfully completed.
Elapsed: 00:00:00.06
Commit complete.
Elapsed: 00:00:00.00***** Re-enqueue OF Alerts completed *****Disconnected from Oracle Database 10g Enterprise Edition Release 10.2.0.4.0 - 64bit ProductionWith the Partitioning, OLAP, Data Mining and Real Application Testing options[appltst@tp-prod02 ~]$

---

### 377. Clearing cache in R12

**Topic ID:** 2105

**Clearing cache in R12
**

Clearing the “_pages” in R12 creates blank login page issue. Please follow the below steps.

Navigate to Functional Administrator responsibility > Core Services > Caching Framework > Global Configuration > Clear cache

Bounce Apache.

) login to the instance
2) cd $ADMIN_SCRIPTS_HOME
3) adapcctl.sh stop
4) adoacorectl.sh stop

Wait for 1 – 2 minutes

Check if they are down by using “adapcctl.sh status”

5) adapcctl.sh start
6) adoacorectl.sh start

You can check the status with adapcctl.sh status

---

### 380. EBS login page not coming up after running autoconfig.

**Topic ID:** 2105

Bounced apps tier, adoacorectl.sh was exiting with status 204.

Ran autoconfig to fix the issue. But the login page was not coming up.

Shutdown apps and compiled jsp's to fix the issue

Compile JSP manually using following method:

cd $FND_TOP/patch/115/bin
perl ojspCompile.pl --compile --flush -p 2
If still not working, sync wf_local table:
begin
apps.wf_local_synch.BULKSYNCHRONIZATION(P_ORIG_SYSTEM=>'ALL',
P_PARALLEL_PROCESSES=>2,
P_LOGGING=>'LOGGING', P_RAISEERRORS=>TRUE,
P_TEMPTABLESPACE=>'APPS_TS_TX_DATA');
END;
/ 2 3 4 5 6 7

---

### 381. adoacorectl.sh failing to start with status 204

**Topic ID:** 2105

Server.xml file getting updated with a character '>' each time we restart instance
This is something very peculiar that suddenly appeared today after doing some testing with listener parameters.

After we did this each time we restart the instance we had a special character '>' appended to the file server.xml located in /u03/oracle/lsbx/inst/apps/lsbx_tp-test01/ora/10.1.3/j2ee/oacore/config/ which will prevent the oacore process from starting.

The oacore will exit with the following status

adoacorectl.sh: exiting with status 204

You will recieve the error message as shown below in file oacorestd.err under /u03/oracle/lsbx/inst/apps/lsbx_tp-test01/logs/ora/10.1.3/opmn/oacore_default_group_1

10/01/27 17:25:52 Error initializing server: /u03/oracle/lsbx/inst/apps/lsbx_tp-test01/ora/10.1.3/j2ee/oacore/config/server.xml, Fatal error at line 70 offset 1 in file:/u03/oracle/lsbx/inst/apps/lsbx_tp-test01/ora/10.1.3/j2ee/oacore/config/server.xml: .: XML-20100: (Fatal Error) Expected 'EOF'.

To fix this perform the following

1. Set server.xml file access right to read only mode.
2. Start OC4J container.

(or)

Apply the patch 6702510 for suitable version of your IAS.

---

### 383. Resize ERD tablespaces

**Topic ID:** 1801

I made all datafiles autoextendable and set maxsize to 4GB as below.

SQL> select * from dba_data_files where tablespace_name='FLOW_324410510359378685';
FILE_NAME
--------------------------------------------------------------------------------
FILE_ID TABLESPACE_NAME BYTES BLOCKS STATUS
---------- ------------------------------ ---------- ---------- ---------
RELATIVE_FNO AUT MAXBYTES MAXBLOCKS INCREMENT_BY USER_BYTES USER_BLOCKS
------------ --- ---------- ---------- ------------ ---------- -----------
ONLINE_
-------
/d01/oracle/oradata/erd/FLOW_324410510359378685.dbf
12 FLOW_324410510359378685 524353536 64008 AVAILABLE
12 NO 0 0 0 524288000 64000
ONLINE

SQL> alter database datafile '/d01/oracle/oradata/erd/FLOW_324410510359378685.dbf' autoextend on maxsize 4g;
Database altered.
SQL> select * from dba_data_files where tablespace_name='FLOW_324410510359378685';
FILE_NAME
--------------------------------------------------------------------------------
FILE_ID TABLESPACE_NAME BYTES BLOCKS STATUS
---------- ------------------------------ ---------- ---------- ---------
RELATIVE_FNO AUT MAXBYTES MAXBLOCKS INCREMENT_BY USER_BYTES USER_BLOCKS
------------ --- ---------- ---------- ------------ ---------- -----------
ONLINE_
-------
/d01/oracle/oradata/erd/FLOW_324410510359378685.dbf
12 FLOW_324410510359378685 524353536 64008 AVAILABLE
12 YES 4294967296 524288 1 524288000 64000
ONLINE

SQL> r
1* select * from dba_data_files where maxbytes<user_bytes
FILE_NAME
--------------------------------------------------------------------------------
FILE_ID TABLESPACE_NAME BYTES BLOCKS STATUS
---------- ------------------------------ ---------- ---------- ---------
RELATIVE_FNO AUT MAXBYTES MAXBLOCKS INCREMENT_BY USER_BYTES USER_BLOCKS
------------ --- ---------- ---------- ------------ ---------- -----------
ONLINE_
-------
/d01/oracle/oradata/erd/FLOW_183017511064711157.dbf
10 FLOW_183017511064711157 524353536 64008 AVAILABLE
10 NO 0 0 0 524288000 64000
ONLINE

SQL> alter database datafile '/d01/oracle/oradata/erd/FLOW_183017511064711157.dbf' autoextend on maxsize 4g;
Database altered.

---

### 384. Purchase SSL Certificate from GoDaddy

**Topic ID:** 904

**Purchase and Install SSL Certificate
**

1.Log in to CA, www.godaddy.com , as “appshosting” user.

2.Go to SSL account area (All Products -> SSL & Security -> Management/SSL Certificate Management).

3.From SSL Certificate Manage screen, launch Standard SSL management screen from any Account.

4.Purchase Standard SSL certificate (Click Request Certificate from available Standard SSL without associated domain).

5.Click Finished button to send approval request to domain administrator.

**From:**ra@godaddy.com
**Sent:**Monday, August 27, 2012 6:54:22 PM (UTC-08:00) Pacific Time (US & Canada)
**To:**Accounting
**Subject:**Domain Access Approval Request Sent...

Dear Secure Certificate Customer,

We have received a Certificate Signing Request for the domain:www.mountaintravelcompany.com.

Consequently, we have sent a domain access verification request to the following addresses (listed in the Whois database as administrative contact for the domain in the certificate request):shaneparkcity@gmail.com,shaneparkcity@gmail.com. In order to enable further processing of your certificate request, the administrative and/or registrant contact must approve the request.

Please ensure that the recipient e-mail address(es) are indeed the administrative contact for this domain. If the addresses are incorrect, please change the Whois data for your domain and contact us.

Once the necessary changes have been made, please inform us of the changes via phone or e-mail.

If you encounter any problems or have any questions, our Customer Support department is ready to help, around-the-clock, seven days a week.

Customer Support:
E-Mail:ra@godaddy.com
Phone: 480.505.8852
Fax: 480.393.5009

For further information, log in to your account athttps://certs.godaddy.com.

6.Download certificate.

---

### 385. APEX view tablespace utilization

**Topic ID:** 2104

Logon to bps workspace as admin user, then go to Administration tab. Click Monitor Activity-> Workspace Schema Reports-> Schema Tablespace Utilization -> Click the schema-> you will see space utilization

---

### 507. ORDS Installation

**Topic ID:** 901

ords_public_user/Welcome123
**References:**
http://www.oracle.com/technetwork/developer-tools/rest-data-services/documentation/index.html
oracle.com
Oracle REST Data Services Documentation

http://docs.oracle.com/cd/E56351_01/doc.30/e87809/toc.htm
docs.oracle.com
REST Data Services Installation, Configuration, and Development Guide - Contents

1. Create tomcat user:

[root@af86 ~]# useradd tomcat

Install java8 : xx

Install Tomcat : xx

2. Create tablespace for ORDS :

SQL> CREATE TABLESPACE ords DATAFILE '+DATA' size 1G autoextend on MAXSIZE 10G;

Tablespace created.

Install ORDS :

3. Download latest ords version :

[tomcat@af86 ~]$ ls -l
total 46644
-rw-rw-r-- 1 tomcat tomcat 47761766 Jun 26 09:13 ords.3.0.10.165.06.53.zip
[tomcat@af86 ~]$

unzip ords.3.0.10.165.06.53.zip

4. Install ORDS to database.
[tomcat@af86 ords]$ java -jar ords.war install advanced
Enter the name of the database server [localhost]:af86.appsforte.com
Enter the database listen port [1521]:
Enter 1 to specify the database service name, or 2 to specify the database SID [1]:
Enter the database service name:ICONTEST
Enter 1 if you want to verify/install Oracle REST Data Services schema or 2 to skip this step [1]:
Enter the database password for ORDS_PUBLIC_USER:
Confirm password:
Please login with SYSDBA privileges to verify Oracle REST Data Services schema.

Enter the username with SYSDBA privileges to verify the installation [SYS]:
Enter the database password for SYS:
Confirm password:
Enter the default tablespace for ORDS_METADATA [SYSAUX]:ORDS
Jun 26, 2017 11:22:43 AM oracle.dbtools.rt.config.setup.CdbPdbSetup isValidTablespace
INFO: Error the temporary tablespace TEMP does not exist. An existing tablespace is required for ORDS installation.
Enter the temporary tablespace for ORDS_METADATA [SYSAUX]:TEMP2
Enter the default tablespace for ORDS_PUBLIC_USER [USERS]:ORDS
Jun 26, 2017 11:23:34 AM oracle.dbtools.rt.config.setup.CdbPdbSetup isValidTablespace
INFO: Error the temporary tablespace TEMP does not exist. An existing tablespace is required for ORDS installation.
Enter the temporary tablespace for ORDS_PUBLIC_USER [USERS]:TEMP2
Enter 1 if you want to use PL/SQL Gateway or 2 to skip this step.
If using Oracle Application Express or migrating from mod_plsql then you must enter 1 [1]:
Enter the PL/SQL Gateway database user name [APEX_PUBLIC_USER]:
Enter the database password for APEX_PUBLIC_USER:
Confirm password:
Enter 1 to specify passwords for Application Express RESTful Services database users (APEX_LISTENER, APEX_REST_PUBLIC_USER) or 2 to skip this step [1]:
Enter the database password for APEX_LISTENER:
Confirm password:
Enter the database password for APEX_REST_PUBLIC_USER:
Confirm password:
Jun 26, 2017 11:24:46 AM
INFO: Updated configurations: defaults, apex, apex_pu, apex_al, apex_rt
Installing Oracle REST Data Services version 3.0.10.165.06.53
... Log file written to /u01/ords/logs/ords_install_core_2017-06-26_112447_00568.log
... Verified database prerequisites
... Created Oracle REST Data Services schema
... Created Oracle REST Data Services proxy user
... Granted privileges to Oracle REST Data Services
... Created Oracle REST Data Services database objects
... Log file written to /u01/ords/logs/ords_install_datamodel_2017-06-26_112732_00665.log
Completed installation for Oracle REST Data Services version 3.0.10.165.06.53. Elapsed time: 00:02:57.625

Enter 1 if you wish to start in standalone mode or 2 to exit [1]:2
[tomcat@af86 ords]$

5. Deploy ORDS to tomcat

[tomcat@af86 ords]$ mv ords.war /home/tomcat/apache-tomcat-7.0.70/webapps

6. Create user for SQL Developer access :

[tomcat@af87 webapps]$ java -jar ords.war user adminlistener "Listener Administrator"
Enter a password for user adminlistener:
Confirm password for user adminlistener:
Jun 26, 2017 3:02:21 PM oracle.dbtools.standalone.ModifyUser execute
INFO: Created user: adminlistener in file: /u01/ords/config/ords/credentials
[tomcat@af87 webapps]$

7. ORDS mapping

Use https://docs.google.com/spreadsheets/d/1E7XzDDn488SwkrqbBRZ3yPEclAQY4AbWwF7z5i6oCnk/edit#gid=0

java -jar ords.war setup --database highered
java -jar ords.war map-url --type base-path /highered highered
java -jar ords.war setup --database iconsad
java -jar ords.war map-url --type base-path /iconsad iconsad
java -jar ords.war setup --database iconsqst
java -jar ords.war map-url --type base-path /question question
java -jar ords.war setup --database iconsusr
java -jar ords.war map-url --type base-path /iconsusr iconsusr
java -jar ords.war setup --database policy
java -jar ords.war map-url --type base-path /policy policy
java -jar ords.war setup --database professional
java -jar ords.war map-url --type base-path /professional professional
java -jar ords.war setup --database secondary
java -jar ords.war map-url --type base-path /secondary secondary
java -jar ords.war setup --database training
java -jar ords.war map-url --type base-path /training training
java -jar ords.war setup --database educat

... [Content truncated for readability]

---

### 508. How to Test ORDS

**Topic ID:** 901

Reference: https://oracle-base.com/articles/misc/oracle-rest-data-services-ords-create-basic-rest-web-services-using-plsql

1. Create a URL mapping to the new database connection.
```
$ **cd /u01/ords**\n$ **$JAVA_HOME/bin/java -jar ords.war map-url --type base-path /pdb1 pdb1**\nNov 29, 2016 11:06:25 AM\nINFO: Creating new mapping from: [base-path,/pdb1] to map to: [pdb1,,]\n$
```

Web services from the connection can now be referenced using the following base URL.
```
http://ol7-121.localdomain:8080/ords/pdb1/
```

2. Enable REST web services for the test schema itself. We could use any unique and legal URL mapping pattern for the schema, so it is not necessary to expose the schema name as we have done here.
```
CONN testuser1/testuser1@pdb1\n\nBEGIN\n  ORDS.enable_schema(\n    p_enabled             => TRUE,\n    p_schema              => 'TESTUSER1',\n    p_url_mapping_type    => 'BASE_PATH',\n    p_url_mapping_pattern => 'testuser1',\n    p_auto_rest_auth      => FALSE\n  );\n    \n  COMMIT;\nEND;\n/
```

Web services from the schema can now be referenced using the following base URL.
```
http://ol7-121.localdomain:8080/ords/pdb1/testuser1/
```

We are now ready to start.

## 3. Create GET Web Services (Read/SELECT)

This section describes the creation of REST web services using the GET method, which are typically used to read data. To stay true to REST, you should not perform any changes to data with a GET operation. Think of this as query-only. It breaks down the process to give you some indication of the pieces that make up an ORDS RESTful web service. The sections for the other methods, will not be broken down in the same way, but the information in this section is applicable to them also.

### The`CONN testuser1/testuser1@pdb1\n\nBEGIN\n ORDS.define_service(\n p_module_name => 'testmodule1',\n p_base_path => 'testmodule1/',\n p_pattern => 'test/',\n p_method => 'GET',\n p_source_type => ORDS.source_type_query,\n p_source => 'SELECT * FROM global_name',\n p_items_per_page => 0);\n\n COMMIT;\nEND;\n/

```

The basic makeup of an ORDS RESTful web service is as follows.

- Template : A container for one or more handlers. The template must be unique within the module and is associated with a specific path (emp/), which may or may not include parameters.
- We can see this pattern in the URL to access this web service. Remember, the default method for a browser URL is GET, so the final URL listed will work in a browser.Base ORDS URL : http://ol7-121.localdomain:8080/ords/pdb1/ Schema (alias): http://ol7-121.localdomain:8080/ords/pdb1/testuser1/ Module : http://ol7-121.localdomain:8080/ords/pdb1/testuser1/testmodule1/ Template : http://ol7-121.localdomain:8080/ords/pdb1/testuser1/testmodule1/emp/

---

### 422. Error when import Apex workspace

**Topic ID:** 2104

Issue: FYI, I'm trying to install the attached APEX export from MTCTEST workspace to MTCPROD workspace.
I'm getting the error attached in the screen shot when I try to install the application.
Same error whether I re-use the application_id, type in a new application_id, or specify ID 250000.
Ultimately, I want to re-use application ID 250000.
Can someone at appshosting please install the attached application export into the MTCPROD apex workspace, assigning the ID 250000?

ERR-1029 Unable to store session info.ORA-02091: transaction rolled back ORA-02291: integrity constrain violated - parent key not found
Solution:https://forums.oracle.com/forums/thread.jspa?messageID=10074793
Removed all PLSQL blocks from my export file that were creating dynamic actions

---

### 386. Not able to open pages using FancyBox iFrames in Apex

**Topic ID:** 2104

Make a change in the Application Security.

Shared Components > Security Attributes > Browser Security -> Embed in Frames

---

### 387. Bounce Apache - EBS

**Topic ID:** 2105

Bounce Apache.

) login to the instance
2) cd $ADMIN_SCRIPTS_HOME
3) adapcctl.sh stop
4) adoacorectl.sh stop

Wait for 1 – 2 minutes

Check if they are down by using “adapcctl.sh status”

5) adapcctl.sh start
6) adoacorectl.sh start

You can check the status with adapcctl.sh status

---

### 389. OEM,12c startup/shutdown

**Topic ID:** 1801

Startup/Shutdown
---------------------

Use the following commands to start all components

export ORACLE_HOME=/u01/app/oracle/product/11.2.0/db1
export OMS_HOME=/u01/app/Middleware/oms
export AGENT_HOME=/u01/app/Middleware/agent/agent_inst

# Start everything
-----------------------

$ORACLE_HOME/bin/dbstart $ORACLE_HOME
$OMS_HOME/bin/emctl start oms
$AGENT_HOME/bin/emctl start agent

Use the following commands to turn off all components

export ORACLE_HOME=/u01/app/oracle/product/11.2.0/db1
export OMS_HOME=/u01/app/Middleware/oms
export AGENT_HOME=/u01/app/Middleware/agent/agent_inst

# Stop everything
------------------------

$OMS_HOME/bin/emctl stop oms -all
$AGENT_HOME/bin/emctl stop agent
$ORACLE_HOME/bin/dbshut $ORACLE_HOME

---

### 391. Taiping clone from Standby (DR)

**Topic ID:** 2112

1. Make sure all the latest archives are applied to VDR1.

2. Pause the sync by running pause.sh. Shutdown standby on VDR1 or tp-dr01 based on the instance we are cloning (for cloning ADEV, we need to shutdown tp-dr01, for others VDR1)

3. Delete the db,apps,inst on the instance you are cloning (EX: PDEV)

4. Run preclone on db and apps in Production.

5. Copy the db home and appl,comn,10.1.2, 10.1.3 from PRD to PDEV

6. Copy the datafiles (cold copy) from VDR1 to PDEV.

7. Make sure you have initprd.ora in Oracle Home of PDEV , as soon as the copy finishes please export ORACLE_SID=prd (prd.env)

and then do
Startup nomount;
alter database mount standby database;
alter database activate standby database;

8. Above will start prd instance on tp-prod02 (pdev), once this is done , take "alter database backup controlfile to trace";

9. shutdown prd on tp-prod02 (pdev) and then move the /u01/oracle/prd/db/apps_st/data to /u01/oracle/pdev/db/apps_st/data (change the ownership accordingly)

10.once it's done recreate the control file manually by exporting ORACLE_SID=PDEV (pdev_tp-test01.env). Edit it as required and rename it as ctrl.sql

---SQL> @ctrl.sql
---Alter database open resetlogs;
---add tempfile;

11. Run autoconfig on db side

12. Once PDEV db is up, do the clone on the application side and perform post clone steps like changing passwords and run autoconfig (Refer to "Taiping clone procedure" Solution ID : 267)

13.Please make sure bring up DR instance on VDR1 and then run resume.sh

---

### 392. Wiki restore wiki.appshosting.com

**Topic ID:** 2403

Database should be important. No need of webserver files.
Backup the database. download the latest mediawiki from the mediawiki site. Then follow the procedure here.

disable selinux -- check this
On the new server create mysql database
create database wikidb;
grant all privileges on wikidb.* towikiuser@localhostidentified by 'wikidb';
quit
Import the database
cat wikidb.sql | mysql wikidb ( If no password )
cat wikidb.sql | mysql -u root -p wikidb ( provide password )
Download the latest version or same version of mediawiki from mediawiki website
untar ir and place it in DocumentRoot
Browse the virtualhost link
You will get the following on home page
----------------------------------------
MediaWiki 1.19.2
LocalSettings.php not found.
Please set up the wiki first.
------------------------------
Click on "Set up the wiki"
Select the Language "English"
You should get " The environment has been checked. You can install MediaWiki. " ( Install any required packages if missing ).
here is the packages installed when i setup wiki
[root@sagar-test html]# yum list | grep mysql | grep installed
mysql.x86_64 5.5.27-11.el5.art installed
mysql-libs.x86_64 5.5.27-11.el5.art installed
mysql-server.x86_64 5.5.27-11.el5.art installed
mysqlclient15.x86_64 5.0.90-2.el5.art installed
php-mysql.x86_64 5.3.17-10.el5.art installed
[root@sagar-test html]# yum list | grep php | grep installed
php.x86_64 5.3.17-10.el5.art installed
php-cli.x86_64 5.3.17-10.el5.art installed
php-common.x86_64 5.3.17-10.el5.art installed
php-devel.x86_64 5.3.17-10.el5.art installed
php-intl.x86_64 5.3.17-10.el5.art installed
php-ldap.x86_64 5.3.17-10.el5.art installed
php-mysql.x86_64 5.3.17-10.el5.art installed
php-pdo.x86_64 5.3.17-10.el5.art installed
php-pear.noarch 1:1.7.2-2.el5.art installed
php-pecl-apc.x86_64 3.1.10-2.el5.art installed
php-pecl-memcache.x86_64 3.0.6-1.el5.art installed
On the Nxet page enter the following details
Database name : wikidb
Database username : wikiuser
Database password : wikidb
On the next page you will get "There are MediaWiki tables in this database. To upgrade them to MediaWiki 1.19.2, click Continue. "
Click on Continue
You will get following on next screen.
-------------------------------------------
Upgrade existing installation
...have ipb_id field in ipblocks table. ...have ipb_expiry field in ipblocks table. ...already have interwiki table ...indexes seem up to 20031107 standards. ...hitcounter table already exists. ...have rc_type field in recentchanges table. ...have user_real_name field in user table. ...querycache table already exists. ...objectcache table already exists. ...categorylinks table already exists. ...have pagelinks; skipping old links table updates ...il_from OK ...have rc_ip field in recentchanges table. ...index PRIMARY already set on image table. ...have rc_id field in recentchanges table. ...have rc_patrolled field in recentchanges table. ...logging table already exists. ...have user_token field in user table. ...have wl_notificationtimestamp field in watchlist table. ...watchlist talk page rows already present. ...user table does not contain user_emailauthenticationtimestamp field. ...page table already exists. ...have log_params field in logging table. ...logging table has correct log_title encoding. ...have ar_rev_id field in archive table. ...have page_len field in page table. ...revision table does not contain inverse_timestamp field. ...have rev_text_id field in revision table. ...have rev_deleted field in revision table. ...have img_width field in image table. ...have img_metadata field in image table. ...have user_email_token field in user table. ...have ar_text_id field in archive table. ...page_namespace is already a full int (int(11)). ...ar_namespace is already a full int (int(11)). ...rc_namespace is already a full int (int(11)). ...wl_namespace is already a full int (int(11)). ...qc_namespace is already a full int (int(11)). ...log_namespace is already a full int (int(11)). ...have img_media_type field in image table. ...already have pagelinks table. ...image table does not contain img_type field. ...already have unique user_name index. ...user_groups table exists and is in current format. ...have ss_total_pages field in site_stats table. ...user_newtalk table already exists. ...transcache table already exists. ...have iw_trans field in interwiki table. ...wl_notificationtimestamp is already nullable. ...index times already set on logging table. ...have ipb_range_start field in ipblocks table. ...no page_random rows needed to be set ...have user_registration field in user table. ...templatelinks table already exists ...externallinks table already exists. ...job table already exists. ...have ss_images field in site_stats table. ...langlinks table already exists. ...querycache_info table already exists. ...filearchive table already exists. ...have ipb_anon_only field in ipblocks table. ...index rc_ns_usertext already set on recentchanges table. ...index rc_user_text alrea

... [Content truncated for readability]

---

### 394. Steps to create Oracle directory on ah3 and mount to prod.appshosting.com

**Topic ID:** 2104

Steps to create Oracle directory on ah3 and mount to prod.appshosting.com
========================================================

Created Oracle Directory.

SQL> create directory utoug_expdp as '/home/oraapex/customers/utoug';
Directory created.

SQL> grant read,write on directory utoug_expdp to UT_CORE;
Grant succeeded.
SQL> grant read,write on directory utoug_expdp to UTOUG
2 ;
Grant succeeded.
SQL> grant read,write on directory utoug_expdp to UTOUGDEV;
Grant succeeded.
SQL> exit

We need to mount '/home/oraapex/customers/utoug' from ah3 onto "/home_new/utoug/expdp" of prod.appshosting.com (user is utoug)

----Created unix directories "utoug" on ah3 and "expdp" on prod.appshosting.com and gave 777 permissions

---

### 395. How to drop and recreate TEMP Tablespace in Oracle 9i/10g/11g

**Topic ID:** 2105

### How to drop and recreate TEMP Tablespace in Oracle 9i/10g/11g**How to drop and recreate TEMP Tablespace in Oracle 9i/10g/11g**

**1. Create Temporary Tablespace Temp**

CREATE TEMPORARY TABLESPACE TEMP2 TEMPFILE ‘/u01/app/oradata/temp01′ SIZE 2000M, ‘/u01/app/oradata/temp02′ SIZE 2000M';

**2. Move Default Database temp tablespace**

ALTER DATABASE DEFAULT TEMPORARY TABLESPACE temp2;

**3. Make sure No sessions are using your Old Temp tablespace**

a. Find Session Number from V$SORT_USAGE:
SELECT USERNAME, SESSION_NUM, SESSION_ADDR FROM V$SORT_USAGE;

b. Find Session ID from V$SESSION:

If the resultset contains any tows then your next step will be to find the SID from the V$SESSION view. You can find session id by using SESSION_NUM or SESSION_ADDR from previous resultset.

SELECT SID, SERIAL#, STATUS FROM V$SESSION WHERE SERIAL#=SESSION_NUM;
OR
SELECT SID, SERIAL#, STATUS FROM V$SESSION WHERE SADDR=SESSION_ADDR;

c. Kill Session:

Now kill the session with IMMEDIATE.

ALTER SYSTEM KILL 'SID,SERIAL#' IMMEDIATE;

**4. Drop temp tablespace**

DROP TABLESPACE temp INCLUDING CONTENTS AND DATAFILES;

**5. Recreate Tablespace Temp**

CREATE TEMPORARY TABLESPACE TEMP TEMPFILE /u01/app/temp/temp01′ SIZE 2000M;

**6 Move Tablespace Temp, back to new temp tablespace**

ALTER DATABASE DEFAULT TEMPORARY TABLESPACE temp;

**7. Drop temporary for tablespace temp**

DROP TABLESPACE temp2 INCLUDING CONTENTS AND DATAFILES;

No need to do shutdown when drop temp tablespace and the recreate it. If something happen with temp tablespaces e.g. : crash, corrupt, etc. Oracle database will ignore the error, but DML (insert,update,delete) and SELECT Query will suffer.

---

### 396. HOW TO PURGE E-MAIL NOTIFICATIONS FROM THE WORKFLOW QUEUE

**Topic ID:** 2105

HOW TO PURGE E-MAIL NOTIFICATIONS FROM THE WORKFLOW QUEUE

The below outlines the steps.

1) You need to update the notifications you do not want sent, in the WF_NOTIFICATIONS table.

2) Check the WF_NOTIFICATIONS table as below. Records where status = 'OPEN' and mail_status = 'MAIL' are notifications that
will have an e-mail notification sent.

SQL> select notification_id,status,mail_status,begin_date from WF_NOTIFICATIONS where status = 'OPEN' and mail_status = 'MAIL';

3) This should show you which notifications are waiting to be e-mailed.

4) To update a notification so that it will not get e-mailed. Set the MAIL_STATUS = 'SENT'. The mailer will think the e-mail has already been sent
and it will not send it again.

SQL> update WF_NOTIFICATIONS set mail_status = 'SENT' where mail_status = 'MAIL';

-> This will update all notifications waiting to be sent by the mailer.

5) Then run the script wfntfqup.sql to purge the WF_NOTIFICATION_OUT queue and rebuild it with data currently in the WF_NOTIFICATIONS table.
This is what purges all notifications waiting in the queue to be sent.Only the ones where mail_status = 'MAIL' and status = 'OPEN' will be placed in
the WF_NOTIFICATION_OUT queue and sent by the mailer.

SQL>sqlplus apps/apps_pwd @$FND_TOP/patch/115/sql/wfntfqup APPS APPS_PWD APPLSYS

6) Now you can start your WF Containers and then Mailer

---

### 397. Re: FRM - 92095: jinitiator version

**Topic ID:** 2105

If user was able to use forms before and can't do so now, it most likely due to java auto update. User should turn off all auto-update feature on the laptop so JRE can stay 1.6 version. If computer is updated with latest jre 1.7, user will not be able to access Oracle forms.
Use IE9 32bit + 32bit JRE 1.6_16 (and above) to access oracle forms. You can also use IE9 64bit + 64bit JRE 1.6_16 (and above) to do same thing.

---

### 510. Demantra 12.2 installation and setup

**Topic ID:** 2105

**Demantra Install on ASCP**

# Requirments

The minimum requirements for client machines for all Demantra products is:

·1 CPU at 1.3 GHz or faster

·512 MB RAM minimum (1 GB RAM recommended) and 500 MB of free disk space

·Minimum screen resolution of 1280 x 1024 (preferred: 1400 x1050)

**Note**: we will not be able to install weblogic 10.3.6 or higher with new version of Java on the same ASCP server for nanometrics, so request to install and setup in different server

In Oracle Demantra Release 12.2.5 the worksheet plug-in applet and associated Collaborator Workbench web page have been replaced by the Demantra Local Application. The Demantra Local Application is run as a stand-alone desktop application with no web browser dependency. As such, the client requirements to run the Demantra Local Application are different than those of previous versions for the web-based worksheet plug-in and Collaborator Workbench web page.

The Demantra Local Application requires Java 8 Update 77 or above. Both 32-bit and 64-bit versions of Java are supported.

The Demantra Local Application supports the following operating systems:

·Microsoft Windows 7, 8, and 10

·Apple MAC OS X 10.10 and 10.11

**Entity**

**Supported Product and Version**

Application Server

- Oracle WebLogic 11g (10.3.6 or higher) and 12c (12.1.1.0.0 or higher)
- Tomcat 7
- IBM WebSphere 8.5.5

Java

- Java JDK 8 64-bit Update 77 or above on the Application Server

**Note:**: 32-bit versions of Java are not supported.

- JVM as included with application server installation

**Note:**Available Java heap memory must be at least 512 MB to create and run the JVM.

Database

- Oracle 12c (12.1.0.1 +) - Enterprise Edition

**Note:**For details about required configuration steps, seeAdditional Steps for Configuring Oracle 12c.

- Oracle 11gR2 (11.2.0.4 +) - Enterprise Edition
- Oracle Real Application Clusters (RAC)
- Oracle Connection Manager (CMAN)
- Oracle Exadata platform

# About the Installer

To install Oracle Demantra on a UNIX, Linux or Solaris machine, run the Installer on a Windows machine. During the installation, choose to deploy the Demantra Web application on UNIX or the Analytical Engine on Linux.

# Install Demantra Databasqe

Install Demantra version 12.2.5.1 -Patch 21951481- DEMANTRA 12.2.5.1 Release

Demantra/p21951481_Linux-x86-64.zip

Follow dmt_inst.htm

Install Demantra in the ascp database

## Pre-reqs

NLS_LENGTH_SEMANTICS = BYTE

NLS_CHARACTERSET = AL32UTF8

NLS_LANG = American_America.UTF8

## Create new tablespaces

create tablespace TS_SALES_DATA datafile ' /ts_sales_data01.dbf' size 1000m autoextend on next 250m maxsize 10000m extent management local;

create tablespace TS_SALES_DATA_X datafile ' /ts_sales_data_x01.dbf' size 1000m autoextend on next 250m maxsize 10000m extent management local;

create tablespace TS_SALES_DATA_ENGINE datafile ' /ts_sales_data_engine01.dbf' size 1000m autoextend on next 250m maxsize 10000m extent management local;

create tablespace TS_SALES_DATA_ENGINE_X datafile ' /ts_sales_data_engine_x01.dbf' size 1000m autoextend on next 250m maxsize 10000m extent management local;

create tablespace TS_SIM datafile ' /ts_sim01.dbf' size 100m autoextend on next 250m maxsize 10000m extent management local;

create tablespace TS_SIM_X datafile ' /ts_sim_x01.dbf' size 100m autoextend on next 250m maxsize 10000m extent management local;

## Install Oracle Client 11g 32bit

Windows server

C:\\client

setup.exe

Custom

English

Oracle Base: c:\\oracle

Software location: C:\\oracle\\client_11gr2

Setup tnsnames.ora to ascp instance

## Install Java

Manually install java 8 and above

## Install Acrobat reader

AdbeRdr950_en_US

****

****

**Demantra 12.2.5.1 Installations Steps**

below steps performed to install Demantra 12.2.5.1 .

1.Download Patch 21951481 - DEMANTRA 12.2.5.1 Release from My Oracle Support

2.Double click on setup.exe

3. Click on Configure Log

4.Choose Customer Settings, set up the Log File Name and Log Level.

5.Click on Close button.

6.Click on Install Demantra Spectrum

7. Choose Yes

8.Installer windows is showing up.

9.Click Next

10.Depending if you want to deploy Demantra and/ or engine on Linux / Solaris, choose the options to deploy

11.Click Next

12.Depending if you want to deploy on Exadata and/or Exalogic, choose the options to deploy

13.Click Next

14.Base on the license, choose the module to install.

15.Click Next.

16.Choose the folder to install.

17.Click Next

18.Choose where you want to have the shortcuts / icons for your Demantra installation.

19.Click Next

20.Choose your oracle client installation.

21.Click Next.

**dbserver.oracle.com**

22. Confirm first your connection details using tnsping and sqlplus.

**dbserver.oracle.com**

**dbserver.ora**

**dbserver.oracle.com**

23. Then click Next on Demantra installer screen.

24.Fill in your Demantra schema name and the password

25.Click Next

26.Fill in connection details

**dbserver.oracle.com****
**

27.Fil

... [Content truncated for readability]

---

### 402. Taiping SSL

**Topic ID:** 2112

1. Backup exixting wallet and shutdown apps tier
2. Create a "new_xxxx" directory under SSL directory in applprd home directory
3. Create a new wallet from OWM and save to the newly created directory "/home/appltest/SSL/new_xxxx". Wallet password: Wallet01
3. copied exported_072911.pem to tp.key, tp.crt and gd-intermediate.crt into "/home/appltest/SSL/new_xxxx".
cp -p exported_072911.pem gd-intermediate.crt
cp -p exported_072911.pem tp.crt
cp -p exported_072911.pem tp.key
Note: exported_072911.pem file is in /home/appltest/SSL/new_xxxx/ of hr1.taipingcarpets.com server
[appltest@hr1 ~]$ cd SSL/new_0802/
[appltest@hr1 new_0802]$ ls -ltr
total 52
-rw-r--r-- 1 appltest oaa 7923 Aug 2 18:22 tp.key
-rw-r--r-- 1 appltest oaa 7923 Aug 2 18:22 tp.crt
-rw-r--r-- 1 appltest oaa 7923 Aug 2 18:22 gd-intermediate.crt
-rw-r--r-- 1 appltest oaa 7923 Aug 2 18:22 exported_072911.pem
4. Convert existing appshosting.com SSL certificate into Oracle wallet. Run this command from "/home/appltest/SSL/new_0802/"
[appltest@hr1 new]$ $IAS_ORACLE_HOME/Apache/Apache/bin/ssl2ossl -cert ./tp.crt -key ./tp.key -cafile ./gd-intermediate.crt -wallet . -ssowallet yes
Enter wallet password:
Verifying password - Enter wallet password:
SUCCESS
5. If your server certificate was issued by a Certifying Authority other than Verisign, Entrust, GTE, or RSA Data Security you'll also need to add it to
b64InternetCertificate.txt file located in the 10.1.2 ORACLE_HOME/sysman/config directory:
Please backup b64InternetCertificate.txt file located in the 10.1.2 ORACLE_HOME/sysman/config directory
cat gd-intermediate.crt >> /u01/oracle/test/apps/tech_st/10.1.2/sysman/config/b64InternetCertificate.txt
6. You should see cwallet.sso and ewallet.p12 files created in /home/appltest/SSL/new_xxxx directory
Copy both files to following folders
$ cp -p $INST_TOP/certs/Apache/ and $INST_TOP/certs/opmn/
[appltest@hr1 new]$ cp -p ewallet.p12 $INST_TOP/certs/Apache
[appltest@hr1 new]$ cp -p cwallet.sso $INST_TOP/certs/Apache
[appltest@hr1 new]$ cp -p ewallet.p12 $INST_TOP/certs/opmn
[appltest@hr1 new]$ cp -p cwallet.sso $INST_TOP/certs/opmn
7. Copy tp.key, tp.crt, Gl_intermediate.crt from to $OA_JRE_TOP/lib/security from SSL /home/appltest/SSL/new_xxxx directory
1140 cp -p tp.key $OA_JRE_TOP/lib/security
1141 cp -p tp.crt $OA_JRE_TOP/lib/security
1142 cp -p gd-intermediate.crt $OA_JRE_TOP/lib/security
8. start opmn and test
9. Start apps tier

---

### 404. How to decommission customer environment

**Topic ID:** 2109

When you receive request from customer to terminate their hosting environment, please follow these steps:
1. Support team acknowledges customer request and informs the customer to save any data or code before the environment is removed.2. Support team shuts down customer environment, removes any monitoring alerts, and informs customer, DC team, and Accounting group.3.Accounting group cancels the hosting subscription or deactivates the customer, and informs Support and DC teams.

If the customer is Shared server/database customer,4.Support team updates Customer Worksheet and closes ticket.
If the customer is Dedicated server customer,4. If the customer is Dedicated Server customer, then Support team updates Customer Worksheet and assigns ticket to DC team.5. DC team removes any monitoring alerts, shuts down and/or deletes customer server, updates Physical inventory, and closes ticket.

---

### 405. Helpdesk Process

**Topic ID:** 601

Team,

As discussed in team meeting, here is the recap of the Soft Close process which will help us keep the open requests count down and make customer requests more manageable:

1.Once the request is done, immediately soft close the ticket by updating ticket and setting it to Resolved status.

2.If it’s simple, quick request, close out the ticket after a day (hard close).

3.If it’s more involved, complex request, close out the ticket after few days (hard close). While hard closing the ticket, you can send an e-mail to customer like this:

Dear,

We have completed your request and wanted to follow up. As it has been<#> days since the last activity on this request, we will proceed to close this request. If you have any questions or need any further assistance on this, you can reopen this request any time by replying to this e-mail chain.

(See “Template Customer Response” googledoc for this and other template responses to customers,https://docs.google.com/a/appshosting.com/document/d/1tOQrR5CjXLXAlkV6ZBrm8C9xHqXYB6dv28jXVcI1kHQ/edit)

Team,

As discussed in this week’s team meetings, please ensure you are updating Request Notes and Worklog as you are working. The first reason is that some of our customers will receive report of the hours we worked, so we need to show all the hours we are working. Second and very importantly, the worked hours can be tracked over time to see trend in work so we can better plan to cover the work load. If we are not accurately putting in worked hours, then the tracking and planning of work load cannot be done accurately. In consideration, please follow below process as a habit:

1.Update ticket notes as you are working. Each time you look into a ticket, there should be on Note update.

2.Each support team members are expected to log about 40 hours in Worklog. The hours should include not only technical work, but also nontechnical or administrative work as well as time off such as vacation or break. You can log nontechnical or admin hours or timeoff in ticket 27614. The number of hours worked and correct recording of the hours will be a major criteria in annual performance review going forward.

In the new version of OP Manager, tasks management has become much easier and more integrated with requests as we now have Tasks tab available on the Requests screen. Let’s add one or more Tasks for requests if there are multiple tasks that need to be done by different person or team.

Please be reminded to enter Notes/Comments and Worklog as you are working. The Notes are for Requests, and Comments are for Tasks. It is important that you enter your time spent accurately for the right request as you work since we run reports for our customers when we send invoice. Get in the habit of updating notes/comments and worklog before moving on to next task.

---------------------------------------------------------------------------------------------------------------------

Please remember to first “Pick up” or assign the ticket to yourself when you are working on a request. This tells other team members that you are working on it. You can then reassign the request to another team member as needed or resolve the request once completed. This also applies any new Task that is created for a request. We can manage one or more tasks associated with a particular request by going to the Tasks tab of a request.

Team,In order to ensure our timely support and to avoid missing responses to customers, we need to keep our pending/open requests queue clean. We had an incident today where a request was not responded to for long time as the request was hidden among other requests many of which were already resolved. To avoid this in future, I must ask everyone again to be more diligent in keeping tickets updated as we are working and set to resolved when the request is done. Additionally, we will implement the following process to reduce completed or resolved requests from cluttering up pending/open requests queue and getting in the way of looking at real open/pending requests:
Murali will review open/pending requests daily, and send out reminder when completed requests are missing updates or resolution. For DBA team, Murali will send out direct reminder to the person who should have updated the request. For Sys Admin team, Murali will send reminder to Sagar to follow up and update completed/resolved requests. We need to get completed or resolved requests set to Resolved status immediately to avoid cluttering up pending/open requests queue, and then we can close out tickets after confirming proper resolution is associated with the ticket.
Also, as a reminder, we must be consistently be looking out for any alerts or notifications that come so we can quickly resolve any production or critical problems. We cannot afford to have another production alert go unnoticed for hours like it happened this week. That is absolutely unacceptable to our customers and to us as a team.
Regards,Sam
Team,Please see below the upd

... [Content truncated for readability]

---

### 406. Restore missing archive logs and fix DR sync

**Topic ID:** 1801

1. Restore missing archives from backup.
RMAN> run {2> allocate channel d1 type disk;3> restore archivelog from sequence 105057 until sequence 105058;4> }
allocated channel: d1channel d1: SID=770 device type=DISK
Starting restore at 18-NOV-12
channel d1: starting archived log restore to default destinationchannel d1: restoring archived logarchived log thread=1 sequence=105057channel d1: restoring archived logarchived log thread=1 sequence=105058channel d1: reading from backup piece /b02/backup/oracle/ahdb07/FULL_AHDB07_t799674482_s20372_p1channel d1: piece handle=/b02/backup/oracle/ahdb07/FULL_AHDB07_t799674482_s20372_p1 tag=TAG20121118T114802channel d1: restored backup piece 1channel d1: restore complete, elapsed time: 00:00:03Finished restore at 18-NOV-12released channel: d1
2. Update the time stamp on restored archive logs so they have older time stamps than the more recent archive logs.
[oraapex@ah3 ahdb07]$ touch -t 201211181148.01 1_105058_727150737.dbf[oraapex@ah3 ahdb07]$ touch -t 201211181147.01 1_105057_727150737.dbf

3. Run fixsync.sh (run chksync.sh and chksync2.sh, if applicable, before and after fixsync.sh)[oraapex@ah3 bin]$ fixsync.sh 105057The Oracle base for ORACLE_HOME=/u01/oraapex/product/11.1.0/db_1 is /u01/oraapexGetting the last applied log info from DR environment.All archive logs after sequence 105057 will be synchronized.The Oracle base for ORACLE_HOME=/u01/oraapex/product/11.1.0/db_1 is /u01/oraapex

---

### 539. ORDS - Enable rest services on schema/table

**Topic ID:** 2104

Connect to SqlDeveloper with the requested schema : i.e STAFF

right-click on connection name

---

### 412. Upgrade from R12.1.1 to R12.1.3

**Topic ID:** 2105

To apply Oracle E-Business Suite Release 12.1.3, follow these steps:

1.Patch 9239089,

2.Patch 9239090and follow the instructions in the patch readme file.

3.Patch 9239095and follow the instructions in the patch readme file.

Post-Update Steps

1.oPatch 9817770(9817770:R12.ATG_PF.B [POST-R12.ATG_PF.B.DELTA.3 CONSOLIDATED PATCH].)

oPatch 9966055(9966055:R12.FND.B [TRANSLATED VERSION OF FNDSCSGN NOT LAUNCHED].)

2.After you have upgraded to Oracle E-Business Suite Release 12.1.3, perform the following post-update steps to update all database tier nodes with the code level, provided by Oracle E-Business Suite Release 12.1.3:

. .//APPS.env

\\envshell.cmd

cd
. .//.env

cd

perl adpreclone.pl dbTier

---

### 414. Install Oracle E-Business Suite 12.1.1

**Topic ID:** 2105

Install Oracle E-Business Suite 12.1.1

---

### 416. Oracle Database 11.2.0.3 Upgrade

**Topic ID:** 1801

Install Oracle Database 11.2.0.3 and Upgrade

---

### 407. Apex 4.2 Installation

**Topic ID:** 2104

@apxrtins.sql SYSAUX SYSAUX TEMP /i/

change the password for the ADMIN account
@apxchpwd.sql

Unlocking the APEX_PUBLIC_USER Account
ALTER USER APEX_PUBLIC_USER ACCOUNT UNLOCK

Changing the Password for the APEX_PUBLIC_USER Account
ALTER USER APEX_PUBLIC_USER IDENTIFIED BY new_password

SQL> connect / as sysdba
Connected.
SQL> @apxchpwd.sql
Enter a value below for the password for the Application Express ADMIN user.

Enter a password for the ADMIN user [] Apexa#m1n

Session altered.

...changing password for ADMIN

PL/SQL procedure successfully completed.

SQL> ALTER USER APEX_PUBLIC_USER ACCOUNT UNLOCK
2 ;

User altered.

SQL> ALTER USER APEX_PUBLIC_USER IDENTIFIED BY apex54;

User altered.

To prevent this behavior, create another profile in which the PASSWORD_LIFE_TIME parameter is set to unlimited and alter the APEX_PUBLIC_USER account and assign it to

the new profile.

Verified APEX users having default profile that passwords not expiring.

Download and Install Oracle Application Express Listener
http://www.oracle.com/technetwork/developer-tools/apex-listener/downloads/index.html

Locate the Installation Guide for the version you downloaded from Oracle Technology Network:
http://www.oracle.com/technetwork/developer-tools/apex-listener/documentation/index.html

Apex listener 1.1.4 is staged at ah54:/home/oravis/apex42/apex_listener.1.1.4

Install and Run in Standalone Mode:

java -Dapex.home=/tmp/apex -Dapex.images=/u01/apex42/images \\
-Dapex.port=8585 -Dapex.erase \\
-jar /home/oravis/apex42/apex_listener.1.1.4/apex.war

Specifying the options above produces the following results:
Erase the contents of /tmp/apex.
Extract the run-time files to /tmp/apex.
Configure the run-time to listen on HTTP port 8585.
Use the contents of /u01/apex42/images for serving the static content required by Oracle Application Express.

Installed 10g companion product at /u01/10gcomp
Modify dads.conf file to connect to VIS11i database on ah54

Create acl for Apex
SQL> connect / as sysdba
Connected.
SQL> @a.sql
PL/SQL procedure successfully completed.
Commit complete.
SQL> @b.sql
PL/SQL procedure successfully completed.
Commit complete.

Bounce Apache service and test Apex access
$ /u01/10gcomp/opmn/bin/opmnctl stopall
$ /u01/10gcomp/opmn/bin/opmnctl startall

Test URL http://ah54.appshosting.com:7779/apex/apex_admin

About System Requirements
Oracle Application Express Listener system and space requirements are as follows:
■ Oracle Database (Enterprise Edition, Standard Edition or Standard Edition One)
release 10.2.0.3 or higher, or Oracle Database 10g Release 2 Express Edition or
higher.
■ Java 6 Update 20 JDK or higher.
■ Java Servlet Specification 2.3 or higher.

■ Web browser requirements:
– Microsoft Internet Explorer 8.0 or higher.
– Mozilla Firefox 3.0 or higher.
– Google Chrome 2.0 or higher.

Files staged in ah54:/home/oravis/apex42 directry.

cd /home/oravis/apex42
sqlplus / as sysdba
SQL> @apexins.sql SYSAUX SYSAUX TEMP /i/

---

### 421. Error when import Apex workspace

**Topic ID:** 2104

Issue: FYI, I'm trying to install the attached APEX export from MTCTEST workspace to MTCPROD workspace.
I'm getting the error attached in the screen shot when I try to install the application.
Same error whether I re-use the application_id, type in a new application_id, or specify ID 250000.
Ultimately, I want to re-use application ID 250000.
Can someone at appshosting please install the attached application export into the MTCPROD apex workspace, assigning the ID 250000?

ERR-1029 Unable to store session info.ORA-02091: transaction rolled back ORA-02291: integrity constrain violated - parent key not found
Solution:https://forums.oracle.com/forums/thread.jspa?messageID=10074793
Removed all PLSQL blocks from my export file that were creating dynamic actions

---

### 511. Demantra installation on ASCP

**Topic ID:** 901

Demantra Install on ASCP

# Overview

See “Demantra Architecture.docx” for the architecture

Demantra 7.3.1.5 will be install on ascp instances

VCP 12.1.3.9 will be installed on ascp and also on ebs

# About the Installer

To install Oracle Demantra on a UNIX, Linux or Solaris machine, run the Installer on a Windows machine. During the installation, choose to deploy the Demantra Web application on UNIX or the Analytical Engine on Linux.

# Install Demantra Databasqe

Demantra 7.3.1 Install Patch - Patch 17248308 (Replace with latest release**17850720)**

Demantra/p17850720_7315_Linux-x86-64.zip

Follow dmt_inst.htm

Install Demantra in the ascp database

## Pre-reqs

NLS_LENGTH_SEMANTICS = BYTE

NLS_CHARACTERSET = AL32UTF8

NLS_LANG = American_America.UTF8

## Create new tablespaces

create tablespace TS_SALES_DATA datafile ' /ts_sales_data01.dbf' size 1000m autoextend on next 250m maxsize 10000m extent management local;

create tablespace TS_SALES_DATA_X datafile ' /ts_sales_data_x01.dbf' size 1000m autoextend on next 250m maxsize 10000m extent management local;

create tablespace TS_SALES_DATA_ENGINE datafile ' /ts_sales_data_engine01.dbf' size 1000m autoextend on next 250m maxsize 10000m extent management local;

create tablespace TS_SALES_DATA_ENGINE_X datafile ' /ts_sales_data_engine_x01.dbf' size 1000m autoextend on next 250m maxsize 10000m extent management local;

create tablespace TS_SIM datafile ' /ts_sim01.dbf' size 100m autoextend on next 250m maxsize 10000m extent management local;

create tablespace TS_SIM_X datafile ' /ts_sim_x01.dbf' size 100m autoextend on next 250m maxsize 10000m extent management local;

## Install Oracle Client 11g 32bit

Windows server

C:\\client

setup.exe

Custom

English

Oracle Base: c:\\oracle

Software location: C:\\oracle\\client_11gr2

Setup tnsnames.ora to ascp instance

## Install Java

Manually install jdk-1_5_0_22-windows-i586-p.exe

## Install Acrobat reader

AdbeRdr950_en_US

## Install Demantra

Installer runs on Windows

C:\\p17850720_7315_Linux-x86-64

Setup.exe

Language = English

Custom

DM – Installs Oracle Demantra Demand Management.

S&OP – Installations Oracle Demantra Sales & Operation Planning.

Administrative Tools – Installs administrative desktop tools.

Install Database – Installs Import and upgrade database components.

C:\\oracle\\demantra\\7.3

**Product Name:**
Oracle Demantra Spectrum

**Install Folder:**
c:\\oracle\\demantra\\7.3

**Shortcut Folder:**
C:\\Users\\AppData\\Roaming\\Microsoft\\Windows\\Start Menu\\Programs\\Oracle Demantra

**Install Set:**
Custom

**Product Features:**
Demantra Foundation Tools
Distributed Engine
Scheduler
Business Logic Engine
Basic Database Objects
Integration
Demand Planner Desktop
Collaborator Workbench
Web Application
Database Objects
Workflow Engine
Documentation
Demantra Anywhere
Database Object
Documentation
Real Time Sales & Operations Planning
Dynamic Open Link
Documentation
Demand Management
Demand Management Objects
Demand Management Documentation
Demand Management User Guide
Demantra Foundation Documentation
About Demantra Guide
Demantra User Guide
Demantra Implementation Guide
Demantra User Web Help
Demantra Consultant Web Help
Demantra Offline Web Help
Web Server
Tomcat

**Disk Space Information (for Installation Target):**
Required: 1,728,696,539 bytes

C:\\Users\\AppData\\Local\\Temp\\Oracle_Demantra_Spectrum.txt

review the log

## Post Steps

After installing Demantra, be sure to check the value of NLS_LENGTH_SEMANTICS in DB_PARAMS. If it is not set to 'CHAR,' then run the following command:

Select pval from db_params WHERE pname = 'nls_length_semantics';

PVAL

--------------------------------------------------------------------------------

CHAR

UPDATE db_params SET pval='CHAR' WHERE pname = 'nls_length_semantics';

COMMIT;

set serveroutput on size 999999

BEGIN

DBMS_STATS.GATHER_SCHEMA_STATS (

ownname => 'DEMANTRA',

estimate_percent => dbms_stats.auto_sample_size,

block_sample => false,

method_opt => 'FOR ALL COLUMNS SIZE AUTO',

degree => 10,

granularity => 'ALL',

cascade => true, -- Make sure we include indexes

options => 'GATHER AUTO'

);

END;

/

### Transfer file from Windows to Linux app server

C:\\oracle\\demantra\\7.3\\Linux Delivery

Oracle_Demantra_Linux_Engine.tar.gz

Oracle_Demantra_Unix_Web.tar.gz

To demmgr@ascp: /demantra/software

cd /demantra

gunzip Oracle_Demantra_Unix_Web.tar.gz (Integration, Web, Demantra Linux Deployment Guide.pdf)

gunzip Oracle_Demantra_Linux_Engine.tar.gz (Engine, tools)

tar xvf Oracle_Demantra_Unix_Web.tar

tar xvf Oracle_Demantra_Linux_Engine.tar

# Install Demantra Application Server

## Overview

64bit Linux

32bit Weblogic 10.3.5

Oracle Instant client is part of install, so no separate client is needed.

Only the Analytical Engine is installed on Linux. Single-instance mode for ASCP

## Install JRockit

On ascp server as demmgr user

cd /demantra/fmw

/Demantra/jrockit-jdk1.6.0_45-R28.2.7-4.1.0-linux-ia32.bin

Product 

... [Content truncated for readability]

---

### 512. Nanometrics RAC installation

**Topic ID:** 2105

Nanometrics RAC installation

**NANOMETRICS RAC PRE-PROD MIGRATION**

**SYSADMIN tasks:**

Taking backup of existing Operating system

Deleting Existing environment from OVM Manager and from Storage

Physical machine firmware updating from Dell

Preparing new VM for OVM Manager

Installing OVM Manager

Installing OVM Servers

Preparing storage on storage system and present to servers

Preparing and configuring Virtual Machines c1stgebsapp2, c1stgebsapp3, c1stgebsdb2 , c1stgebsdb3

Configuring storage on virtual machines

Mount /u0x on all. Large u01 and u02 on db2

Installing and configuring Openmanage on Physical Servers

**DBA Tasks:**

Set up standby db on c1stgebsdb3 from c1stgebsdb1

https://docs.google.com/document/d/1aNrt-RuXjU8XDlfiRK-sryW0W5JpdyMtf4UsZVZiGTA/edit

Sync the standby db.Rsync app file systems, excluding data files.

CUTOVER to RAC STARTS HERE

Stop Apps Services in c1stgebsapp

Do final rsync of Apps Files from c1stgebsapp1 to c1stgebsapp3

rsync -rptlq -e ssh --progress --force --delete root@10.100.100.182:/u01/ /u01/ 2>&1 |tee -a /home/appstg/apps.log

Do final db sync from c1stgebsdb1 to c1stgebsdb3 (create dummy record in db1)

Shut down Oracle service on c1stgebsdb1

Activate standby Database in c1stgebsdb3

Stop Database in c1stgebsdb3

All the above steps are mentioned in dochttps://docs.google.com/document/d/1aNrt-RuXjU8XDlfiRK-sryW0W5JpdyMtf4UsZVZiGTA/edit

**Run DB post-clone on new c1stgebsdb1:**

[orastg@c1stgebsdb1 ~]$ . STGEBS_c1stgebsdb1.env

[orastg@c1stgebsdb1 ~]$ sqlplus "/as sysdba"

SQL*Plus: Release 11.2.0.3.0 Production on Mon Feb 27 22:36:38 2017

Copyright (c) 1982, 2011, Oracle.All rights reserved.

Connected to an idle instance.

SQL> startup mount

ORACLE instance started.

Total System Global Area 8551575552 bytes

Fixed Size2245480 bytes

Variable Size4362079384 bytes

Database Buffers4076863488 bytes

Redo Buffers110387200 bytes

Database mounted.

SQL> alter database open;

Database altered.

SQL> exit

LSNRCTL for Linux: Version 11.2.0.3.0 - Production on 27-FEB-2017 22:41:23

Copyright (c) 1991, 2011, Oracle.All rights reserved.

Starting /u01/oracle/STGEBS/db/tech_st/11.2.0/bin/tnslsnr: please wait...

TNSLSNR for Linux: Version 11.2.0.3.0 - Production

System parameter file is /u01/oracle/STGEBS/db/tech_st/11.2.0/network/admin/STGEBS_c1stgebsdb1/listener.ora

Log messages written Tto /u01/oracle/STGEBS/db/tech_st/11.2.0/admin/STGEBS_c1stgebsdb1/diag/tnslsnr/c1stgebsdb1/stgebs/alert/log.xml

Listening on: (DESCRIPTION=(ADDRESS=(PROTOCOL=tcp)(HOST=c1stgebsdb1.nanometrics.com)(PORT=1522)))

Connecting to (DESCRIPTION=(ADDRESS=(PROTOCOL=TCP)(HOST=c1stgebsdb1.nanometrics.com)(PORT=1522)))

STATUS of the LISTENER

------------------------

AliasSTGEBS

VersionTNSLSNR for Linux: Version 11.2.0.3.0 - Production

Start Date27-FEB-2017 22:41:23

Uptime0 days 0 hr. 0 min. 1 sec

Trace Leveloff

SecurityON: Local OS Authentication

SNMPOFF

Listener Parameter File/u01/oracle/STGEBS/db/tech_st/11.2.0/network/admin/STGEBS_c1stgebsdb1/listener.ora

Listener Log File/u01/oracle/STGEBS/db/tech_st/11.2.0/admin/STGEBS_c1stgebsdb1/diag/tnslsnr/c1stgebsdb1/stgebs/alert/log.xml

Listening Endpoints Summary...

(DESCRIPTION=(ADDRESS=(PROTOCOL=tcp)(HOST=c1stgebsdb1.nanometrics.com)(PORT=1522)))

Services Summary...

Service "STGEBS" has 1 instance(s).

Instance "STGEBS", status UNKNOWN, has 1 handler(s) for this service...

The command completed successfully

****

[orastg@c1stgebsdb1 STGEBS_c1stgebsdb1]$ sqlplus apps/apps

SQL*Plus: Release 11.2.0.3.0 Production on Mon Feb 27 22:42:02 2017

Copyright (c) 1982, 2011, Oracle.All rights reserved.

Connected to:

Oracle Database 11g Enterprise Edition Release 11.2.0.3.0 - 64bit Production

With the Partitioning, OLAP, Data Mining and Real Application Testing options

SQL> exit

**Run AutoConfig on the database.**

Disconnected from Oracle Database 11g Enterprise Edition Release 11.2.0.3.0 - 64bit Production

With the Partitioning, OLAP, Data Mining and Real Application Testing options

[orastg@c1stgebsdb1 STGEBS_c1stgebsdb1]$ adautocfg.sh

Enter the APPS user password:

The log file for this session is located at: /u01/oracle/STGEBS/db/tech_st/11.2.0/appsutil/log/STGEBS_c1stgebsdb1/02272242/adconfig.log

AutoConfig is configuring the Database environment...

AutoConfig will consider the custom templates if present.

Using ORACLE_HOME location : /u01/oracle/STGEBS/db/tech_st/11.2.0

Classpath: :/u01/oracle/STGEBS/db/tech_st/11.2.0/jdbc/lib/ojdbc5.jar:/u01/oracle/STGEBS/db/tech_st/11.2.0/appsutil/java/xmlparserv2.jar:/u01/oracle/STGEBS/db/tech_st/11.2.0/appsutil/java:/u01/oracle/STGEBS/db/tech_st/11.2.0/jlib/netcfg.jar:/u01/oracle/STGEBS/db/tech_st/11.2.0/jlib/ldapjclnt11.jar

Using Context file: /u01/oracle/STGEBS/db/tech_st/11.2.0/appsutil/STGEBS_c1stgebsdb1.xml

Context Value Management will now update the Context file

Updating Context file...COMPLETED

Attempting upload of Context file and templates to database...COMPLETED


... [Content truncated for readability]

---

### 409. Troubleshoot EBS oacore not starting issue

**Topic ID:** 2105

1. Bounce EBS application. Move to step 2 if this does not resolve issue.2. Bounce EBS database. Move to step 3 if this does not resolve issue.3. Check OC4J lock files in $INST_TOP/ora/10.1.3/j2ee subfolders. Remove lock files. Move to step 3 if this does not resolve issue.4. Run autoconfig to resolve strange oacare not starting issue.

---

### 410. How to check Oracle EBS application profile value

**Topic ID:** 2105

select user_profile_option_name,fnd_profile_options_vl.profile_option_id, level_id ,decode(level_id,10001,'Site',10002,'Application',10003,'Responsibility',10004,'User',10005,'Server',10006,'Organization',level_id) "Level",profile_option_value, level_value level_value_id, fnd_profile_options_vl.*from fnd_profile_option_values, fnd_profile_options_vlwhere -- profile_option_value like '%RBS%' --user_profile_option_name like 'Site Name'AND fnd_profile_option_values.profile_option_id = fnd_profile_options_vl.profile_option_id

---

### 411. Configure Inbound workflow mailer for TPC

**Topic ID:** 2105

Added 'PROCESS' folder in oracle@taipingcarpets.com mail account. This resolved final issue to start workflow notification inbound email.
Here is the procedure to enable inbound workflow notification in TPC production.1. Logon to TPC production as sysadmin at http://prod.taipingcarpets.com:8000/2. Go to system administrator -> Oracle Applications Manager->Workflow3. Click Notification Mailers4. Click Edit button in next screen5. Click Advanced button in 'Edit Workflow Mailer' screen6. In step 2, set Inbound Thread Count to 0. Click Next.7. In Setp 3, set Inbound as followingInbound Protocol: IMAPInbound Server Name: imap.gmail.com:993Username: oracle@taipingcarpets.comPassword: refer to TPC customer worksheetInbox Folder: INBOXInbound SSL Enable: checkedProcessed Folder: PROCESSDiscard Folder: DISCARD8. Click Next->Finish->Finish to complete9. In 'Edit Workflow Mailer: Basic Configuration' screen, click 'Inbound Processing' checkbox to enable inbound workflow mailer. Click Apply button.10. Check to make sure workflow notification mailer is up running.

---

### 419. How to set up apps FTP account for Tai Ping

**Topic ID:** 2112

**How to set up apps FTP account for Tai Ping**
NOTE: This document shows giving "oraftp" user write access to $JAVA_TOP and $TPC_TOP. If other directory write permission is requested, then perform the same steps for those other directories.
1. Create "oraftp" user with default group of "dba".Please NOTE: I changed primary group for "oraftp" to be "dba" so that it can write to app file system with group write permission. See below for $JAVA_TOP and $TPC_TOP which now is given group write permission for oraftp write access.
[root@vdev1 ~]# usermod -g dba oraftp
2. Set default mask 0002 to give group write permssion on new files.Also note default umask is 0002 in .bash_profile so that any files created by oraftp also has group write permission.
3. Give group write permission to $JAVA_TOP and $TPC_TOP
appdev@vdev1:cd/u01/oracle/mdev/apps/apps_st/comn/java/classes[appdev@vdev1 comn]$ chmod -R g+w .
[appdev@vdev1 appl]$ cd /u01/oracle/mdev/apps/apps_st/appl/tpc[appdev@vdev1 appl]$ chmod -R g+w .
NOTE:Also, give write access to "/temp/custdocs/" if requestedchgrp dba /tmp/custdocs/chmod -R g+w /tmp/custdocs/
===================================================================================Addendum:Setting up Linux File System ACL ( -R for recursive )
Here are the ACL rules i have applied

setfacl -R -d -m mask:007 /u01/oracle/mdev/apps/apps_st/appl/tpc
setfacl -R -d -m mask:007 /u01/oracle/mdev/apps/apps_st/comn/java/classes

Also changed the following in fstab

from
/dev/VolGroup01/lv1 /u01 ext3 defaults 0 0

to
/dev/VolGroup01/lv1 /u01 ext3 defaults,acl 1 2

mount -o remount /u01

check the mount command to see acl is enabled

/dev/mapper/VolGroup01-lv1 on /u01 type ext3 (rw,acl)

Add the following lines to /etc/rc.d/rc.local

setfacl -R -d -m mask:007 /u01/oracle/mdev/apps/apps_st/appl/tpc
setfacl -R -d -m mask:007 /u01/oracle/mdev/apps/apps_st/comn/java/classes

---

### 514. Ryman APEX_EBS Integration

**Topic ID:** 2105

Ryman APEX_EBS Integration

**APEX EBS Integration**

**1.****Add Additional Schema to APEX Workspace**

**2.Change schema access in APEX application**

**3.Create Custom Authentication in APEX**

SQL> grant execute on APPS.APEX_INTEGRATION_APIS to XXDISCO;

Grant succeeded.

**4.Define APEX Authorization for EBS**

**4.Create and Assign Custom APEX Authorization for EBS**

Prerequisites - Refer to scripts in rhtstebsdb2:/home/oratest/apex_ebs_integration:

1.Ensure apexebs_apps_setup.sql is compiled into APPS schema for apps_global definer.

2.Ensure apex_ebs_user view is created in apps and custom schema (apex_ebs_user.sql).

4.1) Create Custom APEX Authorization for EBS

DECLARE

l_user_id NUMBER DEFAULT 0;

l_resp_id NUMBER DEFAULT 0;

l_app_id NUMBER DEFAULT 0;

l_sec_group NUMBER DEFAULT 0;

BEGIN

for c1 in (select user_id from APEX_EBS_USER

where user_name = :APP_USER

) loop

L_user_id := c1.user_id;

end loop;

begin

select nvl(to_number(:EBS_RESP_ID),0) into l_resp_id from dual;

select nvl(to_number(:EBS_APP_ID),0) into l_app_id from dual;

select nvl(to_number(:EBS_SEC_GROUP),0) into l_sec_group from dual;

exception

when others then

l_resp_id := 0;

l_app_id := 0;

l_sec_group := 0;

end;

-- Call Initialize with the User (based on APEX log in) and the

-- Responsibility Id, Account Id, and Security Group if passed from EBS

if l_resp_id<> 0 then

apps.apex_global.apps_initialize( l_user_id, l_resp_id, l_app_id, l_sec_group);

else

RETURN FALSE;

end if;

-- Check if User has permission on EBS Function

RETURN apps.apex_global.function_test('APEX_REPORT_2');

END;

4.2) Assign Custom APEX Authorization to APEX pages (** SKIP for NOW**)

5.Define EBS Profile and Functions for APEX pages

Prerequisite:Verify site level profile FND:APEX URL is set correctly (http://rhtstebsapp2.appsforte.com:8090/ords).

Create custom function for first and second report page.

GWY.jsp?targetAppType=APEX&p=303:1:::::EBS_RESP_ID, EBS_APP_ID,EBS_SEC_GROUP:[RESPONSIBILITY_ID],[RESP_APPL_ID],[SECURITY_GROUP_ID]

GWY.jsp?targetAppType=APEX&p=303:2:::::EBS_RESP_ID, EBS_APP_ID,EBS_SEC_GROUP:[RESPONSIBILITY_ID],[RESP_APPL_ID],[SECURITY_GROUP_ID]

6.Define Custom Menu & Assign to Responsibility customer requested (GL User).

---

### 515. Ryman 12c DB upgrade details/installation/configuration

**Topic ID:** 1801

Ryman 12c DB upgrade details/installation/configuration

1

Terminate patching cycle

[apptest@rhtstebsapp2 scripts]$adop phase=cutover,cleanup

Enter the APPS password:

Enter the SYSTEM password:

Enter the WLSADMIN password:

Validating credentials.

Warning: WebLogic Admin Server is not running.

Trying to start Admin Server.

You are running adadminsrvctl.sh version 120.10.12020000.10

Starting WLS Admin Server...

Refer /u01/oracle/uat/fs2/inst/apps/UAT_rhtstebsapp2/logs/appl/admin/log/adadminsrvctl.txt for details

AdminServer logs are located at /u01/oracle/uat/fs2/FMW_Home/user_projects/domains/EBS_domain_UAT/servers/AdminServer/logs

adadminsrvctl.sh: exiting with status 0

adadminsrvctl.sh: check the logfile /u01/oracle/uat/fs2/inst/apps/UAT_rhtstebsapp2/logs/appl/admin/log/adadminsrvctl.txt for more information ...

Initializing.

Run Edition context: /u01/oracle/uat/fs2/inst/apps/UAT_rhtstebsapp2/appl/admin/UAT_rhtstebsapp2.xml

Patch edition context: /u01/oracle/uat/fs1/inst/apps/UAT_rhtstebsapp2/appl/admin/UAT_rhtstebsapp2.xml

Patch file system free space: 28.87 GB

Validating system setup.

Node registry is valid.

[WARNING]ETCC: The following required database fixes have not been applied to node rhtstebsdb2:

12608451

14255128

16299727

16359751

17250794

17401353

17781991

18730542

19487147

19879144

20245930

20627866

20825533

20887355

20936905

20949558

21091431

21813400

21967332

22024071

23054359

Refer to My Oracle Support Knowledge Document 1594274.1 for instructions.

**Checking for existing adop sessions.**

**No pending session exists.**

Starting new adop session.

[UNEXPECTED]Can only run the cutover phase after the prepare or later phase of a patching cycle.

[STATEMENT] Please run adopscanlog utility, using the command

"adopscanlog -latest=yes"

to get the list of the log files along with snippet of the error message corresponding to each log file.

adop exiting with status = 2 (Fail)

[apptest@rhtstebsapp2 scripts]$

3

Install New Oracle Home 12c

`

root@rhtstebsdb2 oraInventory]# cd /u01/oracle/

[root@rhtstebsdb2 oracle]# mv oraInventory/ oraInventory.old

[root@rhtstebsdb2 oracle]# mkdir oraInventory

[root@rhtstebsdb2 oracle]# chown -R oratest:dba oraInventory

[root@rhtstebsdb2 CVU_12.1.0.2.0_oratest]# pwd

/tmp/CVU_12.1.0.2.0_oratest

[root@rhtstebsdb2 CVU_12.1.0.2.0_oratest]# ./runfixup.sh

All Fix-up operations were completed successfully.

[root@rhtstebsdb2 CVU_12.1.0.2.0_oratest]#

[root@rhtstebsdb2 oraInventory]# pwd

/u01/oracle/oraInventory

[root@rhtstebsdb2 oraInventory]# ./orainstRoot.sh

Changing permissions of /u01/oracle/oraInventory.

Adding read,write permissions for group.

Removing read,write,execute permissions for world.

Changing groupname of /u01/oracle/oraInventory to dba.

The execution of the script is complete.

[root@rhtstebsdb2 oraInventory]# cd /u01/oracle/uat/db/tech_st/12.1.0.2

[root@rhtstebsdb2 12.1.0.2]# ./root.sh

Performing root user operation.

The following environment variables are set as:

ORACLE_OWNER= oratest

ORACLE_HOME=/u01/oracle/uat/db/tech_st/12.1.0.2

Enter the full pathname of the local bin directory: [/usr/local/bin]:

Copying dbhome to /usr/local/bin ...

Copying oraenv to /usr/local/bin ...

Copying coraenv to /usr/local/bin ...

Entries will be added to the /etc/oratab file as needed by

Database Configuration Assistant when a database is created

Finished running generic part of root script.

Now product-specific root actions will be performed.

[root@rhtstebsdb2 12.1.0.2]#

Install examples CD

**Apply Additional patches -- Created script to apply them :**

[oratest@rhtstebsdb2 bin]$ pwd

/u01/oracle/uat/db/tech_st/12.1.0.2/ccr/bin

[oratest@rhtstebsdb2 bin]$ ./emocmrsp

OCM Installation Response Generator 10.3.8.1.1 - Production

Copyright (c) 2005, 2013, Oracle and/or its affiliates.All rights reserved.

Provide your email address to be informed of security issues, install and

initiate Oracle Configuration Manager. Easier for you if you use your My

Oracle Support Email address/User Name.

Visit http://www.oracle.com/support/policies.html for details.

Email address/User Name:

You have not provided an email address for notification of security issues.

Do you wish to remain uninformed of security issues ([Y]es, [N]o) [N]:Y

The OCM configuration response file (ocm.rsp) was successfully created.

[oratest@rhtstebsdb2 bin]$

[oratest@rhtstebsdb2 ~]$ pwd

/home/oratest

[oratest@rhtstebsdb2 ~]$ cat apply_ora_patch.sh

#

PATCH_DIR=/home/oratest/12102_patches

for patch in `find /home/oratest/12102_patches -maxdepth 1-mindepth 1 -type d`

do

cd $patch

opatch apply -silent -ocmrf /u01/oracle/uat/db/tech_st/12.1.0.2/ccr/bin/ocm.rsp >> patch_$patch.log

done

[oratest@rhtstebsdb2 ~]$

[oratest@rhtstebsdb2 ~]$ ./apply_ora_patch.sh

[oratest@rhtstebsdb2 ~]$

Verify application_log

[oratest@rhtstebsdb2 tmp]$ cat /tmp/patch_install.log

Oracle Interim Patch Installer version 12.1.0.1.3

Copyright (c) 20

... [Content truncated for readability]

---

### 423. Clone EBS using rman duplicate for Martek Power

**Topic ID:** 2105

[oradev@oradevdb 12072012]$ sqlplus /nolog
SQL*Plus: Release 11.1.0.7.0 - Production on Sat Dec 8 16:28:29 2012
Copyright (c) 1982, 2008, Oracle. All rights reserved.
SQL> startup nomount;ORA-01031: insufficient privilegesSQL> connect / as sysdbaConnected to an idle instance.SQL> startup nomount;ORACLE instance started.
Total System Global Area 1068937216 bytesFixed Size 2166536 bytesVariable Size 339738872 bytesDatabase Buffers 713031680 bytesRedo Buffers 14000128 bytes

SQL> exitDisconnected from Oracle Database 11g Enterprise Edition Release 11.1.0.7.0 - 64bit ProductionWith the Partitioning, OLAP, Data Mining and Real Application Testing options[oradev@oradevdb 12072012]$ rman target sys/manager@PROD auxiliary sys/manager@DEV1
Recovery Manager: Release 11.1.0.7.0 - Production on Sat Dec 8 16:29:26 2012
Copyright (c) 1982, 2007, Oracle. All rights reserved.
connected to target database: PROD (DBID=113570092)connected to auxiliary database: DEV1 (not mounted)

RMAN> duplicate target database to DEV1 FROM ACTIVE DATABASE;

Post clone steps
Run adcfgclone.pl dbconfig $CONTEXT_FILE on db tierRun adcfgclone.pl appsTier $CONTEXT_FILE on apps tier
Execute cmclean.sql script
Clean fnd_nodes table then run autoconfig on db and apps tiers.SQL> EXEC FND_CONC_CLONE.SETUP_CLEAN;SQL> commit;- Run AutoConfig on the database tier- Run AutoConfig on the application tier
tarting Internal Concurrent Manager Concurrent Manager : 09-DEC-2012 19:14:20CONC-SM TNS FAIL: ICM failed to start for target ORAPRODAPPS. Review ICM log files for additional information.Process monitor session ended : 09-DEC-2012 19:14:20

Starting Internal Concurrent Manager Concurrent Manager : 09-DEC-2012 19:47:30CONC-SM TNS FAIL: ICM failed to start for target ORAPRODAPPS. Review ICM log files for additional information.Process monitor session ended : 09-DEC-2012 19:47:30

SQL> l1* select CONCURRENT_PROCESS_ID,MANAGER_TYPE,NODE_NAME,GSM_INTERNAL_STATUS,GSM_INTERNAL_INFO from fnd_concurrent_processes
select CONCURRENT_PROCESS_ID,MANAGER_TYPE,NODE_NAME,GSM_INTERNAL_STATUS,GSM_INTERNAL_INFO from fnd_concurrent_processes where node_name like '%PROD%';
update fnd_concurrent_processes set node_name = 'ORADEVAPPS2' where node_name like '%PROD%';

select application_id,concurrent_queue_id,concurrent_queue_name,TARGET_NODE,NODE_NAME from fnd_concurrent_queues where node_name like '%PROD%';
update fnd_concurrent_queues set node_name='ORADEVAPPS2' where node_name like '%PROD%';
select concurrent_process_id,manager_type,node_name from fnd_concurrent_processes where node_name like '%PROD%';

---

### 424. ADPATCH automation

**Topic ID:** 2105

**Using Defaults file with adpatch (Non Interactive)**
How to create defaults file ?adpatch defaultsfile=$APPL_TOP/admin/$TWO_TASK/defaults.txtNow abort autopatch section at point where it asks for patch
directory by ctrl +c or ctrl+dNow check if this file existsYou have to do above steps only once in an environment to create defaults file.
How to apply patches in future ?Now any future patches you apply non interactive using defaults file likeadpatch defaultsfile=$APPL_TOP/admin/$TWO_TASK/defaults.txt logfile=654321.log patchtop=/patches/654321 driver=u654321.drv interactive=no workers=4
You will see that it will apply patch by itself using defaults file, adpatch will pick APP_TOP, ORACLE_HOME information, system password and apps password from defaults file. This will save lot of time & you can reduce your patch timing using defaults file .

[appdev@vdev3 9813860]$ ls -l $APPL_TOP/admin/$SID/defaults.txtls: /u01/oracle/tdev2/apps/apps_st/appl/admin//defaults.txt: No
such file or directory[appdev@vdev3 9813860]$ $APPL_TOP/admin/$SID/defaults.txt-bash: /u01/oracle/tdev2/apps/apps_st/appl/admin//defaults.txt:
No such file or directory[appdev@vdev3 9813860]$ adpatch defaultsfile=$APPL_TOP/admin/
$SID/defaults.txt
Copyright (c) 2002 Oracle CorporationRedwood Shores, California, USA
Oracle Applications AutoPatch
Version 12.0.0
NOTE: You may not use this utility for custom developmentunless you have written permission from Oracle
Corporation.

You have not specified the correct path for defaults file.
The expected location of the defaults file is/u01/oracle/tdev2/apps/apps_st/appl/admin/tdev2and you must provide full access path to the file.
[appdev@vdev3 9813860]$ adpatch
defaultsfile=/u01/oracle/tdev2/apps/apps_st/appl/admin/tdev2/def
aults.txt
Copyright (c) 2002 Oracle CorporationRedwood Shores, California, USA
Oracle Applications AutoPatch
Version 12.0.0
NOTE: You may not use this utility for custom developmentunless you have written permission from Oracle
Corporation.

Attention: AutoPatch no longer checks for unapplied pre-
requisite patches.You must use OAM Patch Wizard for this feature. Alternatively,
you canreview the README for pre-requisite information.

Your default directory is '/u01/oracle/tdev2/apps/apps_st/appl'.Is this the correct APPL_TOP [Yes] ?
AutoPatch records your AutoPatch session in a text fileyou specify. Enter your AutoPatch log file name or press
[Return]to accept the default file name shown in brackets.
Filename [adpatch.log] :
Defaults Feature Enabled = YES.
You can be notified by email if a failure occurs.Do you wish to activate this feature [No] ?
Please enter the batchsize [1000] :

Please enter the name of the Oracle Applications System that
thisAPPL_TOP belongs to.
The Applications System name must be unique across all OracleApplications Systems at your site, must be from 1 to 30
characterslong, may only contain alphanumeric and underscore characters,and must start with a letter.
Sample Applications System names are: "prod", "test", "demo" and"Development_2".
Applications System Name [tdev2] : tdev2 *

NOTE: If you do not currently have certain types of files
installedin this APPL_TOP, you may not be able to perform certain tasks.
Example 1: If you don't have files used for installing or
upgradingthe database installed in this area, you cannot install or
upgradethe database from this APPL_TOP.
Example 2: If you don't have forms files installed in this area,
you cannotgenerate them or run them from this APPL_TOP.
Example 3: If you don't have concurrent program files installed
in this area,you cannot relink concurrent programs or generate reports from
this APPL_TOP.

Do you currently have files used for installing or upgrading the
databaseinstalled in this APPL_TOP [YES] ? YES *

Do you currently have Java and HTML files for HTML-based
functionalityinstalled in this APPL_TOP [YES] ? YES *

Do you currently have Oracle Applications forms files installedin this APPL_TOP [YES] ? YES *

Do you currently have concurrent program files installedin this APPL_TOP [YES] ? YES *

Please enter the name Oracle Applications will use to identify
this APPL_TOP.
The APPL_TOP name you select must be unique within an Oracle
ApplicationsSystem, must be from 1 to 30 characters long, may only containalphanumeric and underscore characters, and must start with a
letter.
Sample APPL_TOP Names are: "prod_all", "demo3_forms2", and
"forms1".
APPL_TOP Name [vdev3] : vdev3 *

You are about to apply a patch to the installation of Oracle
Applicationsin your ORACLE database 'tdev2'using ORACLE executables in
'/u01/oracle/tdev2/apps/tech_st/10.1.2'.
Is this the correct database [Yes] ?
AutoPatch needs the password for your 'SYSTEM' ORACLE schemain order to determine your installation configuration.
Enter the password for your 'SYSTEM' ORACLE schema:

The ORACLE username specified below for Application Object
Libraryuniquely identifies your existing product group: APPLSYS
Enter the ORACLE password of Application O

... [Content truncated for readability]

---

### 425. OAFM fails to start

**Topic ID:** 2105

OAFM OC4J is Not Starting. Error: "time out while waiting for a managed process to start" [ID 952583.1]**

To Bottom

---

Modified:Jul 12, 2012Type:PROBLEMStatus:PUBLISHEDPriority:1

Comments (0)

**In this Document**

Symptoms

Cause

Solution

---

OAFM (Oracle Apps Fusion Middleware): runs web services, mapviewer, ascontrol

**Applies to:**

Oracle Applications Technology Stack - Version 12.0.6 to 12.1.3 [Release 12.0 to 12.1]
Information in this document applies to any platform.

**Symptoms**

Unable to start oafm using adstrtal.sh. Running adoafmctl.sh ends with timeout.
You are running adoafmctl.sh version 120.6.12000000.3
Starting OPMN managed OAFM OC4J instance ...
adoafmctl.sh: exiting with status 152
adoafmctl.sh: check the logfile
/opt/apphcm/inst/apps/SID_machine/logs/appl/admin/log/adoafmctl.txt for more information
adoafmctl.txt showing:
ias-component/process-type/process-set:
default_group/oafm/default_group/
Error
--> Process (index=1,uid=349189076,pid=15039)
time out while waiting for a managed process to start
Log:
/opt/apphcm/inst/apps/SID_machine/logs/ora/10.1.3/opmn/default_group~oafm~default_group~1
07/31/09-09:14:28 :: adoafmctl.sh: exiting with status 152
================================================================================
07/31/09-09:14:40 :: adoafmctl.sh version 120.6.12000000.3
07/31/09-09:14:40 :: adoafmctl.sh: Checking the status of OPMN managed OAFM OC4J instance
Processes in Instance: SID_machine.machine.domain
-------------------+--------------------+---------+---------
ias-component | process-type | pid | status
-------------------+--------------------+---------+---------
default_group | oafm | N/A | Down

[applprd@prod scripts]$ ./adoafmctl.sh status

You are running adoafmctl.sh version 120.6.12000000.3

Checking status of OPMN managed OAFM OC4J instance ...

Processes in Instance: prd_prod.prod.taipingcarpets.com

-------------------+--------------------+---------+---------

ias-component | process-type | pid | status

-------------------+--------------------+---------+---------

default_group | oafm | N/A | Down

default_group | forms | 10694 | Alive

default_group | oacore | 10693 | Alive

default_group | oacore | 10692 | Alive

default_group | oacore | 10691 | Alive

HTTP_Server | HTTP_Server | 10690 | Alive

adoafmctl.sh: exiting with status 0

adoafmctl.sh: check the logfile /u01/oracle/prd/inst/apps/prd_prod/logs/appl/admin/log/adoafmctl.txt for more information ...

[applprd@prod oafm_default_group_1]$ $ADMIN_SCRIPTS_HOME/adoafmctl.sh status

You are running adoafmctl.sh version 120.6.12000000.3

Checking status of OPMN managed OAFM OC4J instance ...

Processes in Instance: prd_prod.prod.taipingcarpets.com

-------------------+--------------------+---------+---------

ias-component | process-type | pid | status

-------------------+--------------------+---------+---------

default_group | oafm | 10695 | Init

default_group | forms | 10694 | Alive

default_group | oacore | 10693 | Alive

default_group | oacore | 10692 | Alive

default_group | oacore | 10691 | Alive

HTTP_Server | HTTP_Server | 10690 | Alive

adoafmctl.sh: exiting with status 0

**Cause**

Existing JSP Tag Library Cache content was preventing the TLD Cache for the mapviewer app from initialising correctly.

**Solution**

To implement the solution, please execute the following steps:

Clear the TLD cache:
- stop all middle tier services
- Delete/backup the file:
$COMMON_TOP/_TldCache
- start all middle tier services

---

### 426. Start/stop GRC services

**Topic ID:** 601

GRC startup/shutdown procedure
1 Startup1.1 Start GRC database[oradev@c1devgrc1 scripts]$ sqlplus /nologSQL*Plus: Release 11.2.0.3.0 Production on Tue Jan 29 19:03:26
2013Copyright (c) 1982, 2011, Oracle. All rights reserved.SQL> connect / as sysdbaConnected.SQL> startupORACLE instance started.
Total System Global Area 801701888 bytesFixed Size 2232640 bytesVariable Size 482348736 bytesDatabase Buffers 310378496 bytesRedo Buffers 6742016 bytesDatabase mounted.Database opened.
Confirm database is created using AL32UTF8 character set
[oradev@c1devgrc1 ~]$ lsnrctl start devgrc
1.2 Start Weblogic and application servicesStart WLS and all servicesVnc session C1devgrc1:1oradev@c1devgrc1 bin]$ nohup /u01/oracle/devgrc/Middleware/wlserver_10.3/server/bin/startNodeManager.sh &# Connect to vnc session c1devgrc1:1[oradev@c1devgrc1 bin]$ cd /u01/oracle/devgrc/Middleware/user_projects/domains/grc_dev/bin/[oradev@c1devgrc1 bin]$ startWebLogic.sh
[oradev@c1devgrc1 bin]$ pwd/u01/oracle/devgrc/Middleware/user_projects/domains/grc_dev/bin[oradev@c1devgrc1 bin]$ nohup /u01/oracle/devgrc/Middleware/user_projects/domains/grc_dev/bin/startManagedWebLogic.sh soa &
1.3 Verify GRCVerify GRC running at http://c1devgrc1.nanometrics.com:7001/grcUsername:
2. Stop GRC2.1 Stop Weblogic and application services
Stop WLS, SOA Server and the Administration Server.[oradev@c1devgrc1 bin]$ cd /u01/oracle/devgrc/Middleware/user_projects/domains/grc_dev/bin/[oradev@c1devgrc1 bin]$ ./stopManagedWebLogic.sh soa &[oradev@c1devgrc1 bin]$ cd /u01/oracle/devgrc/Middleware/user_projects/domains/grc_dev/bin/[oradev@c1devgrc1 bin]$ ./stopWebLogic.sh &
Login to VNC sessionUse CTRL+C to kill wls services
# Stop Node Manager service[oradev@c1devgrc1 bin]$ ps -ef|grep Node[oradev@c1devgrc1 bin]$ kill -9
2.2 Stop GRC database[oradev@c1devgrc1 scripts]$ sqlplus /nologSQL*Plus: Release 11.2.0.3.0 Production on Tue Jan 29 19:03:26 2013Copyright (c) 1982, 2011, Oracle. All rights reserved.SQL> connect / asORACLE instance started. sysdbaConnected.SQL> shutdownSQL> exit[oradev@c1devgrc1 scripts]$ lsnrctl stop devgrc

---

### 427. Request View Output and Log throws File Server Error in EBS

**Topic ID:** 2105

Drill down to following setup to resolve this issue.

CONCURRENT: Report Access Level => responsibility
RRA: Service Prefix => leave as blank
RRA: Enabled (this must be set to YES) => Changed from NO to Yes
VIEWER: Text => Leave as blank

---

### 428. Change Discoverer Timeout

**Topic ID:** 901

How To Change The Session Timeout For Discoverer 10g(10.1.2) Or Discoverer 11g [ID 567588.1]To Bottom
---
Modified:Nov 30, 2011Type:HOWTOStatus:PUBLISHEDPriority:3Comments (0)**In this Document**
Goal
Solution
References

---

## Applies to:Oracle Discoverer - Version: 9.0.4.46.00 to 11.1.1.4.0 - Release: 9.0.4 to 11g
Information in this document applies to any platform.
Checked for relevancy 05-Aug-2011.

## GoalHow to change the Discoverer Plus or Viewer session timeout?
The default timeout is set to two minutes.

## SolutionSteps to change the Discoverer Session timeout:
`1. Edit the file Discoverer pref.txt file.

Discoverer 10.1.2:
``$ORACLE_HOME/discoverer/util/pref.txt.`
````Discoverer 11g:
``ORACLE_INSTANCE/config/PreferenceServer /Discoverer_instance-name/`
````
2. Under the heading [Session Manager] there is a parameter called timeout.
Timeout = 1800 (Number of Seconds before timeout)

3. Save the pref.txt file.

4. Run the applypreferences script.
`````When changing the timeout value to be higher than 30 minutes you will need to change the Discoverer 10.1.2 servlet timeout as well.
The servlet timeout must always be higher or equal to the Discoverer session timeout.

Steps to change the Discoverer 10.1.2 Servlet timeout:

`1. Edit the following file:
$ORACLE_HOME/j2ee/OC4J_BI_Forms/applications/discoverer/discoverer/WEB-INF/web.xml

2. Add the following entry to the file:

60

The file should look something like:

...
...

60

3. Save the web.xml file.

4. Run command 'dcmctl updateConfig -ct oc4j -v' to update the configuration.

5. Restart OC4J with command 'dcmctl restart -ct oc4j -v'.`
The same can be achieved through the Oracle 10g Application Server/Enterprise Manager link:
Using the ASC/EM link is the recommended approach for managing Oracle configuration files.

1. Navigation path:
`OC4J_BI_Forms > Application:discoverer > Web Module:web > Properties > Set the Session Timeout box
`2. Click Apply

3. Restart the OC4J_BI_Forms

**For further information on setting timeout within Discoverer 11g, please see:**

Oracle Fusion Middleware Configuration Guide for Oracle Business Intelligence Discoverer 11g Release 1 (11.1.1)
9.6.2 About setting the timeout value for Discoverer

## ReferencesNOTE:186291.1- How to Configure Session Timeout in OC4J for JSP and Servlet
NOTE:1338873.1- Changes Made To The Discoverer 10g Pref.txt File Are Not Recognized In Discoverer Plus````
````
``xecuting Discoverer 10.1.2 EULAPI Or Running Applypreferences.sh On Linux Server Fails With "Error while loading shared libraries: Libpthread.so.0: Cannot Open Shared Object File" [ID 729952.1]To Bottom
---
Modified:Feb 13, 2013Type:PROBLEMStatus:PUBLISHEDPriority:3Comments (0)**In this Document**

SymptomsChangesCauseSolutionReferences
---

## Applies to:Oracle Discoverer - Version 10.1.2.0.2 to 10.1.2.3 [Release 10.1.2]
Linux x86-64
***Checked for relevance on 14-Feb-2013***

## SymptomsWhen running various Discoverer 10.1.2 commands on a Linux server, some variation of the following error may occur:

Error while loading shared libraries: libpthread.so.0: cannot open shared object file:
**For Example**

Running applypreferences.sh script on RedHat Linux 5.1, fails with the following error message:

Error while loading shared libraries: libpthread.so.0: cannot open shared object file: No such file or directory
Running Discoverer EULAPI to create an Oracle Applications 12i EUL with command like:

$ORACLE_HOME/bin/eulapi -CREATE_EUL -APPS_MODE \\
-CONNECT system/manager@dev1 -USER EUL_US -PASSWORD EUL_US \\
-DEFAULT_TABLESPACE discoverer -TEMPORARY_TABLESPACE temp \\
-EUL_LANGUAGE US - APPS_GRANT_DETAIL apps/apps
Fails with error:

/u01/oracle/discoverer/jdk/bin/java: error while loading shared libraries: libpthread.so.0: wrong ELF class: ELFCLASS64

## ChangesInstalled Discoverer 10.1.2 on a Linux server.

## CauseThe defaultLD_ASSUME_KERNELenvironment variable parameter was set to an incorrect value in ORACLE_HOME/discoverer/discwb.sh environment script for this Linux operating system version.

The discwb.sh file contained this line:
export LD_ASSUME_KERNEL=2.4.19
This is due to the fact that the operation system versions did not exist at the time the base installation media was released.

The PATH variable may also be missing the required lib32 references.

## SolutionFor Linux operating systems Red Hat Enterprise Linux 5 (RHEL5), Oracle Enterprises Linux 5 (OEL5) and Suse Enterprise Server 10 (SLES10),**do not**set theLD_ASSUME_KERNELenvironment variable and complete the following steps:

- Apply most current Discoverer Cumulative as recommended inNote 237607.1, ALERT: Required and Recommended Patch Levels For All Discoverer Versions.

- Check your server and locate the 'lib32' directory path and make note of it.

- Navigate to: $ORACLE_HOME/discoverer.

- Backup the discwb.sh environment script file.

- Edit the LD_LIBRARY_PATH**if**it does not already include "lib32" directory (as noted in step 2 above).

Example:

LD_

... [Content truncated for readability]

---

### 429. Install OID run book

**Topic ID:** 601

https://hr1.taipingcarpets.com:4452/OA_HTML/AppsLocalLogin.jsp
Larry:ias_admin user: orcladminias_admin password: admin1Larry:URL: http://hr1.taipingcarpets.com:7778/pls/orassohttp://hr1.taipingcarpets.com:7778/oiddas

EBS account: test/tpctestOID accont: test/test123

ldapbind -h 192.168.69.74 -p 389 -D bubba -w "Tpc1dap#23"
ldapsearch -h 192.168.69.74 -p 389 -D bubba -w "Tpc1dap#23" -b \\"CN=Test03 Gump,OU=Two,OU=rootone,DC=taipingcarpets,DC=com" -S \\base "objectclass=*"
ldapsearch -h 192.168.69.74 -p 389 -D bubba -w "Tpc1dap#23" -b "OU=rootone,DC=taipingcarpets,DC=com" -S base "objectclass=*"
ldapsearch -h 192.168.69.74 -p 389 -D bubba -w "Tpc1dap#23" -b "CN=Brett Scott,OU=Two,OU=rootone,DC=taipingcarpets,DC=com" -S base "objectclass=*"

/u01/oracle/ssot/oradata/ssot/system01.dbf
Shutdown OID and ssot to take cold backup before loading data.

dipassistant listprofiles -h hr1.taipingcarpets.com -p 389 -D cn=orcladmin -w "tpcadmin1"

Prepare mapping rule/home/orassot/oid/activechgimp.map/home/orassot/oid/ldifimpp.mapPrepare property files/home/orassot/oid/activechgimp.properties/home/orassot/ldp2ldp.properties
load the mapping file(s) into their respective profiles:[orassot@hr1 oid]$ dipassistant mp -port 389 -dn cn=orcladmin -passwd tpcadmin1 -profile ActiveChgImp odip.profile.mapfile=/home/orassot/oid/activechgimp.mapProfile successfully modified.
Note: For security reasons it is not recommended to provide a password on the command line, unless you're being prompted for it.
[orassot@hr1 oid]$ ldapsearch -p 389 -D "cn=orcladmin" -w "tpcadmin1" -b " -s base "objectclass=*" lastchangenumber
lastchangenumber=2920

Verify the profile properties by launching dipassistantdipassistant -gui
Set PROFILE "activechgimp" STATUS to ENABLE.For testing you may wish to set the scheduling interval to 20 secondsSet LDAP source server information for this profile.
3> The first time you migrate data from AD to OID is known as bootstrap. To run the bootstrap execute the following[orassot@hr1 oid]$ dipassistant bootstrap -port 389 -profile ActiveChgImp -dn cn=orcladmin -passwd "tpcadmin1"-----------------------------------------------Bootstrapping in progress.....
Bootstrapping completed.#entries read ..................... 0#entries filtered ................. 0#entries ignored .................. 0#successfully processed entries ... 0#failures ......................... 0
Please see the log file for more information.-----------------------------------------------
Updating the profile's last change number ..... Done.Updated succesfully
Note: For security reasons it is not recommended to provide a password on the command line, unless you're being prompted for it.
(This is a good progress comparing to last time. It completed bootstrap even though not loading any entry from test AD).

http://www.appsdba.info/docs/oracle_apps/OIDSSO/3_Integrate_AD_OID.pdf
Review Oracle support note 261342.1 to rebuild mapping.Oracle OID to Miscrosoft AD mapping example:http://docs.oracle.com/cd/E23943_01/doc.1111/e16454/app_adsyncprof.htm
Check out the metalink note 267153.1, it is in detail for OID and AD sync (a ref to OID Admin Guide Ch 43 - Integration with the Microsoft Windows Environment -
Configuring The Active Directory External Authentication Plug-in)Then check out metalink note 277382.1 - How to configure OID External Authentication Plug-In for Authentication Via MS AD.last check NOTE: 282074.1 and SSO admin guide Ch 8.

From test AD sidesAMAccountName: test01UserPrincipalName: test01@taipingcarpets.comsn: Gumpname: Test01 GumpgivenName: Test01distinguishedName: CN=Test01 Gump,OU=Two,OU=rootone,DC=taipingcarpets,DC=comdisplayName: Test01 Gumpcn: Test01 GumpObject Category: CN=Person,CN=Schema,CN=Configuration,DC=taipingcarpets,DC=com

Got one step further. Now we can see 7 records from test AD. Need to check log file why 7 records all failing to load into OID.
[orassot@hr1 oid]$ ldapsearch -p 389 -D "cn=orcladmin" -w "tpcadmin1" -b " -s base "objectclass=*" lastchangenumber
lastchangenumber=2920[orassot@hr1 oid]$ dipassistant bootstrap -port 389 -profile ActiveChgImp -dn cn=orcladmin -passwd "tpcadmin1"-----------------------------------------------Bootstrapping in progress.....
Bootstrapping completed.#entries read ..................... 7#entries filtered ................. 0#entries ignored .................. 0#successfully processed entries ... 0#failures ......................... 7
Please see the log file for more information.-----------------------------------------------
Updating the profile's last change number ..... Done.Updated succesfully

Log files are at /u01/oracle/ssot/1014/ldap/odi/log
[orassot@hr1 log]$ tail -f bootstrap.logERROR: [Tue Dec 04 19:44:19 EST 2012] Writer Thread - 0 - [LDAP: error code 32 - Parent entry not found in the directory.]ERROR: [Tue Dec 04 19:44:19 EST 2012] Writer Thread - 0 - Error occurred while loading - uid=brettscott,ou=two,ou=rootone,dc=taipingcarpets,dc=comERROR: [Tue Dec 04 19:44:19 EST 2012]

... [Content truncated for readability]

---

### 430. E-Business Suite Browser Settings for Internet Explorer

**Topic ID:** 2105

## Internet Explorer for E-Business Suite

The settings below should work with the latest versions of IE – so far IE8; IE9 and IE10.

Version specific settings are at the end of this document.

Open Control Panel and click "Internet Options".

### Security

Set Trusted Sites security level to Medium-low.

Ensure Protected Mode is disabled.

Click Sites and add your domain as below:

### Privacy

Select Medium privacy.

Click Sites and add your domain:

Click Settings for Pop-up Blocker and add your site:

### IE10 Specific

In Menu Bar click Tools and "Compatibility View Settings" and add your site:

Or just click the Compatibility View button:

and change to

**Fix for FRM server connection error logging into forms in R12 environment****You need to disable "cross site scripting (XSS) filter". Here is the steps:1. Go to Internet Explorer Options (Tools->Options).2. Click on Security tab.3. Click on Custom Level button.4. Select "Disable" radio button on "Enable XSS filter".5. Restart IE.

Reference:http://ltd.kentw.co.uk/technical/office-tools/internet-explorer-for-oracle-e-business-suite/

---

### 413. Schedule360 Database cloning procedure

**Topic ID:** 2701

(Refer to customer worksheet for Staffing Angel credentials)
1.1 Shutdown development environment
Log in as oraweb user and stop web app processes (see Schedule 360 datasheet).

[_lsa@ah249 ~]$ sudo su - orarac
[orarac@ah249 ~]$ ls *.env
tsad.env
[orarac@ah249 ~]$ . *.env
[orarac@ah249 ~]$ sqlplus /nolog
SQL*Plus: Release 11.2.0.1.0 Production on Tue Jan 22 19:37:17 2013
Copyright (c) 1982, 2009, Oracle. All rights reserved.
SQL> connect / as sysdba
Connected.
SQL> shutdown
SQL> exit
[orarac@ah249 ~]$ ps -ef|grep orarac
[orarac@ah249 ~]$ cd $ORACLE_HOME/dbs
[orarac@ah249 dbs]$ ls
arch c-318011872-20120421-00 init.ora
c-305231709-20120101-00 c-318011872-20120428-00 inittsad.ora
c-318011872-20120121-00 c-318011872-20120505-00 lkTSAD
c-318011872-20120131-00 c-318011872-20120512-00 orapwsadev1
c-318011872-20120204-00 c-318011872-20120519-00 orapwtsad
c-318011872-20120211-00 c-3277054048-20130120-00 orapwtsad.tsad
c-318011872-20120219-00 c-329526250-20120804-00 orapwtsah1
c-318011872-20120225-00 c-329526250-20120811-00 orapwtsap1
c-318011872-20120303-00 c-329526250-20120818-00 spfiletsad.ora
c-318011872-20120317-00 c-337371598-20121216-00 spfiletsad.ora.bad
c-318011872-20120324-00 c-337371598-20130106-00 spfiletsad.ora.old
c-318011872-20120401-00 c-337371598-20130113-00 spfiletsad.ora.TTT
c-318011872-20120407-00 c-337371598-20130120-00
c-318011872-20120414-00 hc_tsad.dat
[orarac@ah249 dbs]$ rm spfiletsad.ora

[orarac@ah249 tsad]$ cd /u01/app/orarac/oradata/tsad
[orarac@ah249 tsad]$ ls
control01.ctl group_5.271.757834803 temp11.dbf
control02.ctl group_6.272.757834803 undotbs1.256.741659535
data.258.741662763 group_7.273.757858205 undotbs2.267.741659643
group_1.262.741659619 group_8.274.757858205 undotbs3.270.757834791
group_2.261.741659619 indexes.265.741662775 users.266.741659535
group_3.257.741659663 sysaux.263.741659535
group_4.259.741659663 system.264.741659535
[orarac@ah249 tsad]$ rm *
1.3 Prepare development environment for cloning
[orarac@ah249 tsad]$ cd $ORACLE_HOME/dbs
## $
## Prepare inittsad.ora file. Add file converting entries in the init file
[orarac@ah249 dbs]$ vi inittsad.ora
*.db_file_name_convert=('+DATA/tsah/datafile/','/u01/app/orarac/oradata/tsad/')
*.db_file_name_convert=('+RCV/tsah/datafile/','/u01/app/orarac/oradata/tsad/')
*.log_file_name_convert=('+DATA/tsah/onlinelog/','/u01/app/orarac/oradata/tsad/')

## We will use RAC node1 ah250.appshosting.com to clone
## Make sure password file exist in production
login as: root
root@ah250-l.appshosting.com's password:
Last login: Wed Jan 9 08:00:06 2013 from 192.168.10.30
[root@ah250 ~]# su - orarac
[orarac@ah250 ~]$ . oraenv
ORACLE_SID = [orarac] ? tsah1
The Oracle base for ORACLE_HOME=/u01/app/orarac/product/11.2.0/dbhome_1 is /u01/app/orarac
[orarac@ah250 ~]$ cd $ORACLE_HOME/dbs
[orarac@ah250 dbs]$ ls orapw*
orapwsadev1 orapwtsah orapwtsah1 orapwtsap1
## Make sure to add development database connection entry in production tnsnames.ora file
[orarac@ah250 dbs]$ cd $ORACLE_HOME/network/admin
[orarac@ah250 admin]$ vi tsnames.ora
TSAD =
(DESCRIPTION =
(ADDRESS = (PROTOCOL = TCP)(HOST = ah249.appshosting.com)(PORT = 1521))
(CONNECT_DATA =
(SERVER = DEDICATED)
(SERVICE_NAME = tsad)
)
)

SQL*Plus: Release 11.2.0.1.0 Production on Tue Jan 22 20:07:54 2013
Enter password:
Oracle Database 11g Enterprise Edition Release 11.2.0.1.0 - 64bit Production
SQL>
2. Clone Staffing Angel production database to development
[orarac@ah249 ~]$ sqlplus /nolog
Copyright (c) 1982, 2009, Oracle. All rights reserved.
Connected.
Total System Global Area 835104768 bytes
Fixed Size 2217952 bytesVariable Size 620759072 bytesRedo Buffers 6606848 bytes

## There is issue cloning production RAC database to tsad using RMAN backup. We are still troubleshooting the issue
[orarac@ah250 ~]$ . oraenv
ORACLE_SID = [tsah1] ? tsah1
The Oracle base for ORACLE_HOME=/u01/app/orarac/product/11.2.0/dbhome_1 is /u01/app/orarac
[orarac@ah250 ~]$ rman log=rman3.log
RMAN> connect target sys/S3cr3t123
RMAN> connect auxiliary sys/S3cr3t123@tsad
RMAN> duplicate target database to 'tsad' from active database;
RMAN> exit
[orarac@ah250 ~]$ tail -f $HOME/rman3.log
}
database opened
RMAN>

3.1 Verify development database
3.2 Start development application service
Login to ah249 as _lsa.
$ sudo su - oraweb
[oraweb@ah249 ~]$/u01/app/oraweb/product/10.2.0/comp_1/opmn/bin/opmnctl startall[oraweb@ah249 ~]$ ps -ef|grep oraweb|grep opmn
oraweb 8630 1 0 06:48 ? 00:00:00 /u01/app/oraweb/product/10.2.0/comp_1/opmn/bin/opmn -d
oraweb 8633 8630 0 06:48 ? 00:00:00 /u01/app/oraweb/product/10.2.0/comp_1/opmn/bin/opmn -d
3.3 Verify development application login
http://ah249.appshosting.com:7780/sart/tsa.chlogin.hp
Refer to customer worksheet for username and password.
As per below document ,

https://docs.oracle.com/cd/E11882_01/backup.112/e10642/rcmdupdb.htm#BRADV89929

If you copy a database with operating system utilities instead of the`command, then the**DBID**of the copied database remains the same as the original dat

... [Content truncated for readability]

---

### 431. Cpanel Directory Add

**Topic ID:** 2401

ssh into prod.appshosting.com from putty

what we need to do is have our own ID.
===============================
login as: sam
sam@prod.appshosting.com'spassword:
Last login: Tue Apr 30 10:43:09 2013 from 108-192-41-67.lightspeed.irvnca.sbcglo bal.net
sam@prod**[~]# sudo su - root
**root@prod[~]**# cd /etc/httpd/conf**
root@prod[/etc/httpd/conf]#**view httpd.conf**
root@prod[/etc/httpd/conf]# ls
./ httpd.conf.datastore original/
../ httpd.conf.ea-make-install php5.version
access.conf httpd.conf.ea-orig php.conf
conf/ httpd.conf.easyapache_save php.conf.cache
extra/ httpd.conf.ndr.07072010 php.conf.yaml
highperformance.conf httpd.conf.sagar php.version
highperformance-std.conf httpd.conf,v sites/
httpd.conf httpd.conf.work.GMtR4c7eaycHMSmt srm.conf
httpd.conf.1331602088 httpd.conf.work.qoxDiC1JFdEhbQ_C ssl.conf
httpd.conf.17oct2009 httpd-std.conf ssl.crt/
httpd.conf.29jul2010 includes/ ssl.key/
httpd.conf.61810_1 jk.conf ssl-std.conf
httpd.conf_ashb magic userdata/
httpd.conf.bak mime.types
httpd.conf_bkp mod_bandwidth.conf
----------------------------------------------------------------------
**go to userdata directory for lectrac.com as below.**
------------------------------------------------------------------------
root@prod**[/etc/httpd/conf]# cd /usr/local/apache/conf/userdata/std/2/lectrac/le ctrac.com**
root@prod[/usr/local/apache/conf/userdata/std/2/lectrac/lectrac.com]# ls
./ ../ apex.conf
root@prod**[/usr/local/apache/conf/userdata/std/2/lectrac/lectrac.com]# vi apex.c onf**

====================================================================
######### Rules added for ticket 31261
ProxyPass /ipthttp://ah3.appshosting.com:8908/ipt
ProxyPassReverse /ipthttp://ah3.appshosting.com:8908/ipt
=====================================================================
root@prod[/usr/local/apache/conf/userdata/std/2/lectrac/lectrac.com]# cd /scrip ts/
root@prod[/scripts]# ls ensure_vhost_include*
ensure_vhost_includes*
**-------------------
execute as below.
---------------------**

**root@prod****[/scripts]# ./ensure_vhost_includes --all-users**
Scanning httpd.conf............................................................. ................................................................................ ................................................................................ ................................................................................ ............................................................
Done: .jsp support installed for mhblink.com
Scanning httpd.conf............................................................. ................................................................................ ................................................................................ ................................................................................ ............................................................
Done: .jsp support installed for appshosting.com
Scanning httpd.conf............................................................. ................................................................................ ................................................................................ ................................................................................ ............................................................
Done: .jsp support installed for foamgain.com
Scanning httpd.conf............................................................. ................................................................................ ................................................................................ ................................................................................ ............................................................
Done: .jsp support installed for ise.appshosting.com
Scanning httpd.conf............................................................. ................................................................................ ................................................................................ ................................................................................ ............................................................
Done: .jsp support installed for leepadm.appshosting.com
Scanning httpd.conf............................................................. ................................................................................ ................................................................................ ................................................................................ ............................................................
Done: .jsp support installed for onlinetest.net4practice.com
Scanning httpd.conf............................................................. ................................................................................ ................................................................................ .........................................................

... [Content truncated for readability]

---

### 445. How to copy PLPDF license from one database to another on same server

**Topic ID:** 2104

PL/PDF allows the same license to be used on multiple databases on the same server.
**Prerequisites:**Install PL/PDF software (download PL/PDF SDK from www.plpdf.com/downloads.html and use TRIAL license if you don't already have one.).
**Steps:**1. Install plpdf_k2 on old database (plpdf installed)2. create "portable" key with plpdf_k2.EK3. Install plpdf_k2 on new database (plpdf installed)4. create new certkey with plpdf_k2.IK("portablekey")5. Insert new key into plpdf_cert package
**NOTE:**11g ACL error:ACL is a 11g "feature", solving this see:http://oraexplorer.com/2010/02/oracle-11g-network-access-denied-by-access-control-list-acl-when-using-utl_inaddr/*/

---

### 516. UMD RAC install/configuration

**Topic ID:** 1801

UMD RAC install/configuration

[orarac@af86 ~]$ cd /b01/12102_grid/grid/

[orarac@af86 grid]$ ./runcluvfy.sh stage -pre crsinst -n af86,af87-verbose

Performing pre-checks for cluster services setup

Checking node reachability...

Check: Node reachability from node "af86"

Destination NodeReachable?

------------------------------------------------------------

af86yes

af87yes

Result: Node reachability check passed from node "af86"

Checking user equivalence...

Check: User equivalence for user "orarac"

Node NameStatus

------------------------------------------------------------

af87passed

af86passed

Result: User equivalence check passed for user "orarac"

Checking node connectivity...

Checking hosts config file...

Node NameStatus

------------------------------------------------------------

af86passed

af87passed

Verification of the hosts config file successful

Interface information for node "af86"

NameIP AddressSubnetGatewayDef. GatewayHW AddressMTU

------ --------------- --------------- --------------- --------------- ----------------- ------

eth010.100.102.16110.100.102.00.0.0.010.100.102.100:21:F6:00:00:01 1500

eth110.10.10.1010.10.10.00.0.0.010.100.102.100:21:F6:00:00:03 1500

Interface information for node "af87"

NameIP AddressSubnetGatewayDef. GatewayHW AddressMTU

------ --------------- --------------- --------------- --------------- ----------------- ------

eth010.100.102.16210.100.102.00.0.0.010.100.102.100:21:F6:00:00:02 1500

eth110.10.10.1110.10.10.00.0.0.010.100.102.100:21:F6:00:00:04 1500

Check: Node connectivity of subnet "10.100.102.0"

SourceDestinationConnected?

----------------------------------------------------------------------------

af86[10.100.102.161]af87[10.100.102.162]yes

Result: Node connectivity passed for subnet "10.100.102.0" with node(s) af86,af87

Check: TCP connectivity of subnet "10.100.102.0"

SourceDestinationConnected?

----------------------------------------------------------------------------

af86 : 10.100.102.161af86 : 10.100.102.161passed

af87 : 10.100.102.162af86 : 10.100.102.161failed

ERROR:

PRVG-11850 : The system call "connect" failed with error "113" while executing exectask on node "af87"

No route to host

af86 : 10.100.102.161af87 : 10.100.102.162failed

ERROR:

PRVG-11850 : The system call "connect" failed with error "113" while executing exectask on node "af86"

No route to host

af87 : 10.100.102.162af87 : 10.100.102.162passed

Result: TCP connectivity check failed for subnet "10.100.102.0"

Check: Node connectivity of subnet "10.10.10.0"

SourceDestinationConnected?

----------------------------------------------------------------------------

af86[10.10.10.10]af87[10.10.10.11]yes

Result: Node connectivity passed for subnet "10.10.10.0" with node(s) af86,af87

Check: TCP connectivity of subnet "10.10.10.0"

SourceDestinationConnected?

----------------------------------------------------------------------------

af86 : 10.10.10.10af86 : 10.10.10.10passed

af87 : 10.10.10.11af86 : 10.10.10.10failed

ERROR:

PRVG-11850 : The system call "connect" failed with error "113" while executing exectask on node "af87"

No route to host

af86 : 10.10.10.10af87 : 10.10.10.11failed

ERROR:

PRVG-11850 : The system call "connect" failed with error "113" while executing exectask on node "af86"

No route to host

af87 : 10.10.10.11af87 : 10.10.10.11passed

Result: TCP connectivity check failed for subnet "10.10.10.0"

Interfaces found on subnet "10.100.102.0" that are likely candidates for VIP are:

af86 eth0:10.100.102.161

af87 eth0:10.100.102.162

WARNING:

Could not find a suitable set of interfaces for the private interconnect

Checking subnet mask consistency...

Subnet mask consistency check passed for subnet "10.100.102.0".

Subnet mask consistency check passed for subnet "10.10.10.0".

Subnet mask consistency check passed.

Result: Node connectivity check failed

Checking multicast communication...

Checking subnet "10.100.102.0" for multicast communication with multicast group "224.0.0.251"...

PRVG-11138 : Interface "10.100.102.161" on node "af86" is not able to communicate with interface "10.100.102.161" on node "af86" over multicast group ".0.251"

PRVG-11138 : Interface "10.100.102.161" on node "af86" is not able to communicate with interface "10.100.102.162" on node "af87" over multicast group ".0.251"

PRVG-11138 : Interface "10.100.102.162" on node "af87" is not able to communicate with interface "10.100.102.161" on node "af86" over multicast group ".0.251"

PRVG-11138 : Interface "10.100.102.162" on node "af87" is not able to communicate with interface "10.100.102.162" on node "af87" over multicast group ".0.251"

Checking subnet "10.10.10.0" for multicast communication with multicast group "224.0.0.251"...

PRVG-11138 : Interface "10.10.10.10" on node "af86" is not able to communicate with interface "10.10.10.10" on node "af86" over multicast group "224.0."

PRVG-11138 : Interface "10.10.10.10" on node "af86" is not able t

... [Content truncated for readability]

---

### 517. RAC SCAN Listener - Setup & Troubleshooting

**Topic ID:** 1801

RAC SCAN Listener - Setup & Troubleshooting

Reference:Grid Infrastructure Single Client Access Name (SCAN) Explained (Doc ID 887522.1)

**1.****Introduction & architecture :**

SCAN Name should resolve 3 different IPs :

[orastg@c1stgebsdb1 ~]$ nslookup c1stgeb-cluster

Server:10.100.100.130

Address:10.100.100.130#53

Name:c1stgeb-cluster.nanometrics.com

Address: 10.100.100.48

Name:c1stgeb-cluster.nanometrics.com

Address: 10.100.100.46

Name:c1stgeb-cluster.nanometrics.com

Address: 10.100.100.47

Besides that SCAN listener , also local listener should be running in in all rac db nodes.

**Host**

**Local_Listener**

**Scan_Listener ***

c1stgebsdb1

STGEBS1_local / LISTENER Port 1521

LISTENER_SCAN1 Port 1522

c1stgebsdb2

STGEBS2_local / LISTENER Port 1521

LISTENER_SCAN2, LISTENER_SCAN3 Port 1522

* Scan_Listener assignation is random , so at any given time that configuration can change

**2.****Checking listener processes :**

2.a Check Listener by process in node :

[orastg@c1stgebsdb1 ~]$ ps -ef | grep lsn

orastg1069710 Mar02 ?00:00:17 /u01/app/11.2.0/grid/bin/tnslsnr LISTENER -inherit**→ Local Listener**

orastg1079710 Mar02 ?00:00:04 /u01/app/11.2.0/grid/bin/tnslsnr LISTENER_SCAN1 -inherit**→ Scan Listener**

2.b Check listener using srvtcl command

[orastg@c1stgebsdb1 ~]$**srvctl status LISTENER****→ Local Listener**

Listener LISTENER is enabled**→ Local Listener**

Listener LISTENER is running on node(s): c1stgebsdb2,c1stgebsdb1**→ Local Listener**

[orastg@c1stgebsdb1 ~]$**srvctl status SCAN_LISTENER**

SCAN Listener LISTENER_SCAN1 is enabled**→ Scan Listener**

SCAN listener LISTENER_SCAN1 is running on node c1stgebsdb1**→ Scan Listener**

SCAN Listener LISTENER_SCAN2 is enabled**→ Scan Listener**

SCAN listener LISTENER_SCAN2 is running on node c1stgebsdb2**→ Scan Listener**

SCAN Listener LISTENER_SCAN3 is enabled**→ Scan Listener**

SCAN listener LISTENER_SCAN3 is running on node c1stgebsdb2**→ Scan Listener**

**3.****DB Setup :**

Local listener should point to the local_listener node , and remote_listener should point to scan:port :

**Node c1stgebsdb1**

[orastg@c1stgebsdb1 ~]$ sqlplus / as sysdba

SQL*Plus: Release 11.2.0.4.0 Production on Fri Mar 3 07:37:08 2017

Copyright (c) 1982, 2013, Oracle.All rights reserved.

Connected to:

Oracle Database 11g Enterprise Edition Release 11.2.0.4.0 - 64bit Production

With the Partitioning, Real Application Clusters, Automatic Storage Management, OLAP,

Data Mining and Real Application Testing options

SQL> show parameter instance_name

NAMETYPEVALUE

------------------------------------ ----------- ------------------------------

**instance_namestringSTGEBS1**

SQL> show parameter listener

NAMETYPEVALUE

------------------------------------ ----------- ------------------------------

listener_networksstring

local_listenerstring**STGEBS1_local**

remote_listenerstring**c1stgeb-cluster:1522**

**Node c1stgebsdb2**

****

[orastg@c1stgebsdb2 ~]$ . STGEBS2_c1stgebsdb2.env

[orastg@c1stgebsdb2 ~]$ sqlplus / as sysdba

SQL*Plus: Release 11.2.0.4.0 Production on Fri Mar 3 07:40:03 2017

Copyright (c) 1982, 2013, Oracle.All rights reserved.

Connected to:

Oracle Database 11g Enterprise Edition Release 11.2.0.4.0 - 64bit Production

With the Partitioning, Real Application Clusters, Automatic Storage Management,OLAP,

Data Mining and Real Application Testing options

SQL> show parameter instance_name

NAMETYPEVALUE

------------------------------------ ----------- ------------------------------

**instance_namestringSTGEBS2**

SQL> show parameter listener

NAMETYPEVALUE

------------------------------------ ----------- ------------------------------

listener_networksstring

**local_listenerstringSTGEBS2_local**

**remote_listenerstringc1stgeb-cluster:1522**

****

**4.****Known Issues & Troubleshooting :**

**4.1 ORA-12514: TNS:listener does not currently know of service requested in connect**

**Scenario Description**: Connection to STGEBS1 is working fine, but connection to STGEBS2 is failing therefore db autoconfig is also failing.

[orastg@c1stgebsdb2 bin]$ ./adconfig.sh

Enter the full path to the Context file: /u01/oracle/STGEBS/db/tech_st/11.2.0.4/appsutil/STGEBS2_c1stgebsdb2.xml

Enter the APPS user password:

The log file for this session is located at: /u01/oracle/STGEBS/db/tech_st/11.2.0.4//appsutil/log/STGEBS2_c1stgebsdb2/03021244/adconfig.log

AutoConfig is configuring the Database environment...

AutoConfig will consider the custom templates if present.

Using ORACLE_HOME location : /u01/oracle/STGEBS/db/tech_st/11.2.0.4/

Classpath: :/u01/oracle/STGEBS/db/tech_st/11.2.0.4//jdbc/lib/ojdbc5.jar:/u01/oracle/STGEBS/db/tech_st/11.2.0.4//appsutil/java/xmlparserv2.jar:/u01/oracle/STGEBS/db/tech_st/11.2.0.4//appsutil/java:/u01/oracle/STGEBS/db/tech_st/11.2.0.4//jlib/netcfg.jar:/u01/oracle/STGEBS/db/tech_st/11.2.0.4//jlib/ldapjclnt11.jar

Using Context file: /u01/oracle/STGEBS/db/tech_st/11.2.0.4/appsutil/STGEBS2_c1stgebsdb2.xml

Context 

... [Content truncated for readability]

---

### 566. How to drop Mariadb database and user and recreating database and user

**Topic ID:** 1801

[root@af281 ~]# mysql -u root -pEnter password:Welcome to the MariaDB monitor. Commands end with ; or \\g.Your MariaDB connection id is 172Server version: 5.5.35-MariaDB MariaDB Server
Copyright (c) 2000, 2013, Oracle, Monty Program Ab and others.
Type 'help;' or '\\h' for help. Type '\\c' to clear the current input statement.
MariaDB [none]> show databases;
MariaDB [none]> DROP database bfs;
MariaDB [none]> DROP USER bfs@localhost;Query OK, 0 rows affected (0.00 sec)
MariaDB [none]> DROP USER bfs@%;Query OK, 0 rows affected (0.00 sec)
MariaDB [(none)]> create user 'bfs'@'localhost' identified by 'bfsowner';
Query OK, 0 rows affected (0.00 sec)

MariaDB [(none)]> GRANT ALL PRIVILEGES ON *.* TO 'bfs'@'localhost' [identified by xxx] WITH GRANT OPTION;
Query OK, 0 rows affected (0.00 sec)

MariaDB [(none)]> GRANT RELOAD,PROCESS ON *.* TO 'bfs'@'localhost'; (????)
Query OK, 0 rows affected (0.00 sec)
MariaDB [(none)]>
MariaDB [(none)]> create user 'bfs'@'%' identified by 'bfsowner';
GRANT ALL PRIVILEGES ON *.* TO 'bfs'@'%' WITH GRANT OPTION;
Query OK, 0 rows affected (0.00 sec)

MariaDB [(none)]> GRANT ALL PRIVILEGES ON *.* TO 'bfs'@'%' [identified by xxx] WITH GRANT OPTION;
Query OK, 0 rows affected (0.00 sec)

MariaDB [(none)]> GRANT RELOAD,PROCESS ON *.* TO 'bfs'@'%'; (????)
Query OK, 0 rows affected (0.00 sec)

MariaDB [(none)]>
MariaDB [(none)]>
MariaDB [(none)]> flush privileges;
Query OK, 0 rows affected (0.00 sec)

To check grants for current user:

```
SHOW GRANTS;\nSHOW GRANTS FOR CURRENT_USER;\nSHOW GRANTS FOR CURRENT_USER();
```
To check grants for other users, i.e. root:show grants for 'root'@'%';

---

### 432. Resize Linux File System On Line

**Topic ID:** 2403

Requires the File System be mounted on Logical Volume.
**1. Extend LV**[root@prod ~]# lvextend -L +50G /dev/VolGroup_01/LogVol-u01
Found duplicate PV NlZkJqmtkCtWjGebPb0GdOiaqMUpjNHX: using /dev/sdb not /dev/emcpowera
Found duplicate PV NlZkJqmtkCtWjGebPb0GdOiaqMUpjNHX: using /dev/sdd not /dev/sdb
Extending logical volume LogVol-u01 to 550.00 GB
Logical volume LogVol-u01 successfully resized

**2. Resize file system
**[root@prod ~]# resize
resize resize2fs
[root@prod ~]# resize2fs /dev/VolGroup_01/LogVol-u01
resize2fs 1.39 (29-May-2006)
Filesystem at /dev/VolGroup_01/LogVol-u01 is mounted on /u01; on-line resizing required
Performing an on-line resize of /dev/VolGroup_01/LogVol-u01 to 144179200 (4k) blocks.
The filesystem on /dev/VolGroup_01/LogVol-u01 is now 144179200 blocks long.

[root@prod ~]# df -TH
Filesystem Type Size Used Avail Use% Mounted on
/dev/mapper/VolGroup00-LogVol00
ext3 42G 33G 7.2G 82% /
/dev/sda1 ext3 104M 22M 78M 22% /boot
tmpfs tmpfs 34G 26M 34G 1% /dev/shm
/dev/mapper/VolGroup_01-LogVol--u01
ext3 582G 493G 60G 90% /u01
192.168.69.196:/DataVolume/Taiping-Backups
nfs 5.9T 5.4T 538G 91% /b03

---

### 433. Troubleshoot OC4J issue in Oracle 10.1.4 application server

**Topic ID:** 901

[orassot@hr1 chgip]$ cd config[orassot@hr1 config]$ lschgip.log.properties domainame.lst hostname_short_sample.lst.xmlchgip.properties hostname.lst ip.lstconfigtool.xml.tmpl hostname_short.lst restore.xml.tmpl[orassot@hr1 config]$ vi ip.lst[orassot@hr1 config]$ cat ip.lst#opmn/conf/ons.conf#dcm/config/dcm.conf#dcm/repository/cluster#dcm/repository/instance#dcm/repository/cluster.bom# comment out the binary files that DCM is supposed to modify when the# appropriate API is called#portal/conf/portal.confopmn/conf/ons.confdcm/config/dcm.confApache/Apache/conf/httpd.conf[orassot@hr1 config]$ vi $ORACLE_HOME/Apache/Apache/conf/httpd.conf[orassot@hr1 config]$ vi $ORACLE_HOME/Apache/Apache/conf/httpd.conf[orassot@hr1 config]$ vi $ORACLE_HOME/opmn/conf/ons.conf[orassot@hr1 config]$ vi $ORACLE_HOME/dcm/config/dcm.conf[orassot@hr1 config]$ ping hr1.taipingcarpets.comPING hr1.taipingcarpets.com (172.1.0.54) 56(84) bytes of data.64 bytes from hr1.taipingcarpets.com (172.1.0.54): icmp_seq=1 ttl=64 time=0.043 ms
--- hr1.taipingcarpets.com ping statistics ---1 packets transmitted, 1 received, 0% packet loss, time 0msrtt min/avg/max/mdev = 0.043/0.043/0.043/0.000 ms[orassot@hr1 config]$ vi $ORACLE_HOME/portal/conf/portal.conf[orassot@hr1 config]$ vi $ORACLE_HOME/portal/conf/portal.conf[orassot@hr1 config]$ vi $ORACLE_HOME/dcm/config/dcm.conf[orassot@hr1 config]$ ls -l $ORACLE_HOME/dcm/config/dcm.conf-rw-r----- 1 orassot oinstall 178 May 5 05:14 /u01/oracle/ssot/1014/dcm/config/dcm.conf[orassot@hr1 config]$ ls -l $ORACLE_HOME/opmn/conf/ons.conf-rw-r----- 1 orassot oinstall 34 May 5 05:14 /u01/oracle/ssot/1014/opmn/conf/ons.conf[orassot@hr1 config]$ ls -l $ORACLE_HOME/Apache/Apache/conf/httpd.conf-rw-r--r-- 1 orassot oinstall 38875 May 5 05:09 /u01/oracle/ssot/1014/Apache/Apache/conf/httpd.conf[orassot@hr1 config]$ vi $ORACLE_HOME/opmn/config/opmn.xml[orassot@hr1 config]$ vi $ORACLE_HOME/opmn/conf/opmn.xml
[orassot@hr1 config]$ vi $ORACLE_HOME/opmn/config/opmn.xml[orassot@hr1 config]$ vi $ORACLE_HOME/opmn/conf/opmn.xmlhttp://onlineappsdba.com/index.php/2008/04/25/changing-hostnamedomainip-of-oracle-application-server/##[orassot@hr1 config]$ /u01/oracle/ssot/1014/opmn/bin/opmnctl validate[orassot@hr1 config]$ /u01/oracle/ssot/1014/opmn/bin/opmnctl startallopmnctl: starting opmn and all managed processes...[orassot@hr1 config]$ /u01/oracle/ssot/1014/opmn/bin/opmnctl status
Processes in Instance: ssot.hr1.taipingcarpets.com-------------------+--------------------+---------+---------ias-component | process-type | pid | status-------------------+--------------------+---------+---------DSA | DSA | N/A | DownLogLoader | logloaderd | N/A | Downdcm-daemon | dcm-daemon | N/A | DownOC4J | OC4J_SECURITY | 15920 | AliveHTTP_Server | HTTP_Server | 15763 | AliveOID | OID | 15780 | Alive

---

### 486. Tai Ping - Odyssey Jitterbit and Concur Atom Boomi

**Topic ID:** 2112

TDEV2:
SQL> create user boomi identified by ora123 default tablespace sysaux temporary tablespace temp;
User created.
SQL> grant create session to boomi;
Grant succeeded.
SQL> grant select on apps.ap_invoices_interface to boomi;
Grant succeeded.
SQL> grant select on apps.ap_invoice_lines_interface to boomi;
Grant succeeded.
SQL> grant select on apps.pa_transaction_interface_all to boomi;
Grant succeeded.
SQL> grant select on ap.AP_INVOICES_INTERFACE_S to boomi;
Grant succeeded.
SQL> grant select on ap.AP_INVOICE_LINES_INTERFACE_S to boomi;
Grant succeeded.

---

### 436. Log in to R12 Forms

**Topic ID:** 2105

**Log in to R12 Forms First Time**
Log in to application and choose responsibility and menu that launches Forms.When it asks to install new Java, grant permission.After JRE 1.6 Update 7 is installed, grant permission for Oracle applet to run.Allow pop-ups so forms can launch in separate window.

---

### 454. Nanometrics : Quoting :Place Order : ORA-12541 : TNS No Listener

**Topic ID:** 2105

**Problem :**

Quoting :Place Order : ORA-12541 : TNS No Listener

Solution :

--> Start vertex tomcat :

[oravertex@c1pchebsapp1 VERTEX]$ cd tomcat/bin/
[oravertex@c1pchebsapp1 bin]$ ./startup.sh
Using CATALINA_BASE: /u01/VERTEX/tomcat
Using CATALINA_HOME: /u01/VERTEX/tomcat
Using CATALINA_TMPDIR: /u01/VERTEX/tomcat/temp
Using JRE_HOME: /u01/VERTEX/jdk
[oravertex@c1pchebsapp1 bin]$ tail -10f ../logs/catalina.out
Oct 12, 2013 4:03:42 PM org.apache.coyote.http11.Http11Protocol init
INFO: Initializing Coyote HTTP/1.1 on http-8095
Oct 12, 2013 4:03:42 PM org.apache.catalina.startup.Catalina load
INFO: Initialization processed in 816 ms
Oct 12, 2013 4:03:42 PM org.apache.catalina.core.StandardService start
INFO: Starting service Catalina
Oct 12, 2013 4:03:42 PM org.apache.catalina.core.StandardEngine start
INFO: Starting Servlet Engine: Apache Tomcat/6.0.20
Oct 12, 2013 4:03:42 PM org.apache.catalina.startup.HostConfig deployWAR
INFO: Deploying web application archive vertex-remote-services.war
Oct 12, 2013 4:04:39 PM com.sun.xml.ws.transport.http.servlet.WSServletContextListener contextInitialized
INFO: WSSERVLET12: JAX-WS context listener initializing
Oct 12, 2013 4:05:09 PM com.sun.xml.ws.transport.http.servlet.WSServletDelegate
INFO: WSSERVLET14: JAX-WS servlet initializing
Oct 12, 2013 4:05:09 PM org.apache.catalina.startup.HostConfig deployWAR
INFO: Deploying web application archive vertex-ui.war
Oct 12, 2013 4:05:09 PM org.apache.catalina.startup.HostConfig deployWAR
INFO: Deploying web application archive vertex-ws.war
Oct 12, 2013 4:05:11 PM com.sun.xml.ws.transport.http.servlet.WSServletContextListener contextInitialized
INFO: WSSERVLET12: JAX-WS context listener initializing
- Starting Vertex Xml Tax Calculation Engine
- Successfully started Vertex Tax Calculation Engine
- Starting Vertex Xml Tax Area Lookup Service
- Successfully started Vertex Xml Tax Area Lookup Service
- Starting Vertex Xml Version Service
- Successfully started Vertex Xml Version Service
Oct 12, 2013 4:11:16 PM com.sun.xml.ws.transport.http.servlet.WSServletDelegate
INFO: WSSERVLET14: JAX-WS servlet initializing
Oct 12, 2013 4:11:16 PM org.apache.coyote.http11.Http11Protocol start
INFO: Starting Coyote HTTP/1.1 on http-8095
Oct 12, 2013 4:11:16 PM org.apache.catalina.startup.Catalina start
INFO: Server startup in 453507 ms

---

### 533. RMAN-06004: ORACLE error from recovery catalog database: RMAN-20001: target database not found in recovery catalog

**Topic ID:** 1801

[orabfs05@af261 bin]$ rman target sys/Bf$sys129 catalog rcat/oracle123rcat@RMANCATALOG
Recovery Manager: Release 12.1.0.2.0 - Production on Mon Sep 25 21:44:27 2017
Copyright (c) 1982, 2014, Oracle and/or its affiliates. All rights reserved.
connected to target database: BFSS05 (DBID=1192131982)connected to recovery catalog database
RMAN> resync catalog;
starting full resync of recovery catalogfull resync complete
RMAN> unregister database;
database name is "BFSS05" and DBID is 1192131982
Do you really want to unregister the database (enter YES or NO)? Yesdatabase unregistered from the recovery catalog
RMAN> register database;
database registered in recovery catalogstarting full resync of recovery catalogfull resync complete

---

### 439. Install Fusion Application 11.1.1.6

**Topic ID:** 2105

See attached detail step by step instruction to install Fusion Application 11.1.1.6 in two tier configuraiton.
**Node 1**includes Oracle Identity and Access Management and database
**Node 2**includes Fusion Applications domains

**Installing Oracle Fusion Applications – steps**

- Install Fusion Applications Provisioning Framework
- Install Oracle 11g Database (Applications Transactional Database)
- Run Oracle Fusion Applications Repository Creation Utility (Applications RCU)
- Create another database for Oracle Identity Management Infrastructure (optional)**
**
- Run Repository Creation Utility (RCU) for Oracle Identity Management components**
**
- Install Oracle Identity and Access Management Components
- Apply mandatory Patches
- Configure Oracle Identity and Access Management components**
**
- Integrate Oracle Identity Manager (OIM) and Oracle Access Manager (OAM)
- Install provisioning framework on Node 2
- Create new Response File
- Provision an Applications Environment

---

### 441. GRC performance tuning

**Topic ID:** 601

User:Larry Zhao
Private
04/07/2013 01:11 AMcase "${SERVER_NAME}" in
"AdminServer")
USER_MEM_ARGS="-Xms4g -Xmx8g"
;;
"AdminServer(admin)")
USER_MEM_ARGS="-Xms4g -Xmx8g"
;;
"bi_server1")
USER_MEM_ARGS="-Xms2g -Xmx8g"
;;
"soa")
USER_MEM_ARGS="-Xms4g -Xmx8g"
;;
"sample_server1")
USER_MEM_ARGS="-Xms4g -Xmx6g"
;;
"sample_server2")
USER_MEM_ARGS="-Xms4g -Xmx6g"
User:Larry Zhao
Private
04/07/2013 12:33 AMOracle Support - 1 min ago [ODM Action Plan]

1. Stop application server.
2. Take backup of setDomainEnv.sh file.
3. Execute the following:

i. Navigate to setDomainEnv.sh and open it in a text editor.

ii. In the file, locate the following lines:
# IF USER_MEM_ARGS the environment variable is set, use it to override ALL MEM_ARGS values
if [ "${USER_MEM_ARGS}" != " ] ; then

iii. Insert the following lines between those two lines:
case "${SERVER_NAME}" in
"AdminServer")
USER_MEM_ARGS="-Xms4g –Xmx16g"
;; "bi_server1")
USER_MEM_ARGS="-Xms2g –Xmx8g"
;; "soa_server1")
USER_MEM_ARGS="-Xms2g –Xmx4g"
;; "sample_server1")
USER_MEM_ARGS="-Xms4g -Xmx16g"
;; "sample_server2")
USER_MEM_ARGS="-Xms4g -Xmx16g"
;;
*)
echo "Unknown Server Detected!!. Memory set as Xms1g Xmx2g.";
USER_MEM_ARGS="-Xms1g -Xmx2g"
;;
esac

USER_MEM_ARGS="${USER_MEM_ARGS} -XX:PermSize=256m -XX:MaxPermSize=512m -XX:ReservedCodeCacheSize=128M -Djava.awt.headless=true -Djbo.ampool.maxpoolsize=600000"

iv. Locate the following section of the file and ensure that “-da” appears after each of two “${enableHotSwapFlag}” elements:
if [ "${debugFlag}" = "true" ] ; then
JAVA_DEBUG="-Xdebug -Xnoagent -Xrunjdwp:transport=dt_socket,address=${DEBUG_PORT},server=y,suspend=n -Djava.compiler=NONE"
export JAVA_DEBUG
JAVA_OPTIONS="${JAVA_OPTIONS} ${enableHotswapFlag} -da -da:com.bea... -da:javelin... -da:weblogic... -ea:com.bea.wli... -ea:com.bea.broker... -ea:com.bea.sbconsole..."
export JAVA_OPTIONS
else
JAVA_OPTIONS="${JAVA_OPTIONS} ${enableHotswapFlag} -da"
export JAVA_OPTIONS
fi

4. Retest the issue.

User:Larry Zhao
Private
03/07/2013 06:48 PM[oradev@c1devgrc1 bin]$ ls -l start*
-rwxr-x--- 1 oradev oinstall 4599 Jun 6 01:13 startNodeManager.sh
[oradev@c1devgrc1 bin]$ cp -p startNodeManager.sh startNodeManager.sh.orig
[oradev@c1devgrc1 bin]$ vi startNodeManager.sh
MEM_ARGS="-Xms200m -Xmx400m"
[oradev@c1devgrc1 bin]$ nohup /u01/oracle/devgrc/Middleware/wlserver_10.3/server/bin/startNodeManager.sh &

[oradev@c1devgrc1 bin]$ cp -p setDomainEnv.sh setDomainEnv.sh.GOOD
[oradev@c1devgrc1 bin]$ vi setDomainEnv.sh
[oradev@c1devgrc1 bin]$ pwd
/u01/oracle/devgrc/Middleware/user_projects/domains/grc_dev/bin
[oradev@c1devgrc1 bin]$
case "${SERVER_NAME}" in
"AdminServer")
USER_MEM_ARGS="-Xms2g -Xmx6g"
;;
"AdminServer(admin)")
USER_MEM_ARGS="-Xms2g -Xmx6g"
;;
"bi_server1")
USER_MEM_ARGS="-Xms2g -Xmx8g"
;;
"soa")
USER_MEM_ARGS="-Xms2g -Xmx4g"

XMS_SUN_64BIT="256"
export XMS_SUN_64BIT
XMS_SUN_32BIT="256"
export XMS_SUN_32BIT
XMX_SUN_64BIT="512"
export XMX_SUN_64BIT
XMX_SUN_32BIT="512"
export XMX_SUN_32BIT
XMS_JROCKIT_64BIT="256"
export XMS_JROCKIT_64BIT
XMS_JROCKIT_32BIT="256"
export XMS_JROCKIT_32BIT
XMX_JROCKIT_64BIT="512"
export XMX_JROCKIT_64BIT
XMX_JROCKIT_32BIT="512"
export XMX_JROCKIT_32BIT

# updated SR 3-7463883171 to ask ways to tune JAVA memory for GRC application.User:Larry Zhao
Private
03/07/2013 12:39 AMPer GRC support matrix document, we can use the Minimum option for non-production.
So we need to increase:
1. CPU from 4 to 8 on c1devgrc1
2. RAM to 16GB
3. JVM size to maximum allowed without memory swapping (need to research how to change JVM size)User:Larry Zhao
Private
03/07/2013 12:39 AMSQL> set pagesize 100
SQL> r
1* select * from dba_temp_files

FILE_NAME
--------------------------------------------------------------------------------
FILE_ID TABLESPACE_NAME BYTES BLOCKS STATUS
---------- ------------------------------ ---------- ---------- -------
RELATIVE_FNO AUT MAXBYTES MAXBLOCKS INCREMENT_BY USER_BYTES USER_BLOCKS
------------ --- ---------- ---------- ------------ ---------- -----------
/u01/oracle/devgrc/oradata/devgrc/temp01.dbf
1 TEMP 87031808 10624 ONLINE
1 YES 3.4360E+10 4194302 80 85983232 10496

/u01/oracle/devgrc/oradata/devgrc/EGRCM_iastemp.dbf
2 EGRCM_IAS_TEMP 104857600 12800 ONLINE
1 NO 0 0 0 103809024 12672

SQL> alter database tempfile '/u01/oracle/devgrc/oradata/devgrc/temp01.dbf' resize 1g;

Database altered.

SQL> select * from dba_temp_files;

FILE_NAME
--------------------------------------------------------------------------------
FILE_ID TABLESPACE_NAME BYTES BLOCKS STATUS
---------- ------------------------------ ---------- ---------- -------
RELATIVE_FNO AUT MAXBYTES MAXBLOCKS INCREMENT_BY USER_BYTES USER_BLOCKS
------------ --- ---------- ---------- ------------ ---------- -----------
/u01/oracle/devgrc/oradata/devgrc/temp01.dbf
1 TEMP 1073741824 131072 ONLINE
1 YES 3.4360E+10 4194302 80 1072693248 130944

/u01/oracle/devgrc/oradata/devgrc/EGRCM_iastemp.dbf
2 EGRCM_IAS_TEMP 104857600 12800 ONLINE
1 NO 0 0 0 103809024 12672

SQL> alter da

... [Content truncated for readability]

---

### 443. Staffing Angel production maintenance

**Topic ID:** 2701

User:Larry Zhao
Private
06/07/2013 01:42 AM
# Disable restricted mode to performance maintenanceSQL> alter system disable restricted session;

System altered.

SQL> select logins from v$instance;

LOGINS
----------
ALLOWED

SQL> alter system disable restricted session;

System altered.

SQL> select logins from v$instance;

LOGINS
----------
ALLOWED

SQL> alter system disable restricted session;

System altered.

SQL> select logins from v$instance;

LOGINS
----------
ALLOWED
User:Larry Zhao
Private
06/07/2013 01:02 AM# Enable restricted mode to performance maintenance
login as: orarac
orarac@ah250-l.appshosting.com's password:
Last login: Sat Jun 29 19:06:56 2013 from ah251.appshosting.com
[orarac@ah250 ~]$ . oraenv
ORACLE_SID = [orarac] ? tsah1
The Oracle base for ORACLE_HOME=/u01/app/orarac/product/11.2.0/dbhome_1 is /u01/app/orarac
[orarac@ah250 ~]$ sqlplus /nolog

SQL*Plus: Release 11.2.0.1.0 Production on Sat Jul 6 04:01:11 2013

Copyright (c) 1982, 2009, Oracle. All rights reserved.

SQL> connect / as sysdba
Connected.
SQL> alter system enable restricted session;

System altered.

SQL> select logins from v$instance;

LOGINS
----------
RESTRICTED

SQL>

login as: orarac
orarac@ah251-l.appshosting.com's password:
Last login: Wed Jun 26 13:21:39 2013 from ah250.appshosting.com
[orarac@ah251 ~]$ . oraenv
ORACLE_SID = [orarac] ? tsah2
The Oracle base for ORACLE_HOME=/u01/app/orarac/product/11.2.0/dbhome_1 is /u01/app/orarac
[orarac@ah251 ~]$ sqlplus /nolog

SQL*Plus: Release 11.2.0.1.0 Production on Sat Jul 6 04:01:46 2013

Copyright (c) 1982, 2009, Oracle. All rights reserved.

SQL> connect / as sysdba
Connected.
SQL> alter system enable restricted session;

System altered.

SQL> select logins from v$instance;

LOGINS
----------
RESTRICTED

SQL>

login as: orarac
orarac@ah248-l.appshosting.com's password:
Last login: Wed Jun 26 13:21:24 2013 from ah250.appshosting.com
-bash-3.2$ . oraenv
ORACLE_SID = [orarac] ? tsah3
The Oracle base for ORACLE_HOME=/u01/app/orarac/product/11.2.0/dbhome_1 is /u01/app/orarac
-bash-3.2$ sqlplus /nolog

SQL*Plus: Release 11.2.0.1.0 Production on Sat Jul 6 04:02:29 2013

Copyright (c) 1982, 2009, Oracle. All rights reserved.

SQL> connect / as sysdba
Connected.
SQL> alter system enable restricted session;

System altered.

SQL> select logins from v$instance;

LOGINS
----------
RESTRICTED

SQL>

---

### 444. Troubleshoot GL Wand performance issue in R12.1.3

**Topic ID:** 2105

**From:**Meggie M. Shi
**Sent:**Thursday, July 11, 2013 7:00 PM
**To:**Shashin Bhavsar
**Cc:**Sam Yun; Alan Porto; Support Group
**Subject:**Re: Weekly Meeting to Discuss Projects - New Conf # - RescheduleHi, Shashin,
GL Wand performance issue is resolved on 12.1.3, Calix has document performance tuning step at google doc.a) Ask appshosting to performance Gather Schema Statistics
b) Run Gather Table Statistics on the below tables:
XLA_EVENTS
XLA_AE_HEADERS
XLA_AE_LINES
XLA_DISTRIBUTION_LINKS
thanksMeggie

---

### 446. Creating and Assigning New Schemas to Existing Workspace

**Topic ID:** 2104

1. Create tablespace for data and index:create tablespace abc_data datafile '/u01/oradata/ahdb07/abc_data01.dbf'size 100m autoextend on maxsize 300mextent management local segment space management auto/
2. Create usercreate user abc_user identified by "A2b4c0#" default tablespace abc_datatemporary tablespace temp quota unlimited on abc_data/
3. Grant privilege.grant create session to abc_user;grant create view, create synonym, create procedure,create materialized view, create sequence, create table,create trigger to abc_user;ALTER USER abc_user DEFAULT ROLE ALL;
4. Assign the schema to workspace.Log in to internal Apex adminManage WorkspaceManage Workspace to Schema AssignmentsClick Add Schema & Select the intended Workspace.Select the New Schema and select the new schema created.

---

### 447. How to check APPS password and SYSADMIN password

**Topic ID:** 2105

1. Create decrypt function.
SQL> create FUNCTION apps.decrypt_pin_func(in_chr_key IN VARCHAR2,in_chr_encrypted_pin IN VARCHAR2)RETURN VARCHAR2ASLANGUAGE JAVA NAME 'oracle.apps.fnd.security.WebSessionManagerProc.decrypt(java.lang.String,java.lang.String) return java.lang.String';
Function created.
2. Query GUEST.SQL> select ENCRYPTED_FOUNDATION_PASSWORD from apps.fnd_user where USER_NAME='GUEST';
ENCRYPTED_FOUNDATION_PASSWORD--------------------------------------------------------------------------------ZG29735267DD0F0D0E4F9D5308EFB92D37A106CDEBB7B21B77F97E9C0674EB9663BF93D4A585AF1740F3B76A0B019C215348
3. Query APPS password.SQL> SELECT apps.decrypt_pin_func('GUEST/ORACLE','ZG29735267DD0F0D0E4F9D5308EFB92D37A106CDEBB7B21B77F97E9C0674EB9663BF93D4A585AF1740F3B76A0B019C215348') from dual;

APPS.DECRYPT_PIN_FUNC('GUEST/ORACLE','ZG29735267DD0F0D0E4F9D5308EFB92D37A106CDEB--------------------------------------------------------------------------------APPS

#### Step to Find SYSADMIN PASSWORD :

**STEP 1:**SQL> conn apps/APPS;Connected.
**STEP 2:**SQL> CREATE OR REPLACE PACKAGE get_pwd ASFUNCTION decrypt (KEY IN VARCHAR2, VALUE IN VARCHAR2)RETURN VARCHAR2;END get_pwd;/ 2 3 4 5
Package created.
**STEP 3:**
SQL>CREATE OR REPLACE PACKAGE BODY get_pwdSQL> 2 AS3 FUNCTION decrypt (KEY IN VARCHAR2, VALUE IN VARCHAR2)4 RETURN VARCHAR25 AS6 LANGUAGE JAVA NAME 'oracle.apps.fnd.security.WebSessionManagerProc.decrypt(java.lang.String,java.lang.String) return java.lang.String';7 END get_pwd;8 /
Package body created.
**STEP 4:****
**
SQL> SELECT usr.user_name,get_pwd.decrypt2 3 ((SELECT (SELECT get_pwd.decrypt4 (fnd_web_sec.get_guest_username_pwd,5 usertable.encrypted_foundation_password6 )7 FROM DUAL) AS apps_password8 FROM fnd_user usertable9 WHERE usertable.user_name =10 (SELECT SUBSTR11 (fnd_web_sec.get_guest_username_pwd,12 1,13 INSTR14 (fnd_web_sec.get_guest_username_p15 '/'16 )17 - 118 )19 FROM DUAL)),20 usr.encrypted_user_password) PASSWORDFROM fnd_user usr21 22 23 WHERE usr.user_name = '&USER_NAME';Enter value for user_name: SYSADMINold 23: WHERE usr.user_name = '&USER_NAME'new 23: WHERE usr.user_name = 'SYSADMIN'
USER_NAME--------------------------------------------------------------------------------PASSWORD--------------------------------------------------------------------------------SYSADMINTermina1

**STEP 5 : (Bellow sql will help you to validate SYSADMIN Password)**
SQL> select fnd_web_sec.validate_login('SYSADMIN','Termina1') from dual;
FND_WEB_SEC.VALIDATE_LOGIN('SYSADMIN','TERMINA1')--------------------------------------------------------------------------------Y

---

### 627. Schedule 360: Apex URL login Page shows 500 Internal Server Error

**Topic ID:** 2104

Problem:

Below URL’s are not coming up.

Error: 500 Internal Server Error

So we troubleshoot as per below details:

http://af357.appsforte.com:8080/ords

http://af356.appsforte.com:8080/ords

[tomcat@af356 ords]$ cd /u01/app/ords/ords/conf

[tomcat@af356 conf]$ ls -lrt

total 44

-rw-rw-r-- 1 tomcat tomcat 344 Dec 14 2019 apex_pu.xml.20191214

-rw-rw-r-- 1 tomcat tomcat 349 Dec 14 2019 apex_rt.xml.20191214

-rw-rw-r-- 1 tomcat tomcat 341 Dec 14 2019 apex_al.xml.20191214

-rw-rw-r-- 1 tomcat tomcat 344 Dec 14 2019 apex.xml.20191214

-rw-rw-r-- 1 tomcat tomcat 344 Dec 14 2019 apex.xml_mc.20200904

-rw-rw-r-- 1 tomcat tomcat 302 Sep 4 12:48 apex.xml.20200924-vc

-rw-rw-r-- 1 tomcat tomcat 299 Sep 4 12:49 apex_al.xml.20200924-vc

-rw-rw-r-- 1 tomcat tomcat 307 Sep 4 12:49 apex_rt.xml

-rw-rw-r-- 1 tomcat tomcat 302 Sep 4 12:49 apex_pu.xml

**-rw-rw-r-- 1 tomcat tomcat 301 Sep 24 15:45 apex.xml**

**-rw-rw-r-- 1 tomcat tomcat 298 Sep 24 15:50 apex_al.xml**

[tomcat@af356 conf]$

We need to correct passwords in files**apex.xml**and**apex_al.xml**
[tomcat@af356 conf]$ cat apex.xml

http://java.sun.com/dtd/properties.dtd">

Saved on Sat Dec 14 05:44:01 EST 2019
**Admin123**
APEX_PUBLIC_USER

[tomcat@af356 conf]$
[tomcat@af356 conf]$ cat apex_al.xml

http://java.sun.com/dtd/properties.dtd">

Saved on Sat Dec 14 05:44:01 EST 2019
**Admin123**
APEX_LISTENER

[tomcat@af356 conf]$
[tomcat@af356 conf]$

Once corrections are made, please bounce tomcat services and retest the URL.

---

### 448. Resolve Java based programs very slow or not starting after server reboot

**Topic ID:** 2105

**Problem:**Java based programs either are very slow or not starting. For example, Java based concurrent requests (PO Output for CommunicationFormat Payment InstructionsCreate Accounting)are very slow to run. Workflow mailer not starting. Apache and OACORE very slow to start and stop. This happened especially after server reboot, and /dev/random file permission got reset.
**Solution:**1. Terminate long running requests then shut down apps tier.
update fnd_concurrent_requests set phase_code = 'C', status_code = 'X' where phase_code = 'R';

Concurrent Processing - What are the Meaning of the Codes in the STATUS_CODE and PHASE_CODE Columns of FND_CONCURRENT_REQUESTS Table? (Doc ID 152209.1)

2. Recreate /dev/random file (cronjob going forward /ahi/bin/cr_random.sh). This appears to be needed done after server reboot to avoid Java processes going very slow and "TNS-12535: TNS:operation timed out" error indatabase alert log.

---

### 449. Oracle SSO 11g Installation

**Topic ID:** 301

Oracle SSO 11g Installation : Attached.
High Level task doc :https://docs.google.com/a/appshosting.com/spreadsheet/ccc?key=0AvSvMxmV9BisdEhCSWR1S1E5bUFLOHRHMHdNOThsMUE&usp=sharing#gid=0

---

### 450. Setting up nVision for PeopleSoft

**Topic ID:** 3301

Installing and Configuring nVision for APA PeopleSoft

For nVision:

·I think you will need to have Excel installed on Citrix.

·Save the attached file into the C:\\PT846\\config\\ folder. Note: This file will need to be edited to fit your drive mappings. It can be done directly in the file, or later via the screens, but probably easier to be edited first.

·copy the whole C:\\PT846\\ folder onto the Citrix server.

·Execute pscfg.exe on the Citrix server. You should see something like this:

·Go to the Import/Export tab.

·Select Import from a File.

·Select the attached file.

·If not already done, go through all the tabs and change the drive references. In the Profile tab, you will need to select Edit to display some more tabs.

·Select Apply.

·Select Client Setup tab.

·Tick Install Workstation checkbox, and the ODBC Setup boxes.

·Select Apply.

·Select ODBC Administrator and set up a System DSN for PSPROD.

·Select OK.

To test the setup, execute psnvs.exe. You should get something like this:

---

### 453. Creating APPS READ ONLY schema in Oracle Applications

**Topic ID:** 2105

step 1: Connect as sysdba and create the database user to be used for apps read only schema.bash $ sqlplus "/ as sysdba"
SQL > create user appsro identified by appsro default tablespace APPS_TS_TX_DATA;
SQL> grant connect, resource to appsro;
SQL> grant create synonym to appsro;
SQL> exit;
step 2: Connect as APPS user and run the SQL commands:bash $ sqlplus apps/******
SQL>set head off
SQL> set newpage none
SQL> set pagesize 9999
SQL> spool create_synonyms.sql
SQL> select 'create synonym ' || OBJECT_NAME || ' for ' || OWNER ||'.' ||OBJECT_NAME || ';' from all_objects where OWNER not in ('SYS','SYSTEM') and OBJECT_NAME not like '%/%' and OBJECT_TYPE in ('TABLE','VIEW','SYNONYM');
SQL> spool off
SQL> spool grant_select.sql
SQL> select 'grant select on '|| OWNER ||'.' ||OBJECT_NAME || ' to appsro;' from all_objects where OWNER not in ('SYS','SYSTEM') and OBJECT_NAME not like '%/%' and OBJECT_TYPE in ('TABLE','VIEW','SYNONYM');
SQL> spool off
SQL> exit;
step 3:
- connect as sysdba :bash $ sqlplus "/as sysdba"
SQL> @grant_select.sql
SQL> exit;
step 4:
- connect as appsrobash $ sqlplus appsro/appsro
SQL> @create_synonyms.sql
SQL> exit;

---

### 639. Unlock APEX Internal Admin Account

**Topic ID:** 2104

1) Find the security group ID of internal workspace:
SQL> select apex_util.find_security_group_id (p_workspace => 'INTERNAL') from dual;
APEX_UTIL.FIND_SECURITY_GROUP_ID(P_WORKSPACE=>'INTERNAL')
---------------------------------------------------------
10
2) Unlock internal admin account

BEGIN
apex_util.set_security_group_id(p_security_group_id => 10);
apex_util.unlock_account(p_user_name => 'ADMIN');
END;
/
COMMIT;

---

### 572. Nanometrics Clone -- New --> MOVED to Below Doc

**Topic ID:** 2105

Moved to Onto Nanometrics Clone,https://docs.google.com/document/d/1OPz4H4ihcJ3UEVAgwmHI5Fu6npxtiolzhLfz-jtGfAM/edit

1. Run adpreclone.pl on production database nodes. Location for "adpreclone.pl" is $ORACLE_HOME/appsutil/script/

Use dbTechStack option with "adpreclone.pl" as we'll do the manual RMAN restore. So, command will become like below:

cd $ORACLE_HOME/appsutil/scripts/PRODEBS1_c1prdebsdb1
perl adpreclone.pl dbTechStack

****IMPORTANT: RSYNC of database home only after patching or AutoConfig on database server.**
****NOTE: You may be to move or rename "dbts" directory under "**
Run Rsync database node from production database node.

rsync -avzr@:/./.

For example, it will become:

rsync -avzr oraprod@c1prdebsdb1:

2. Restore db on db tier.

Below is an example of restore command which needs to modified according to environment , date and time of the request ,

Below command needs to be ran on cloned instance only not on source database ,

rman target sys/nanomgr123@PRODEBS auxiliary / @/home/oradev/duplicate.parms log =/home/oradev/logduplicate20170720.log

[oradev@c1pdevebsdb1 ~]$ more duplicate.parms
run {
allocate channel C1 device type disk;
allocate auxiliary channel C2 device type disk;
allocate auxiliary channel C3 device type disk;
set until time "to_date('2017-07-15:05:00:00','YYYY-MM-DD:hh24:mi:ss')";
DUPLICATE TARGET DATABASE TO PRJDEV NOFILENAMECHECK;
release channel C1;
release channel C2;
release channel C3;
}

3.1. Copy apps tier (rsync $APPL_TOP, $COMMON_TOP, Tools $ORACLE_HOME, Web $IAS_ORACLE_HOME) (Also run adpreclone.pl appsTier on both application nodes of production.

# Clean WF queue
SQL> update WF_NOTIFICATIONS set mail_status = 'SENT' where mail_status = 'MAIL';
SQL> commit;
Commit complete.
SQL> exit
$ sqlplus apps/@$FND_TOP/patch/115/sql/wfntfqup.sql appsAPPLSYS

Changed OPP Heap Size
Double the size and number of OACore processes as follows :
Original value :
-server -verbose:gc -Xmx512M -Xms128M -XX:MaxPermSize=160M -XX:NewRatio=2 -XX:+PrintGCTimeStamps -XX:+UseTLAB -XX:+UseParallelGC -XX:ParallelGCThreads=2 -Dcom.sun.management.jmxremote -Djava.security.policy=$ORACLE_HOME/j2ee/oacore/config/java2.policy -Djava.awt.headless=true -Dhttp.webdir.enable=false -Doracle.security.jazn.config=/u01/oracle/IMPEBS/inst/apps/IMPEBS_c1pchebsapp1/ora/10.1.3/j2ee/oacore/config/jazn.xml
1
New value :
-server -verbose:gc -Xmx1024M -Xms512M -XX:MaxPermSize=256M -XX:NewRatio=2 -XX:+PrintGCTimeStamps -XX:+UseTLAB -XX:+UseParallelGC -XX:ParallelGCThreads=2 -Dcom.sun.management.jmxremote -Djava.security.policy=$ORACLE_HOME/j2ee/oacore/config/java2.policy -Djava.awt.headless=true -Dhttp.webdir.enable=false -Doracle.security.jazn.config=/u01/oracle/IMPEBS/inst/apps/IMPEBS_c1pchebsapp1/ora/10.1.3/j2ee/oacore/config/jazn.xml
2
Change java memory setting
SQL> update FND_CP_SERVICES
set DEVELOPER_PARAMETERS = 'J:oracle.apps.fnd.cp.gsf.GSMServiceController:-mx1024m'
where SERVICE_ID =
(select MANAGER_TYPE
from FND_CONCURRENT_QUEUES
where CONCURRENT_QUEUE_NAME = 'FNDCPOPP');
1 row updated.
SQL> commit;
Commit complete.

Run autoconfig on apps tier again

Please execute below sql statement in cloned instance after refresh.
update IBY_EXTERNAL_PAYEES_ALL
set REMIT_ADVICE_EMAIL ='XXXX'||REMIT_ADVICE_EMAIL
where REMIT_ADVICE_EMAIL is not null;
Commit;

[oravertex@c1pchebsapp1 config]$ cat vertex.cfg | grep IMP
util.app.connection.JOURNAL_DB={url="jdbc:oracle:thin:@//c1pchebsdb1.nanometrics.com:1521/IMPEBS",euser="O81+gnf7nIW336oF9Q2Q1soQ",epassword="qs3e/20Jg11W1UULcX9sVwPv",databaseProductName="oracle",schemaName="XXJOURNAL"}
util.app.connection.RPT_DB={url="jdbc:oracle:thin:@//c1pchebsdb1.nanometrics.com:1521/IMPEBS",euser="3ZC8Y0E9VJ9HpVULcX9sVwPv",epassword="qs3e/20Jg11W1UULcX9sVwPv",databaseProductName="oracle",schemaName="XXREPORT"}
util.app.connection.TAXGIS_DB={url="jdbc:oracle:thin:@//c1pchebsdb1.nanometrics.com:1521/IMPEBS",euser="+9i4WCPyIX4V4B",epassword="qs3e/20Jg11W1UULcX9sVwPv",databaseProductName="oracle",schemaName="XXTPS"}
util.app.connection.TPS_DB={url="jdbc:oracle:thin:@//c1pchebsdb1.nanometrics.com:1521/IMPEBS",euser="+9i4WCPyIX4V4B",epassword="qs3e/20Jg11W1UULcX9sVwPv",databaseProductName="oracle",schemaName="XXTPS"}
util.app.connection.UTIL_DB={url="jdbc:oracle:thin:@//c1pchebsdb1.nanometrics.com:1521/IMPEBS",euser="+9i4WCPyIX4V4B",epassword="qs3e/20Jg11W1UULcX9sVwPv",databaseProductName="oracle",schemaName="XXTPS"}
[oravertex@c1pchebsapp1 config]$ /u01/VERTEX/tomcat/bin/shutdown.sh
Using CATALINA_BASE: /u01/VERTEX/tomcat
Using CATALINA_HOME: /u01/VERTEX/tomcat
Using CATALINA_TMPDIR: /u01/VERTEX/tomcat/temp
Using JRE_HOME: /u01/VERTEX/jdk
[oravertex@c1pchebsapp1 config]$ /u01/VERTEX/tomcat/bin/startup.sh
Using CATALINA_BASE: /u01/VERTEX/tomcat
Using CATALINA_HOME: /u01/VERTEX/tomcat
Using CATALINA_TMPDIR: /u01/VERTEX/tomcat/temp
Using JRE_HOME: /u01/VERTEX/jdk
[oravertex@c1pchebsapp1 config]$ cd
[oravertex@c1pchebsapp1 ~]$ ls *env
APPSIMPEBS_c1pchebsapp1.env
[oravertex@c1pcheb

... [Content truncated for readability]

---

### 456. Create read only apps account

**Topic ID:** 2105

http://oracle.anilpassi.com/read-only-schema-in-oracle-apps-11i-2.html
SQL> create user apps_query identified by ah229querydefault tablespace APPS_TS_TX_DATA temporary tablespace temp;
SQL> grant create session to apps_query;
Grant succeeded.

PROMPT This can take upto 15-30 minutesPROMPT Granting SELECT on All synonyms and views to apps_queryDECLARE--One off script to execute grants to apps_queryv_error VARCHAR2(2000);BEGIN
FOR p_rec IN (SELECT *FROM all_objectsWHERE owner = 'APPS'AND object_type IN ('SYNONYM', 'VIEW')AND object_name NOT LIKE '%_S')LOOPBEGINEXECUTE IMMEDIATE 'grant select on ' || p_rec.object_name ||' to apps_query';EXCEPTIONWHEN OTHERS THENv_error := substr(SQLERRM, 1, 2000);END;END LOOP;COMMIT;END;/

---

### 457. Start MWA service using adstrtal.sh

**Topic ID:** 2105

Mobile Web Applications Server - How to Start/Stop MWA Services Using Control Scripts adstrtal.sh/adstpall.sh
Oracle Mobile Application Server - Version 11.5.10.0 to 12.1.3 [Release 11.5 to 12.1]Information in this document applies to any platform.Information in this document applies to any platform.Mobile Application Server - Version: 11.5.10 to 12.1
GOAL
One would like to start/stop MWA services using respectively adstrtal.sh/adstpall.sh control scriptsinstead of the specific script mwactl.sh under $MWA_TOP/bin (11i) or INST_TOP/admin/scripts (r12).
FIX
1. Stop all the services (by running adstpall.sh under $COMMON_TOP/ in 11i or /admin/scripts in r12)
2. For r12 modify value of s_mwastatus and s_other_service_group_status variables to 'enabled' (without quotes) in the xml in r12 (where is generally _)3. Run Autoconfig4. Now the MWA services can be started/stopped as other Applications processes using theadstrtal.sh/adstpall.sh control scripts.

---

### 458. Performance tuning for IMPEBS

**Topic ID:** 2105

Below are the Fixes incorporated in IMPEBS.

[oraimp@c1pchebsdb1 dbs]$ diff initIMPEBS.ora initIMPEBS.ora.bkp219,220c219,220<processes = 500 # Max. no. of users x 2<sessions = 1000 # 2 X processes---> processes = 200 # Max. no. of users x 2> sessions = 400 # 2 X processes444c444<utl_file_dir = /u01/oracle/IMPEBS/inst/apps/IMPEBS_c1pchebsapp1/appltmp,/usr/tmp,/u01/oracle/IMPEBS/db/tech_st/11.2.0/appsutil/outbound/IMPEBS_c1pchebsdb1,/u01/oracle/IMPEBS/inst/apps/IMPEBS_c1pchebsdb1/appltmp,/u01/oracle/IMPEBS/db/tech_st/11.2.0/appsutil/outbound/IMPEBS_c1pchebsdb1,/usr/tmp,/u01/Labels---> utl_file_dir = /u01/oracle/IMPEBS/inst/apps/IMPEBS_c1pchebsapp1/appltmp,/usr/tmp,/u01/oracle/IMPEBS/db/tech_st/11.2.0/appsutil/outbound/IMPEBS_c1pchebsdb1,/u01/oracle/IMPEBS/inst/apps/IMPEBS_c1pchebsdb1/appltmp,/u01/oracle/IMPEBS/db/tech_st/11.2.0/appsutil/outbound/IMPEBS_c1pchebsdb1,/usr/tmp[oraimp@c1pchebsdb1 dbs]$

[oraimp@c1pchebsdb1 dbs]$ cat IMPEBS_c1pchebsdb1_ifile.oraSGA_TARGET=10gpga_aggregate_target=3gaq_tm_processes = 2
# 11.2.0.2 paramtersparallel_force_local=TRUE #MP

1.
Double the size and number of OACore processes as follows :
Original value :
-server -verbose:gc -Xmx512M -Xms128M -XX:MaxPermSize=160M -XX:NewRatio=2 -XX:+PrintGCTimeStamps -XX:+UseTLAB -XX:+UseParallelGC -XX:ParallelGCThreads=2 -Dcom.sun.management.jmxremote -Djava.security.policy=$ORACLE_HOME/j2ee/oacore/config/java2.policy -Djava.awt.headless=true -Dhttp.webdir.enable=false -Doracle.security.jazn.config=/u01/oracle/IMPEBS/inst/apps/IMPEBS_c1pchebsapp1/ora/10.1.3/j2ee/oacore/config/jazn.xml1
New value :
-server -verbose:gc -Xmx1024M -Xms512M -XX:MaxPermSize=256M -XX:NewRatio=2 -XX:+PrintGCTimeStamps -XX:+UseTLAB -XX:+UseParallelGC -XX:ParallelGCThreads=2 -Dcom.sun.management.jmxremote -Djava.security.policy=$ORACLE_HOME/j2ee/oacore/config/java2.policy -Djava.awt.headless=true -Dhttp.webdir.enable=false -Doracle.security.jazn.config=/u01/oracle/IMPEBS/inst/apps/IMPEBS_c1pchebsapp1/ora/10.1.3/j2ee/oacore/config/jazn.xml2

After these changes, you need to run Autoconfig and bounce web services.--> Changed OPP Heap Size :As apps :update FND_CP_SERVICES
set DEVELOPER_PARAMETERS = 'J:oracle.apps.fnd.cp.gsf.GSMServiceController:-mx1024m'
where SERVICE_ID =
(select MANAGER_TYPE
from FND_CONCURRENT_QUEUES
where CONCURRENT_QUEUE_NAME = 'FNDCPOPP');--Schedule GSS for all schemas daily

---

### 473. Run RDA in EBS

**Topic ID:** 2105

Remote Diagnostic Agent (RDA) - Getting Started (Doc ID 314422.1)

---

### 490. Apply EBS 12.2.x Patches

**Topic ID:** 2105

Online (default):1. Extract patch in $PATCH_TOP2.
adop phase=prepareadop phase=apply patches=23513973adop phase=finalizeadop phase=cutoveradop phase=cleanupadop phase=fs_clone
Downtime (Only do if README specifically states):1. Shut down apps2. adop phase=apply patches=23513973 apply_mode=downtime
Hot patch (Only do if README specifically states):1. Shut down apps2. adop phase=apply patches=23513973 apply_mode=hotpatch

---

### 462. Harden Database Password Policy

**Topic ID:** 1801

0. Create VERIFY_FUNCTION using script in rhtstebsdb2:/home/oratest/verify_func.sql.
1. Set up new security profilecreate profile SEC_BUSINESS_USER limitCONNECT_TIME 120CPU_PER_CALL 180000CPU_PER_SESSION 180000FAILED_LOGIN_ATTEMPTS 3IDLE_TIME 15PASSWORD_LOCK_TIME .0416SESSIONS_PER_USER 3PASSWORD_REUSE_MAX 12PASSWORD_LIFE_TIME 90PASSWORD_VERIFY_FUNCTION VERIFY_FUNCTION/create profile SEC_DEVELOPER limitCOMPOSITE_LIMIT UNLIMITEDCPU_PER_SESSION UNLIMITEDFAILED_LOGIN_ATTEMPTS 3IDLE_TIME 60LOGICAL_READS_PER_SESSION UNLIMITEDPASSWORD_GRACE_TIME 10PASSWORD_LOCK_TIME .0006PRIVATE_SGA 262144SESSIONS_PER_USER 10PASSWORD_REUSE_MAX 12PASSWORD_LIFE_TIME 90PASSWORD_VERIFY_FUNCTION VERIFY_FUNCTION/
2. Alter non-apps users to use the new security profile above.set pages 100select 'alter user ' || username || ' profile SEC_'|| profile ||';' from dba_users where profile not in ('DEFAULT', 'AD_PATCH_MONITOR_PROFILE', 'EM_OAM_MONITOR_PROFILE','MONITORING_PROFILE')

---

### 463. Setting up Application Express for HTTP Server

**Topic ID:** 901

#### Set up Oracle HTTP Server for APEX

http://docs.oracle.com/cd/E37097_01/doc/install.42/e35123/otn_install.htm#BHAFJJDA

#### 3.5.5.4Configuring Oracle HTTP Server 11gor OracleApplicationServer 10gPerform the following post installation steps outlined in this section.

Topics:

- 

Editing the dads.conf File

- 

Stopping and Restarting Oracle HTTP Server

Note:
Within the context of this document,`ORACLE_HTTPSERVER_HOME`is the location where Oracle HTTP Server is installed.3.5.5.4.1Editing the dads.confFileIf this is a new installation of Oracle Application Express, you must edit the`dads.conf`or`marvel.conf`file. The`dads.conf`file contains the information about the Database Access Descriptor (DAD) to access Oracle Application Express.
To edit the`dads.conf`file:

- Use a text editor and open the`dads.conf.`

  - Oracle Application Server 10g:

    - 

On Windows see:

```
ORACLE_HTTPSERVER_HOME\\Apache\\modplsql\\conf\\dads.conf\n
```

    - 

On UNIX and Linux see:

```
ORACLE_HTTPSERVER_HOME/Apache/modplsql/conf/dads.conf\n
```

  - Oracle HTTP Server distributed with Oracle Database 11g:

    - 

On Windows see:

```
ORACLE_HTTPSERVER_HOME\\ohs\\modplsql\\conf\\dads.conf\n
```

    - 

On UNIX and Linux see:

```
ORACLE_HTTPSERVER_HOME/ohs/modplsql/conf/dads.conf\n
```

- In the`dads.conf`file, replace`ORACLE_HTTPSERVER_HOME`,`host`,`port`,`service_name`, and`apex_public_user_password`with values appropriate for your environment. Note that the`apex_public_user_password`is the password you changed in"Changing the Password for the APEX_PUBLIC_USER Account".
Note that the path listed is only an example. The path in the dads.conf file should reference the file system path described in"Copying the Images Directory".

```
Alias /i/ "ORACLE_HTTPSERVER_HOME/Apache/images/"\n\n\n Order deny,allow\n PlsqlDocumentPath docs\n AllowOverride None\n PlsqlDocumentProcedure         wwv_flow_file_mgr.process_download\n PlsqlDatabaseConnectString     host:port:service_name ServiceNameFormat\n PlsqlNLSLanguage               AMERICAN_AMERICA.AL32UTF8\n PlsqlAuthenticationMode        Basic\n SetHandler                     pls_handler\n PlsqlDocumentTablename         wwv_flow_file_objects$\n PlsqlDatabaseUsername          APEX_PUBLIC_USER\n PlsqlDefaultPage               apex\n PlsqlDatabasePassword          apex_public_user_password\n PlsqlRequestValidationFunction wwv_flow_epg_include_modules.authorize\n Allow from all\n\n
```

- Locate the line containing`PlsqlNLSLanguage`.
The`PlsqlNLSLanguage`setting determines the language setting of the DAD. The character set portion of the`PlsqlNLSLanguage`value must be set to`AL32UTF8`, regardless of whether or not the database character set is`AL32UTF8`. For example:

```
...\nPlsqlNLSLanguage            AMERICAN_AMERICA.AL32UTF8\n...\n
```

- Save and exit the`dads.conf`file.

3.5.5.4.2Stopping and Restarting Oracle HTTP ServerTo stop and restart Oracle HTTP Server:

- Windows:
If database is 10g and lower, execute the following:

```
ORACLE_HTTPSERVER_HOME\\opmn\\bin\\opmnctl stopproc ias-component=HTTP_Server\nORACLE_HTTPSERVER_HOME\\opmn\\bin\\opmnctl startproc ias-component=HTTP_Server\n
```

- UNIX and Linux
If database is 10g and lower, execute the following:

```
ORACLE_HTTPSERVER_HOME/opmn/bin/opmnctl stopproc ias-component=HTTP_Server\nORACLE_HTTPSERVER_HOME/opmn/bin/opmnctl startproc ias-component=HTTP_Server\n
```

Note:
If you are using Oracle HTTP Server that is included with Oracle Fusion Middleware 11.1.1, you may need to replace the ias-component name above if the name given to the component was something other than HTTP_Server when it was installed. The default name is ohs1.

---

### 469. How to purge e-mail notifications from the Workflow queue

**Topic ID:** 2105

**How to purge e-mail notifications from the Workflow queue**

Some times Due to large number of e-mail notifications to accumulated in the queue Workflow mailer will not start,To fix this issue we need purge the notifications from the Workflow queue.

The below outlines the steps, Please take proper backup before performing the below.

1) You need to update the notifications you do not want sent, in the WF_NOTIFICATIONS table.

2) Check the WF_NOTIFICATIONS table as below. Records where status = 'OPEN' and mail_status = 'MAIL' are notifications that will have an e-mail notification sent.

SQL> select notification_id,status,mail_status,begin_date from WF_NOTIFICATIONS where status = 'OPEN' and mail_status = 'MAIL';

3) This should show you which notifications are waiting to be e-mailed.

4) To update a notification so that it will not get e-mailed. Set the MAIL_STATUS = 'SENT'. The mailer will think the e-mail has already been sent and it will not send it again.

SQL> update WF_NOTIFICATIONS set mail_status = 'SENT' where mail_status = 'MAIL';

-> This will update all notifications waiting to be sent by the mailer.

5) Then run the script wfntfqup.sql to purge the WF_NOTIFICATION_OUT queue and rebuild it with data currently in the WF_NOTIFICATIONS table. This is what purges all notifications waiting in the queue to be sent.Only the ones where mail_status = 'MAIL' and status = 'OPEN' will be placed in the WF_NOTIFICATION_OUT queue and sent by the mailer.

SQL>sqlplus apps/apps_pwd @$FND_TOP/patch/115/sql/wfntfqup APPS APPS_PWD APPLSYS

6) Now you can start your WF Containers and then Mailer

---

### 470. Change Apex Internal ADMIN password

**Topic ID:** 2104

1. Log in to the Apex database as SYS user.2. Run either apxxepwd.sql or apxchpwd.sql and pass in complex password, for example T3mp!234. If you don't give complex password containing symboles and alphanumerics, it doesn't work some times. Also, if you are changing the password for other internal users besides ADMIN, then use modified version of the script with the user you are changing the password for, i.e. ADMIN3.
3. Log in to internal workspace using temporary password, and set new complex password when asked.
Example:[_lsa@ah200 ~]$ ps -eaf | grep pmonoradev 4252 1 0 Feb25 ? 00:00:10 ora_pmon_devoravis 4328 1 0 Feb25 ? 00:00:10 ora_pmon_VIS_lsa 32376 32311 0 22:27 pts/5 00:00:00 grep pmon[_lsa@ah200 ~]$ sudo su - oradev[oradev@ah200 ~]$ pwd/home/oradev[oradev@ah200 ~]$ ls12316083 kk1.txt sqlloader_test12965674 kk2.txt temp7139320 LaunchApexNew.jsp testPerDnld.sh7420394 logging.properties xa lookups.ldt x.txtacl1.sql lsinventory.log XXDMacl.sql ojspc_error.log XXDM_DFF_REG_SCRIPT.sqlafiedt.buf oradiag_oradev XXDMDRR.rdfapex oraInventory XXDM_LDT_BackupAPPSdev_ah200.env p12316083_R12.FND.B_R12_GENERIC.zip xxdm_reportsarchive p12965674_101340_GENERIC.zip XXDMWBARXTWMAI.fmb p7139320_101340_GENERIC.zip XXDMWB_FF_OCT.fmb.filepartbin p7420394_111070_Linux-x86-64.zip XXDMWB.fmbcmclean.sql patch2 XXDMWB_FMBdata_loader patches XXRMdev_ah200.env prefs.ora XXRM_DFF_AA_DEFAULT.ldtdev.dbc prof.sql XXRMETL.ldtdff.ldt R4.1.5 XXRMWB_FF.fmbfile_name.ldt revstream XXRMWB.fmbforms_r12 revStream_DFFs_RegScript.sql yjdk setdevenv.env[oradev@ah200 ~]$ ls *envAPPSdev_ah200.env dev_ah200.env setdevenv.env[oradev@ah200 ~]$ . dev_ah200.env[oradev@ah200 ~]$ cd apex[oradev@ah200 apex]$ lsapex apex_4.1.zip[oradev@ah200 apex]$ cd apex[oradev@ah200 apex]$ lsapex_epg_config_core.sql apxdvins.sql apxxepwd.sql.orig install2012-02-20_13-37-22.logapex_epg_config.sql apxldimg.sql builder install2012-02-20_14-40-34.logapexins.sql apxremov.sql core install2012-02-20_15-51-16.logapexvalidate.sql apxrtins.sql coreins.sql load_trans.sqlapxchpwd.sql apxsqler.sql devins.sql owaapxconf.sql apxxemig.sql endins.sql utilitiesapxdevrm.sql apxxepwd.sql images[oradev@ah200 apex]$ ls ap*apex_epg_config_core.sql apexvalidate.sql apxdevrm.sql apxremov.sql apxxemig.sqlapex_epg_config.sql apxchpwd.sql apxdvins.sql apxrtins.sql apxxepwd.sqlapexins.sql apxconf.sql apxldimg.sql apxsqler.sql apxxepwd.sql.orig[oradev@ah200 apex]$ sqlplus / as sysdba
SQL*Plus: Release 11.1.0.7.0 - Production on Fri Mar 14 22:35:53 2014
Copyright (c) 1982, 2008, Oracle. All rights reserved.

Connected to:Oracle Database 11g Enterprise Edition Release 11.1.0.7.0 - 64bit ProductionWith the Partitioning, OLAP, Data Mining and Real Application Testing options

[oradev@ah200 apex]$ ls *ch*apxchpwd.sql[oradev@ah200 apex]$ cp apxchpwd.sql chgpwd.sql[oradev@ah200 apex]$ vi chgpwd.sql[oradev@ah200 apex]$ sqlplus / as sysdba
SQL*Plus: Release 11.1.0.7.0 - Production on Fri Mar 14 22:38:46 2014
Copyright (c) 1982, 2008, Oracle. All rights reserved.

Connected to:Oracle Database 11g Enterprise Edition Release 11.1.0.7.0 - 64bit ProductionWith the Partitioning, OLAP, Data Mining and Real Application Testing options
SQL> @chgpwdEnter a value below for the password for the Application Express ADMIN user.

Enter a password for the ADMIN user []
Session altered.
...changing password for ADMIN
PL/SQL procedure successfully completed.

Commit complete.
SQL> !more chgpwd.sqlRem Copyright (c) Oracle Corporation 1999 - 2011. All Rights Reserved.RemRem NAMERem apxchpwd.sqlRemRem DESCRIPTIONRem Used to set the password for the Application Express ADMIN user.RemRem NOTESRem Assumes the SYS user is connected.RemRem REQUIREMENTSRem - Oracle 10.2.0.3 or laterRemRemRem MODIFIED (MM/DD/YYYY)Rem jstraub 08/08/2007 - CreatedRem jstraub 09/04/2007 - Added HIDE to PASSWD accept (Bug 6370075)Rem jkallman 07/08/2008 - Change FLOWS_030100 references to FLOWS_040000Rem jkallman 10/02/2008 - Change FLOWS_040000 references to APEX_040000Rem jkallman 11/22/2010 - Change APEX_040000 references to APEX_040100Rem
set define '&'
set verify off
prompt Enter a value below for the password for the Application Express ADMIN user.promptprompt
accept PASSWD CHAR prompt 'Enter a password for the ADMIN user [] ' HIDE
alter session set current_schema = APEX_040100;
prompt ...changing password for ADMIN
begin
wwv_flow_security.g_security_group_id := 10;wwv_flow_security.g_user := 'ADMIN3';wwv_flow_security.g_import_in_progress := true;
for c1 in (select user_idfrom wwv_flow_fnd_userwhere security_group_id = wwv_flow_security.g_security_group_id
SQL>

---

### 471. ORA-00600 [17148] - Apex Upgrade

**Topic ID:** 1801

SR 3-8710723831
Instead of using :
HTMLDB_UTIL.set_session_state ('P149_DEBUG', l_ddl);
HTMLDB_UTIL.set_session_state ('P149_DEBUG',v ('P149_DEBUG') || '/' || l_ddl);
use the code as given below :
APEX_UTIL.set_session_state ('P149_DEBUG', l_ddl);
APEX_UTIL.set_session_state ('P149_DEBUG',v ('P149_DEBUG') || '/' || l_ddl);

---

### 474. Enable RESTful Web Services in APEX

**Topic ID:** 2104

**Enable RESTful Web Services in APEX**
Use the Allow RESTful Accessattribute to control whether developers can expose
report regions as RESTful services.
To enable RESTful Access:
1. Log in to Oracle Application Express Administration Services. See "Logging In To
Oracle Application Express Administration Services"on page 2-5.
2. Click Manage Instance.
3. Under Instance Settings, click Security.
4. Locate the RESTful Access section.
5. From Allow RESTful Access, select one of the following:
■ Yes- Enables developers to expose report regions as RESTful services.
■ No- Prevents developers from exposing report regions as RESTful services.
6. Click Apply Changes.

---

### 475. Query to get Scheduled requests in EBS

**Topic ID:** 2105

select r.request_id,p.user_concurrent_program_name || nvl2(r.description,' ('||r.description||')',null) Conc_prog,s.user_name REQUESTOR,to_char(r.requested_start_date, 'YYYY-MM-DD HH24:MI:SS') next_run,to_char(r.last_update_date, 'YYYY-MM-DD HH24:MI:SS') LAST_RUN,r.hold_flag on_hold,r.increment_dates,decode(c.class_type,'P', 'Periodic','S', 'On Specific Days','X', 'Advanced',c.class_type) schedule_type,casewhen c.class_type = 'P' then'Repeat every ' ||substr(c.class_info, 1, instr(c.class_info, ':') - 1) ||decode(substr(c.class_info, instr(c.class_info, ':', 1, 1) + 1, 1),'N', ' minutes','M', ' months','H', ' hours','D', ' days') ||decode(substr(c.class_info, instr(c.class_info, ':', 1, 2) + 1, 1),'S', ' from the start of the prior run','C', ' from the completion of the prior run')when c.class_type = 'S' thennvl2(dates.dates, 'Dates: ' || dates.dates || '. ', null) ||decode(substr(c.class_info, 32, 1), '1', 'Last day of month ') ||decode(sign(to_number(substr(c.class_info, 33))),'1', 'Days of week: ' ||decode(substr(c.class_info, 33, 1), '1', 'Su ') ||decode(substr(c.class_info, 34, 1), '1', 'Mo ') ||decode(substr(c.class_info, 35, 1), '1', 'Tu ') ||decode(substr(c.class_info, 36, 1), '1', 'We ') ||decode(substr(c.class_info, 37, 1), '1', 'Th ') ||decode(substr(c.class_info, 38, 1), '1', 'Fr ') ||decode(substr(c.class_info, 39, 1), '1', 'Sa '))end as schedule,to_char(c.date1, 'YYYY-MM-DD HH24:MI:SS') start_date,to_char(c.date2, 'YYYY-MM-DD HH24:MI:SS') end_date,c.class_infofrom fnd_concurrent_requests r,fnd_conc_release_classes c,fnd_concurrent_programs_tl p,fnd_user s,(with date_schedules as (select release_class_id,rank() over(partition by release_class_id order by s) a, sfrom (select c.class_info, l,c.release_class_id,decode(substr(c.class_info, l, 1), '1', to_char(l)) sfrom (select level l from dual connect by level<= 31),fnd_conc_release_classes cwhere c.class_type = 'S'and instr(substr(c.class_info, 1, 31), '1') > 0)where s is not null)SELECT release_class_id, substr(max(SYS_CONNECT_BY_PATH(s, ' ')), 2) datesFROM date_schedulesSTART WITH a = 1CONNECT BY nocycle PRIOR a = a - 1group by release_class_id) dateswhere r.phase_code = 'P'and c.application_id = r.release_class_app_idand c.release_class_id = r.release_class_idand nvl(c.date2, sysdate + 1) > sysdateand c.class_type is not nulland p.concurrent_program_id = r.concurrent_program_idand p.language = 'US'and dates.release_class_id(+) = r.release_class_idand r.requested_by = s.user_idorder by conc_prog, on_hold, next_run;

---

### 476. Rebuild Mailer's Queue when it is Inconsistent or Corrupted

**Topic ID:** 2105

How to Rebuild Mailer's Queue when it is Inconsistent or Corrupted? (Doc ID 736898.1)
Sometimes the queues get stuck.. we find that rebuilding the queue will often take care of the issue... this is non destructive.. it just refreshing the queue with the data that is supposed to be there.
The instructions to rebuild mailer's queue are:
1. Stop Workflow Agent Listeners and Mailers.
2. Find the tablespace where indexes on corrid for queue tables are created:select distinct tablespace_namefrom dba_indexes,dba_queueswhere index_name like 'WF%N1'and table_name=queue_tableand name like 'WF%';

3. Rebuild mailer's queue:

sqlplus apps/@$FND_TOP/patch/115/sql/wfntfqup APPSAPPLSYS

4. Recreate Index on corrid column:
sqlplus applsys/
CREATE INDEX WF_NOTIFICATION_OUT_N1ON WF_NOTIFICATION_OUT(CORRID)STORAGE (INITIAL 1M NEXT 1M MINEXTENTS 1 MAXEXTENTS 2147483645 PCTINCREASE 0)TABLESPACE

When prompted for the tablespace, enter the tablespace name found at step 2 above.
5. Start Workflow Agent Listeners and Mailers.
6. Confirm Mailer is sending email notifications as expected.

---

### 477. Install Apex REST data service

**Topic ID:** 2104

Setup REST data service for Apex
http://docs.oracle.com/cd/E37099_01/doc/doc.20/e25066/install.htm#AELIG7019
1.2.2 System Requirements
Oracle REST Data Services system requirements are as follows:Oracle Database (Enterprise Edition, Standard Edition or Standard Edition One) release
10.2.0.3 or later, or Oracle Database 10g Release 2 Express Edition or later.Oracle Application Express:Oracle REST Data Services depends on Oracle Application Express for storing and creating
RESTful Services.If you want to use RESTful Services, then Oracle Application Express 4.2 or later is
required.Ensure that all steps of the Oracle Application Express installation process have been
completed, including the step "Configure RESTful Services" in Oracle Application Express
Installation Guide.If you do not want to use RESTful Services, then use of any Oracle Application Express
version is supported.Java 6 Update 20 JDK or later.Java Servlet Specification 2.3 or later.Web browser requirements:Microsoft Internet Explorer 8.0 or later.Mozilla Firefox 3.0 or later.Google Chrome 2.0 or later.

Stage the software at rs07:/b02/oracle/apex425
oracle@rs07 apex425]$ cd apex[oracle@rs07 apex]$ lsapex_epg_config_con.sql apxe101.sql apxsdoins.sqlapex_epg_config_core.sql apxe102.sql apxsqler.sqlapex_epg_config.sql apxe111.sql apxxemig.sqlapexins_con.sql apxe112.sql apxxepwd.sqlapexins.sql apxexit.sql builderapex_rest_config_con.sql apxldimg_con.sql catapx.sqlapex_rest_config_core.sql apxldimg_core.sql coreapex_rest_config.sql apxldimg.sql coreins.sqlapexvalidate.sql apxpatch.sql devins.sqlappins.sql apxprereq.sql endins.sqlapxchpwd.sql apxrelod.sql imagesapxconf.sql apxremov1.sql install2014-05-01_21-57-34.logapxdbmig.sql apxremov2.sql load_trans.sqlapxdevrm_con.sql apxremov_con.sql owaapxdevrm.sql apxremov.sql utilitiesapxdvins_con.sql apxrtins_con.sqlapxdvins.sql apxrtins.sql[oracle@rs07 apex]$[oracle@rs07 apex]$ sqlplus /nolog
SQL*Plus: Release 11.2.0.3.0 Production on Sun Jun 15 22:51:17 2014
Copyright (c) 1982, 2011, Oracle. All rights reserved.
SQL> connect / as sysdbaConnected.SQL> @apex_rest_config.sqlEnter a password for the APEX_LISTENER user []
SQL> @apex_rest_config.sqlEnter a password for the APEX_LISTENER user []Enter a password for the APEX_REST_PUBLIC_USER user []
PL/SQL procedure successfully completed.

PL/SQL procedure successfully completed.
...create APEX_LISTENER user
PL/SQL procedure successfully completed.

User created.
...create APEX_REST_PUBLIC_USER user
User created.

Grant succeeded.
.................................................................Session altered.

PL/SQL procedure successfully completed.
SQL>

SQL> select username from dba_users where username like 'APEX%';
USERNAME------------------------------APEX_REST_PUBLIC_USERAPEX_PUBLIC_USERAPEX_LISTENERAPEX_040100APEX_030200APEX_040200
6 rows selected.

# Install JDK 1.7
[root@rs07 ~]# su - oracle[oracle@rs07 ~]$ ls *.envooyala.env[oracle@rs07 ~]$ . *.env[oracle@rs07 ~]$ java -versionjava version "1.4.2"gij (GNU libgcj) version 4.1.2 20080704 (Red Hat 4.1.2-50)
Copyright (C) 2006 Free Software Foundation, Inc.This is free software; see the source for copying conditions. There is NOwarranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.[oracle@rs07 ~]$ which java/usr/bin/java[oracle@rs07 ~]$ vi .bash_profile[oracle@rs07 ~]$ exi-bash: exi: command not found[oracle@rs07 ~]$ texit-bash: texit: command not found[oracle@rs07 ~]$ exitlogout[root@rs07 ~]# su - oracle[oracle@rs07 ~]$ . *.env[oracle@rs07 ~]$ cat .bash_profile# .bash_profile
# Get the aliases and functionsif [ -f ~/.bashrc ]; then. ~/.bashrcfi
# User specific environment and startup programs
PATH=/usr/local/jdk1.7.0_60/bin:$PATH:$HOME/bin
export PATH[oracle@rs07 ~]$ java -versionjava version "1.4.2"gij (GNU libgcj) version 4.1.2 20080704 (Red Hat 4.1.2-50)
Copyright (C) 2006 Free Software Foundation, Inc.This is free software; see the source for copying conditions. There is NOwarranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.[oracle@rs07 ~]$ echo $PATH/u01/oracle/ooyala/product/11.2.0/dbhome_1/bin:/user/local/bin:/bin:/usr/bin:.:/usr/local/
jdk1.7.0_60/bin:/usr/kerberos/bin:/usr/local/bin:/bin:/usr/bin:/home/oracle/bin[oracle@rs07 ~]$ vi *.env[oracle@rs07 ~]$ exitlogout[root@rs07 ~]# su - oracle[oracle@rs07 ~]$ ls *.envooyala.env[oracle@rs07 ~]$ . *.env[oracle@rs07 ~]$ cat *.envexport ORACLE_HOME=/u01/oracle/ooyala/product/11.2.0/dbhome_1export ORACLE_SID=Ooyalaexport LD_LIBRARY_PATH=$ORACLE_HOME/libPATH=$ORACLE_HOME/bin:.:$PATHexport PATH
[oracle@rs07 ~]$ java -versionjava version "1.7.0_60"Java(TM) SE Runtime Environment (build 1.7.0_60-b19)Java HotSpot(TM) 64-Bit Server VM (build 24.60-b09, mixed mode)[oracle@rs07 ~]$

# Install ORDS
[oracle@rs07 apex425]$ ls -l /u01/oracle/ooyala/APEX/RESTtotal 0[oracle@rs07 apex425]$ ls -l /b02/oracle/apex425/ords.war-rw-r--r-- 1 root root 28005976 Apr 1 15:03 /b02/oracle/apex425/ords.war[oracle@rs07 apex425]$ java -

... [Content truncated for readability]

---

### 478. Avalara Health Check

**Topic ID:** 3301

We can use two methos to verify the connection to Avalara Site.

#1 - From DB : Login to db as avalara user ( password in customer datasheet) and run this sql :

SQL> Select utl_http.request('https://ebs2avalara.cloudhub.io/getTax',null,'file:/u01/oracle/prd/db/tech_st/11.2.0/owm/wallets/oraprd','S3rg10den1s') from dual;

UTL_HTTP.REQUEST('HTTPS://EBS2AVALARA.CLOUDHUB.IO/GETTAX',NULL,'FILE:/U01/ORACLE
--------------------------------------------------------------------------------

FAILURE

**unable to resolve token: unable to resolve variable 'userId'**

--> Please note that error "Unable to resolve token" is the expected message, this means that communication is working.

#2 From EBS . Login as Tpit --> Resp : TPCA RBC AR Super user --> Run concurrent : Avalara Ping test : It should complete normal and the output should be similar to this :

**v_errbuf = S
Avalara Connection Successful**

---

### 479. Error installing OEM Agent due to improper deinstall of existing agent software

**Topic ID:** 301

[oracle@ah222 bin]$ ./emcli delete_target -name="rs05.appshosting.com:1830" -type="oracle_emd" -delete_monitored_targets -asyncTarget "rs05.appshosting.com:1830:oracle_emd" deleted successfully

---

### 480. DR Test

**Topic ID:** 1801

Here are the 2 options for doing DR Test, one limited DR test and the other more thorough DR test:

Option 1 - Limited DR testing:

1.Pause DR sync process. (2 min)

2.Bring up the DR database in read-only mode. (5 min)

3.Testers verify Production data in DR by querying the DR database. (TBD)

4.Bring up the DR database in standby mode. (5 min)

5.Resume DR sync process. (2 min)

Option 2 – Full DR testing:

1.Synchronize the most recent transaction logs. (15 min)

2.Pause DR sync process. (2 min)

3.Shut down Production environment to simulate. (15 min)

4.Activate standby database, and application. Release to users for testing (30 min)

5.Testers verify Production data in DR. (TBD)

6.Shut down DR environment. (15 min)

7.Start Production environment up. (15 min)

8.Rebuild DR environment, and resume synchronization. (8 hours, in background)

---

### 482. How to resize ASM Disk Groups with new ASM disks

**Topic ID:** 1801

**How to resize ASM disk groups with new ASM disks**
**Prerequisite:**ASM disks must be first presented to the cluster servers.
**Part 1: Add new ASM disks.**1. Launch ASM Config Assistance, i.e. $GRID_HOME/bin/asmca2. Select the Disk Group and click Add Disks menu to add bigger disks.3. Click on the new ASM disks to add to the disk group, and then click OK/Apply.
Part 2: Delete old ASM disks.Once the new ASM disks are added to the disk group, you can delete old ASM disks.1. Select the Disk Group desired, and click on Drop Disks menu.2. Click on the old ASM disk to be removed, and click OK. Do this one disk at a time to be on safe side.
Delete the old ASM disks
[root@testrac1 ~]# oracleasm deletedisk CRSVOL1Clearing disk header: doneDropping disk: doneYou have new mail in /var/spool/mail/root[root@testrac1 ~]# oracleasm deletedisk CRSVOL2Clearing disk header: doneDropping disk: done[root@testrac1 ~]# oracleasm deletedisk CRSVOL3Clearing disk header: doneDropping disk: done

---

### 483. UMD ICONS RAC

**Topic ID:** 1801

Please take a full backup of icondata database on ah66 once the down time starts after we bring down the application . Do a log switch alter system switch log file and submit RMAN backup , mount backup mount /b01 on ah84 and give 777 permissions on FULL backup files
Below are steps briefly for UMD RAC migration ,
We can leave existing RAC environment as it is and take care of RDBMS part alone ,bring down Apache on ah84 and ah85
1.Delete ICONDATA1 and ICONDATA2 databases using srvctl, i.e. srvctl delete instance, srvctl delete database
2. Cleanup storage +DATA,+FRA leave OCR as it is , if required drop the disk groups and recreate for DATA and FRA , request DC team to format those disk and recreate for DATA and FRA .Please leave OCR as it is .
3.Once disk groups are added on OS query them using oracleasm command ,[root@ah84 ~]# oracleasm listdisks | xargs oracleasm querydisk -pDisk "CRSVOL01" is a valid ASM disk/dev/sdk1: LABEL="CRSVOL01" TYPE="oracleasm"/dev/mapper/mpathgp1: LABEL="CRSVOL01" TYPE="oracleasm"Disk "CRSVOL02" is a valid ASM disk/dev/sdm1: LABEL="CRSVOL02" TYPE="oracleasm"/dev/mapper/mpathhp1: LABEL="CRSVOL02" TYPE="oracleasm"Disk "CRSVOL03" is a valid ASM disk/dev/sdl1: LABEL="CRSVOL03" TYPE="oracleasm"/dev/mapper/mpathip1: LABEL="CRSVOL03" TYPE="oracleasm"Disk "DATA" is a valid ASM disk/dev/sdc1: LABEL="DATA" TYPE="oracleasm"/dev/mapper/mpathep1: LABEL="DATA" TYPE="oracleasm"Disk "FRA" is a valid ASM disk/dev/sdd1: LABEL="FRA" TYPE="oracleasm"/dev/mapper/mpathfp1: LABEL="FRA" TYPE="oracleasm"
Need to run /etc/init.d/oracleasm enable as some times the disks are not seen in node2 .
4.Create diskgroups from node1 source grid_env ,
SQL> CREATE DISKGROUP DATA EXTERNAL REDUNDANCY DISK 'ORCL:DATA';
Diskgroup created.
SQL> CREATE DISKGROUP FRA EXTERNAL REDUNDANCY DISK 'ORCL:FRA';
Diskgroup created.
5.Mount these disk groups from node 2 ASMCMD using alter diskgroup mount for DATA and FRA which are created in node1 .
6.Make sure all the disk group status is in MEMEBER ,
SQL> select path, group_number group_#, disk_number disk_#, mount_status,header_status, state, total_mb, free_mbfrom v$asm_diskorder by group_number; 2 3 4
PATH--------------------------------------------------------------------------------GROUP_# DISK_# MOUNT_S HEADER_STATU STATE TOTAL_MB FREE_MB---------- ---------- ------- ------------ -------- ---------- ----------ORCL:CRSVOL011 3 CACHED MEMBER NORMAL 6142 4628
ORCL:CRSVOL021 4 CACHED MEMBER NORMAL 6142 4658
ORCL:CRSVOL031 5 CACHED MEMBER NORMAL 6142 4660

PATH--------------------------------------------------------------------------------GROUP_# DISK_# MOUNT_S HEADER_STATU STATE TOTAL_MB FREE_MB---------- ---------- ------- ------------ -------- ---------- ----------ORCL:DATA2 0 CACHED MEMBER NORMAL 20473 20423
ORCL:FRA3 0 CACHED MEMBER NORMAL 10236 10186

7.Create required sub directories under DATA and FRA ,
bash-4.1$ . grid*env-bash: grid*env: No such file or directory-bash-4.1$ cd-bash-4.1$ . grid*env-bash-4.1$ asmcmdASMCMD> lsDATA/FRA/OCR/ASMCMD> cd DATAASMCMD> lsASMCMD> mkdir ICONDATAASMCMD> cd ICONDATAASMCMD> mkdir spfilesASMCMD> quit
8.We can make use of same pfile in both nodes under $RDBBMS_HOME/dbs , source db_env
create spfile as below ,
-bash-4.1$ sqlplus /nolog
SQL*Plus: Release 12.1.0.2.0 Production on Sun Dec 14 01:28:36 2014
Copyright (c) 1982, 2014, Oracle. All rights reserved.
SQL> conn /as sysdbaConnected.SQL> create spfile='+DATA/ICONDATA/spfiles/spfileicondata.ora' from pfile='/u01/app/orarac/product/12.1.0/db_1/dbs/initICONDATA1.ora';
File created.
SQL>

9.Copy latest controlfile backup from ah66:$OH/dbs/ to /home/orarac on ah84 and perform restore of controlfile on ah84 ,
RMAN> startup nomount;RMAN> set dbid 3718702847;RMAN> restore controlfile from '/home/orarac/snapcf_ICONDATA.f';RMAN> alter database mount;RMAN>

Please make sure sub directories for controfile path in init.ora and also sub directories for below datafiles exist in +DATA before attempting restore ,
10.Perform RMAN restore as below from ah84 , make sure there are no new datafiles added after this command is prepared ,
run{set newname for datafile '/u01/oracle/product/oradata/icondata/system01.dbf' to '+DATA/ICONDATA/datafiles/system01.dbf';set newname for datafile '/u01/oracle/product/oradata/icondata/undotbs01.dbf' to '+DATA/ICONDATA/datafiles/undotbs01.dbf';set newname for datafile '/u01/oracle/product/oradata/icondata/sysaux01.dbf' to '+DATA/ICONDATA/datafiles/sysaux01.dbf';set newname for datafile '/u01/oracle/product/oradata/icondata/users01.dbf' to '+DATA/ICONDATA/datafiles/users01.dbf';set newname for datafile '/u01/oracle/product/oradata/icondata/CWMLITE01.dbf' to '+DATA/ICONDATA/datafiles/CWMLITE01.dbf';set newname for datafile '/u01/oracle/product/oradata/icondata/DRSYS01.dbf' to '+DATA/ICONDATA/datafiles/DRSYS01.dbf';set newname for datafile '/u01/oracle/product/oradata/icondata/EXAMPLE01.dbf' to '+DATA/ICONDATA/datafiles/EXAMPLE01.dbf';set newname for datafile '/u01/oracle/product

... [Content truncated for readability]

---

### 484. Jitterbit Installation

**Topic ID:** 2112

Jitterbit Installation
1. On vprod1 server, install Jitterbit agent as root user to /opt/jitterbit directory:rpm -ivh jitterbit-agent-7.2.2-1.i386.rpm

2. Download and install ODBC driver (ojdbc6.jar) for database (/opt/jitterbit/tomcat/webapps/axis/WEB-INF).
3. Create read only database user jitterbit on target database (i.e. TDEV2) which has read access only to apps.TPC_PACKLIST_FOR_ODYSSEY_VIEW.

---

### 485. INS-40406 The installer detects no existing Oracle Grid Infrastructure software on the system

**Topic ID:** 1801

This error could happen, if you have an incorrect Inventory on your server. To fix this problem, you can start (from the old GI Home) the Oracle Universal Installer to update your inventory.

```
$ cd /u01/oracle/app/11.2.0/grid/oui/\n$ cd bin\n$ ./runInstaller -updateNodeList ORACLE_HOME="/u01/oracle/app/11.2.0/grid" CRS=true\nStarting Oracle Universal Installer...
```

---

### 487. How to fix DR sync error due to missing data file

**Topic ID:** 1801

How to fix DR sync error due to missing data file[oraprd@tp-dr01 bin]$ tail applylog.logORA-00280: change 12205265334572 for thread 1 is in sequence #121006

Specify log: {=suggested | filename | AUTO | CANCEL}ORA-00310: archived log contains sequence 121008; sequence 121006 requiredORA-00334: archived log: '/u03/archive/rcvdir/1_121008_706014362.dbf'

SQL> Disconnected from Oracle Database 11g Enterprise Edition Release 11.2.0.3.0 - 64bit ProductionWith the Partitioning, OLAP, Data Mining and Real Application Testing options[oraprd@tp-dr01 bin]$ tail chklog.logORA-01111: name for data file 66 is unknown - rename to correct fileORA-01110: data file 66: '/u01/oracle/prd/db/tech_st/11.2.0/dbs/UNNAMED00066'ORA-01157: cannot identify/lock data file 66 - see DBWR trace fileORA-01111: name for data file 66 is unknown - rename to correct fileORA-01110: data file 66: '/u01/oracle/prd/db/tech_st/11.2.0/dbs/UNNAMED00066'

SQL> SP2-0042: unknown command "cancel" - rest of line ignored.SQL> Disconnected from Oracle Database 11g Enterprise Edition Release 11.2.0.3.0 - 64bit ProductionWith the Partitioning, OLAP, Data Mining and Real Application Testing options[oraprd@tp-dr01 bin]$ sqlplus /nolog
SQL*Plus: Release 11.2.0.3.0 Production on Mon Jul 20 15:57:43 2015
Copyright (c) 1982, 2011, Oracle. All rights reserved.
SQL> conn / as sysdbaConnected.SQL> shutdown immediateORA-01109: database not open

Database dismounted.ORACLE instance shut down.SQL> exitDisconnected from Oracle Database 11g Enterprise Edition Release 11.2.0.3.0 - 64bit ProductionWith the Partitioning, OLAP, Data Mining and Real Application Testing options[oraprd@tp-dr01 bin]$ cd $ORACLE_HOME/dbs[oraprd@tp-dr01 dbs]$ ls -l in*ora-rw-r--r-- 1 oraprd dba 2851 May 16 2009 init.ora-rw-r----- 1 oraprd dba 1629 Jul 28 2013 initprd_noaq.ora-rw-r----- 1 oraprd dba 1588 Jan 19 2014 initprd.ora[oraprd@tp-dr01 dbs]$ grep -i control initprd.oracontrol_files=/u01/oracle/prd/db/apps_st/data/cntrl01.dbf, /u01/oracle/prd/db/apps_st/data/cntrl02.dbf, /u01/oracle/prd/db/apps_st/data/cntrl03.dbf[oraprd@tp-dr01 dbs]$ scp oraprd@prod.taipingcarpets.com:/home/oraprd/std.ctl.gz .std.ctl.gz 100% 370KB 369.6KB/s 00:01[oraprd@tp-dr01 dbs]$ gunzip std.ctl.gz[oraprd@tp-dr01 dbs]$ cp std.ctl /u01/oracle/prd/db/apps_st/data/cntrl01.dbf[oraprd@tp-dr01 dbs]$ cp std.ctl /u01/oracle/prd/db/apps_st/data/cntrl02.dbf[oraprd@tp-dr01 dbs]$ cp std.ctl /u01/oracle/prd/db/apps_st/data/cntrl03.dbf[oraprd@tp-dr01 dbs]$ ls *ctlstd.ctl[oraprd@tp-dr01 dbs]$ rm *ctl[oraprd@tp-dr01 dbs]$ sqlplus / as sysdba
SQL*Plus: Release 11.2.0.3.0 Production on Mon Jul 20 16:09:01 2015
Copyright (c) 1982, 2011, Oracle. All rights reserved.
Connected to an idle instance.
SQL> startup nomountORACLE instance started.
Total System Global Area 1.2827E+10 bytesFixed Size 2240344 bytesVariable Size 4563402920 bytesDatabase Buffers 8220835840 bytesRedo Buffers 40890368 bytesSQL> alter database mount standby database;
Database altered.
SQL> select open_mode from v$database;
OPEN_MODE------------------------------------------------------------MOUNTED
SQL> alter database create datafile '/u01/oracle/prd/db/apps_st/data/a_queue03.dbf' as '/u01/oracle/prd/db/apps_st/data/a_queue03.dbf';
Database altered.
SQL>

---

### 496. Oracle Database ACL

**Topic ID:** 1801

Reference: http://dbtricks.com/?p=159
1. Create an ACL (if not already created)2. Add privileges to the USER that will use the network resources.3. Assign the ACL to specific address(es).
1. Check if an ACL exists:set lines 100col host format a25col acl format a35col acl_owner format a15select host, lower_port, upper_port, acl, acl_ownerfrom dba_network_acls ;
If the computer you are trying to connect to is not listed under HOST column, then create an ACL:begindbms_network_acl_admin.create_acl (acl => 'http_onlinetest.xml', -- or any other namedescription => 'HTTP Access for onlinetest',principal => 'NET4P', -- the user name trying to access the network resourceis_grant => TRUE,privilege => 'connect',start_date => null,end_date => null);end;/commit;
2. Run the following query to verify the user is granted the appropriate privilege(s) by checking PRINCIPAL column.col PRINCIPAL format a12col PRIVILEGE format a12col start_date format a10col end_date format a10select acl, principal, privilege, is_grant, invert, start_date, end_date, acl_owner from dba_network_acl_privileges;
In order to use UTL_TCP, UTL_HTTP, UTL_SMTP, and UTL_MAIL the user will need the "connect" privilege.beginDBMS_NETWORK_ACL_ADMIN.ADD_PRIVILEGE(acl => 'http_onlinetest.xml',principal => 'NET4P',is_grant => true,privilege => 'connect');end;/commit;
If you need to resolve a host name from IP, you will need the the "resolve" grant as well.beginDBMS_NETWORK_ACL_ADMIN.ADD_PRIVILEGE(acl => 'http_onlinetest.xml',principal => 'NET4P',is_grant => true,privilege => 'resolve');end;/commit;
3. Finally, assign the ACL to a specific target computer(s).begindbms_network_acl_admin.assign_acl (acl => 'http_onlinetest.xml',host => 'onlinetest.net4practice.com',lower_port => 8009,upper_port => 8009);end;/commit;
It is important to note that only one ACL can be assigned to any host computer. If you assign a new acl to a target the old acl gets unassigned.
However, the old acl is not dropped. So, this could cause confusion because even if the acl was already assigned, it is possible that a new assignment overrode it.

---

### 643. Taitron Front End Access

**Topic ID:** 2105

Workaround URL to launch form -Taitron Oracle Application 11i

1. Access the URL to launch the form

2. Install JInitiator if needed. (We have performed in ts10 remote desktop)

3. After installing the JInitiator, download and copy thejvm.zipto "C:\Program Files (x86)\Oracle\JInitiator 1.3.1.18\bin\hotspot"
-- Find the download link of the zip file from Taitron datasheet

-- copy jvm.zip to the TS10 RDP under "C:\Program Files (x86)\Oracle\JInitiator 1.3.1.18\bin\hotspot"

4. Backup the existing jvm.dll

5. Unzip jvm.zip

6. Open the internet explorer and retest the forms opening

---

### 500. adclgclone.pl fails with error Perl lib version (5.10.1) doesn't match executable version (v5.10.0)

**Topic ID:** 2105

**Reference:**Adding External Node via perl adcfgclone.pl appsTier Error: Perl lib version (5.10.1) doesn't match executable version (v5.10.0) (Doc ID 1622873.1)

**Symptoms:**
Perl lib version (5.10.1) doesn't match executable version (v5.10.0) at /usr/lib64/perl5/Config.pm line 50.Compilation failed in require at /u01/oracle/PPDEBS/db/tech_st/11.2.0/appsutil/clone/ouicli.pl line 35.BEGIN failed--compilation aborted at /u01/oracle/PPDEBS/db/tech_st/11.2.0/appsutil/clone/ouicli.pl line 35.
Beginning database tier Apply - Sun Mar 12 13:05:18 2017
/u01/oracle/PPDEBS/db/tech_st/11.2.0/appsutil/clone/bin/../jre/bin/java -Xmx600M -DCONTEXT_VALIDATED=true -Doracle.installer.oui_loc=/u01/oracle/PPDEBS/db/tech_st/11.2.0/oui -classpath /u01/oracle/PPDEBS/db/tech_st/11.2.0/appsutil/clone/jlib/xmlparserv2.jar:/u01/oracle/PPDEBS/db/tech_st/11.2.0/appsutil/clone/jlib/ojdbc5.jar:/u01/oracle/PPDEBS/db/tech_st/11.2.0/appsutil/clone/jlib/java:/u01/oracle/PPDEBS/db/tech_st/11.2.0/appsutil/clone/jlib/oui/OraInstaller.jar:/u01/oracle/PPDEBS/db/tech_st/11.2.0/appsutil/clone/jlib/oui/ewt3.jar:/u01/oracle/PPDEBS/db/tech_st/11.2.0/appsutil/clone/jlib/oui/share.jar:/u01/oracle/PPDEBS/db/tech_st/11.2.0/appsutil/clone/jlib/oui/srvm.jar:/u01/oracle/PPDEBS/db/tech_st/11.2.0/appsutil/clone/jlib/ojmisc.jar oracle.apps.ad.clone.ApplyDBTier -e /u01/oracle/PPDEBS/db/tech_st/11.2.0/appsutil/PPDEBS_c1ppdebsdb1.xml -stage /u01/oracle/PPDEBS/db/tech_st/11.2.0/appsutil/clone -showProgressAPPS Password : Log file located at /u01/oracle/PPDEBS/db/tech_st/11.2.0/appsutil/log/PPDEBS_c1ppdebsdb1/ApplyDBTier_03121305.log| 0% completed RC-00110: Fatal: Error occurred while relinking of ApplyDBTechStack
ERROR while running Apply...Sun Mar 12 13:54:48 2017
ERROR: Failed to execute /u01/oracle/PPDEBS/db/tech_st/11.2.0/appsutil/clone/bin/adclone.pl
Please check logfile.
**Cause:**OS perl version higher than Oracle appsutil version
**Solution:**Set environment to Oracle appsutil version prior to cloning.
[orastg@c1ppdebsdb1 PPDEBS]$ export PERL5LIB=/u01/oracle/PPDEBS/db/tech_st/11.2.0/perl/lib/5.10.0[orastg@c1ppdebsdb1 PPDEBS]$ export ADPERLPRG=/u01/oracle/PPDEBS/db/tech_st/11.2.0/perl/bin/perl[orastg@c1ppdebsdb1 PPDEBS]$ which perl/usr/bin/perl[orastg@c1ppdebsdb1 PPDEBS]$ export PATH=/u01/oracle/PPDEBS/db/tech_st/11.2.0/perl/bin:$PATH[orastg@c1ppdebsdb1 PPDEBS]$ perl -v

---

### 501. Db Objects Re-compilation

**Topic ID:** 2105

1. enable java : exec dbms_java_dev.enable ;
2. set _disable_fast_validate=TRUE in init.ora file and restart the DB.
3. Invalidate all the objects - utlirp.sql
4. Recompile all the objects - utlrp.sql
5. Confirm there are no more timestamp mismatches with the query below

---

### 502. Fix Timestamp Mismatch Issue in EBS database

**Topic ID:** 2105

1. Verify if you have indeed timestamp mismatches (see queries provided under the cause).

2. Check any invalid objects you have.
Run:
select object_name, object_type, owner, status
from dba_objects
where status = 'INVALID'

3.There is a document on MOS to resolve the timestamp issue, followingNote 981240.1.

According to the note,
You should set _disable_fast_validate=TRUE in init.ora and restart DB before applying such applications patches.

This is already documented inNote 802875.1.This makes sure that the fine grained dependency with other objects
is recreated in DB and does not cause runtime or compile problems with DB objects which appear to be valid in DBA_OBJECTS.

Oracle provides scripts in $ORACLE_HOME/rdbms/admin that, when run as sys, will invalidate and revalidate all PL/SQL objects so any timestamp mismatches should be resolved.

The script utlirp.sql invalidates all PL/SQL based objects, recreates STANDARD and DBMS_STANDARD, invalidates all views and synonyms dependent on now invalid objects and then does some clean up. The script utlrp.sql calls UTL_RECOMP.RECOMP_PARALLEL which performs dependency based recompilation, in parallel where resources allow

For additional information, see**Db Objects Re-compilation**https://helpdesk.appsforte.com/AddSolution.do?solutionID=502
Solution ID:**501

**

In case of timestamp mismatches following steps need to be done to resolve.

a) set _disable_fast_validate=TRUE in init.ora file and restart the DB.

a.1) if needed, alter system dbms_java_dev.enable (see request 57531, 57573)

SQL> alter table PROCEDUREJAVA$ disable constraint JAVA_DEV_DISABLED ;
SQL> exec dbms_java_dev.enable;
SQL> alter table PROCEDUREJAVA$ enable constraint JAVA_DEV_DISABLED ;
alter table PROCEDUREJAVA$ enable constraint JAVA_DEV_DISABLED
*
ERROR at line 1:
ORA-02293: cannot validate (SYS.JAVA_DEV_DISABLED) - check constraint violated

b) Invalidate all the objects - utlirp.sql
c) Recompile all the objects - utlrp.sql

d) Confirm there are no more timestamp mismatches with the query below

(from SYS account)

select dep.d_obj#, d.owner# d_owner, d.name d_name, p.owner# p_owner,
p.name p_name,
case
when p.status not in (1, 2, 4) then 'P Status: ' || to_char(p.status)
else 'TS mismatch: ' ||
to_char(dep.p_timestamp, 'DD-MON-YY HH24:MI:SS') ||
to_char(p.stime, 'DD-MON-YY HH24:MI:SS')
end reason
from sys.obj$ d, sys.dependency$ dep, sys.obj$ p
where d.obj# = dep.d_obj# and p.obj# = dep.p_obj#
and d.status = 1
and bitand(dep.property, 1) = 1
and d.subname is null
and not(p.type# = 32 and d.type# = 1)
and not(p.type# = 29 and d.type# = 5)
and not(p.type# in(5, 13) and d.type# in (2, 55))
and (p.status not in (1, 2, 4) or p.stime != dep.p_timestamp) ;

4. Check invalid objects after this.
Run:
select object_name, object_type, owner, status
from dba_objects
where status = 'INVALID'

When help is needed to solve the invalid objects for other products which are not Contracts related, create service request(s) for the product(s) involved.

5. Retest the issue. Run Main Billing.

---

### 504. Restart 12.1.3 Apps Services

**Topic ID:** 2105

**Problem**: Unable to log in to apps
**References**:
**Symptoms**: Able to log in to database, but not apps
**Causes**: Apps services throwing error in log
**Solution**:1. Log on to app server 1 as app user.2. Source apps environment. APPSPRODEBS_c1prdebsapp1.env
2. Go to admin scripts directory.cd $ADMIN_SCRIPTS_HOME

3. Stop apps services./adstpall.sh apps/
4. Verify all apps processes are down. Kill if any hung for long time.
5. Start apps services../adstrtal.ah apps/

---

### 518. HowtoVerifyVertexisworkingfromEBSApplication

**Topic ID:** 2105

HowtoVerifyVertexisworkingfromEBSApplication

**How to Verify Vertex is working from EBS Application**

1.Log in to EBS with US AR Super User responsibility (also could be any responsibility with the organization unit that has Vertex enabled like Korea or Japan AR Superuser).

2.Navigate to Transactions -> Transactions screen and fill in as shown below:

3.Click Line Items button.

4.Enter line 1 and choose Item # 391074000 (FIBRE DELIVERY SYSTEM 532nm), then enter Quantity of 1 and Unit Price of $100.

5. Choose More tab and click the Invoice Line DFF, and choose Business Unit : “110” for Integrated.

5.Click on Tax button.If you see a screen with tax calculation, then Vertex integration is working.If you get error, you need to troubleshoot by checking /u01/VERTEX/log.

**Problem and Solution:**

Problem:

If you receive user log-in error from the tax form, make suresysadminuser is enabled.

Exception classification: APPLICATION

Error processing taxation request - failed request.

User login failed.

User login failed.

Solution:

Log in as xxtps user and update APPUSER table for sysadmin user.

SQL> select userid, username,DISABLED from APPUSER where username = 'sysadmin';

USERID USERNAMEDISABLED

---------- -------------------- ----------

10 sysadmin1

SQL>update APPUSER set DISABLED=0 where username = 'sysadmin';

1 row updated.

SQL> select userid, username,DISABLED from APPUSER where username = 'sysadmin';

USERID USERNAMEDISABLED

---------- -------------------- ----------

10 sysadmin1

COMMIT;

---

### 520. Brightfield performance issues/troubleshooting

**Topic ID:** 2104

Brightfield performance issues/troubleshooting

**UAT**

**PRD**

BFS>alter session set sql_trace=true ;

Session altered.

Elapsed: 00:00:00.05

BFS>**execute pkg_utils.refresh_ere_mapping('Orange Daisy');**

p_client_name => Orange Daisy v_client_id => 99

v_sql_str =select BF_JOB_TITLE,BF_JOB_CLASS, count(*) cnt

from (select BF_JOB_TITLE , BF_JOB_CLASS from

data_request

union all

select BF_JOB_TITLE,BF_JOB_CLASS from ta_requisition)group by BF_JOB_TI

BF_JOB_CLASS

Total time taken for update_rt_conform operation +000000000 00:02:07.391671000

PL/SQL procedure successfully completed.

**Elapsed: 00:03:55.43**

BFS>alter session set sql_trace=true ;

Session altered.

Elapsed: 00:00:00.20

BFS>**execute pkg_utils.refresh_ere_mapping('Orange Daisy');**

p_client_name => Orange Daisy v_client_id => 99

v_sql_str =select BF_JOB_TITLE,BF_JOB_CLASS, count(*) cnt

from (select BF_JOB_TITLE , BF_JOB_CLASS from

data_request

union all

select BF_JOB_TITLE,BF_JOB_CLASS from ta_requisition)group by BF_JOB_TITLE ,

BF_JOB_CLASS

Total time taken for update_rt_conform operation +000000000 00:09:28.570589000

PL/SQL procedure successfully completed.

**Elapsed: 00:13:01.36**

**tkprof bfsu_ora_328.trc bfsu_ora_328.tkp sys=no explain=bfs/bfsownersort=fchela**

SQL ID: 5h1frsqmvf1p8 Plan Hash: 2401880148

SELECT *

FROM

TA_ERE_VIEW WHERE CLIENT_ID = :B1 AND REC_MAPPED = 'Y' AND (

(PLACEMENT_START_DATE IS NOT NULL AND (HIRED IS NULL OR BACKGROUND_CHECK IS

NULL OR CAN_ACCEPTED IS NULL)) OR (HIRED IS NOT NULL AND ( BACKGROUND_CHECK

IS NULL OR CAN_ACCEPTED IS NULL)) OR (BACKGROUND_CHECK IS NOT NULL AND (

CAN_ACCEPTED IS NULL)) )

callcountcpuelapseddiskquerycurrentrows

------- -------------- ---------- ---------- ---------- --------------------

Parse10.010.040000

Execute10.040.040000

Fetch138.93**69.28**489727380800036

------- -------------- ---------- ---------- ---------- --------------------

total338.9969.36489727380800036

Misses in library cache during parse: 1

Optimizer mode: ALL_ROWS

Parsing user id: 84(BFS)(recursive depth: 1)

Number of plan statistics captured: 1

Rows (1st) Rows (avg) Rows (max)Row Source Operation

---------- ---------- -------------------------------------------------------------

363636FILTER(cr=380800 pr=489727 pw=113057 time=54399502 us)

102690102690102690HASH JOIN OUTER (cr=380800 pr=489727 pw=113057 time=64455928 us cost=269938 size=59918535 card=147947)

102690102690102690HASH JOIN(cr=205952 pr=201888 pw=0 time=2465582 us cost=57843 size=40685425 card=147947)

494949494949NESTED LOOPS(cr=4048 pr=0 pw=0 time=20254 us)

494949494949NESTED LOOPS(cr=4048 pr=0 pw=0 time=17460 us cost=57843 size=40685425 card=147947)

494949494949STATISTICS COLLECTOR(cr=4048 pr=0 pw=0 time=16061 us)

494949494949TABLE ACCESS BY INDEX ROWID BATCHED TA_REQUISITION (cr=4048 pr=0 pw=0 time=12814 us cost=2096 size=945259 card=4949)

494949494949INDEX RANGE SCAN IX02_TA_REQUISITION (cr=389 pr=0 pw=0 time=4225 us cost=304 size=0 card=4949)(object id 124756)

000INDEX RANGE SCAN IX01_TA_CANDIDATE (cr=0 pr=0 pw=0 time=0 us)(object id 97689)

000TABLE ACCESS BY INDEX ROWID TA_CANDIDATE (cr=0 pr=0 pw=0 time=0 us cost=55722 size=2520 card=30)

965951196595119659511TABLE ACCESS FULL TA_CANDIDATE (cr=201904 pr=201888 pw=0 time=13481959 us cost=55722 size=811354740 card=9658985)

906802990680299068029VIEW(cr=174848 pr=287839 pw=113057 time=78948630 us cost=149596 size=1170657280 card=9005056)

906802990680299068029HASH GROUP BY PIVOT (cr=174848 pr=287839 pw=113057 time=72956047 us cost=149596 size=315176960 card=9005056)

149916041499160414991604INDEX FAST FULL SCAN IX01_TA_CAN_WORKFLOW (cr=174848 pr=174782 pw=0 time=27750231 us cost=46382 size=524594490 card=14988414)(object id 97688)

RowsExecution Plan

----------------------------------------------------------

0SELECT STATEMENTMODE: ALL_ROWS

36FILTER

102690HASH JOIN (OUTER)

102690HASH JOIN

4949NESTED LOOPS

4949NESTED LOOPS

4949STATISTICS COLLECTOR

4949TABLE ACCESSMODE: ANALYZED (BY INDEX ROWID

BATCHED) OF 'TA_REQUISITION' (TABLE)

4949INDEXMODE: ANALYZED (RANGE SCAN) OF

'IX02_TA_REQUISITION' (INDEX)

0INDEXMODE: ANALYZED (RANGE SCAN) OF

'IX01_TA_CANDIDATE' (INDEX)

0TABLE ACCESSMODE: ANALYZED (BY INDEX ROWID) OF

'TA_CANDIDATE' (TABLE)

9659511TABLE ACCESSMODE: ANALYZED (FULL) OF 'TA_CANDIDATE'

(TABLE)

9068029VIEW

9068029HASH (GROUP BY PIVOT)

14991604INDEXMODE: ANALYZED (FAST FULL SCAN) OF

'IX01_TA_CAN_WORKFLOW' (INDEX)

**tkprof bfss_ora_24528.trc bfss_ora_24528.tkpsys=no explain=bfs/bfsownersort=fchela**

SQL ID: 5h1frsqmvf1p8 Plan Hash: 2401880148

SELECT *

FROM

TA_ERE_VIEW WHERE CLIENT_ID = :B1 AND REC_MAPPED = 'Y' AND (

(PLACEMENT_START_DATE IS NOT NULL AND (HIRED IS NULL OR BACKGROUND_CHECK IS

NULL OR CAN_ACCEPTED IS NULL)) OR (HIRED IS NOT NULL AND ( BACKGROUND_CHECK

IS NULL OR CAN_ACCEPTED IS NULL)) OR (BACKGROUND_CHECK IS NOT NULL AND (

CAN_ACCEPTED IS NULL)) )

callcountcpuelapseddiskquerycurrentrows

------- ------------

... [Content truncated for readability]

---

### 521. IE 11 Prerequisite Patch Requirements for R12

**Topic ID:** 2105

IE 11 Prerequisite Patch Requirements (Required)

Reference:R12: Recommended Browsers for Oracle E-Business Suite (Doc ID 389422.1)

To use IE11 with Oracle E-Business Suite 12, apply the following General patches (or later) including any further prerequisite patch requirements

as stated in the patch readme files as applicable to your EBS release. Other product patches listed below will also be required if you use those

particular products.

Product Requirements:EBS 12.1

General (Below highlighted patches are mandatory)

Patch 9239090:12.1.3 Release Update Pack

Patch 17932167:R12.TXK.B

Patch 18936791:R12.FWK.B.delta.4 Note 5

Patch 21565052:R12.FWK.B Note 4

CRM Note 7

Patch 20986782:R12.CC_PF.B Note 3

Patch 19486870:R12.JTT.B

Product Information Mgt (PIM)

Patch 21482112:R12.FWK.B

WebADI (BNE)

Patch 19273341:R12.BNE.B.delta.4

Report Manager

(FRM)

Patch 19559960:R12.FRM.B.Delta.4

---

### 522. Timestamp mismatch fix

**Topic ID:** 2105

Timestamp mismatch fix

- 

Stop apps services:

- 

Enable JavaDev

SQL> exec DBMS_JAVA_DEV.ENABLE;

PL/SQL procedure successfully completed.

SQL>

- 

Check Invalids :

SQL> col object_name format a40

SQL> col object_type format a40

SQL> col status format a10

SQL> set linesize 200

1 select object_name, object_type, owner, status

2 from dba_objects

3* where status = 'INVALID'

SQL> /

OBJECT_NAME OBJECT_TYPE OWNER STATUS

---------------------------------------- ---------------------------------------- ------------------------------ ----------

XXNM_INV_ORGITEMS_CONV_PKG PACKAGE BODY APPS INVALID

XX_ORACLE_TO_MSCRM PACKAGE APPS INVALID

MRP_FORECAST_ITEMS_SN MATERIALIZED VIEW APPS INVALID

MRP_COMPANY_USERS_SN MATERIALIZED VIEW APPS INVALID

MSC_EXA_UTIL PACKAGE BODY APPS INVALID

CSP_SUP_DEM_PN_MV MATERIALIZED VIEW APPS INVALID

CSP_SUP_DEM_PL_MV MATERIALIZED VIEW APPS INVALID

AST_UWQ_OLIST_WORK_ACTION PACKAGE BODY APPS INVALID

AST_UWQ_WRAPPER_PKG PACKAGE BODY APPS INVALID

9 rows selected.

SQL>

- 

set _disable_fast_validate=TRUE ( already set)

SQL> SELECT

2 a.ksppinm Param ,

b.ksppstvl SessionVal ,

c.ksppstvl InstanceVal,

a.ksppdesc Descr

3 4 5 6 FROM

x$ksppi a ,

7 8 x$ksppcv b ,

x$ksppsv c

WHERE

a.indx = b.indx AND

a.indx = c.indx AND

9 10 11 12 13 a.ksppinm LIKE '/_%' escape '/' AND

a.ksppinm like '%disable_fast_validat%'

14 15 ;

PARAM

--------------------------------------------------------------------------------

SESSIONVAL

--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

INSTANCEVAL

--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

DESCR

--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

_disable_fast_validate

TRUE

TRUE

disable PL/SQL fast validation

SQL>

- 

Check objects with timestamp issues :

1 select dep.d_obj#, d.owner# d_owner, d.name d_name, p.owner# p_owner,

2 p.name p_name,

3 case

4 when p.status not in (1, 2, 4) then 'P Status: ' || to_char(p.status)

5 else 'TS mismatch: ' ||

6 to_char(dep.p_timestamp, 'DD-MON-YY HH24:MI:SS') ||

7 to_char(p.stime, 'DD-MON-YY HH24:MI:SS')

8 end reason

9 from sys.obj$ d, sys.dependency$ dep, sys.obj$ p

10 where d.obj# = dep.d_obj# and p.obj# = dep.p_obj#

11 and d.status = 1

12 and bitand(dep.property, 1) = 1

13 and d.subname is null

14 and not(p.type# = 32 and d.type# = 1)

15 and not(p.type# = 29 and d.type# = 5)

16 and not(p.type# in(5, 13) and d.type# in (2, 55))

17* and (p.status not in (1, 2, 4) or p.stime != dep.p_timestamp)

SQL> /

D_OBJ# D_OWNER D_NAME P_OWNER P_NAME REASON

---------- ---------- ------------------------------ ---------- ------------------------------ -------------------------------------------------------------------

218527 173 OKL_BTCH_CASH_APPLIC_PUB 173 OKL_BTCH_CASH_APPLIC TS mismatch: 25-NOV-08 13:31:5529-JAN-13 03:27:31

94138 173 OKS_SRVAVL_PVT 173 OKS_AVL_PVT TS mismatch: 03-JAN-07 13:31:1729-JAN-13 03:28:32

218547 173 OKL_CURE_FUNDS_TRANS_PUB 173 OKL_CFT_PVT TS mismatch: 02-APR-09 08:29:2529-JAN-13 03:28:49

109900 173 OKS_DEFAULTS_PUB 173 OKS_CDT_PVT TS mismatch: 03-JAN-07 16:17:2429-JAN-13 03:28:44

68063 173 ECE_ADVO_X 173 ECE_FLATFILE_PVT TS mismatch: 03-JAN-07 13:03:2629-JAN-13 03:24:25

218545 173 OKL_CURE_FUNDS_SUMS_PUB 173 OKL_CFS_PVT TS mismatch: 02-APR-09 08:29:2429-JAN-13 03:28:51

218801 173 OKL_ACCOUNT_DIST_MISC_PUB 173 OKL_TAB_PVT TS mismatch: 02-APR-09 08:29:0429-JAN-13 03:29:16

208151 173 OKL_TRANS_CONTRACTS_PVT 173 OKL_TCN_PVT TS mismatch: 02-APR-09 07:53:4629-JAN-13 03:28:58

208151 173 OKL_TRANS_CONTRACTS_PVT 173 OKL_TCL_PVT TS mismatch: 02-APR-09 08:28:5829-JAN-13 03:29:16

181682 173 AMS_CAMP_SCHEDULE_VUHK 173 AMS_CAMP_SCHEDULE_PUB TS mismatch: 03-JAN-07 14:21:1129-JAN-13 03:20:42

252070 173 OKL_CASH_APPLN_RULE_PUB 173 OKL_CAT_PVT TS mismatch: 02-APR-09 08:29:2329-JAN-13 03:27:44

215519 173 CUG_VALIDATE_ADDRESS_TYPE 173 CUG_ADDRESS_CREATION_PKG TS mismatch: 25-NOV-08 13:30:2829-JAN-13 03:24:18

181674 173 AMS_CAMP_SCHEDULE_CUHK 173 AMS_CAMP_SCHEDULE_PUB TS mismatch: 03-JAN-07 14:21:1129-JAN-13 03:20:42

218780 173 OKL_STRM_TYP_ALLOCS_PUB 173 OKL_STA_PVT TS mismatch: 25-NOV-08 13:32:0429-JAN-13 03:28:06

342416 173 OKL_CASH_FLOWS_PUB 173 OKL_CAF_PVT TS mismatch: 25-NOV-08 14:50:5929-JAN-13 03:28:51

208396 173 OKL_ACCOUNTING_UPDATE_PUB 173 OKL_AEL_PVT TS mismatch: 02-APR-09 08:28:5529-JAN-13 03:27:30

427635 173 HRI_MTDT_CONC_REQUEST 173 HRI_BPL_CONC_ADMIN TS mismatch: 25-NOV-08 13:31:0029-JAN-13 03:25:24

218574 173 OKL_CREDIT_REQUEST_PUB 173 OKL_CRQ_PVT TS mismatch: 25-NOV-08 13:32:0129-JAN-13 

... [Content truncated for readability]

---

### 604. ICHOR space alerts and clearing

**Topic ID:** 2105

when we get alerts from ichor with respect space generally under log directory in /u06 mount point we go the following directory

/u06 (/dev/vg04/lvol7 ) : 20480000 total allocated Kb
2525904 free allocated Kb
17954096 used allocated Kb
87 % allocation used

> cd /u06/log/imax_eca1db6

find the top biggest files in the directory
> du -a /u06/log/imax_eca1db6 | sort -n -r | head -n 10
35270880 /u06/log/imax_eca1db6
14950776 /u06/log/imax_eca1db6/FNDCPGSC146355.txt
5149352 /u06/log/imax_eca1db6/FNDCPGSC146414.txt
3513520 /u06/log/imax_eca1db6/FNDCPGSC146501.txt
3171632 /u06/log/imax_eca1db6/FNDCPGSC146506.txt
2185184 /u06/log/imax_eca1db6/FNDCPGSC146500.txt
1047512 /u06/log/imax_eca1db6/l34165250.req
1047512 /u06/log/imax_eca1db6/l34164542.req
60344 /u06/log/imax_eca1db6/l34218891.req
60336 /u06/log/imax_eca1db6/l34205637.req

Nullify the sizes by checking the date of the file created so that it does not kill any session
$ ls -ltr /u06/log/imax_eca1db6/FNDCPGSC146355.txt
-rw-r--r-- 1 imax oaa 7654785720 Jun 15 21:07 /u06/log/imax_eca1db6/FNDCPGSC146355.txt
[eca1db6:imax /u06/log/imax_eca1db6]
$ cat /dev/null > FNDCPGSC146355.txt
[eca1db6:imax /u06/log/imax_eca1db6]
$ ls -ltr /u06/log/imax_eca1db6/FNDCPGSC146355.txt
-rw-r--r-- 1 imax oaa 0 Jun 23 21:08 /u06/log/imax_eca1db6/FNDCPGSC146355.txt
[eca1db6:imax /u06/log/imax_eca1db6]
$ df -k .
/u06 (/dev/vg04/lvol7 ) : 20405724 total allocated Kb
9920144 free allocated Kb
10485580 used allocated Kb
51 % allocation used

---

### 603. Database DR Lag Issue

**Topic ID:** 1801

From time to time, we receive alerts for database being out of sync.

99% of the times, disk space on DR server where we store archive logs is exhausted resulting in these error messages and causing DR to lag behind.

Below are the steps which we take to resolve this issue:

1. Check Primary database to see if disk space is fine and latest archive log generated.
2. Log on to DR server and check the disk space using "df -h" command.
3. Check which archive log has been received and applied by running below command:

SELECT 'Last Applied : ' Logs,
TO_CHAR(next_time,'DD-MON-YY:HH24:MI:SS') TIME,thread#,sequence#
FROM v$archived_log
WHERE sequence# =
(SELECT MAX(sequence#) FROM v$archived_log WHERE applied='YES'
)
UNION
SELECT 'Last Received : ' Logs,
TO_CHAR(next_time,'DD-MON-YY:HH24:MI:SS') TIME,thread#,sequence#
FROM v$archived_log
WHERE sequence# =
(SELECT MAX(sequence#) FROM v$archived_log );

4. Change directory to the location where archive logs are generated put i.e. $ORACLE_HOME/dbs/arch, and delete old archive logs which have already been applied. Easiest way to delete these archive logs is to run commands like below:

9. Start the Managed recovery on DR server using below command as it will request missing archive log from Primary server:

alter database recover managed standby database using current logfile disconnect;

10. Check and confirm alert log and run the command from step 3, above, to check the current status of archive logs being received and applied.

---

### 523. Useful Oracle & Linux commands - Diego

**Topic ID:** 301

Check linux processes waiting for io resources:

[root@c1prdebsapp1 ~]# for x in `seq 1 1 100`; do ps -eo state,pid,cmd | grep "^D"; echo "----"; date ; sleep 5; done

----

Thu Nov 10 13:14:14 PST 2016

----

Thu Nov 10 13:14:19 PST 2016

Rman query to check backups:

select db_name,start_time,end_time,output_bytes/1024/1024/1024 "GB Size" ,status,input_type,elapsed_seconds/60/60 "Elapsed Hours" from RC_RMAN_BACKUP_JOB_DETAILS

where DB_NAME='PRODEBS'

--and input_type in ('DB INCR','ARCHIVELOG')

and input_type in ('DB INCR')

--and elapsed_seconds/60/60 > 4

order by start_time desc;

Running concurrents

set lines 130

set pages 200

col os form A7 head AppProc

col spid form a6 head SPID

col program form A50 trunc

set pages 38

col time form 99999.99 head Elapsed

col "Req Id" form 99999999

col "Parent" form a8

col "Prg Id" form 9999999

col serial# form 999999 head Serial#

col qname head "Manager" format a10 trunc

col sid format 9999 head SID

col user_name form A12 head User trunc

set recsep off

select

q.concurrent_queue_name qname

,f.user_name

,a.request_id "Req Id"

,decode(a.parent_request_id,-1,NULL,a.parent_request_id) "Parent"

,a.concurrent_program_id "Prg Id"

,a.phase_code,a.status_code

--,b.os_process_id "OS"

--,vs.sid

--,vs.serial# "Serial#"

--,vp.spid

,a.oracle_process_id "spid"

,(nvl(a.actual_completion_date,sysdate)-a.actual_start_date)*1440 "Time"

,c.concurrent_program_name||' - '||

c2.user_concurrent_program_name||' '||a.description "Program"

from APPLSYS.fnd_Concurrent_requests a

,APPLSYS.fnd_concurrent_processes b

,applsys.fnd_concurrent_queues q

,APPLSYS.fnd_concurrent_programs_tl c2

,APPLSYS.fnd_concurrent_programs c

,APPLSYS.fnd_user f

--,v$session vs

--,v$process vp

where

a.controlling_manager = b.concurrent_process_id

and a.concurrent_program_id = c.concurrent_program_id

and a.program_application_id = c.application_id

and c2.concurrent_program_id = c.concurrent_program_id

and c2.application_id = c.application_id

and a.phase_code in ('I','P','R','T')

and a.requested_by = f.user_id

and b.queue_application_id = q.application_id

and b.concurrent_queue_id = q.concurrent_queue_id

and c2.language = 'US'

-- and vs.process (+) = b.os_process_id

-- and vs.paddr = vp.addr (+)

order by 9 desc;

--

---

### 524. Enhanced Jar Signing for Oracle E-Business Suite (Doc ID 1591073.1)

**Topic ID:** 2105

## Section 2: Prerequisite Requirements

#### Step 2.1. Enhanced Jar Signing Prerequisite Requirements

- 

Oracle Applications 11.5.10 CU2 or higher or Oracle Applications R12.x or higher

  - 

For prerequisite patch requirements seeStep 2.2. AD Patch Requirements
  - 

Desktop Client: JRE 6 or higher
  - 

Application Tier: JDK 6 or JDK 7

JDK Upgrade Documentation

It is recommended to upgrade to the latest JDK release on your application tier. For information on minimum JDK version requirements and update instructions for your platform, see the following document as appropriate to your Oracle E-Business Suite release:

- 

11i Users:

  - 

Document 401561.1titled, 'Using J2SE Version 6 with Oracle E-Business Suite 11i'

- 

R12.0.6, 12.1.3 Users:

  - 

Document 455492.1titled, 'Using Latest Java 6.0 Update With Oracle E-Business Suite Release 12'
  - 

Document 1467892.1titled, 'Using JDK 7.0 Latest Update with Oracle E-Business Suite Release 12.0 and 12.1'

- 

R12.2.x Users:

  - 

Document 1459546.1titled, 'Using JDK 6.0 Latest Update with Oracle E-Business Suite Release 12.2'
  - 

Document 1530033.1titled, 'Using the Latest JDK 7.0 Update with Oracle E-Business Suite Release 12.2'

Ascertain Current Software Versions (if required)

If required, you can check your current software versions by running the TXK Inventory Report for the application tier. For further information seeAppendix F: Obtaining Support.

#### Step 2.2. AD Patch Requirements

The commands and steps in this document rely on the latest AD architecture in this area. If you have not done so previously, download and apply the AD prerequisite patch as applicable to your Oracle E-Business Suite release.Step 2.2.1. Download the AD Patches

Download the appropriate patch(es) for your operating system and Oracle E-Business Suite release and place it on your server:

Patch

EBS 11i3

EBS 12.0.x4

EBS 12.1.x

EBS 12.2.x

Consolidated JRI Patch

Patch 17191279

Patch 17191279:R12.AD.A

Patch 17191279:R12.AD.B

Patch 17545215:R12.AD.C1

or later

Change Alias Patch

Patch 19725648

Patch 18312333:R12.AD.A2

Patch 18312333:R12.AD.B2

Patch 17766337

R12.AD.C.delta.4 or higher

1Oracle E-Business Suite 12.2.2 users must apply this patch. Oracle E-Business Suite 12.2.3 or higher users do not need to apply this patch as it is already included in the base release.

2With previousPatch 17066340, although the process completed successfully, there may have been a core dump when executingadgenjky.shif the$APPL_TOP/admin/adsign.txtfile did not exist. This issue is fixed inPatch 18312333which supersedes it. If you have previously run this process againstPatch 17066340there is no requirement to re-run it againstPatch 18312333.

3Extended support for EBS 11i ended 31-December 2015. Additional support coverage is available through Oracle Advanced Customer Support (ACS). See the following announcement for further information: 'Additional Coverage Options for 11.5.10 E-Business Suite Sustaining Support' (Document 1596629.1).

4Extended support for EBS 12.0.6 ended 31-January 2015. The patches continue to be listed for historical information purposes.Step 2.2.2. Run the adgrants.sql Script

Before applying the 'Consoldated JRI Patch', run the adgrants.sql script as a user that can connect as SYSDBA to grant privileges to selected SYS objects and create PL/SQL profiler objects.

1. Create the directory$ORACLE_HOME/appsutil/adminon the database server if it does not already exist.

2. Set the environment to point to ORACLE_HOME on the database server.

3. If you already have a version of adgrants.sql under your ORACLE_HOME that is a later version than the one supplied in the patch, go to step 4.

If not, copy/admin/adgrants.sql(UNIX) from this patch directory to$ORACLE_HOME/appsutil/admin.

Or, copy\\admin\\adgrants_nt.sql(Windows) from this patch directory to%ORACLE_HOME%\\appsutil\\admin.

4. Use SQL*Plus to run the script:UNIX Users:

$ sqlplus /nolog

SQL> @$ORACLE_HOME/appsutil/admin/adgrants.sqlWindows Users:

C:\\> sqlplus /nolog

SQL> @%ORACLE_HOME%\\appsutil\\admin\\adgrants_nt.sqlStep 2.2.3. Apply the Patch

Apply the patch by following its readme.Oracle E-Business Suite 12.2.x Users

Apply the patch through an AD Online Patching (ADOP) sessionOracle E-Business Suite 11i, 12.0.x & 12.1.x Users

Apply the patch through adpatch.Step 2.2.4. Post Install Tasks

This patch also contains the fix to add permission attributes to the Jar Manifest in line with the latest Java security recommendations. This change will not take effect until you regenerate your jar files as outlined inSection 5: Regenerate the Jar Files. If you are continuing through the rest of the steps in this document you can defer the jar regeneration until later.

## Section 3: Generate Keypair and Certificate Signing Request

This section outlines the required steps to generate a keypair and create a certificate signing request.

#### Jar Signing Files Directory

Note:In Oracle E-Busines

... [Content truncated for readability]

---

### 525. Useful SQL APPS scripts - Trinadh

**Topic ID:** 2105

### Query to get incompatible programs

http://www.oracleebs.net/2011/07/query-to-get-incompatible-programs.html

SELECT fat.APPLICATION_NAME,

fctl.user_concurrent_program_name,

DECODE (TO_RUN_TYPE, 'S', 'Set', 'Program') TYPE,

DECODE (INCOMPATIBILITY_TYPE, 'G', 'Global', 'Domain')

"Incompatibilty Type"

FROM FND_CONCURRENT_PROGRAM_SERIAL fcrs,

FND_CONCURRENT_PROGRAMS_TL fctl,

FND_APPLICATION_TL fat

WHEREfcrs.RUNNING_APPLICATION_ID = fat.application_id

AND (RUNNING_CONCURRENT_PROGRAM_ID = 32045)-- CP id of the program in question

AND fctl.CONCURRENT_PROGRAM_ID = fcrs.TO_RUN_CONCURRENT_PROGRAM_ID

AND fctl.LANGUAGE = 'US'

AND fat.LANGUAGE = 'US'

ORDER BY to_run_application_id, to_run_concurrent_program_id;

---

### 526. Workflow Mailer - SSL/Certificates

**Topic ID:** 2105

Introduction :

If SSL connection to imap is enabled, the java keystore needs to be configured and email server certificates need to be imported.

- 

Check Current keystore :

Check validity of certificate by running below command:

keytool -list -v -keystore $HOME/.keystore

Search for owner: CN=outlook

[apptest@c1tstebsapp1 outlook-newcert]$ sqlplus apps/apps @$FND_TOP/sql/afsvcpup.sql

SQL*Plus: Release 10.1.0.5.0 - Production on Mon Dec 19 10:41:59 2016

Copyright (c) 1982, 2005, Oracle. All rights reserved.

Connected to:

Oracle Database 11g Enterprise Edition Release 11.2.0.3.0 - 64bit Production

With the Partitioning, OLAP, Data Mining and Real Application Testing options

Component Id Component NameComponent Status TypeContaine

------------ ------------------------------ ---------------- --------------- --------

10000 ECX Inbound Agent ListenerSTOPPEDWF_AGENT_LISTEN GSM

10001 ECX Transaction Agent Listener STOPPEDWF_AGENT_LISTEN GSM

10002 Workflow Deferred Agent Listen RUNNINGWF_AGENT_LISTEN GSM

10003 Workflow Deferred Notification RUNNINGWF_AGENT_LISTEN GSM

10004 Workflow Error Agent Listener RUNNINGWF_AGENT_LISTEN GSM

10005 Workflow Inbound Notifications RUNNINGWF_AGENT_LISTEN GSM

10006 Workflow Notification Mailer DEACTIVATED_SYST WF_MAILERGSM

10020 Web Services IN AgentSTOPPEDWF_JAVA_AGENT_L GSM

10021 Web Services OUT AgentSTOPPEDWF_DOCUMENT_WEB GSM

10022 Workflow Java Deferred Agent L RUNNINGWF_JAVA_AGENT_L GSM

10023 Workflow Java Error Agent List RUNNINGWF_JAVA_AGENT_L GSM

10040 WF_JMS_IN Listener(M4U)RUNNINGWF_JAVA_AGENT_L GSM

10041 Workflow Inbound JMS Agent Lis STOPPEDWF_AGENT_LISTEN GSM

Enter Component Id: 10006

Comp Param Id Parameter NameDefault ValueValueReq Reload

------------- --------------------------------------------- ------------------------------ ------------------------------ --- ------

10055 Allow Forwarded ResponseYYN Y

10160 Alternate email parseroracle.apps.fnd.wf.mailer.Dire oracle.apps.fnd.wf.mailer.Dire Y N

ctEmailParserctEmailParser

10161 Attach images to outbound emailsYNY Y

10162 Attach stylesheet to outbound emailYYY Y

10056 Attached URLsWFMAIL:ATTACHED_URLSWFMAIL:ATTACHED_URLSY Y

10057 Autoclose FYIYYY Y

10061 Debug Mail SessionNNN N

10163 Direct responseNNN N

10062 Discard FolderDISCARDDISCARDY N

10063 Email Parseroracle.apps.fnd.wf.mailer.Temp oracle.apps.fnd.wf.mailer.Temp Y N

latedEmailParserlatedEmailParser

10178 Enable stylesheet referencesNNY Y

10064 Expunge Inbox on CloseYYY Y

10166 Framework Application ID11Y N

10165 Framework Responsiblity2042020420Y N

10167 Framework URL timeout3030Y N

10164 Framework User00Y N

10065 FromWorkflow MailerTEST Workflow MailerY Y

10066 HTML Agenthttp://c1tstebsapp1.nanometric Y Y

s.com:8000/

10231 HTML delimiterDEFAULTDEFAULTY N

10168 HTTP User AgentMozilla/4.76Mozilla/4.76Y Y

10068 Inbound ProtocolimapIMAPY N

10226 Inbound SSL EnabledNYY N

10069 Inbound Server Nameoutlook.office365.com:993Y N

10082 Inbound Thread Count11Y Y

10169 Inbound connection time out120120Y N

10170 Inbound message fetch size100100Y N

10070 Inbox FolderINBOXINBOXY N

10071 Inline AttachmentsNNN Y

10175 Invalid More Information Response Notificatio WFMAIL:OPEN_INVALID_MORE_INFO WFMAIL:OPEN_INVALID_MORE_INFO Y Y

n

10074 Invalid Response NotificationWFMAIL:OPEN_INVALIDWFMAIL:OPEN_INVALIDY Y

10230 Invalid address list size100100Y N

10060 Log Level55Y Y

10073 Mailer Node NameWFMAILWFTESTY N

10084 Max Error Count1010Y N

10171 Maximum Ignore List size10001000Y N

10172 Maximum Response lookup code cache size100100Y N

10173 Maximum returned email list size100100Y N

10072 Message Formatteroracle.apps.fnd.wf.mailer.Noti oracle.apps.fnd.wf.mailer.Noti Y N

ficationFormatterficationFormatter

10240 More Information Response Warning Notificatio WFMAIL:MORE_INFO_ANSWEREDWFMAIL:MORE_INFO_ANSWEREDY Y

n

10077 Open FYI NotificationWFMAIL:OPEN_MAIL_FYIWFMAIL:OPEN_MAIL_FYIY Y

10075 Open NotificationWFMAIL:OPEN_MAILWFMAIL:OPEN_MAILY Y

10076 Open Notification (Direct Response Parsing) WFMAIL:OPEN_MAIL_DIRECTWFMAIL:OPEN_MAIL_DIRECTY Y

---

### 640. Load program running long time in Production

**Topic ID:** 2105

**Subject**: PO Accrual Reconciliation load running very slow, over 9 hours

**References**:

**Symptoms (if applicable)**:

**Causes (if applicable)**: Full table scan on

**Procedure or Solution Description**:

SQL> SET TERMOUT ON
SQL> SET FEEDBACK OFF
SET VERIFY OFF
SET SCAN ON
SQL> SET LONG 1000000
SQL> SET SERVEROUTPUT OFF

VARIABLE tuning_task VARCHAR2(30)

DECLARE
l_sql_id v$session.prev_sql_id%TYPE := 'fcp6h01z2k0xy';
BEGIN
:tuning_task := dbms_sqltune.create_tuning_task(sql_id => l_sql_id);
SQL> dbms_sqltune.execute_tuning_task(:tuning_task);
END;
/
SQL> SELECT dbms_sqltune.report_tuning_task(:tuning_task) FROM dual;

2- Index Finding (see explain plans section bel
ow)
--------------------------------------------------
The execution plan of this statement can be
improved by creating one or more
indices.

Recommendation (estimated benefit: 99.74%)
------------------------------------------
- Consider running the Access Advisor to i

DBMS_SQLTUNE.REPORT_TUNING_TASK(:TUNING_TASK)
--------------------------------------------------------------------------------
improve the physical schema design
or creating the recommended index.
create index AP.IDX$$_2B77E0001 on AP.AP_SELF_ASSESSED_TAX_DIST_ALL("PO_DISTRIBUTION_ID","ORG_ID","ACCOUNTING_DATE");

- Consider running the Access Advisor to improve the physical schema design
or creating the recommended index.
create index XLA.IDX$$_2B77E0002 on XLA.XLA_DISTRIBUTION_LINKS("SOURCE_DISTRIBUTION_ID_NUM_1");

Create indices:
create index XLA.IDX$$_2B77E0002 on XLA.XLA_DISTRIBUTION_LINKS("SOURCE_DISTRIBUTION_ID_NUM_1");
create index AP.IDX$$_2B77E0001 on AP.AP_SELF_ASSESSED_TAX_DIST_ALL("PO_DISTRIBUTION_ID","ORG_ID","ACCOUNTING_DATE");
SQL> exec DBMS_STATS.GATHER_TABLE_STATS (ownname => 'AP' , tabname => 'AP_SELF_ASSESSED_TAX_DIST_ALL',cascade => true, estimate_percent => 10);
SQL> exec DBMS_STATS.GATHER_TABLE_STATS (ownname => 'XLA' , tabname => 'XLA_DISTRIBUTION_LINKS',cascade => true, estimate_percent => 10);

Drop indices:
SQL> drop index XLA.IDX$$_2B77E0002;
SQL> drop index AP.IDX$$_2B77E0001;
SQL> exec DBMS_STATS.GATHER_TABLE_STATS (ownname => 'AP' , tabname => 'AP_SELF_ASSESSED_TAX_DIST_ALL',cascade => true, estimate_percent => 10);

PL/SQL procedure successfully completed.

SQL> exec DBMS_STATS.GATHER_TABLE_STATS (ownname => 'XLA' , tabname => 'XLA_DISTRIBUTION_LINKS',cascade => true, estimate_percent => 10);

PL/SQL procedure successfully completed.

---

### 530. How to Put Concurrent Requests On Hold and Release Hold

**Topic ID:** 2105

Reference: http://erpondb.blogspot.com/2016/01/place-all-pending-concurrent-requests.html

Procedure:

1) Create a backup table containing the pending requests that will be put on hold.

create table apps.FND_CONC_REQ_S_V_onhold_822 as
select decode(phase_code,
'P','Pending',
'Running') Phase_code,
decode(status_code,
'R', 'Normal',
'W', 'Paused',
'Q', 'Standby',
'I', 'Scheduled') Status_code,
decode(hold_flag,'Y','Yes','No') Hold_flag,
request_id,
substr(requestor,1,10) usern_name,
to_char(requested_start_date,'MM/DD/YYYY HH24:MI:SS') req_start_date,
substr(program,1,50) program
from FND_CONC_REQ_SUMMARY_V
where phase_code in ('P') -- in Pending
and status_code != 'W' -- not in Paused
and hold_flag != 'Y' -- not on hold
and to_date(requested_start_date,'DD-MON-YY')
between to_date(sysdate,'DD-MON-YY')
and to_date(sysdate+2,'DD-MON-YY')
order by phase_code desc, requested_start_date, request_id
SQL> /

Table created.

SQL> select count(*) from apps.fnd_conc_req_s_v_onhold_822;

COUNT(*)
----------
223

SQL> ed
Wrote file afiedt.buf

UPDATE fnd_concurrent_requests
SET hold_flag = 'Y'
WHERE phase_code = 'P'
and status_code in ('Q','I') -- Standby or Scheduled
and hold_flag = 'N'
and request_id in (
select request_id from apps.FND_CONC_REQ_S_V_onhold_822
)
SQL> /

216 rows updated.

SQL> select count(*) from apps.FND_CONC_REQ_S_V_onhold_822 ;

COUNT(*)
----------
223

SQL> ed
Wrote file afiedt.buf

1 UPDATE fnd_concurrent_requests
2 SET hold_flag = 'Y'
3 WHERE phase_code = 'P'
4 and status_code in ('Q','I') -- Standby or Scheduled
5 and hold_flag = 'N'
6 and request_id in (
7 select request_id from (
8 select decode(phase_code,
9 'P','Pending',
10 'Running') Phase_code,
11 decode(status_code,
12 'R', 'Normal',
13 'W', 'Paused',
14 'Q', 'Standby',
15 'I', 'Scheduled') Status_code,
16 decode(hold_flag,'Y','Yes','No') Hold_flag,
17 request_id,
18 substr(requestor,1,10) usern_name,
19 to_char(requested_start_date,'MM/DD/YYYY HH24:MI:SS') req_start_date,
20 substr(program,1,50) program
21 from FND_CONC_REQ_SUMMARY_V
22 where phase_code in ('P') -- in Pending
23 and status_code != 'W' -- not in Paused
24 and hold_flag != 'Y' -- not on hold
25 and to_date(requested_start_date,'DD-MON-YY')
26 between to_date(sysdate,'DD-MON-YY')
27 and to_date(sysdate+2,'DD-MON-YY')
28 order by phase_code desc, requested_start_date, request_id)
29* )
SQL> /

7 rows updated.

SQL> commit;

Commit complete.

---

### 531. Brightfield Database Clone-Refresh

**Topic ID:** 1801

Prerequisites:1. Clean up the old data files to be refreshed.2. Ensure you have a good backup of source database.3. Clean up rman catalog of the database to be refreshed.RMAN> LIST BACKUP SUMMARY;
RMAN> DELETE BACKUP DEVICE TYPE SBT;
RMAN> DELETE BACKUP DEVICE TYPE DISK;
RMAN> UNREGISTER DATABASE;Procedure:1. Check db and log name convert parameters are set correctly.db_file_name_convert string /u01/oracle/bfss, /u02/oracle/
bfss05
log_file_name_convert string /u01/oracle/bfss, /u02/oracle/
bfss05
2. Check tnsnames.ora has entries to connect to RMAN catalog and source database (called target in RMAN terms).3. Restore using RMANrman targetsys/xxx@BFSScatalogrcat/oracle123rcat@RMANCATALOGauxiliary sys/xxx cmd=$HOME/restore.cmd log=$HOME/restore.log[orabfs05@af261 ~]$ more restore.cmd
DUPLICATE DATABASE TO BFSS05
from active database
using compressed backupset
NOFILENAMECHECK;
5. Check temp & archivelog
TABLESPACE_NAME
------------------------------
FILE_NAME
--------------------------------------------------------------------------------
TEMP
/u02/oracle/bfss05/oradata/temp01.dbf

SQL> archive log list
Database log mode Archive Mode
Automatic archival Enabled
Archive destination /u02/oracle/bfss05/product/12.1/dbs/arch
Oldest online log sequence 1
Next log sequence to archive 1
Current log sequence 1
SQL>
5. Register to rman catalog and launch full backup after releasing instance to customer.RMAN> register database;database registered in recovery catalog
starting full resync of recovery catalog
full resync completeReferences:https://oracle-base.com/articles/12c/recovery-manager-rman-database-duplication-enhancements-12cr1#active-database-duplication-using-backup-sets

---

### 534. Demantra Performance Tuning - REORG of Demantra tables

**Topic ID:** 2105

BEGINtable_reorg.reorg('DEMANTRA_3','AUDIT_TRAIL','R');END;/
BEGINtable_reorg.reorg('DEMANTRA_3','MDP_MATRIX','R');END;
https://support.oracle.com/epmos/faces/DocumentDisplay?_afrLoop=224824200208815&id=1356886.1&_afrWindowMode=0&_adf.ctrl-state=19tmlnyn20_4

Running GSS on Demantra schema :
BEGINDBMS_STATS.GATHER_SCHEMA_STATS (ownname =>'DEMANTRA_2',estimate_percent =>dbms_stats.auto_sample_size,block_sample =>false,method_opt =>'FOR ALL COLUMNS SIZE AUTO',degree => 10,granularity =>'ALL',cascade => true, -- Make sure we include indexesoptions => 'GATHER AUTO');END;/

---

### 535. Not Use - Demantra 12.2.6.2 refresh - NOT USE

**Topic ID:** 2105

expdp demantra_3/demantra_3 schemas=DEMANTRA_3 directory=DATA_PUMP_DIR dumpfile=DEMANTRA_3.dmp logfile=expdpdemantra_3.log
impdp demantra_2/demantra_2 directory=DATA_PUMP_DIR dumpfile=DEMANTRA_3.dmp logfile=impdpdemantra_3.log remap_schema=demantra_3:demantra_2 REMAP_TABLESPACE=TS_SALES_DATA_3:TS_SALES_DATA_2 REMAP_TABLESPACE=TS_SALES_DATA_X_3:TS_SALES_DATA_X_2 TABLE_EXISTS_ACTION=REPLACE
[orastg@c1stgascp1 admin]$ sqlplus /nolog
SQL*Plus: Release 11.2.0.4.0 Production on Fri Oct 13 00:47:51 2017
Copyright (c) 1982, 2013, Oracle. All rights reserved.
SQL> conn /as sysdbaConnected.SQL> @sys_grants.sql DEMANTRA_2 ACL_DEFAULT ACL_DEFAULT

---

### 540. Demantra R12 Schema refresh

**Topic ID:** 3301

**-- Make sure to close Modeler from RDP once that post-clone refresh is completed --**

If demantra_2 schema is part of complete db clone , make sure to udpate/match demantra_2 password in the Weblogic Pool Configuration:

I.E : Complete STGASCP Refresh from PRODASCP:
**1. Kickoff Export in PRODASCP:
**
[oraprod@c1prdascp1 ~]$ sh /home/oraprod/exp_demantra_schema_2.sh

Export: Release 11.2.0.4.0 - Production on Wed Oct 10 12:14:32 2018
....Master table "SYS"."SYS_EXPORT_SCHEMA_01" successfully loaded/unloaded
******************************************************************************
Dump file set for SYS.SYS_EXPORT_SCHEMA_01 is:
/u01/oracle/PRODASCP/db/tech_st/11.2.0.4/rdbms/log/demantra_2_2018-10-10_PRODASCP.dmp
Job "SYS"."SYS_EXPORT_SCHEMA_01" successfully completed at Wed Oct 10 12:17:55 2018 elapsed 0 00:03:11

Transfer to STGASCP :

[oraprod@c1prdascp1 ~]$ scp /u01/oracle/PRODASCP/db/tech_st/11.2.0.4/rdbms/log/demantra_2_2018-10-10_PRODASCP.dmp orastg@c1stgascp1.nanometrics.com:/u01/oracle/STGASCP/demantra
orastg@c1stgascp1.nanometrics.com's password:
demantra_2_2018-10-10_PRODASCP.dmp 100% 169MB 42.2MB/s 00:04

**2. Stop Weblogic of instance being refreshed.**

[oracle@c1prjdem03 ~]$ /home/oracle/bin/stop_weblogic.sh

**3. kill any demantra active session in STGASCP:**

[oradev@c1pdevascp1 bin]$ sqlplus / as sysdba

SQL*Plus: Release 11.2.0.4.0 Production on Wed Oct 4 14:29:53 2017

Copyright (c) 1982, 2013, Oracle. All rights reserved.

Connected to:
Oracle Database 11g Enterprise Edition Release 11.2.0.4.0 - 64bit Production
With the Partitioning, OLAP, Data Mining and Real Application Testing options

SQL> select sid,serial# from v$session where username='DEMANTRA_2'

SQL> alter system kill session '371,539' immediate;

System altered.

**4. drop/recreate demantra schema in STGASCP :**

SQL> @create_demantra_2_user.sql

**5. import demantra schema**

[oradev@c1pdevascp1 bin]$ imp_demantra_2_PRODASCP-to-demantra_2_STGASCP.sh
-> After import run utlrp to recompile invalid objects.

**6. Login to windows , open BM and modify settings**

Refer to clone document

**7. run sys_grants.sql script**

[orastg@c1stgascp1 admin]$ pwd
/home/orastg/1226/admin

sqlplus / as sysdba > @sys_grants.sql DEMANTRA_2 ACL_DEFAULT ACL_DEFAULT;

**8. Start Weblogic**

[oracle@c1prjdem03 ~]$ /home/oracle/bin/start_weblogic.sh

**9. Verify BM login and FrontEnd login : http://c1prddem1.nanometrics.com:7001/demantra/portal/anywhereLogin.jsp**

**10. Run demantra_2 gather stats**
/ahi/bin/get_demantra_stats_12.sh**
****
**

Below mail parameters are not applicable for 12.2.6.2 STP/PRJ

Parameters Menu --> System Parameters --> Application Server---> Collaborator

mail.server = localhost

Parameters Menu --> system parameters --> Application Server---> Workflow

mail.strings.from.system = Demantra TESTASCP

server.generalurl = http://c1tstascp1.nanometrics.com:7010/

Parameters Menu --> system parameters --> Application Server---> Dp Web

Mail = on

mailAddress = sup@appsforte.com

mailProtocol =

---

### 611. Queries for Journal Entries

**Topic ID:** 2105

****NOTE: Please ensure that your SQL Developer is 20.2 or above version to export the records more than 30K.**

**GL Journal Query :**
Select jeh.JE_HEADER_ID,
to_char(gp.start_date,'MM/DD/YYYY') start_date,
to_char(jeh.default_effective_date,'MM/DD/YYYY') default_effective_date,
to_char(jeh.LAST_UPDATE_DATE,'MM/DD/YYYY') last_update_date,
jeh.LAST_UPDATED_BY,
jeh.LEDGER_ID,
jeh.PERIOD_NAME,
gp.end_date period_end_date,
jeh.CURRENCY_CODE,
jeh.STATUS,
jeh.ACTUAL_FLAG,
to_char(jeh.CREATION_DATE,'MM/DD/YYYY') creation_date,
jeh.CREATED_BY,
jeh.LAST_UPDATE_LOGIN,
jeh.JE_BATCH_ID,
jeh.REVERSED_JE_HEADER_ID,
to_char(jeh.POSTED_DATE,'MM/DD/YYYY') posted_date,
jeh.CURRENCY_CONVERSION_DATE,
jeh.RUNNING_TOTAL_DR,
jeh.RUNNING_TOTAL_CR,
jeh.JE_SOURCE,
jel.JE_LINE_NUM,
jel.Code_combination_ID,
jel.Entered_DR dr,
jel.Entered_CR cr,
nvl(entered_cr,0)*-1 + nvl(entered_dr,0) amount,
jel.Accounted_DR,
jel.Accounted_CR,
gcc.ACCOUNT_TYPE,
gcc.SEGMENT1,
gcc.SEGMENT2,
gcc.SEGMENT3,
gcc.SEGMENT4,
gcc.segment5,
gcc.segment6,
gcc.segment7,
gcc.segment8,
gcc.segment9,
gcc.segment10,
replace(replace(replace(jeh.NAME,chr(10),''),chr(13),''),'"','') name,
replace(replace(replace(jeh.Description,chr(10),''),chr(13),''),'"','') header_desc,
replace(replace(replace(jel.Description,chr(10),''),chr(13),''),'"','') line_desc
--count(*)
FROM apps.GL_JE_LINES jel,
apps.GL_JE_HEADERS jeh,
apps.gl_periods gp,
apps.GL_CODE_COMBINATIONS gcc
WHERE jel.JE_HEADER_ID = jeh.JE_HEADER_ID
AND jeh.STATUS = 'P'
and currency_code = 'USD'
and jeh.ledger_id = '2001'
and gp.period_name = jeh.period_name
and gp.start_date between '01-JAN-2018' and '31-DEC-2018'
and gp.period_set_name = 'GET JAN-DEC'
and gp.period_type = 'Month'
and je_category != 'Budget'
and je_source != 'Budget Journal'
and jel.code_combination_id = gcc.code_combination_id
--and jeh.JE_HEADER_ID =
order by jeh.je_header_id;

**GL Budget Query :**

Select jel. Period_Name, sum(jel.Entered_DR), sum(jel.Entered_CR), sum(jel.Accounted_DR), sum(jel.Accounted_CR), count(*)
FROM apps.GL_JE_LINES jel,
apps.GL_JE_HEADERS jeh,
apps.gl_periods gp
WHERE jel.JE_HEADER_ID = jeh.JE_HEADER_ID
AND jeh.STATUS = 'P'
and currency_code = 'USD'
and jeh.ledger_id = '2001'
and gp.period_name = jeh.period_name
and gp.start_date between '01-JAN-2018' and '31-DEC-2018'
and gp.period_set_name = 'GET JAN-DEC'
and gp.period_type = 'Month'
and je_category != 'Budget'
and je_source != 'Budget Journal'
GROUP BY jel.Period_Name;

**User Listing Query :**
select user_id, user_name, description, start_date, end_date
from apps.fnd_user u
where nvl(end_date,sysdate) >= '26-FEB-2018';

---

### 541. Creating a directory in database

**Topic ID:** 2105

[oradev@c1pdevascp1 PRJASCP]$ mkdir KKOCH
[oradev@c1pdevascp1 PRJASCP]$ chmod -R 777 KKOCH[oradev@c1pdevascp1 PRJASCP]$ mkdir KKOCH_ARCHIVE[oradev@c1pdevascp1 PRJASCP]$ chmod -R 777 KKOCH_ARCHIVE
[oradev@c1pdevascp1 PRJASCP]$ sqlplus /nolog
SQL*Plus: Release 11.2.0.4.0 Production on Thu Oct 5 06:47:40 2017
Copyright (c) 1982, 2013, Oracle. All rights reserved.
SQL> conn /as sysdbaConnected.SQL> CREATE OR REPLACE DIRECTORY KKOCH as '/u01/oracle/PRJASCP/KKOCH';
Directory created.
SQL> CREATE OR REPLACE DIRECTORY KKOCH_ARCHIVE as '/u01/oracle/PRJASCP/KKOCH_ARCHIVE';
Directory created.
SQL> GRANT READ, WRITE ON DIRECTORY KKOCH to demantra_2;
Grant succeeded.
SQL> GRANT READ, WRITE ON DIRECTORY KKOCH_ARCHIVE to demantra_2;
Grant succeeded.
SQL> grant execute ON DIRECTORY KKOCH to demantra_2;
Grant succeeded.
SQL> grant execute ON DIRECTORY KKOCH_ARCHIVE to demantra_2;
Grant succeeded.

---

### 183. How to find EBS patch info

**Topic ID:** 2105

Options
Symptom:
*(public)*Need to find out the latest patchset level and patch info
Problem:
*(public)*Need to find patch set level and patch info
Solution:
*(public)*To get patchset level:

1. Download patchsets.sh from Oracle FTP site:
ftp://ftp.oracle.com/support/outgoing/PATCHSET_COMPARE_TOOL/patchsets.sh

2. Run patchsets.sh (more information in**Applications Current Patchset Comparison Utility - patchsets.sh, Doc ID 139684.1)
**
To check individual patch info:
select * from ad_bugs where bug_number = ''

Reference:E-Business Suite Applications Manager Steps To Get The Patchset Level of Each Specific Oracle Applications Functional Product in R12 (Doc ID 550654.1)
$AD_TOP/sql/adutconf.sql

---

### 543. EBS patching for 11.5.10.2 and 12.1.X

**Topic ID:** 2105

Reference : http://dbakevlar.com/2012/11/how-to-apply-an-ebs-patch/**EBS Patching:**
1. Download the patch, as instructed by Oracle Support and also read the “Read Me”. Verify that the only task is an App Tier patch, which these instructions will cover.
2. Once you have SCP’d the patch download to the Apps Tier server, unzip it into a directory and ensure it is owned by the Apps Tier OS User.
Verify again that you are logged in as apps OS User, on the Apps Tier server.
3. Shutdown apps environment using the adstpall script.
./adstpall.sh apps/
4. Ensure all is apps process are down before you proceed:
ps -ef | grep FND | grep
Note: This may take a while as the processes go defunct and finally stop…
5. Put system into maint mode
adadmin [return]
Take defaults…
Put in passwords for each login that as requested….
Choose option #5 to change into maintenance mode
Choose option #1 to enable maint mode
Enter twice to choose the defaults and to exit out for now, leaving it in maintenance mode.
6. After verifying that files are unzipped, cd over to the patch directory, time to run adpatch
copy the name of the driver before running… i.e.u13863902.drv, (You will use this info for the log name and then when prompted or the name of the driver as part of the patch process.)
adpatch[enter]
Choose the defaults until you hit the log file name.
name log file name after the driver, using .log for the extension.
Place in passwords for the system and apps user for the database environment when requested.
Choose the defaults for choices of number of sessions, array size, etc. and put in the driver name once prompted after verifying the patch directory path name.
7. Once the patch applies, reports successful, verify by checking the error log for the patch.
egrep -i ‘error|fail’/log/u14208483.log
If no errors outside of metadata not existing, error checks in the log, then apply any other patches required at this time…
8. Once completed with all patch applications, then bring the system back out of maintenance mode…
adadmin [return]
take defaults…
Put in passwords for each login that is required…
Choose option #5 Change maintenance mode.
Choose option #2.Disable maintenance mode.
Enter twice to exit out of application again, verifying that maintenance mode has been disabled successfully.
9. Restart the apps environment
Change over to your scripts directory, hope to your application start and stop scripts.
./adstrtal.sh apps/
Look for the successful start message, “All enabled services for this node are started.”
——————————————-
10. After logging into the apps system URL as SYSADMIN,
click on System Administrator> Concurrent> Manager > Administrator
Install the java client if requested and then a form will appear…
If you can check the concurrent mgr, then you have verified the system is up and running again.

---

### 545. Oracle Database patching

**Topic ID:** 2105

Reference: http://rafioracledba.blogspot.in/2011/05/how-to-apply-database-patches.htmlDatabase patches are of various kinds like,But in broad there are II types:

I)Patchset: To upgrade to higher version we use Database patchset. i.e For Upgrading from 10.2.0.1.0 to 10.2.0.4.0 we have to use Patchset.
II)Patchset Updates:
Patchset Updates are mainly divided into two types:1)CPU(Critical Patch Update):
Critical Patch Update, quarterly delivered by Oracle to fix security issues.2)PSU(Patch Set Update):
PatchSet Update, also quarterly delivered by Oracle,it includes CPU and a bunch of other one-off patches.
2)How to apply Patch set updates or Critical Patch Updates:
--------------------------------------------------------------------------PSUs(PatchSet Updates) or CPUs(Critical Patch Updates)are applied via opatch utility.
opatch is an interim utility for applying Database interim patches which will fix the bug in the release. For making use of the opatch utility you have to download the opatch recent version and apply as follow:Downloading and installing the latesh Opatch version:
------------------------------------------------------
Below are the steps for downloading and installing the latest opatch version.opatch is very much useful for applying the database patches to fix various bugs and it is very much important to have the latest version.
1) Please download the latest OPatch version from My Oracle Support (MOS)a) Click on the "Patches & Updates" tabb) In the "Patch Name or Number" field type 6880880c) In the "Platform" field select the relevant platformd) Click the Search button.e) Select the patch that corresponds to the Oracle release installed:6880880 Universal Installer: Patch OPatch 11.2f) Click the Download button
Once the above task is done copy the patch to $ORACLE_HOME directory and move the previous OPatch directory to separate directory in OS.We can use winscp or ftp for copying this patch from MOS to windows and
than windows to linux Box.Now,unzip this patch zip file.The files will be extracting as shown below:
Eg:
-----
$ cd $ORACLE_HOME
(If an OPatch directory already exist then move it)
$ mv Opatch /TEST/OPatch_100057
$cd $ORACLE_HOME
$ unzip p6880880_101000_LINUX64.zip
Archive: p6880880_101000_LINUX64.zip
creating: OPatch/
creating: OPatch/docs/
inflating: OPatch/docs/FAQ
inflating: OPatch/docs/README.txt
inflating: OPatch/docs/Users_Guide.txt
inflating: OPatch/docs/bt1.txt
inflating: OPatch/docs/bt2.txt
inflating: OPatch/docs/tmp
inflating: OPatch/emdpatch.pl
creating: OPatch/jlib/
inflating: OPatch/jlib/opatch.jar
inflating: OPatch/opatch
inflating: OPatch/opatch.bat
inflating: OPatch/opatch.pl[oracle@kor300949lx1 OPatch]$ opatch version
Invoking OPatch 11.2.0.1.5OPatch Version: 11.2.0.1.5OPatch succeeded.[oracle@kor300949lx1 OPatch]$ opatch apply /u01/app/8264365
Invoking OPatch 11.2.0.1.5Oracle Interim Patch Installer version 11.2.0.1.5
Copyright (c) 2010, Oracle Corporation. All rights reserved.
Oracle Home : /u01/app/oracle/product/11.1.0/db_1
Central Inventory : /u01/app/oraInventory
from : /etc/oraInst.loc
OPatch version : 11.2.0.1.5
OUI version : 11.2.0.1.0
OUI location : /u01/app/oracle/product/11.1.0/db_1/oui
Log file location : /u01/app/oracle/product/11.1.0/db_1/cfgtoollogs/opatch/opatch2011-05-16_17-18-01PM.logPatch history file: /u01/app/oracle/product/11.1.0/db_1/cfgtoollogs/opatch/opatch_history.txt
Here is your opatch latest version ready,Let us what all it consists of:
Go to the below mentioned path for all opatch commands description.
$ cd $ORACLE_HOME/OPatch/docs/
$ vi Users_Guide.txt
In general for applying any patch,We have to use the below command:
$cd $ORACLE_HOME/OPatch
$opatch apply /u01/Patch_dir/
Where :/u01/Patch_dir: The path where you have kept your Patch in the OS.

---

### 583. Concurrent output ftp delivery.

**Topic ID:** 2105

1. Create ftp user for testing:
[root@c1tstebsapp1 ~]# useradd**ftpconc**[root@c1tstebsapp1 ~]# passwd ftpconc
[root@c1tstebsapp1 ~]# su - ftpconc
[ftpconc@c1tstebsapp1 ~]$ pwd
**/home/ftpconc**

2. Execute concurrent request

---

### 546. EBS forms/iAS patching

**Topic ID:** 2105

**Reference : http://onlineappsdba.com/index.php/2006/10/01/forms-ias-and-other-component-patching-in-oracle-apps/****
****Forms Patches**: These patches update 806_TOP/10.1.3 which is top level directory 8.0.6 under ORA_TOP. Currently latest forms patch set is patchset version 18 i.e. forms server version 27. These patches are applied using shell script. You can also say that these patches are bundeled in Shell Script & you need to execute these shell scripts.

**iAS Patches**: These patches updates IAS_TOP/10.1.2 or IAS_ORACLE_HOME which is top level directory iAS under ORA_TOP. These patches are also bundled together in a shell script & you need to execute shell script after setting environment variable. In post installation steps patch might ask you to relink some executables or some other instructions mentioned in readMe of Patch.
**Instructions on Applying Forms Patches**:
Open read me of patch & follow it throughly & don’t forget to take backup of system before applying patch (Though unlike apps patch you can revert back forms patches)
Here is overview of instrcutions on applying forms patch
– Set your ORACLE_HOME to directory (By defualt ORACLE_HOME on middle tier points to 8.0.6/10.1.3 only)
– Unzip the patch to ORACLE_HOMEc on application tier (Not on Database Tier )
– Execute shell script given in patch
– Check log files for any error message
– Relink Report & Forms

---

### 548. Bounce weblogic on Demantra 12.2.6.2

**Topic ID:** 2105

login as oracle user
then execute below ,
[oracle@c1prjdem03 ~]$ /home/oracle/bin/stop_weblogic.sh
Once the script comes out , execute start script as below ,
[oracle@c1prjdem03 ~]$ /home/oracle/bin/start_weblogic.sh

---

### 549. Bouncing EBS application and database(RAC)

**Topic ID:** 2105

[appstg@c1stgebsapp1 scripts]$ adstpall.sh apps/apps
[appstg@c1stgebsapp2 scripts]$ adstpall.sh apps/apps
Check for any processes and wait for 5 mins to terminate , then run below
[orastg@c1stgebsdb1 ~]$ srvctl stop database -d STGEBS
Once the command comes out , check [orastg@c1stgebsdb1 ~]$ ps -ef|grep smon
then start the database
[orastg@c1stgebsdb1 ~]$ srvctl start database -d STGEBS
then again check , [orastg@c1stgebsdb1 ~]$ ps -ef|grep smon
Then start application ,
[appstg@c1stgebsapp1 scripts]$ adstrtal.sh apps/apps
[appstg@c1stgebsapp2 scripts]$ adstrtal.sh apps/apps
Verify application and run active user concurrent program and verify log and out , and also verify if WF mailers are up for the instance where it is supposed to be up .
Verify that all the components of mailers are up as seen in the attached screenshot WF Mailer_PRODEBS
Also , verify that OPP is up as seen in the attached screenshot OPP_PRODEBS

For further concurrent verification refer to https://docs.google.com/document/d/1Z-I6pQCYVBcXWSndesnrhL2O28TnG9I1sfwcfRpqBZg/edit

---

### 550. Creating Application User ID in EBS

**Topic ID:** 2105

Login to EBS instance as sysadmin/--->click on system administrator responsibility--->Security--->User-->Define
This will open up User define form and please enter the user as seen in the attachments and then assign the requested responsibility .

---

### 559. Workaround when Archive Area Gets Full

**Topic ID:** 1801

1. Go to the archive directory which filled up.
cd $ORACLE_HOME/dbs/arch

2. Move files to another file system that has space available.
mv 1_513*.dbf /uarch/oracle/bfss02

3. Create soft links in archive directory for all the moved archive files pointing to where the archive files were moved to.
cd /uarch/oracle/bfss02

for i in *.dbf; do
cd $ORACLE_HOME/dbs/arch
ln -s /uarch/oracle/bfss02/$i .
ls -l $i
done

---

### 558. Apex Upgrade from 5.0 to the current release 5.1.4

**Topic ID:** 2104

[oravis@af9 ~]$ cd /u01/oracle/stage[oravis@af9 stage]$ ls -ltrtotal 89980-rw-r--r-- 1 oravis dba 92038978 Jan 12 18:06 apex_5.1.4_en.zipdrwxrwxr-x 6 oravis dba 4096 Jan 12 19:58 apex[oravis@af9 stage]$ pwd/u01/oracle/stage
[oravis@af9 apex]$ sqlplus /nolog
SQL*Plus: Release 11.2.0.4.0 Production on Fri Jan 12 18:42:39 2018
Copyright (c) 1982, 2013, Oracle. All rights reserved.
SQL> CONNECT SYS as SYSDBAEnter password:Connected.SQL> @apexins.sql XXAPEX_TS XXAPEX_TS TEMP2 /i/
Run below for 11g databases for creating ACLs
SQL> conn sys as sysdbaEnter password:Connected.SQL> DECLAREACL_PATH VARCHAR2(4000);BEGIN-- Look for the ACL currently assigned to '*' and give APEX_050100-- the "connect" privilege if APEX_050100 does not have the privilege yet.
SELECT ACL INTO ACL_PATH FROM DBA_NETWORK_ACLS2 3 4 5 6 7 8 WHERE HOST = '*' AND LOWER_PORT IS NULL AND UPPER_PORT IS NULL;
IF DBMS_NETWORK_ACL_ADMIN.CHECK_PRIVILEGE(ACL_PATH, 'APEX_050100','connect') IS NULL THENDBMS_NETWORK_ACL_ADMIN.ADD_PRIVILEGE(ACL_PATH,'APEX_050100', TRUE, 'connect');END IF;
9 10 11 12 13 14 15 16 EXCEPTION-- When no ACL has been assigned to '*'.WHEN NO_DATA_FOUND THENDBMS_NETWORK_ACL_ADMIN.CREATE_ACL('power_users.xml','ACL that lets power users to connect to everywhere','APEX_050100', TRUE, 'connect');DBMS_NETWORK_ACL_ADMIN.ASSIGN_ACL('power_users.xml','*');END;/
Copy images
cp -rf images /u01/10gcomp/oracle/product/10.2.0/db_1/Apache

---

### 638. Mail deliver issue

**Topic ID:** 1801

**Title**: Unable to send e-mail from GRACE_AF schema

**References**:

**Symptoms (if applicable)**:

**Causes (if applicable)**: ACL not allowing

**Procedure or Solution Description**:

Added privilege for GRACE_AF schema to the mail_smtp.xml ACL.

BEGIN
DBMS_NETWORK_ACL_ADMIN.add_privilege (
acl => 'acl_smtp.xml',
principal => 'GRACE_AF',
is_grant => TRUE,
privilege => 'resolve',
position => NULL,
start_date => NULL,
end_date => NULL);
END;
/
2 3 4 5 6 7 8 9 10 11

PL/SQL procedure successfully completed.

SQL> SQL> ed
Wrote file afiedt.buf

1 BEGIN
2 DBMS_NETWORK_ACL_ADMIN.add_privilege (
3 acl => 'acl_smtp.xml',
4 principal => 'GRACE_AF',
5 is_grant => TRUE,
6 privilege => 'connect',
7 position => NULL,
8 start_date => NULL,
9 end_date => NULL);
10* END;
SQL> /
SQL> Commit;

Note: Remember to execute APEX_MAIL.PUSH_QUEUE to ensure mail is sent.

---

### 552. Steps to resolve ACL error with Demantra schema

**Topic ID:** 2105

[orastg@c1stgascp1 admin]$ sqlplus /nolog
SQL*Plus: Release 11.2.0.4.0 Production on Fri Oct 13 00:47:51 2017
Copyright (c) 1982, 2013, Oracle. All rights reserved.
SQL> conn /as sysdbaConnected.SQL> @sys_grants.sql DEMANTRA_2 ACL_DEFAULT ACL_DEFAULT

---

### 553. Java Upgrade(Configurator issue)

**Topic ID:** 2105

Apply ebs patch 21624242

Link pre-req

[root@c1devebsapp1 lib]# mv libXtst.so.6 libXtst.so.6.ori

[root@c1devebsapp1 lib]# ln -s /usr/X11R6/lib/libXtst.so.6.1 /usr/lib/libXtst.so.6

[root@c1devebsapp1 lib]# ls -lth libXtst.so.6*

lrwxrwxrwx 1 root root 29 Sep 1 14:16 libXtst.so.6 -> /usr/X11R6/lib/libXtst.so.6.1

lrwxrwxrwx 1 root root 16 Mar 10 2015 libXtst.so.6.ori -> libXtst.so.6.1.0

lrwxrwxrwx 1 root root 16 Jan 28 2013 libXtst.so.6.SR3-7605092111 -> libXtst.so.6.1.0

-rwxr-xr-x 1 root root 19K Jun 6 2007 libXtst.so.6.1.0

OUI Patch

-rw-r--r-- 1 appdev oinstall 38M Sep 1 14:52 p6640838_10106_Linux-x86-64.zip

[appdev@c1devebsapp1 10.1.2]$ pwd

/u01/oracle/DEVEBS/apps/tech_st/10.1.2

[appdev@c1devebsapp1 10.1.2]$ mv OPatch OPatch.20170901

[appdev@c1devebsapp1 install]$ pwd

/home/appdev/cd/Disk1/install

Apply forms patch 14825718

Apply forms patch 17303472

For patch 17303472 modify /home/appstg/collaborator_patches/17303472/etc/config/inventory

replacefor

[appdev@c1devebsapp1 17303472]$ opatch apply

Oracle Interim Patch Installer version 1.0.0.0.61

Copyright (c) 2009 Oracle Corporation. All Rights Reserved..

Oracle recommends you to use the latest OPatch version

and read the OPatch documentation available in the OPatch/docs

directory for usage. For information about the latest OPatch and

other support-related issues, refer to document ID 293369.1

available on My Oracle Support (https://myoraclesupport.oracle.com)

Oracle Home: /u01/oracle/DEVEBS/apps/tech_st/10.1.2

Oracle Home Inventory : /u01/oracle/DEVEBS/apps/tech_st/10.1.2/inventory

Central Inventory: /u01/oracle/oraInventory

from: /etc/oraInst.loc

OUI location: /u01/oracle/DEVEBS/apps/tech_st/10.1.2/oui

OUI shared library: /u01/oracle/DEVEBS/apps/tech_st/10.1.2/oui/lib/linux/liboraInstaller.so

Java location: /u01/oracle/DEVEBS/apps/tech_st/10.1.2/jre/1.4.2/bin/java

Log file location: /u01/oracle/DEVEBS/apps/tech_st/10.1.2/.patch_storage//*.log

Creating log file "/u01/oracle/DEVEBS/apps/tech_st/10.1.2/.patch_storage/17303472/Apply_17303472_09-01-2017_15-56-41.log"

Invoking fuser to check for active processes.

Patch "17303472" overlays " 14825718 ". Conflict check between them is skipped.

Backing up comps.xml ...

OPatch detected non-cluster Oracle Home from the inventory and will patch the local system only.

Please shut down Oracle instances running out of this ORACLE_HOME

(Oracle Home = /u01/oracle/DEVEBS/apps/tech_st/10.1.2)

Is this system ready for updating?

Please respond Y|N >

Y

Applying patch 17303472...

Patching archive files...

Patching copy files...

Running make for target sharedlib.

Running make for target install.

Inventory is good and does not have any dangling patches.

Updating inventory...

OPATCH_JAVA_ERROR : UpdateInventory got errors calling update inventory, oracle.sysman.oii.oiii.OiiiOneoffException: File /u01/oracle/DEVEBS/apps/tech_st/10.1.2/forms/j2ee/formsapp.ear is already patched by 14825718.

Files on system are patched but Inventory Update has failed. Please run 'opatch lsinventory' to check if the patch has been recorded in Inventory.

(1)

Verifying patch...

Verifying that patch ID is in Oracle Home inventory.

INVENTORY PROBLEM: Patch 17303472 is not present in Oracle Home inventory.

Verifying copy files.

Comparing "/home/appdev/17303472/files/forms/j2ee/formsapp.ear" and "/u01/oracle/DEVEBS/apps/tech_st/10.1.2/forms/j2ee/formsapp.ear"

Comparing "/home/appdev/17303472/files/jlib/ewt3.jar" and "/u01/oracle/DEVEBS/apps/tech_st/10.1.2/jlib/ewt3.jar"

Comparing "/home/appdev/17303472/files/forms/java/frmall.jar" and "/u01/oracle/DEVEBS/apps/tech_st/10.1.2/forms/java/frmall.jar"

Comparing "/home/appdev/17303472/files/forms/java/frmall_jinit.jar" and "/u01/oracle/DEVEBS/apps/tech_st/10.1.2/forms/java/frmall_jinit.jar"

Verifying archive files.

Comparing "/home/appdev/17303472/files/lib/libiwfw.a/iwvcx.o" and "/u01/oracle/DEVEBS/apps/tech_st/10.1.2/.patch_storage/verify/lib/libiwfw.a/iwvcx.o"

Comparing "/home/appdev/17303472/files/lib/libiwfw.a/iwwnx.o" and "/u01/oracle/DEVEBS/apps/tech_st/10.1.2/.patch_storage/verify/lib/libiwfw.a/iwwnx.o"

Comparing "/home/appdev/17303472/files/lib/libiwfw.a/iwwnec.o" and "/u01/oracle/DEVEBS/apps/tech_st/10.1.2/.patch_storage/verify/lib/libiwfw.a/iwwnec.o"

Comparing "/home/appdev/17303472/files/lib/libiwfw.a/iweieh.o" and "/u01/oracle/DEVEBS/apps/tech_st/10.1.2/.patch_storage/verify/lib/libiwfw.a/iweieh.o"

Comparing "/home/appdev/17303472/files/lib/libix.a/ixvw.o" and "/u01/oracle/DEVEBS/apps/tech_st/10.1.2/.patch_storage/verify/lib/libix.a/ixvw.o"

Comparing "/home/appdev/17303472/files/lib/libix.a/ixwn.o" and "/u01/oracle/DEVEBS/apps/tech_st/10.1.2/.patch_storage/verify/lib/libix.a/ixwn.o"

Comparing "/home/appdev/17303472/files/lib/libix.a/ixdn.o" and "/u01/oracle/DEVEBS/apps/tech_st/10.1.2/.patch_storage/verify/lib/libix.a/ixdn.o"

Comparing "/home/appdev/17303472/files/lib/libixw.a/ixvw.o" and "/u01/oracle/DEVEBS/apps/tech_st/10.1.2/.patch_

... [Content truncated for readability]

---

### 554. Modifying Spfile and bounce the RAC database:

**Topic ID:** 1801

**Modifying Spfile and bounce the database:****
****METHOD 1**:
Simply issue the following SQL statement from any of the nodes
ALTER SYSTEM SET=scope=spfile;
There are 3 possible values for the 'scope' clause in this statement:
1. MEMORY: The change is immediate but will not be available after next startup or reboot of the instance.
2. SPFILE: The change will be effective in SPFILE only and will be available after next startup or reboot
3. BOTH: The change is effective for both MEMORY and SPFILE and will be available after next startup also.
Default is BOTH
You could also specify another clause called 'sid' at the end of the above ALTER statement which is specifically meant for a RAC database. This is to specify the instance where you want to make that change. For example,
ALTER SYSTEM SET = scope=spfile sid='*';
means that this particular change in the parameter will happen on all instances after rebooting them (Default is '*')
Also alter system set parameter for spfile changes can be issued during database in nomount state
**METHOD 2**:
Another method to change a parameter in the spfile is to export it to a pfile, change it and then create a new spfile.
Steps involved:
1. On one instance, create a pfile from the existing spfile: SQL> CREATE PFILE FROM SPFILE. This will create a pfile called initSID.ora at /$ORACLE_HOME/dbs
2. Edit the resulting PFILE initSID.ora in a vi editor (Add/alter the required parameter). You should use *. so that this parameter value is applied to all instances
3. Now shutdown all the instances
4. startup the instance (and hence the database) where you created and altered the pfile using this pfile only
STARTUP PFILE=$ORACLE_HOME/dbs/initSID.ora
Do not start other instances yet
5. Now through this instance only, create a new spfile (which can be at a common location being accesses by all instances)
CREATE SPFILE='commom_location/spfile.ora' FROM PFILE='$ORACLE_HOME/dbs/initSID.ora';
This will overwrite the existing spfile with the spfile which has the new/altered parameter
6. Now shutdown this instance again
7. Now startup normally all the instances without PFILE or SPFILE option:
STARTUP
By default startup will now consider the new spfile
8. To confirm that the new parameters have been set/removed, issue following sql statement from all 3 instances
SHOW PARAMETERThe method would not be much different if this is a single instance database instead of a RAC database
(In Step#7 you would be starting only that single instance)
**srvctl commands in Oracle RAC:**
To start the databases on all instances at once
$srvctl start database -d db_name
To start the databases on all instances at once in nomount state
srvctl start database -d db_name -o nomount
To start the databases on all instances at once in mount state
srvctl start database -d db_name -o mount
To stop the databases on all instances with different options
srvctl stop database -d db_name [-o normal]
srvctl stop database -d db_name -o transactional
srvctl stop database -d db_name -o immediate
srvctl stop database -d db_name -o abort
To find the database status
srvctl status database -d db_name -- shows status of all the instances in RAC/non-RAC (running/not running)
srvctl commands at instance level:
srvctl start instance -d db_name -i inst_names [-o start_options] -- to start specific instance

ex: srvctl start instance -d STGEBS -i STGEBS1 -o nomountsrvctl stop instance -d db_name -i inst_names [-o start_options] -- to stop specific instance

ex: srvctl stop instance -d STGEBS -i STGEBS1 -o immediatesrvctl status inst –d racdb -i racdb2 -- to find status of RAC instance

ex: srvctl status inst –d STGEBS -i STGEBS2
srvctl commands with node_name option:
srvctl start instance -d db_unique_name {-n node_name -i "instance_name_list"} [-o start_options]
srvctl stop instance -d db_unique_name {[-n node_name]|[-i "instance_name_list"]} [-o stop_options] [-f]
ex: srvctl start instance -d STGEBS -n c1stgebsdb2
srvctl stop inst -d STGEBS -n c1stgebsdb1
Also srvctl commands can be used for service, listener configuration, ASM databases control, scan_listener, nodeapps
please review the below attached file for more options and new options in srvctl.

---

### 556. Not able to login business modeler FIX

**Topic ID:** 2105

Login to Db and kill modeler.exe session:

SQL> select sid,serial#,program,module,machine,osuser from v$session where username='DEMANTRA_2';

SID SERIAL# PROGRAM
---------- ---------- ------------------------------------------------
MODULE
----------------------------------------------------------------
MACHINE
----------------------------------------------------------------
OSUSER
------------------------------
6 747 JDBC Thin Client
JDBC Thin Client
c1stgebsdem1.nanometrics.com
oracle

SID SERIAL# PROGRAM
---------- ---------- ------------------------------------------------
MODULE
----------------------------------------------------------------
MACHINE
----------------------------------------------------------------
OSUSER
------------------------------
357 64145 JDBC Thin Client
JDBC Thin Client
c1stgebsdem1.nanometrics.com
oracle

SID SERIAL# PROGRAM
---------- ---------- ------------------------------------------------
MODULE
----------------------------------------------------------------
MACHINE
----------------------------------------------------------------
OSUSER
------------------------------
688 20689 modeler.exe
modeler.exe
WORKGROUP\\C1STGDEM2
shailesh

---

### 561. Sync DR with Primary and trouble shooting

**Topic ID:** 1801

Some times there are issues with DR where we dont see MRP and RFS process running , Need to troubleshoot in the following order
1) Verfiy the mount point sizes on DR server and make sure it is not 100%
2) verify if there is no issue with archive logs which got deleted on source during the same time while DR RFS process is copying to target DR database
3) if both above are verfied and did not find any issue with steps, shutdown the DR database and startup as show belowSQL> startup nomount
ORACLE instance started.
Total System Global Area 4294967296 bytes
Fixed Size 2932632 bytes
Variable Size 2449473640 bytes
Database Buffers 1828716544 bytes
Redo Buffers 13844480 bytes
SQL> show parameter standby
NAME TYPE VALUE
------------------------------------ ----------- ------------------------------
standby_archive_dest string ?/dbs/arch
standby_file_management string AUTO
SQL> show parameter fal
NAME TYPE VALUE
------------------------------------ ----------- ------------------------------
_optimizer_false_filter_pred_pullup boolean TRUE
fal_client string BFSS04
fal_server string BFSS04
SQL> show parameter db_unique
NAME TYPE VALUE
------------------------------------ ----------- ------------------------------
db_unique_name string BFSS04_DR
SQL> show parameter log_archive_max_processes
NAME TYPE VALUE
------------------------------------ ----------- ------------------------------
log_archive_max_processes integer 10
SQL> alter database mount standby database;
Database altered.
SQL> alter database recover managed standby database disconnect from session;
Database altered.
SQL> SELECT PROCESS, STATUS, THREAD#, SEQUENCE#, BLOCK#, BLOCKS FROM V$MANAGED_STANDBY;Make sure ARCH, RFS and MRP process are running fine on DR database when executed above sql in DR database
If any one of the processes is not running review the alert logIf RFS process is not running check the ARCHIVE directory and make sure its not full and 100% occupied and restart DR database after clearing spaceIf MRP process is not running check alert log for any issues with archives if corrupted are not migrated properly from Primary to DR databaseSQL> SELECT PROCESS, STATUS, THREAD#, SEQUENCE#, BLOCK#, BLOCKS FROM V$MANAGED_STANDBY;
PROCESS STATUS THREAD# SEQUENCE# BLOCK# BLOCKS
--------- ------------ ---------- ---------- ---------- ----------
ARCH CLOSING 1 3661 10240 101
ARCH CONNECTED 0 0 0 0
ARCH CONNECTED 0 0 0 0
ARCH CONNECTED 0 0 0 0
RFS IDLE 1 3662 179 1
RFS IDLE 0 0 0 0
6 rows selected.
SQL> shut immediate
ORA-01109: database not openDatabase dismounted.
ORACLE instance shut down.
SQL> exit
Disconnected from Oracle Database 12c Enterprise Edition Release 12.1.0.2.0 - 64bit Production
With the Partitioning, OLAP, Advanced Analytics and Real Application Testing options
[orabfs05@af261 arch]$ ls
1_3654_955546833.dbf 1_3656_955546833.dbf 1_3658_955546833.dbf 1_3660_955546833.dbf
1_3655_955546833.dbf 1_3657_955546833.dbf 1_3659_955546833.dbf 1_3661_955546833.dbf
[orabfs05@af261 arch]$ scp 1_3655_955546833.dbf orabfs05@af261-dr:/u02/oracle/bfss05/product/12.1/dbs/arch
1_3655_955546833.dbf 100% 2807KB 701.6KB/s 00:04
[orabfs05@af261 arch]$ scp 1_3654_955546833.dbf orabfs05@af261-dr:/u02/oracle/bfss05/product/12.1/dbs/arch
1_3654_955546833.dbf 100% 2560 2.5KB/s 00:00
[orabfs05@af261-dr ~]$ sqlplus "/as sysdba"
SQL*Plus: Release 12.1.0.2.0 Production on Sun Feb 4 17:06:58 2018
Copyright (c) 1982, 2014, Oracle. All rights reserved.
Connected to an idle instance.
SQL> startup nomount
ORACLE instance started.
Total System Global Area 2147483648 bytes
Fixed Size 2926472 bytes
Variable Size 1476397176 bytes
Database Buffers 654311424 bytes
Redo Buffers 13848576 bytes
SQL> alter database mount standby database;
Database altered.
SQL> alter database recover managed standby database disconnect from session;
Database altered.
SQL> SELECT PROCESS, STATUS, THREAD#, SEQUENCE#, BLOCK#, BLOCKS FROM V$MANAGED_STANDBY;
PROCESS STATUS THREAD# SEQUENCE# BLOCK# BLOCKS
--------- ------------ ---------- ---------- ---------- ----------
ARCH CLOSING 1 3662 1 239
ARCH CONNECTED 0 0 0 0
ARCH CONNECTED 0 0 0 0
ARCH CONNECTED 0 0 0 0
RFS IDLE 1 3663 15 1
RFS IDLE 0 0 0 0
MRP0 APPLYING_LOG 1 3656 223707 223708
7 rows selected.Still if MRP process did not start , Apply the archives shipped manaully on DR as per below steps and restart DR databasesqlplus "/as sysdba"SQL*Plus: Release 12.1.0.2.0 Production on Sat May 19 21:06:01 2018Copyright (c) 1982, 2014, Oracle. All rights reserved.Connected to an idle instance.SQL> startup mount
ORACLE instance started.Total System Global Area 2147483648 bytes
Fixed Size 2926472 bytes
Variable Size 1023412344 bytes
Database Buffers 1107296256 bytes
Redo Buffers 13848576 bytes
Database mounted.
SQL> recover standby database;
ORA-00279: change 858589526 generated at 05/19/2018 17:52:39 needed for thread
1
ORA-00289: suggestion :
/u02/oracle/bfss02/product/12.1/dbs/arch/1_26162_935077855.dbf
ORA-00280: change 858589526 for thread 1 is in sequence #

... [Content truncated for readability]

---

### 562. Relink using adadmin/manually in EBS

**Topic ID:** 2105

Problem: Relink file mismatch
References:
Symptoms:Issue observed with MSC, MSO and MSR executables inbetween lib and bin
Causes: version mismatch observed for MSONEW and MSRNEW executables under lib and bin directoriesComparing file msocnew.ppc in MSO_TOP/bin/MSONEW and $MSO_TOP/lib/libmso.a ...
-------------------------------------------------------------------------------------
$Header: msocnew.ppc 120.100.12010000.8 2008/09/08 13:33:37 emalea ship $
$Header: msocnew.ppc 120.100.12010000.123 2015/06/12 01:56:39 lonma ship $Comparing file msrcnew.ppc in MSR_TOP/bin/MSRNEW and $MSR_TOP/lib/libmsr.a ...
------------------------------------------------------------------------------------
$Header: msrcnew.ppc 120.83.12010000.11 2009/01/22 23:45:15 musriniv ship $
$Header: msrcnew.ppc 120.83.12010000.86 2015/06/12 01:57:09 lonma ship $**
Solution:some times running relink using adadmin may not resolve the issue hence using the adrelink command line we will require to relink the executablesRELINK INSTRUCTIONS
1. Use adadmin / Maintain Applications Files menu / Relink Applications programs
2. Relink the executables for MSC, MSO, MSR
check the versions after adadmin and compare if they match , for verifying you can use both apscheck.sql or manually by checking version as belowstrings -a MSONEW | grep -i '$Header: msocnew.ppc'strings -a $MSO_TOP/lib/libmso.a | grep -i '$Header: msocnew.ppc'
if the issue is not fixed run manually using adrelink for all required executables
Login to the system as applmgr user
Go to $MSC_TOP/bin and run the following:
adrelink.sh force=y ranlib=y "msc MSCNEW"
adrelink.sh force=y ranlib=y "msc MSCNSP"
adrelink.sh force=y ranlib=y "msc MSCMON"
adrelink.sh force=y ranlib=y "msc MSCCPP"
adrelink.sh force=y ranlib=y "msc MSCPCL"
adrelink.sh force=y ranlib=y "msc MSCPDW"
adrelink.sh force=y ranlib=y "msc MSCPRG"
adrelink.sh force=y ranlib=y "msc MSCSDW"
adrelink.sh force=y ranlib=y "msc MSCSLD"
adrelink.sh force=y ranlib=y "msc MSCXGCAL"
adrelink.sh force=y ranlib=y "msc MSCNSPNM"

If MSO is installed then run from
$MSO_TOP/bin
adrelink.sh force=y ranlib=y "mso MSONEW"

IF MSR is installed then run from
$MSR_TOP/bin
adrelink.sh force=y ranlib=y "msr MSRNEW"
*
*
Title: Run apscheck

References: https://support.oracle.com/epmos/faces/DocumentDisplay?_afrLoop=311741917068399&parent=SrDetailText&sourceId=3-16812190861&id=246150.1&_afrWindowMode=0&_adf.ctrl-state=c7bnepil_222

Procedure or Description:
apscheck.sql from sqlplus. See notes.

---

### 519. Demantra clone document

**Topic ID:** 901

Demantra clone document

Demantra Cloning Procedure

Reference:Tips on Cloning a Demantra Schema/Database (ex. refreshing the DEV environment with PRD data)(Doc ID 856857.1)

How to check connection parameters for a Demantra installation? 2. How to create a CLONE? Quick Steps for Cloning Demantra Environment(Doc ID 1354934.1)

## **1.Introduction**

This document is based on Oracle’s Demantra clone reference document for Apps DBA Team to perform cloning of regular Development Instance.

1.1.****Glossary**

**Acronyms Used**

**Meaning**

Oracle Apps

Oracle Applications

TAR

Technical Assistance Request

DB

Database

Apps Tier

Application Tier

Ver

Version

DBA

Apps Database Administrator

v/s

Versus

e.g.

Example

Node

Machine which is having part of services of Oracle Application

1.2.****Our Understanding Assumptions about DemantraInstance Refresh**

vRefresh of Demantra QAInstance will be done from Demantra PROD'sLatest Schema Backup/refresh of DB. This schema resides in ASCP Database in production.

vFor Demantra Cloning activity we only refresh the Database/Demantra schema.

vWe have shared mount point which is used for backups, is shared with destination so there will be no necessity to transfer the file to destination separately.

vDemantra Schema dump must be import to ASCP PRJ2 Database (PRJ2ASCP)

## **2.Refresh Details and Performing Pre-clone steps**

## **2.1.Nodes Details**

**Cloning From Demantra PROD Instanceto Demantra QA****Instance Nodes Diagram**

****

****

## **2.2.Apps DBA Pre-clone steps**

vCalculating required (Schema) sizes in target server based on source instance(ascp prod) directory sizes.

vCoordinating with OS sysadmin to create same size and name of file systems and directories.

vPerform ASCP clone steps as required and bring up the ASCP services

vNo Need to performInstallation of Demantra software/weblogic on both Windows server and Linux ASCP server

**2.2.1Pre-clone steps at source server**

****

**Perform Pre-Clone in**Source Tier****(DB (10.100.100.43):

Create Demantra Schema backup using expdp utility from production ASCP database and copy the backup dumpfile to destination database server

Login to database server as owner of the database

expdp system/xxxx dumpfile=PROD_EXP_OF_DM_SCHEMA_%U.dmp Directory=DM_SCHEMA logfile=PROD_EXP_OF_DM_SCHEMA.log schemas=DM PARALLEL=4

****

And Give permissions to read this dumpfile to other users

**2.2.2Pre-clone steps at destination server (****10.100.100.93)**

****

**Shutdown the Application services for Target instance:**

Login to to demantra application Server (10.100.100.93) as application server owner"oradev"

$ sudo su - oradev

**[oradev@c1p2devascp1 ~]$ . set_demantra_env.env**

**Stop :**

cd/u01/Demantra/fmw/user_projects/domains/demantra/bin/

./stopWebLogic.sh

**Start**

cd/u01/Demantra/fmw/user_projects/domains/demantra/bin/

nohup ./startWebLogic.sh&

To Stop/Start the Engine starter server

--- Stop Enginestarter Server

ps -ef | grep EngineStarter | grep -v grep | awk '{print $2}' | xargs kill -9

--- Start Enginestarter Server

Go to location /u01/Demantra/fmw/Engine/lib and execute below command

nohup ./EngineStarter 12345 &

-- Start / Stop EngineManager (Not using any more since Workflow is doing this):

Start Engine Manager in Batch mode

http://c1p2devascp1.nanometrics.com:7010/engineManager/EngineManagerStarterServlet?command=start&mode=1&profile_id=1

RestartEngine Manager in Batch mode

http://c1p2devascp1.nanometrics.com:7010/engineManager/EngineManagerStarterServlet?command=restart&mode=1&profile_id=1

Stop Engine Manager in Batch Mode:

http://c1p2devascp1.nanometrics.com:7010/engineManager/EngineManagerStarterServlet?command=stop&mode=1&profile_id=1

Stop the Weblogic services and nodemanager and Engine services

**Drop Existing Demantra Schema from Target database**

****Login to ASCP Database Node as database owner 'oradev' and login to to database as sysdba

$ sudo su - oradev

$ sqlplus / as sysdba

SQL>drop userDemantra cascade;

*** In Nanometrics Process we are not exporting and importing of Demantra Schema alone, we are performing the complete ASCP database clone along with Applications, We**are not**re-installing DEV Demantra on both windows and linux server after initial setup cloning of DEV/PRJ ASCP. ***

## **3.Refresh/Import Demantra Schema to Destination**

Use import utility to import the Demantra Schema

impdp system/xxxxx dumpfile=TST_EXP_OF_DM_SCHEMA_%U.dmp Directory=DM_SCHEMA_TST logfile=TST_IMP_OF_DM_SCHEMA_xxxx.log PARALLEL=4

## **4.Post Clone Steps**

## **4.1.Demantra Post Clone Steps**

Change profileApps******MSD_DEM: Host URL**

Tohttp://c1tstascp1.nanometrics.com:7010/demantra --- for TESTASCP instance

Update demantra db password :

SQL> alter user demantra identified by demantra123 ;

User altered.

SQL> conn demantra/demantra123

Connected.

SQL> UPDATE aps_params

SET value_string = encrypt_string('demantra123')

WHERE pname = 'database.password';

2

... [Content truncated for readability]

---

### 606. Kill run away SQL in database

**Topic ID:** 1801

**Title**: Kill run away delete

**References**:https://stackoverflow.com/questions/622289/how-to-check-oracle-database-for-long-running-queries

**Procedure or Description**:

1. Check transaction.
lock.sql:

```
select
  object_name, 
  object_type, 
  session_id, 
  type,         -- Type or system/user lock
  lmode,        -- lock mode in which session holds lock
  request, 
  block, 
  ctime         -- Time since current mode was granted
from
  v$locked_object, all_objects, v$lock
where
  v$locked_object.object_id = all_objects.object_id AND
  v$lock.id1 = all_objects.object_id AND
  v$lock.sid = v$locked_object.session_id
order by
  session_id, ctime desc, object_name
/

```
SQL> @lock

OBJECT_NAME OBJECT_TYPE SESSION_ID TY LMODE
-------------------------------------------------------------------------------------------------------------------------------- ----------------------- ---------- -- ----------
REQUEST BLOCK CTIME
---------- ---------- ----------
CLIENT_BF_MAPPING_HIST TABLE 24 TM 3
0 0 2690

SQL> select S.USERNAME, s.sid, s.osuser, t.sql_id, sql_text
from v$sqltext_with_newlines t,V$SESSION s
where t.address =s.sql_address
and t.hash_value = s.sql_hash_value
and s.status = 'ACTIVE'
and s.username<> 'SYSTEM'
order by s.sid,t.piece 2 3 4 5 6 7
8 /

USERNAME SID OSUSER SQL_ID SQL_TEXT
------------------------------ ---------- ------------------------------ ------------- ----------------------------------------------------------------
SYS 15 orabfs06 b4wss0t2srysz select S.USERNAME, s.sid, s.osuser, t.sql_id, sql_text
from v$s

SYS 15 orabfs06 b4wss0t2srysz qltext_with_newlines t,V$SESSION s
where t.address =s.sql_addres

SYS 15 orabfs06 b4wss0t2srysz s
and t.hash_value = s.sql_hash_value
and s.status = 'ACTIVE'
an

USERNAME SID OSUSER SQL_ID SQL_TEXT
------------------------------ ---------- ------------------------------ ------------- ----------------------------------------------------------------
SYS 15 orabfs06 b4wss0t2srysz d s.username<> 'SYSTEM'
order by s.sid,t.piece

BFS 24 Will Severin 43hx71xy3atah delete from client_bf_mapping_hist
where CLIENT_BF_MAPPING_ID in

2. Get SID and serial #:
select sid, serial#, status, osuser from v$session where sid = 24;

3. Kill problem session.
alter system kill session 'sid, serial#' immediate;

---

### 467. Ryman clone procedure

**Topic ID:** 2105

DB Cloning Notes :

-- Update 12/21/2018 : Added boomi user creation.

For DB cloning the preferred method is rman duplicate , in case that controlfile needs to bre recreated generate a fresh dump of controlfile to avoid missing datafiles issues.

Startup uat in nomunt state

--> change "until time"

rman target sys/VJehMQj6q_3X8nGI@PRD auxiliary / log=dup_uat.log

run {
allocate channel C1 device type disk;
allocate auxiliary channel C2 device type disk;
allocate auxiliary channel C3 device type disk;
set until time "to_date('2017-04-22:80:00:00','YYYY-MM-DD:hh24:mi:ss')";
DUPLICATE TARGET DATABASE TO UAT;
release channel C1;
release channel C2;
release channel C3;
}

After change apps pasword update weblogic datasource:

FIX ADOP issue pointing to prod:

**SQL> create table ad_adop_sessions_bkp as select * from ad_adop_sessions;**
****

**Table created.**
****

**SQL> !hostname**

**rhtstebsapp2.appsforte.com**
****

**SQL> update ad_adop_sessions set NODE_NAME='rhtstebsapp2' ;**
****

**17 rows updated.**
****

**SQL> commit ;**
****

**Commit complete.**
****

**SQL>**
****

**→ adop phase=abort,cleanup_full**

**→ adop phase=fs_clone**

****

****

**---**

****

****

****

**Please check for any active patching sessions in source before starting db refresh as it might give issue when starting Weblogic on cloned instance .**

**[applprd@rhapp1 ~]$ adop -status**

**If it returns any active patching session abort that session as below and run preclone again and switch an archive log file and apply the archive log till the one generated with manual switch .**

**adop phase=abort,cleanup cleanup_mode=full**

When cloning databse, make sure to use upper case SID, i.e.UAT.

****

****

****
--- Update procedure for 12.2 (15-MAY-2017)

1. Update symbolic link in interface dir :

[apptest@rhtstebsapp2 12.0.0]$ cd /u01/oracle/uat/fs2/EBSapps/appl/xxget/12.0.0
[apptest@rhtstebsapp2 12.0.0]$ rm interface
[apptest@rhtstebsapp2 12.0.0]$ ln -s /u01/oracle/uat/fs_ne/EBSapps/appl/xxget/12.0.0/interface .

[apptest@rhtstebsapp2 12.0.0]$ cd /u01/oracle/uat/fs1/EBSapps/appl/xxget/12.0.0
[apptest@rhtstebsapp2 12.0.0]$ rm interface
[apptest@rhtstebsapp2 12.0.0]$ ln -s /u01/oracle/uat/fs_ne/EBSapps/appl/xxget/12.0.0/interface .

2. Update hostname/user in interface manager programs : xxget_interface_manager_submit and xxget_im_compeat_submit.prog

**Make sure to update both filesystem FS1 and FS2 ( to avoid issues after cutover)**

[apptest@rhtstebsapp2 bin]$ pwd
/u01/oracle/uat/fs2/EBSapps/appl/xxget/12.0.0/bin
[apptest@rhtstebsapp2 bin]$ diff xxget_interface_manager_submit.bkp.20170515 xxget_interface_manager_submit
18,19c18,21
<DB_NODE=rhdb1
<DB_USER=oraprd
---
> #DB_NODE=rhdb1
> #DB_USER=oraprd**
> DB_NODE=rhtstebsdb2
> DB_USER=oratest**[apptest@rhtstebsapp2 bin]$

[apptest@rhtstebsapp2 bin]$ pwd
/u01/oracle/uat/fs2/EBSapps/appl/xxget/12.0.0/bin
[apptest@rhtstebsapp2 bin]$ diff xxget_im_compeat_submit.prog.bkp.20170515 xxget_im_compeat_submit.prog
18,19c18,21
<DB_NODE=rhdb1
<DB_USER=oraprd
---
> #DB_NODE=rhdb1
> #DB_USER=oraprd**
> DB_NODE=rhtstebsdb2
> DB_USER=oratest**[apptest@rhtstebsapp2 bin]$

**-- Change Java Schema color to "khaki"**

# This document is the procedure to perform cloning for Ryman.

1. Restore db on db tier
2. Clone db tier
3. Clone apps tier
3.1 Backup $CONTEXT_FILE, env files and tns files
$ cd $HOME/util/clone
$ cp -p $CONTEXT_FILE .
$ cp -p $APPL_TOP/*<$CONTEXT_NAME>*.env
$ cp -p $TNS_ADMIN/*.ora .
3.2 Clean out existing apps binaries
$ cd $APPL_TOP/..
$ nohup rm -rf appl comn &
$ cd $ORACLE_HOME/..
$ nohup rm -rf 10.1.2 10.1.3 &
3.3 Copy apps binaries from production
$ su - applprd
$ cd $ADMIN_SCRIPTS_HOME
$ adpreclone.pl appsTier
$ cd $APPL_TOP/..
$ copy1.sh
$ copy2.sh
$ cd $ORACLE_HOME/..
$ copy1.sh
$ copy2.sh
3.4 Clone apps on target server
$ su - apptest
[apptest@rhtstebsapp2 bin]$ perl adcfgclone.pl appsTier

Copyright (c) 2002 Oracle Corporation
Redwood Shores, California, USA

Oracle Applications Rapid Clone

Version 12.0.0

adcfgclone Version 120.31.12010000.8

Enter the APPS password :

Running:
/u01/oracle/uat/apps/apps_st/comn/clone/bin/../jre/bin/java -Xmx600M -cp /u01/oracle/uat/apps/apps_st/comn/clone/jlib/java:/u01/oracle/uat/apps/apps_st/comn/clone/jlib/xmlparserv2.jar:/u01/oracle/uat/apps/apps_st/comn/clone/jlib/ojdbc14.jar oracle.apps.ad.context.CloneContext -e /u01/oracle/uat/apps/apps_st/comn/clone/bin/../context/apps/CTXORIG.xml -validate -pairsfile /tmp/adpairsfile_3381.lst -stage /u01/oracle/uat/apps/apps_st/comn/clone 2> /tmp/adcfgclone_3381.err; echo $? > /tmp/adcfgclone_3381.res

Log file located at /u01/oracle/uat/apps/apps_st/comn/clone/bin/CloneContext_0106160452.log

Provide the values required for creation of the new APPL_TOP Context file.

Target System Hostname (virtual or normal) [rhtstebsapp2] :

Target System Database SID : UAT

Target System Database Server Node [rhtstebsapp2] : rhtstebsdb2

Target System Database Domain Name [appshosting.com] :

Target S

... [Content truncated for readability]

---

### 600. Copy the GOLDB Workspace into a new workspace called EVOKE with everything in it

**Topic ID:** 2104

**Title**: Copy the GOLDB workspace into a new workspace called EVOKE with all the applications and data inside

**References**:
https://docs.google.com/document/d/1Y_CzACqVGFyKhO7eBDIOaYT5C1mLGhlCFx7Vu3jI6xk/edit
expdp system directory=DATA_PUMP_DIR dumpfile=expdp_goldb_230519.dmp logfile=expdp_goldb_230519.log schemas=goldb job_name=expdp_GOLDB

2. Import DB schema

Create the tablespace which will be used in the REMAP_TABLESPACE clause.

impdp system directory=DATA_PUMP_DIR dumpfile=expdp_goldb_230519.dmp logfile=imdp_goldb_to_evoke_230519.log job_name=impdp_GOLDB_TO_EVOKEremap_schema=GOLDB:EVOKE remap_tablespace=APEX_30308796979271037:APEX_EVOKE_TBSP

3. Create workspace using existing schema

log onto af3 apex on INTERNAL Workspace and ADMIN and create a new workspace with EVOKE name.
Select existing schema for EVOKE as we have already imported schema using IMPDP.

4. Export applications from existing/source workspace

Use below command to get workspace_ID from the database using below command:

set linesi 120
col workspace for a30
col workspace_id for 999999999999999999999999
col schemas for a40
select WORKSPACE, WORKSPACE_ID, SCHEMAS from APEX_WORKSPACES where workspace = 'GOLDB' order by workspace;

Use below command to get application_IDs for the workspace we got from above command:

set linesi 120
set linesi 120
col workspace for a30
col workspace_display_name for a30
col application_id for 999999

select workspace, workspace_display_name, application_id, application_name from apex_applications where workspace_ID = '30308633610270985';

[oraapex@af3 ~]$ APEX_HOME=/home/oraapex/apex5.1.1/apex
[oraapex@af3 ~]$ CLASSPATH=$ORACLE_HOME/jdbc/lib/ojdbc6.jar
[oraapex@af3 ~]$ CLASSPATH=$CLASSPATH:$APEX_HOME/utilities
[oraapex@af3 ~]$ CLASSPATH=$CLASSPATH:.
[oraapex@af3 ~]$ export APEX_HOME ORACLE_HOME PATH CLASSPATH
[oraapex@af3 ~]$ cd $APEX_HOME
[oraapex@af3 apex]$ cd utilities/
java oracle/apex/APEXExport -db af3.appsforte.com:1521:AFDB07 -user system -password welcome123 -applicationid 100
java oracle/apex/APEXExport -db af3.appsforte.com:1521:AFDB07 -user system -password welcome123 -applicationid 156
java oracle/apex/APEXExport -db af3.appsforte.com:1521:AFDB07 -user system -password welcome123 -applicationid 157

5.A) Import applications into target workspace from front-end

1. Log onto workspace "EVOKE" and import using import menu. There's nothing to change, just select the file for application you want to import.

5.B)Import application from back-end database:

Login to af3 as oraapex and start sqlplus as sysdba

[oraapex@af3 SIGGROUP]$ pwd

/home/oraapex/sig_migration/SIGGROUP

Make sure that NLS environment is set as follow :

[oraapex@af3 SIGGROUP]$ env | grep NLS

NLS_LANG=AMERICAN_AMERICA.UTF8

Open Sqlplus , set your session to Apex schema and run all f*.sql scripts :

ORA-20001: Package Variable G_security_group_id Must Be Set when Importing an Application in Sqlplus (Doc ID 2329811.1)

declare

l_workspace_id number;begin

l_workspace_id := apex_util.find_security_group_id (p_workspace => 'WORKSPACE');

apex_util.set_security_group_id (p_security_group_id => l_workspace_id);

APEX_UTIL.PAUSE(2);

end;

/

Note: Replace 'WORKSPACE' with the actual name of your workspace

[oraapex@af3 SIGGROUP]$ sqlplus / as sysdba

SQL> alter session set current_schema = APEX_050100; (Here we need to change schema name as per current Apex version)

Session altered.

SQL> start f50000.sql (→ Example)

--application/set_environment

APPLICATION 50000 - SIGWeb - Agenda Virtual

--application/delete_application

--application/ui_types

--application/create_application

--application/shared_components/user_interface/templates/list

…

…

--application/end_environment

...done

SQL>

*** Import with new APP ID (i.e. import app 220 as app 2221:

begin

apex_application_install.set_application_id(121);

apex_application_install.generate_offset;

apex_application_install.set_application_alias( 'F' || apex_application_install.get_application_id );

end;

/

@f220_mar1.sql

---

### 574. DEMANTRA 7.3.1 Bounce

**Topic ID:** 2105

1. Connect to ASCP instance and choose option 3
[root@c1prdascp1 ~]# su - oraprod
1) APPS
2) RDBMS
3) DEMANTRA
Please select environment: 3
****
**STOP SERVICES:**1. cd /u01/Demantra/fmw/user_projects/domains/Demantra/bin
2. stop weblogic using ./stopWebLogic.sh
3. Stop Engineps -ef | grep EngineStarter | grep -v grep | awk '{print $2}' | xargs kill -9
****
**START SERVICES:**1. start weblogic using : nohup ./startWebLogic.sh &

2. Check nohup file and make sure that status change to Running :
[oraprod@c1prdascp1 bin]$ tail -10f nohup.out

****

3. Start Enginestarter ServerGo to location /u01/Demantra/fmw/Engine/lib and execute below command
nohup ./EngineStarter 12345 &
**VALIDATING all services******
[oraprod@c1prdascp1 bin]$ ps -ef|grep Engine

[oraprod@c1prdascp1 bin]$ ps -ef|grep weblogicshould give both the process for weblogic and nodemanager
Also access the URL from Front end and check if you are able to login using dm user credentialshttp://c1prdascp1.nanometrics.com:7010/demantra/portal/mainPage.jsp

---

### 576. Ryman : User Access Audit Report

**Topic ID:** 2105

Login to db node and execute script:

[oraprd@rhdb1 ~]$ sqlplus / as sysdba @user_audit_report.sql
Provide output generated. I.e : user_audit_report_20-AUG-18.html

---

### 575. Enabling License for Inventory Optimization in ASCP

**Topic ID:** 2105

License Inventory Optimization Module

Navigation: System Administrator =>Oracle Applications Manager => License Manager => License Products => License Component Applications => Check for ‘Inventory Optimization => Click ‘Next’ => Submit

---

### 577. Change MariaDB temp location.

**Topic ID:** 301

Changed temporary location of mariadb :
Default temporary location is /tmp which could be filled very fast , so changed to another location with more space:
1. make backup of configuration file :

[root@af281 etc]# cp my.cnf my.cnf.09152018
2. edit my.cnf and addtmpdir = /var/lib/mysql/tmp
[root@af281 etc]# vi my.cnf
[root@af281 etc]# diff my.cnf my.cnf.09152018
2d1
<tmpdir = /var/lib/mysql/tmp
[root@af281 etc]#

3. restart service
systemctl stop mariadb
systemctl start mariadb

---

### 623. How to grant Super privilege to Mysql user

**Topic ID:** 1801

Reference:
https://stackoverflow.com/questions/44015692/access-denied-you-need-at-least-one-of-the-super-privileges-for-this-operat

Find current user & database:
select user();
select database();

mysql> show grants for cpses_meewy8h1ys@localhost;
+---------------------------------------------------------------------------+
| Grants for cpses_meewy8h1ys@localhost |
+---------------------------------------------------------------------------+
| GRANT USAGE ON *.* TO 'cpses_meewy8h1ys'@'localhost' |
| GRANT ALL PRIVILEGES ON `melad\_main`.* TO 'cpses_meewy8h1ys'@'localhost' |
| GRANT ALL PRIVILEGES ON `melad_main`.* TO 'cpses_meewy8h1ys'@'localhost' |
+---------------------------------------------------------------------------+
3 rows in set (0.00 sec)

mysql>**update mysql.user set Super_priv='Y' where user='cpses_meewy8h1ys' and host='localhost';**
Query OK, 1 row affected (0.00 sec)
Rows matched: 1 Changed: 1 Warnings: 0

mysql>**flush privileges;**
Query OK, 0 rows affected (0.02 sec)

mysql> show grants for cpses_meewy8h1ys@localhost;
+---------------------------------------------------------------------------+
| Grants for cpses_meewy8h1ys@localhost |
+---------------------------------------------------------------------------+
| GRANT SUPER ON *.* TO 'cpses_meewy8h1ys'@'localhost' |
| GRANT ALL PRIVILEGES ON `melad\_main`.* TO 'cpses_meewy8h1ys'@'localhost' |
| GRANT ALL PRIVILEGES ON `melad_main`.* TO 'cpses_meewy8h1ys'@'localhost' |
+---------------------------------------------------------------------------+
3 rows in set (0.00 sec)

mysql> exit
Bye

---

### 578. MariaDB/Mysql cold backup.

**Topic ID:** 301

Cold Backup :

- 

Stop mysql service :

[root@af281 ~]#systemctl stop mariadb

[root@af281 ~]# ps -ef | grep mariadb

root12705 10443 0 13:41 pts/100:00:00 grep --color=auto mariadb

[root@af281 ~]#

2. Check Data location from configuration file:

[root@af281 ~]# cat /etc/my.cnf | grep data

datadir=/var/lib/mysql

[root@af281 ~]#

[root@af281 ~]# du -hs /var/lib/mysql

128G/var/lib/mysql

[root@af281 ~]#

3. Create directory for backup : /b01/backup/mariadb/af281

4. Kickoff the copy in background :

[root@af281 mysql]#nohup tar -zcvf /b01/backup/mariadb/af281/cold-backup-09192018.tar.gz * &

[1] 13329

5. Monitor the copy progress :

[root@af281 mysql]#tail -10f nohup.out

aria_log.00000001

aria_log_control

backup/

backup/full-backup-2018-09-10.sql

[1]+ Donenohup tar -zcvf /b01/backup/mariadb/af281/cold-backup-09192018.tar.gz *

Backup time: 2 hours.

6. Start mysql service:

[root@af281 mysql]# systemctl start mariadb

[root@af281 mysql]#

7. Check startup logs:

[root@af281 mysql]# tail -10f /var/log/mariadb/mariadb.log

180918 15:51:34 InnoDB: Initializing buffer pool, size = 4.0G

180918 15:51:34 InnoDB: Completed initialization of buffer pool

180918 15:51:34 InnoDB: highest supported file format is Barracuda.

180918 15:51:35 InnoDB: Waiting for the background threads to start

180918 15:51:36 Percona XtraDB (http://www.percona.com) 5.5.59-MariaDB-38.11 started; log sequence number 199990892959

180918 15:51:36 [Note] Plugin 'FEEDBACK' is disabled.

180918 15:51:36 [Note] Server socket created on IP: '0.0.0.0'.

180918 15:51:36 [Note] Event Scheduler: Loaded 0 events

180918 15:51:36 [Note] /usr/libexec/mysqld: ready for connections.

Version: '5.5.60-MariaDB' socket: '/var/lib/mysql/mysql.sock' port: 3306 MariaDB Server

---

### 570. Changing EBS 12.2.X passwords

**Topic ID:** 2105

**Changing EBS 12.2.X passwords**

1)Change of sys and system passwords using SQLPLUS command

Source the DB environment and connect to database as sysdba

SQL> alter user system identified by Msag4JUwWk8T9eTC;

User altered.

SQL> alter user sys identified by WUxZvqSh2eVdjCxF;

User altered.

2)Change password for APPLSYS (APPS) and sysadmin password using FNDCPASS followed by modifying EBSdatasource under weblogic console

SYSADMIN password change:

FNDCPASS apps/kRoZIBxQVWY9y9rQ 0 Y system/Msag4JUwWk8T9eTC USER SYSADMIN BEszFSverj9mrCEJ

Make sure verify the log and executed successfully

Apps(applsys) password change:

FNDCPASS apps/kRoZIBxQVWY9y9rQ 0 Y system/Msag4JUwWk8T9eTC SYSTEM APPLSYS UpUtmyPhbY3Q3yKL

Once FNDCPASS is executed login into weblogic console to change the APPS password EBSDatasource

ØLogin in to weblogic console clock lock and edit for updating the values, Navigate to Domain structure –> Services -- > DataSources --> click on EBSDatasource

ØSelect connection pool tab , update the password and confirm password entries with new apps password used in FNDCPASS and click on Save button followed by activate changes button

3)Update Weblogic password

Backup the below files

$FMW_HOME/user_projects/domains/EBS_domain/servers/AdminServer/security/boot.properties

$FMW_HOME/user_projects/domains/EBS_domain/servers/forms-c4ws_server1/security/boot.properties

$FMW_HOME/user_projects/domains/EBS_domain/servers/forms_server1/security/boot.properties

$FMW_HOME/user_projects/domains/EBS_domain/servers/oacore_server1/security/boot.properties

$FMW_HOME/user_projects/domains/EBS_domain/servers/oafm_server1/security/boot.properties

The instructions that follow should be performed on the run file system. The password change will be automatically propagated to the patch file system during the next adop prepare phase or fs_clone operation.

-> Shut down all application tier services except the Admin Server., Also make sure the release configuration is disabled in weblogic console.

On the primary node, run the command:

$/adstpall.sh -skipNM -skipAdmin

On all secondary nodes, run the command:

$/adstpall.sh

-> Change the Oracle WebLogic Server Administration User password by performing the following steps on the run file system of the primary node.

Source the environment on the run file system.

Run the commands appropriate for your platform:
On UNIX, run the command:

$ perl $FND_TOP/patch/115/bin/txkUpdateEBSDomain.pl -action=updateAdminPassword

Current WLS password:
New WLS password:
Existing apps password:

[apptest@rhtstebsapp2 scripts]$ perl $FND_TOP/patch/115/bin/txkUpdateEBSDomain.pl -action=updateAdminPassword

Program: txkUpdateEBSDomain.pl started at Tue Aug 21 17:59:02 2018

AdminServer will be re started after changing WebLogic Admin Password

All Mid Tier services should be SHUTDOWN before changing WebLogic Admin Password

Confirm if all Mid Tier services are in SHUTDOWN state. Enter "Yes" to proceed or anything else to exit: Yes

Enter the full path of Applications Context File [DEFAULT - /u01/oracle/uat/fs1/inst/apps/UAT_rhtstebsapp2/appl/admin/UAT_rhtstebsapp2.xml]: /u01/oracle/uat/fs1/inst/apps/UAT_rhtstebsapp2/appl/admin/UAT_rhtstebsapp2.xml

Enter the WLS Admin Password:

Enter the new WLS Admin Password:

Enter the APPS user password:

Executing: /u01/oracle/uat/fs1/FMW_Home/webtier/perl/bin/perl /u01/oracle/uat/fs1/EBSapps/appl/ad/12.0.0/patch/115/bin/adProvisionEBS.plebs-get-serverstatus -contextfile=/u01/oracle/uat/fs1/inst/apps/UAT_rhtstebsapp2/appl/admin/UAT_rhtstebsapp2.xml -servername=AdminServer -promptmsg=hide -logfile=/u01/oracle/uat/fs1/inst/apps/UAT_rhtstebsapp2/logs/appl/rgf/TXK/txkUpdateEBSDomain_Tue_Aug_21_17_59_02_2018/EBSProvisioner.log

Updating Weblogic Domain in online mode

---------------------------------------

Backup Location : /u01/oracle/uat/fs1/inst/apps/UAT_rhtstebsapp2/logs/appl/rgf/TXK/txkUpdateEBSDomain_Tue_Aug_21_17_59_02_2018

Logfile Location: /u01/oracle/uat/fs1/inst/apps/UAT_rhtstebsapp2/logs/appl/rgf/TXK/txkUpdateEBSDomain_Tue_Aug_21_17_59_02_2018/updateAdminPassword.log

Executing: /u01/oracle/uat/fs1/EBSapps/comn/util/jdk32/jre/bin/java -classpath :/u01/oracle/uat/fs1/FMW_Home/wlserver_10.3/server/lib/weblogic.jar:/u01/oracle/uat/fs1/FMW_Home/Oracle_EBS-app1/oui/jlib/srvm.jar:/u01/oracle/uat/fs1/EBSapps/comn/java/classes:/u01/oracle/uat/fs1/EBSapps/comn/shared-libs/ebs-3rdparty/WEB-INF/lib/ebs3rdpartyManifest.jar:/u01/oracle/uat/fs1/FMW_Home/Oracle_EBS-app1/shared-libs/ebs-appsborg/WEB-INF/lib/ebsAppsborgManifest.jar oracle.apps.ad.util.UpdateEBSDomain updateAdminPassword-contextfile /u01/oracle/uat/fs1/inst/apps/UAT_rhtstebsapp2/appl/admin/UAT_rhtstebsapp2.xml -promptmsg hide -logdir /u01/oracle/uat/fs1/inst/apps/UAT_rhtstebsapp2/logs/appl/rgf/TXK/txkUpdateEBSDomain_Tue_Aug_21_17_59_02_2018 -logfile /u01/oracle/uat/fs1/inst/apps/UAT_rhtstebsapp2/logs/appl/rgf/TXK/txkUpdateEBSDomain_Tue_Aug_21_17_59_02_2018/updateAdminPassword.log

Do

... [Content truncated for readability]

---

### 579. Nano Cost Manager Troubleshooting.

**Topic ID:** 2105

1. Find Cost manager req id #:
SQL> SELECT request_id RequestId,
2 request_date RequestDt,
3 phase_code Phase,
4 status_code Status FROM
5 fnd_concurrent_requests fcr,
6 fnd_concurrent_programs fcp
7 WHERE fcp.application_id = 702 AND
8 fcp.concurrent_program_name = 'CMCTCM' AND
9 fcr.concurrent_program_id = fcp.concurrent_program_id AND
10 fcr.program_application_id = 702 AND fcr.phase_code<> 'C' ;

REQUESTID REQUESTDT P S
---------- ------------------ - -
**24724455**15-JUL-18 P I

2. Cancel concurrent from backend :
SQL> update fnd_concurrent_requests
set status_code='D', phase_code='C'
where request_id= 2 3 24724455;

1 row updated.

SQL> commit;

Commit complete.

SQL>

---

### 581. WF MAILER and Planning Manager failed due to archivelog filled up

**Topic ID:** 2105

**Problem**: WF mailer and Planning manager failed
**References**: www.dba-oracle.com/sf_ora_00257_archiver_error_connect_internal_only_until_freed.htm

**Symptoms**: WF mailer stopped running and Planning manager failed according to reports
**Causes**: ORA-00257: archiver error. Connect internal only, until freed.

**Solution**:
1. Free up archivelog area (backup and delete archive logs).

SQL> alter system archive log all; (returned no archivelog to archive, so may not be necessary to execute)

SQL> alter system switch logfile;

******
************

---

### 573. APPSCHECK Diagnostics script.

**Topic ID:** 2105

Provided apscheck as follow.
1. Download latest apscheck version from Oracle note Doc ID 246150.1
2. upload script to server.
3. execute apscheck connected to ascp instance ( select P for planning).
[oraprod@c1prdascp1 ~]$ sqlplus apps/G0onx123
SQL> @apscheck.sql
Is this the EBS(E), Planning(P) or Both(B) instance (Default B)? -- not sure - Press ENTER P

4. provide output generated in the working directory:

-rw-r--r-- 1 oraprod dba 95K Oct 4 13:51 apscheck_output-summary_PRODASCP_04-OCT-2018.zip

---

### 631. Steps to run SQL Tuning Task

**Topic ID:** 1801

Step # 01:
==========
select sql_id from v$session where sid = :x

Step # 02:
==========
SET SERVEROUTPUT ON
declare
stmt_task VARCHAR2(40);
begin
stmt_task := DBMS_SQLTUNE.CREATE_TUNING_TASK(sql_id => '75w28n47hgkva');<<Get the SQL ID from AWR or ASH report.
DBMS_OUTPUT.put_line('task_id: ' || stmt_task );
end;
/

<<It will provide the task_id, which will be used in next commands below. >>
Step # 03:
==========
begin
DBMS_SQLTUNE.EXECUTE_TUNING_TASK(task_name => 'TASK_148872');
end;
/

Step # 04:
==========
SELECT TASK_NAME, STATUS FROM DBA_ADVISOR_LOG WHERE TASK_NAME = 'TASK_148872';

Step # 05:
==========
SELECT DBMS_SQLTUNE.REPORT_TUNING_TASK('TASK_148872') AS recommendations FROM dual;

---

### 587. RMAN duplicate with noopen option

**Topic ID:** 1801

run {allocate channel C1 device type disk;allocate auxiliary channel C2 device type disk;allocate auxiliary channel C3 device type disk;DUPLICATE database BFSS06 to bfsu06 backup location '/b01/backup/oracle/bfss06/weekly' noopen;release channel C1;release channel C2;release channel C3;}
Duplicate active database:rman target sys/N3wsTmBt16@bfst log=dup_bfst_bfsd_200219.log
RMAN>
RMAN>
RMAN> connect auxiliary /
RMAN> run {
allocate channel C1 device type disk;
allocate auxiliary channel C2 device type disk;
allocate auxiliary channel C3 device type disk;
DUPLICATE TARGET DATABASE TO bfsd;
release channel C1;
release channel C2;
release channel C3;
}

---

### 588. 911: eca1db6 - imax -- imax_archive-eca1db6: Problem with Omni archive backup Alert fixing

**Topic ID:** 1801

911: eca1db6 - imax -- imax_archive-eca1db6: Problem with Omni archive backup Alert fixing
Please follow the below steps
1) Login in toeca1db6(172.16.128.16) as oraimax2) verify if the file exists using following commandoracle> ls -l /u00/app/oracle/imaxdb/monitor_scripts/flag/archive_flag
-rw-r--r-- 1 oraimax dba 0 Jan 27 03:40 /u00/app/oracle/imaxdb/monitor_scripts/flag/archive_flag
3)If exists remove the archive flag file
oracle> rm /u00/app/oracle/imaxdb/monitor_scripts/flag/archive_flag
4) Once removed new flag will be created and backup should normal again
******

---

### 590. Apex (AF3) stop/start procedure

**Topic ID:** 2104

Shutdown procedure:

1. Stop Tomcat :
login to af3.appsforte.com as oraapex user :
cd /u01/oraapex/tomcat/apache-tomcat-7.0.70/bin./shutdown.sh
2. Stop AFDB07 DB :
login to af3.appsforte.com as oraapex user :
. AFDB07.env
sqlplus / as sysdba > shutdown immediate;

Startup Procedure:
1. Start AFDB07 DB :
login to af3.appsforte.com as oraapex user :
. AFDB07.env
sqlplus / as sysdba > startup;

2. Start Tomcat :
login to af3.appsforte.com as oraapex user :
cd /u01/oraapex/tomcat/apache-tomcat-7.0.70/bin./startup.sh

---

### 591. Add schema to workspace in APEX

**Topic ID:** 2104

Follow the steps in the google document.https://docs.google.com/document/d/1hd6udIkG-4CvyxbUpE98Giffq37iM9nbIXuvl92kRMw/edit

---

### 585. ICHOR clone

**Topic ID:** 2105

**Check appsforte clone notes : https://docs.google.com/document/d/1-26WvvtiQeQqNLQltopIhM8mdq9Zmlc4nS1_f6k8j-c/edit**

****

****

**Oracle E-Business 11i Refresh Steps**

****

****

**Environment details:**

ITEST:

Port: 1525

Color: Red

IDEV:

Port: 1523

Color: Olive

**Clone DB**

1.Shutdown & Clean up test environment

Once refresh request in place , follow with Minh (minhcao123@yahoo.com)on restoring the database to target server and copy the application file system to target server.

SQL> select distinct regexp_substr(name,'^.*oradata/itest') from v$datafile;

REGEXP_SUBSTR(NAME,'^.*ORADATA/ITEST')
--------------------------------------------------------------------------------
/newitest/u02/oradata/itest
/newitest/u03/oradata/itest
/newitest/u04/oradata/itest
/newitest/u09/oradata/itest
/newitest2/u05/oradata/itest
/newitest3/u10/oradata/itest

6 rows selected.

SQL> select name, open_mode from v$database;

NAME OPEN_MODE
--------- ----------
ITEST READ WRITE

SQL> shut immediate
Database closed.
Database dismounted.
Delete all the data files under the locations mentioned by above SQL

2.Coordinate with System Admin to restore production backup from tapes to test environment

3.Setup Oracle Home environment

4.Move all Oracle data files to directories accordingly

5.Copy all necessary files from /usr/local/bin/$SID/ora$SID to $ORACLE_HOME/dbs such as env files, init$SID.or

6.Run create control file script to re-create ctl files and roll forward using archive log files

7.Open database with resetlogs option

**Use adfgclone to clone DB**

1.Log in DB environment as ora$SID

2.Shutdown DB

3.Execute adfgclone.pl dbTier

$ORACLE_HOME/appsutil/adfgclone.pl dbTier

4.shutdown DB

5.re-copy init$SID from /usr/local/bin/apps/ora$SID/init$SID.ora to dbs directory

6.startup up DB

7.run sqlto clean up concurrent requests and put all the jobs on HOLD

**Use adfgclone to cloneAdmin Apps Tier**

****

1.Log in Admin Tier environment as $SID

2.Execute adfgclone.pl appsTier

$COMMON_TOP/clone/bin/adfgclone.pl appsTier

3.Edit $HOME/.profile to change mount points & SID accordingly

4.Shutdown concurrent managers

5.Reset apps and other accounts

Log in Admin Tier as $SID

Reset system DB account to manager

Alter user system identified by manager

At the command prompt:

FNDCPASS apps/apps 0 Y system/manager SYSTEM APPLSYS apps

FNDCPASS apps/lastst0p 0 Y system/manager SYSTEM APPLSYS apps

FNDCPASS apps/apps 0 Y SYSTEM/MANAGER ORACLE OE oe

FNDCPASS apps/apps 0 Y SYSTEM/MANAGER ORACLE PO po

FNDCPASS apps/apps 0 Y SYSTEM/MANAGER ORACLE AP ap

FNDCPASS apps/apps 0 Y SYSTEM/MANAGER ORACLEMRP mrp

FNDCPASS apps/apps 0 Y SYSTEM/MANAGER ORACLE WIP wip

FNDCPASS apps/apps 0 Y SYSTEM/MANAGER ORACLE AR ar

FNDCPASS apps/apps 0 Y SYSTEM/MANAGER ORACLE GL gl

****

****

****

****

****

****

**Use adfgclone to clone Apps Tier**

1.Log in apps Tier environment as $SID

2.Execute adfgclone.pl appsTier

$COMMON_TOP/clone/bin/adfgclone.pl appsTier

3.Edit $HOME/.profile to change mount points & SID accordingly

4.Shutdown all apps web server processes

Sh adstpall.sh apps/apps

**Post Steps**

1.run these sql below under apps account

*update wf_resources set text='*' where name='WF_ADMIN_ROLE';*

*commit;*

ITEST:

*update fnd_concurrent_queues*

*set target_node='ECA1DB11', node_name='ECA1DB11'*

*where concurrent_queue_name in ('WFALSNRSVC','WFMLRSVC')*

*and enabled_flag='Y';*

**

*update FND_PROFILE_OPTION_VALUES*

*set PROFILE_OPTION_VALUE = '/u01/app/itestora/8.0.6/forms60/admin/resource/US/kefmrweb.res'*

*wherePROFILE_OPTION_ID = 5468*

*AND LEVEL_ID =10004;*

*commit;*

IDEV:

*update fnd_concurrent_queues*

*set target_node='ECA1DB10', node_name='ECA1DB10'*

*where concurrent_queue_name in ('WFALSNRSVC','WFMLRSVC')*

*and enabled_flag='Y';*

**

*update FND_PROFILE_OPTION_VALUES*

*set PROFILE_OPTION_VALUE = '/u01/app/idevora/8.0.6/forms60/admin/resource/US/kefmrweb.res'*

*wherePROFILE_OPTION_ID = 5468*

*AND LEVEL_ID =10004;*

*commit;*

2.edit $ IAS_ORACLE_HOME/Apache/Jserv/etc/formservlet.ini

add entry XXKE_TOP=/u01/app/itestappl/xxke/11.5.0

3.log in DB tier as ora$SID

cd $ORACLE_HOME/lib

rm libutsl60.sl

ln -s libutsl60.sl.0 libutsl60.sl

rm libuitio60.sl

ln -s libuitio60.sl.0 libuitio60.sl

4.Log in ADMIN Tierand Apps Tier as $SID

Cd $ORACLE_HOME/lib

rm libutsl60.sl

ln -s libutsl60.sl.0 libutsl60.sl

rm libuitio60.sl

ln -s libuitio60.sl.0 libuitio60.sl

5.bring up websever processes

log in Apps server as $SID

sh adapcctl.sh start

6.update profile values

Launch application and log in with System administrator Responsibility

Update these profile values below

ICX:Session Timeout: 600

Java Color Scheme:

Itest: RED

Idev: Green

Site Name: $SID as of (DATE) of backup was taken

7.rename custom System administration responsibility

query “System Administrator IMAX”

change to “System Administrator $SID”

Workflow MailerConfiguration

ITEST:

Username: cportalitest

Password:P0rtalCe1$

I

... [Content truncated for readability]

---

### 593. Deployment of ssh keys for Bank of America (includes convert to hash host entries)

**Topic ID:** 2105

Below are the steps
1) download the ssh key files provided by source bank
2) copy it to server and unzip the file
$ cd 66189
[eca1db11:itest /newitest/u01/app/66189]
$ ls
sshsftp_key.zip sshsftpkey[eca1db11:itest /newitest/u01/app/66189/sshsftpkey]
$ ls -ltr
total 64
-rw-r--r-- 1 itest dba 422 Jan 24 11:56 B2BiUAT_2048_2019_openssh.txt
-rw-r--r-- 1 itest dba 478 Jan 24 12:28 B2BiUAT_2048_2019_putty.txt
-rw-r--r-- 1 itest dba 977 Jan 24 22:59 B2Bi1_2048_2019.zip
-rw-r--r-- 1 itest dba 1030 Jan 24 22:59 B2BiUAT_2048_2019.zip

3) take the backup of exiting files under .ssh directory under the home path for the user by cp -p filename filename..
[eca1db11:itest /newitest/u01/app/.ssh]
$ ls -l
total 160
-rw-r--r-- 1 itest dba 381 Apr 1 17:03 B2Bi1_2048_2019_openssh.txt
-rw-r--r-- 1 itest dba 422 Apr 1 17:03 B2BiUAT_2048_2019_openssh.txt
-rw------- 1 itest dba 887 Mar 14 2016 id_rsa
-rw------- 1 itest dba 887 Mar 14 2016 id_rsa.bak
-rw-r--r-- 1 itest dba 222 Mar 14 2016 id_rsa.pub
-rw-r--r-- 1 itest dba 222 Mar 14 2016 id_rsa.pub,bak1
-rw-r--r-- 1 itest dba 222 Jun 27 2017 id_rsa.pub.bak
-rw------- 1 itest dba 7058 Apr 1 17:27 known_hosts
-rw-r--r-- 1 itest dba 7058 Mar 29 06:49 known_hosts.old
-rw-r--r-- 1 itest dba 7058 Apr 1 17:04 known_hosts.sy.20190401

4) Append the keys to the known_hosts file[eca1db11:itest /newitest/u01/app/.ssh]
$ cat B2Bi1_2048_2019_openssh.txt >> known_hosts
[eca1db11:itest /newitest/u01/app/.ssh]
$ cat B2BiUAT_2048_2019_openssh.txt >> known_hosts
[eca1db11:itest /newitest/u01/app/.ssh]

5) convert the known_hosts file into hash host entries for ichor client (but for nanometrics it is not required)
[eca1db11:itest /newitest/u01/app/.ssh]
$ cat known_hosts
b2b32.bankofamerica.com,171.162.111.18 ssh-rsa AAAAB3NzaC1yc2EAAAABIwAAAQEA1/ksjy2948r1VHLMfsd5DZDp950LkCj2o621EK8Smuavg/FC5jbv9QK1F9E5+7Zv5oJJy1
dwAhRDWu7bMFaZU2x9p8a3lPedbxqkQoK2uqtr0IZ19vn+4wqzwZI//SfQ27UXUjqD92AcqSWncbKPnY03TOKsS99TSimVE8t8xmuJ8KjP+ac9unuyhUGqUlxLAWABMeeaa2cRijNkVUNx3lx
mJHkEO2Calb0z/+154swaOgDc/X9jJH9Yp4aj1CkkGyWF0nrO2xvv2rd69/h7rc1WSeP5Qqjj6IbdqH8+G63JtqY1tGqjuwRvnM8G9BWtu19qY9NM/r3Uk74ofTrl1Q==
elink-sftp-u.bankofamerica.com,171.162.108.32 ssh-rsa AAAAB3NzaC1yc2EAAAABIwAAAQEAopqW0xQS71zOF6zKU9rTfnaMKSxH7XCrB1aK3b6sk5MhXgW0jNh3fTYxFhg7O9D
+p6WyXj1MaZIAiH38likR+MEMQOwLLxi4Tn5mM/Gi5B4hs+L9H1YkCHu+DsSBHK6/zbu88VqSoeOyQ6lvPbrJmXWqxRi7JALBOD3T/NP/yvP0PcIkTgOTPQ8OEmGqxuKlL08HfNtEmHmUVgQT
rCh6sAzU3fEJu8nL8ZFOiSrUZc5kVNKfsJ16XnYtjgxgXUJhrjdEq4/J8X5eZNPF+AIueceR6ydSEaEoS3A3P9qUMq/OWv0hdOmkFE4lj60vCm++LEafrc6i9OM7+tf4x5Q69Q== nbkz5sz@lcdra0gvpapprs.bankofamerica.com

[eca1db11:itest /newitest/u01/app/.ssh]
$ ssh-keygen -H ====> (command to convert known_hosts entries to hash entries)
/newitest/u01/app/.ssh/known_hosts updated.
Original contents retained as /newitest/u01/app/.ssh/known_hosts.old
WARNING: /newitest/u01/app/.ssh/known_hosts.old contains unhashed entries
Delete this file to ensure privacy of hostnames
[eca1db11:itest /newitest/u01/app/.ssh]

[eca1db11:itest /newitest/u01/app/.ssh]
$ cat known_hosts ===>(converted to hash entries)|1|j5BVzSOkCAC3fVDSQsu49DD6tuc=|j/jknVzv03zxTLFs1hSKEFhx3kA= ssh-rsa AAAAB3NzaC1yc2EAAAABIwAAAQEAopqW0xQS71zOF6zKU9rTfnaMKSxH7XCrB1aK3b6sk5MhXgW0
jNh3fTYxFhg7O9D+p6WyXj1MaZIAiH38likR+MEMQOwLLxi4Tn5mM/Gi5B4hs+L9H1YkCHu+DsSBHK6/zbu88VqSoeOyQ6lvPbrJmXWqxRi7JALBOD3T/NP/yvP0PcIkTgOTPQ8OEmGqxuKlL
08HfNtEmHmUVgQTrCh6sAzU3fEJu8nL8ZFOiSrUZc5kVNKfsJ16XnYtjgxgXUJhrjdEq4/J8X5eZNPF+AIueceR6ydSEaEoS3A3P9qUMq/OWv0hdOmkFE4lj60vCm++LEafrc6i9OM7+tf4x5
Q69Q==
|1|qLnD27zDiFhco6JfWsjVU15iTbs=|jbH2b7KM2OMaqC+f0FJP6kUYJN4= ssh-rsa AAAAB3NzaC1yc2EAAAABIwAAAQEAopqW0xQS71zOF6zKU9rTfnaMKSxH7XCrB1aK3b6sk5MhXgW0
jNh3fTYxFhg7O9D+p6WyXj1MaZIAiH38likR+MEMQOwLLxi4Tn5mM/Gi5B4hs+L9H1YkCHu+DsSBHK6/zbu88VqSoeOyQ6lvPbrJmXWqxRi7JALBOD3T/NP/yvP0PcIkTgOTPQ8OEmGqxuKlL
08HfNtEmHmUVgQTrCh6sAzU3fEJu8nL8ZFOiSrUZc5kVNKfsJ16XnYtjgxgXUJhrjdEq4/J8X5eZNPF+AIueceR6ydSEaEoS3A3P9qUMq/OWv0hdOmkFE4lj60vCm++LEafrc6i9OM7+tf4x5
Q69Q==

6) Once verified test the key using the job which will be performed by client

**Reference : https://unix.stackexchange.com/questions/416586/generate-hashed-name-for-ssh-known-hosts**

---

### 594. Discoverer prd file

**Topic ID:** 2105

**Problem**: Couldn't connect to Oracle Discoverer
**References**:
**Symptoms**: Couldn't connect to Oracle Discoverer
**Causes**: dbc file was missing or incorrect
**Solution**: Correct DBC file was shared with client and it resolved the issue.
Location for DBC file in 11i:$FND_TOP/SECURE OR $FND_SECURELocation for DBC file in R12:**$INST_TOP/appl/fnd/12.0.0.0/secure**

---

### 595. Fwd: Workflow Notification Mailer is currently DOWN. Please contact Application Admin.Trying to bring up

**Topic ID:** 2105

**Problem**:Workflow Mailer Notification DOWN
**References**:
**Symptoms**: Workflow Mailer Notification goes down in production from time to time without any reason.
**Causes**: Not sure
**Solution**: We follow below steps to start workflow mailer notification:1. Login to the production EBS using URL: http://imaxapps.celerity.net:8020/OA_HTML/AppsLocalLogin.jsp2. Use credentials we keep on our side and login as APPSFORTE user.3. Navigation to resolve the issue is as follow:System Administrator IMAX --> Workflow --> Oracle Applications Manager --> Workflow Manager
4. Click on "Notification Mailer" status button which shows it is down. It will open a new page.5. On next page, from right hand side drop down list, select START and click GO.6. Go back to workflow status page by clicking on "workflow" from top left side link.7. Click refresh a couple of times to confirm it is fine.

---

### 596. To Unlock and reset INTERNAL ADMIN account in Apex 18.2

**Topic ID:** 2104

Steps to unlock ADMIN account
1) source the database env file2) connect to database as sysdba3)Verify if the account is lockedSQL> select USER_ID, SECURITY_GROUP_ID, USER_NAME, CREATION_DATE, LAST_UPDATE_DATE, ACCOUNT_LOCKED, ACCOUNT_EXPIRY,LAST_LOGIN from APEX_180200.WWV_FLOW_FND_USER where user_name = 'ADMIN' order by last_update_date desc;
USER_ID SECURITY_GROUP_ID USER_NAME CREATION_ LAST_UPDA A ACCOUNT_E LAST_LOGI
---------- ----------------- ---------------------------------------------------------------------------------------------------- --------- --------- - --------- ---------
5.8608E+13 10 ADMIN 07-JUL-14 30-APR-19 Y 20-DEC-18 21-JAN-19

4) unlock the account using the SQL below[oracle@af18 apex]$ sqlplus "/as sysdba"SQL*Plus: Release 12.1.0.2.0 Production on Tue Apr 30 21:38:28 2019Copyright (c) 1982, 2014, Oracle. All rights reserved.
Connected to:
Oracle Database 12c Enterprise Edition Release 12.1.0.2.0 - 64bit Production
With the Partitioning, OLAP, Advanced Analytics and Real Application Testing optionsSQL> BEGIN
apex_util.set_security_group_id(p_security_group_id => 10);
apex_util.unlock_account(p_user_name => 'ADMIN');
END;
/
COMMIT; 2 3 4 5
PL/SQL procedure successfully completed.SQL>Commit complete.
5) Verify the account status is unlockedSQL> select USER_ID, SECURITY_GROUP_ID, USER_NAME, CREATION_DATE, LAST_UPDATE_DATE, ACCOUNT_LOCKED, ACCOUNT_EXPIRY,LAST_LOGIN from APEX_180200.WWV_FLOW_FND_USER where user_name = 'ADMIN' order by last_update_date desc;USER_ID SECURITY_GROUP_ID USER_NAME CREATION_ LAST_UPDA A ACCOUNT_E LAST_LOGI
---------- ----------------- ---------------------------------------------------------------------------------------------------- --------- --------- - --------- ---------
5.8608E+13 10 ADMIN 07-JUL-14 30-APR-19 N 20-DEC-18 21-JAN-19

**************************************
Change the password for Apex18.2 ADMIN password
1) change the directory to Apex under apex18ccd /u01/oracle/Apex18c/apex2) connect as sysdba to database3) execute the apxchpwd.sqlSQL> @apxchpwd.sql
================================================================================
This script can be used to change the password of an Application Express
instance administrator. If the user does not yet exist, a user record will be
created.
================================================================================
Enter the administrator's username [ADMIN]
User "ADMIN" exists.
Enter ADMIN's email [sup@appsforte.com]
Enter ADMIN's password []
Changed password of instance administrator ADMIN.

---

### 598. Oracle database password file

**Topic ID:** 1801

Problem: Getting password error while logging in as SYSDBA@database.ORA-01017: invalid username/password; logon denied
Solution:Create password file in database home's dbs directory for the TNS alias you are using.
orapwd file=orapwentries=10
NOTE: Make sure your TNS alias matches Instance name, including case sensitivity.
Example:sqlplus sys/N0tOr1g@tsat as sysdba (need orapwTSAT in dbs directory)sqlplus sys/N0tOr1g@tsat1 as sysdba (need orapwTSAT1 in dbs directory)

---

### 599. Getting Error in Vertex Test http://c1tstebsapp1.nanometrics.com:8095/vertex-ui/vertextcc.jsp#dmDataUpdate

**Topic ID:** 2105

**Problem**: Out of memory issue while accessing TEST Vertex
**References**:
**Symptoms**: Out of memory error messages in "/u01/VERTEX/tomcat/log/catalina.out" file.
**Causes**:
**Solution**: Restarted tomcat service for vertex using below:/u01/VERTEX/tomcat/bin/shutdown.sh/u01/VERTEX/tomcat/bin/startup.sh

---

### 601. System down time on 5/25 @1am - 2am EST

**Topic ID:** 2701

**Title**: Shutdown / Startup web listener

**References**:

**Procedure or Description**:

To Stop:/u01/app/oraweb/Middleware/Oracle_Home/user_projects/domains/base_domain/bin/stopComponent.sh ohs1

To Start:/u01/app/oraweb/Middleware/Oracle_Home/user_projects/domains/base_domain/bin/startComponent.sh ohs1

---

### 602. Startup/shutdown EBS apps and db

**Topic ID:** 2105

Application :

[apptest@c1tstebsapp1 scripts]$ adstpall.sh apps/apps

[apptest@c1tstebsapp1 scripts]$ adstrtal.sh apps/apps

Database :
[oratest@c1tstebsdb1 ~]$ sqlplus /nolog

SQL*Plus: Release 11.2.0.4.0 Production on Thu Jun 6 02:08:49 2019

Copyright (c) 1982, 2013, Oracle. All rights reserved.

SQL> conn /as sysdba
Connected.
SQL> select open_mode,name from v$database;

OPEN_MODE NAME
-------------------- ---------
READ WRITE TESTEBS

SQL> shutdown immediate
Database closed.
Database dismounted.
ORACLE instance shut down.
SQL> startup
ORACLE instance started.

Total System Global Area 1.0689E+10 bytes
Fixed Size 2262656 bytes
Variable Size 2181040512 bytes
Database Buffers 8489271296 bytes
Redo Buffers 16900096 bytes
Database mounted.
Database opened.

---

### 608. Monitor Backups and their progress

**Topic ID:** 1801

TO monitor RMAN backups , connect to SQLPLUS as sysdba and execute the below any of the queries

Set lines 250
alter session set nls_date_format='DD-MON-YYYY HH24:MI:SS';
select sl.sid, sl.opname,
to_char(100*(sofar/totalwork), '990.9')||'%' pct_done,
sysdate+(TIME_REMAINING/60/60/24) done_by
from v$session_longops sl, v$session s
where sl.sid = s.sid
and sl.serial# = s.serial#
and sl.sid in (select sid from v$session where module like 'backup%' or module like 'restore%' or module like 'rman%')
and sofar != totalwork
and totalwork > 0
/

col OPNAME for a30;
select OPNAME,SOFAR/TOTALWORK*100 SOFAR_COMPLETED, trunc(TIME_REMAINING/60) MIN_REMAINING,
trunc(ELAPSED_SECONDS/60) MIN_ELAPSED
from v$session_longops where TOTALWORK>0 and OPNAME like 'RMAN%';

Also to speed up the use more threads based on the server capacity .

**Query from Jahan:**
col opname for a30
col message for a30 wra on
col units for a15
set lin 300 pages 1000 feed off echo off

alter session set nls_date_format='dd-mm-yyyy hh24:mi:ss';

select OPNAME,
--message,
SOFAR,TOTALWORK,round((SOFAR*100/decode(TOTALWORK,0,SOFAR,TOTALWORK)),2) PCT_DONE,
--UNITS,
round(elapsed_seconds/60,1) ela_min,round(time_remaining/60,1) eta_min,
to_char(START_TIME,'dd-mon-yyyy hh24:mi:ss'),round(time_remaining/60,1)/60/24+sysdate finish_time
from gv$session_longops
where
OPNAME like 'RMAN%'
and SOFAR != TOTALWORK
order by 8;

---

### 580. Install PLPDF SDK

**Topic ID:** 2104

1. Download PL/PDF SDK (https://www.plpdf.com/downloads-v2.php) and upload to Apex server.
[oracle@af18 ~]$ pwd
/home/oracle
[oracle@af18 ~]$ ls -lt | more
total 153156
-rw-r--r-- 1 root root 9235043 Jun 24 21:13 plpdf-v294.zip
2.

---

### 532. Copy from source Workspace/Applications to New Workspace/Applications -Apex

**Topic ID:** 2104

Step1 : Export the Applications and schema for the workspace to be copied

DATA_PUMP_DIR = /u01/oraapex/admin/APEXPRD/dpdump/
SQL> select default_tablespace from dba_users where username = 'GOLDB';
DEFAULT_TABLESPACE
--------------------------------------------------------------------------------
APEX_30308796979271037
expdp system/welcome123 directory=DATA_PUMP_DIR dumpfile=expdp_golddb_67745.dmp logfile=expdp_golddb_67745.log schemas=GOLDB
APEX_HOME=/home/oraapex/apex5.1.1/apex
CLASSPATH=$ORACLE_HOME/jdbc/lib/ojdbc6.jar
CLASSPATH=$CLASSPATH:$APEX_HOME/utilities
CLASSPATH=$CLASSPATH:.
export APEX_HOME ORACLE_HOME PATH CLASSPATH
cd $APEX_HOME/utilities/
GOLDB workspace id -- 30308633610270985
java oracle/apex/APEXExport -db af3.appsforte.com:1521:AFDB07 -user system -password welcome123 -expWorkspace -workspaceid 30308633610270985 -- For only workspace
java oracle/apex/APEXExport -db af3.appsforte.com:1521:AFDB07 -user system -password welcome123 -workspaceid 30308633610270985 -- For full workspce inclusing applications
For only Applications
java oracle/apex/APEXExport -db af3.appsforte.com:1521:AFDB07 -user system -password welcome123 -applicationid 100
java oracle/apex/APEXExport -db af3.appsforte.com:1521:AFDB07 -user system -password welcome123 -applicationid 156
java oracle/apex/APEXExport -db af3.appsforte.com:1521:AFDB07 -user system -password welcome123 -applicationid 157
java oracle/apex/APEXExport -db af3.appsforte.com:1521:AFDB07 -user system -password welcome123 -applicationid 188

Step2: Create the new schema by taking the DDL for the source schema

[oraapex@af3 ~]$ sqlplus sys@afdb07 as sysdba
SQL*Plus: Release 12.1.0.2.0 Production on Mon Jul 8 14:01:26 2019
Copyright (c) 1982, 2014, Oracle. All rights reserved.
Enter password:
Connected to:
Oracle Database 12c Enterprise Edition Release 12.1.0.2.0 - 64bit Production
With the Partitioning, OLAP, Advanced Analytics and Real Application Testing options
SQL> @ddl_user
Enter value for 1: GOLDB
CREATE USER "GOLDB" IDENTIFIED BY VALUES 'S:299D867C868BB4EC08BFEAA6207E8544DB325B6BF88C01A71AB03274805A;H:4CC448538EE1DF7107D65872F6CD6671;T:028A5195E14ABF851B5DF95A29135FE8ADB971529A6D88B817A4D6E9522704BDB77B45FEA685C498B1764764232FDDBE46D7AD3CDDC1EBEA66397B3AEF3A1B90B93BA10BD07CFDD3322034B;6D2D714CA25793B0'
DEFAULT TABLESPACE "APEX_30308796979271037"
TEMPORARY TABLESPACE "TEMP";
DECLARE
TEMP_COUNT NUMBER;
SQLSTR VARCHAR2(200);
BEGIN
SQLSTR := 'ALTER USER "GOLDB" QUOTA UNLIMITED ON "APEX_30308796979271037"';
EXECUTE IMMEDIATE SQLSTR;
EXCEPTION
WHEN OTHERS THEN
IF SQLCODE = -30041 THEN
SQLSTR := 'SELECT COUNT(*) FROM USER_TABLESPACES
WHERE TABLESPACE_NAME = ''APEX_30308796979271037'' AND CONTENTS = ''TEMPORARY''';
EXECUTE IMMEDIATE SQLSTR INTO TEMP_COUNT;
IF TEMP_COUNT = 1 THEN RETURN;
ELSE RAISE;
END IF;
ELSE
RAISE;
END IF;
END;
/
GRANT "CONNECT" TO "GOLDB";
GRANT "RESOURCE" TO "GOLDB";
GRANT CREATE JOB TO "GOLDB";
GRANT CREATE ANY CONTEXT TO "GOLDB";
GRANT CREATE DIMENSION TO "GOLDB";
GRANT CREATE INDEXTYPE TO "GOLDB";
GRANT CREATE OPERATOR TO "GOLDB";
GRANT CREATE TYPE TO "GOLDB";
GRANT CREATE MATERIALIZED VIEW TO "GOLDB";
GRANT CREATE TRIGGER TO "GOLDB";
GRANT CREATE PROCEDURE TO "GOLDB";
GRANT CREATE SEQUENCE TO "GOLDB";
GRANT CREATE VIEW TO "GOLDB";
GRANT CREATE SYNONYM TO "GOLDB";
GRANT CREATE CLUSTER TO "GOLDB";
GRANT CREATE TABLE TO "GOLDB";
GRANT CREATE SESSION TO "GOLDB";
ALTER USER "GOLDB" DEFAULT ROLE ALL;
SQL> create tablespace APEX_EXP datafile '/u01/oradata/AFDB07/APEX_EXP_TBSP_01.dbf' size 1024M autoextend on next 144M maxsize 30720M;
Tablespace created.
SQL> CREATE USER "EXP" identified by cVQQuPEBYu DEFAULT TABLESPACE "APEX_EXP" TEMPORARY TABLESPACE "TEMP";
User created.
SQL> GRANT "CONNECT" TO "EXP";
GRANT "RESOURCE" TO "EXP";
GRANT CREATE JOB TO "EXP";
GRANT CREATE ANY CONTEXT TO "EXP";
GRANT CREATE DIMENSION TO "EXP";
GRANT CREATE INDEXTYPE TO "EXP";
GRANT CREATE OPERATOR TO "EXP";
GRANT CREATE TYPE TO "EXP";
GRANT CREATE MATERIALIZED VIEW TO "EXP";
GRANT CREATE TRIGGER TO "EXP";
GRANT CREATE PROCEDURE TO "EXP";
GRANT CREATE SEQUENCE TO "EXP";
GRANT CREATE VIEW TO "EXP";
GRANT CREATE SYNONYM TO "EXP";
GRANT CREATE CLUSTER TO "EXP";
GRANT CREATE TABLE TO "EXP";
GRANT CREATE SESSION TO "EXP";
ALTER USER "EXP" DEFAULT ROLE ALL;
Grant succeeded.

Step3: Import the schema exported from source schema

impdp system directory=DATA_PUMP_DIR dumpfile=expdp_golddb_67745.dmp logfile=impdp_golddb_67745.log remap_schema=GOLDB:EXP remap_tablespace=APEX_39271037:APEX_EXP job_name=impdp_GOLDB_TO_EXP

Step4: create workspace by logging in as Internal admin user
create workspace from front end using existing schema that has been created above
To find workspace details:
SQL> Set linesize 120
Set pagesi 999
col WORKSPACE format a40;
col WORKSPACE_ID format 999999999999999999;SQL> SQL> SQL>
SQL> select WORKSPACE, WORKSPACE_ID, SCHEMAS from APEX_WORKSPACES where WORKSPACE_ID='365419922620592705';
WORKSPACE WORKSPACE_ID SCHEMAS
------------------------------

... [Content truncated for readability]

---

### 607. DR - archive log location full

**Topic ID:** 1801

**Symptoms:**
1. DR is out of sync.
2. archive log location on primary is full.

**Cause:**
There is a lot of activity on primary database, generating a lot of archive logs. we receive the alert and delete archive logs from the primary database location ($ORACLE_HOME/dbs/arch) to release the space.

**Resolution:**

1. We want to avoid the situation where we delete archive logs at OS level, without backing them up first. If we run archive log backup, it will take sometime and PROD database can hang because archive log location is FULL.
2. We point the archive log location to another file system i.e. /b01 or /b02 depending upon the naming convention used. In order to instruct database to write to second location, we follow below steps:

a. alter system set log_archive_dest_10 = '/b01/_arch' scope=both;
b. alter system set log_archive_dest_state_10 = 'ENABLE' scope=both;
c. alter system set log_archive_dest_state_1 = 'DEFER' scope=both;

3. After doing the above, we should be executing an archive log backup before deleting archive logs from previous location.

Once archive log backup is complete and backed up archive logs are deleted, we should reverse the above parameter setting.

a. alter system set log_archive_dest_state_1 = 'ENABLE' scope=both;
a. alter system set log_archive_dest_state_10 = 'REFER' scope=both;

4. Check status of DR site and confirm which archive logs have been applied on the standby site:

SELECT 'Last Applied : ' Logs,
TO_CHAR(next_time,'DD-MON-YY:HH24:MI:SS') TIME,thread#,sequence#
FROM v$archived_log
WHERE sequence# =
(SELECT MAX(sequence#) FROM v$archived_log WHERE applied='YES'
)
UNION
SELECT 'Last Received : ' Logs,
TO_CHAR(next_time,'DD-MON-YY:HH24:MI:SS') TIME,thread#,sequence#
FROM v$archived_log
WHERE sequence# =
(SELECT MAX(sequence#) FROM v$archived_log );

---

### 568. Restore and refresh Brightfield database

**Topic ID:** 1801

**Title**: Refresh Brightfield DB

**References**:

**Procedure or Description**:

1. Shut down target database and clean up data files.
2. Clone database from source database:
run {
allocate channel C1 device type disk;
allocate auxiliary channel C2 device type disk;
allocate auxiliary channel C3 device type disk;
set until time "to_date('2018-07-22:08:00:00','YYYY-MM-DD:hh24:mi:ss')";
DUPLICATE TARGET DATABASE TO BFSU06;
release channel C1;
release channel C2;
release channel C3;
}

3. Check and resize temp file to 2 GB, autoextensible to 8 GB. Or else recreate the temp file.
SQL> select file_name, bytes/1024/1024, maxbytes/1024/1024, autoextensible from dba_temp_files
FILE_NAME
--------------------------------------------------------------------------------
BYTES/1024/1024 MAXBYTES/1024/1024 AUT
/u01/oracle/bfsu/oradata/temp01.dbf 16384 16384 YES

/u01/oracle/bfsu/oradata/temp02.dbf 16384 16384 YES
SQL> alter database tempfile '/u01/oracle/bfsu/oradata/temp01.dbf' resize 2G;
SQL> alter database tempfile '/u01/oracle/bfsu/oradata/temp02.dbf' resize 2G;

If tempfile is not autoextending, then enable autoextend:
SQL> alter database tempfile '/u01/oracle/bfsu06/oradata/temp01.dbf' autoextend on maxsize 8000m;

4. Verify data file and temp file status and size.
SQL> select file_name,tablespace_name, bytes/1024/1024, bytes/1024/1024, status, AUTOEXTENSIBLE, MAXBYTES from dba_data_files union
select file_name,tablespace_name, bytes/1024/1024, bytes/1024/1024, status, AUTOEXTENSIBLE, MAXBYTES from dba_temp_files;

5. Change system password and update datasheet.

6.Change BFS user password to bfsowner in the target instance after the refresh.

---

### 610. Ichor - Unable to print

**Topic ID:** 2105

**Problem**: iChor - Unable to print

**References**:

**Symptoms**: Client is unable to print on the printer

**Causes**: Printer is disabled.

**Solution**:
1. Log on to eca1db6 as "af" user.
2. Run below command to check printer status:
lpstat -p | grep -i pl_*_rpt
3. To enable printer, use below command:
/usr/bin/enable pl_01_rpt<<pl_01_rpt is the printer name.

---

### 557. Error with opening log and out file for concurrent request

**Topic ID:** 2105

Below is the error andSolution:Copied tnsnames.ora file from c1stgebsapp1 to c1stgebsapp2 as below ,
[appstg@c1stgebsapp1 admin]$ scp tnsnames.ora c1stgebsapp2:/u01/oracle/STGEBS/inst/apps/STGEBS_c1stgebsapp2/ora/10.1.2/network/adminappstg@c1stgebsapp2's password:tnsnames.ora 100% 6506 6.4KB/s 00:00[appstg@c1stgebsapp1 admin]$ pwd/u01/oracle/STGEBS/inst/apps/STGEBS_c1stgebsapp1/ora/10.1.2/network/admin

---

### 609. RYMAN updated clone document --- NEW

**Topic ID:** 2105

********

****Demantra Post clone steps**:https://docs.google.com/document/d/102b8jF-qOMayW6wNSvK4s7SCcp4wadvwVhNG6PntpHc/edit#heading=h.b0rpg4c2nh34

All rights reserved.

OPEN_MODE

READ WRITE

Using ORACLE_HOME location : /u01/oracle/uat/db/tech_st/12.1.0

ClasspathUsing Context fileUpdating Context file...COMPLETED

Attempting upload of Context file and templates to database...COMPLETED

All rights reserved.

**

****attachHome.shouica.shrunConfig.shdetachHome.shouica.sh.ouibakrunInstallerActual 17157 MBActual 17157 MBActual 17157 MBActual 17157 MBActual 17157 MBActual 17157 MBActual 17157 MBActual 17157 MB**- adop phase=fs_clone
You may run into below error message:

[UNEXPECTED]Nodes "rhapp1" are listed in the ADOP_VALID_NODES table but not in the FND_NODES table.

[UNEXPECTED]To correct this, run AutoConfig on nodes "rhapp1"

[UNEXPECTED]Error determining whether this is a multi-node instance

sqlplus applsys/pwd
1. create backup tables.
create table fnd_oam_context_files_bkp as select * from fnd_oam_context_files;
create table fnd_nodes_bk as select * from fnd_nodes;
create table adop_valid_nodes_bk as select * from adop_valid_nodes;
2. Truncate the following tables:
truncate table fnd_oam_context_files;
truncate table fnd_nodes;
truncate table adop_valid_nodes;
3. Run AutoConfig on the DB tier
4. Run Autoconfig on the run file system.
sqlplus system/pwd
alter trigger ebs_logon disable;
5. Run Autoconfig on the patch file system
sqlplus system/pwd
alter trigger ebs_logon enable;

- 

- 

http://rhtstebsapp2.appshosting.com:8000/OA_HTML/OA.jsp?OAFunc=OAHOMEPAGE

No

https://docs.oracle.com/cd/E11882_01/backup.112/e10642/rcmdupdb.htm#BRADV89929

rymanhpr@b2b22.bankofamerica.com>> $FTPRESULTS<

rymanhpr@b2b22.bankofamerica.com>> $FTPRESULTS<

rymanhpr@b2b32.bankofamerica.com<

rymanhpr@b2b22.bankofamerica.com>> $FTPRESULTS<

rymanhpr@elink-sftp-u.bankofamerica.com>> $FTPRESULTS<

rymanhpr@elink-sftp-u.bankofamerica.com>> $FTPRESULTS<

rymanhpr@elink-sftp-u.bankofamerica.com>> $FTPRESULTS<

rymanhpr@elink-sftp-u.bankofamerica.com<

rymanhpr@elink-sftp-u.bankofamerica.com>> $FTPRESULTS<

****NOTE: Please check and verify the interface softlinks. They should be pointing to the correct filesystem/environment i.e. production OR fs1/fs2/fs_ne.**

create_boomi_user.sql

https://docs.google.com/spreadsheets/d/1t4-qk9ejB0hKveO987EtSydkfLKZ0FwO8avsYuBb0y0/edit

https://docs.google.com/spreadsheets/d/1t4-qk9ejB0hKveO987EtSydkfLKZ0FwO8avsYuBb0y0/edit

https://docs.google.com/spreadsheets/d/1t4-qk9ejB0hKveO987EtSydkfLKZ0FwO8avsYuBb0y0/edit
after patching/clone, make sure you go through post patch checklist
https://docs.google.com/spreadsheets/d/1t4-qk9ejB0hKveO987EtSydkfLKZ0FwO8avsYuBb0y0/edit

**Post clone steps for SSOGen and Okta:**

./ssogen dereg

-bash-4.2$ ./ssogen undeployag

*************************************************************************

SSOGEN Registration script for EBS R12.2, Version: 1.7, 23-MAR-2020

Key notes:

1. This script should be run by applmgr user on R12 web nodes

2. RUN file system should be sourced

3. Online Patching Cycle should NOT be active, run adop -status

4. If Online Patching Cycle is active, run adop phase=cutover

5. Run this on all web nodes if multiple web tiers are loadbalanced

6. No difference in procedure whether APPL_TOP is shared or not

7. This script can now be run in interactive and non-interactive modes

Usage of non-interactive mode:

Synopsis

./ssogen [reg|dereg|dmzreg|dmzdereg|deployag|undeployag|cleanup] [-appspass=password] [-ssogenurl=ssogen_url] [-eagservername=EAGServerName]

Example

./ssogen reg -appspass=Welcome123 -ssogenurl=https://ge.ssogen.com

./ssogen delployag -appspass=Welcome123 -eagservername=oaea_server2

Description

-ssogenurl defines the SSOGEN URL for the customer. SSOGEN team provides this URL.

-ssogenurl should be HTTPS. Ex:https://ge.ssogen.com

-eagservername defaults to oaea_server1

-eagservername should have oaea_server2 on second web tier [where oacore_server2 runs]

-eagservername should have oaea_server3 on second web tier [where oacore_server3 runs], etc.

reg on EBS Server needs to be run after each clone

reg on EBS Server needs to be run on one webtier only

*************************************************************************

Enter EBS APPS Password:

Please enter AdminServer address, example: server1.ge.com:7001

**rhtstebsapp2.appsforte.com:7001**

Enter WebLogic username, example: weblogic

weblogic

Enter WebLogic password, example: welcome1

6lA7iElDKAkGQEb3

-bash-4.2$ ./ssogen deployag

*************************************************************************

SSOGEN Registration script for EBS R12.2, Version: 1.7, 23-MAR-2020

Key notes:

1. This script should be run by applmgr user on R12 web nodes

2. RUN file system should be sourced

3. Online Patching Cycle should NOT be active, run adop -status

4. If Online Patching Cycle is active, run adop phase=cutover

5. Run this on all web nodes if multip

... [Content truncated for readability]

---

### 612. Change long running jobs alert for ichor

**Topic ID:** 2105

**Title**: Customer requested to receive the alert only job is running

**References**:

**Procedure or Description**:

Below steps were taken to make the requested change:
1. log on to eca1db6 ichor server as oraimax.
2. Change directory to

---

### 614. Clear lock or blocking session(s)

**Topic ID:** 1801

End-user complains about slow performance or may ask to kill a session directly on the database.

Either way, please use the below procedure:

1. Log onto the DB server.
2. Set the appropriate environment by executing the env file.
3. Log onto the database with user powerful enough to kill a session.
4. Query blocking sessions in the database, use below query:

SET LINESI 200

SELECT s1.username || '@' || s1.machine
|| ' ( SID=' || s1.sid||','||s1.serial# || ' ) is blocking '
|| s2.username || '@' || s2.machine || ' ( SID=' || s2.sid || ' ) ' || 'in ' || s1.status || ' status' AS blocking_status
FROM gv$lock l1, gv$session s1, gv$lock l2, gv$session s2
WHERE s1.sid=l1.sid AND s2.sid=l2.sid
AND l1.BLOCK=1 AND l2.request > 0
AND l1.id1 = l2.id1
AND l1.id2 = l2.id2;

5. Check / Verify what the session under question is doing, use below query:

SET LINESIZE 500

SET PAGESIZE 1000

COLUMN username FORMAT A30

COLUMN osuser FORMAT A20

COLUMN spid FORMAT A10

COLUMN service_name FORMAT A15

COLUMN module FORMAT A45

COLUMN machine FORMAT A30

COLUMN logon_time FORMAT A20

COLUMN sid for 9999999

SELECT s.inst_id, NVL(s.username, '(oracle)') AS username, s.osuser, s.sid, s.serial#, p.spid, s.lockwait, s.status, s.service_name, s.module, s.machine, s.program, TO_CHAR(s.logon_Time,'DD-MON-YYYY HH24:MI:SS') AS logon_time, s.last_call_et AS last_call_et_secs, s.sql_id
FROMgv$session s, gv$process p
WHEREs.paddr = p.addr
and s.sid = &session_id
ORDER BY s.username, s.osuser;

6. If you want to check what the SQL_ID is causing blocking, use below query:
set verify off
set pagesize 999
col username format a13
col prog format a22
col sql_text format a41
col sid format 999
col child_number format 99999 heading CHILD
col ocategory format a10
col avg_etime format 9,999,999.99
col etime format 9,999,999.99

select sql_id, child_number, plan_hash_value plan_hash, executions execs, elapsed_time/1000000 etime,
(elapsed_time/1000000)/decode(nvl(executions,0),0,1,executions) avg_etime, u.username,
sql_text
from v$sql s, dba_users u
where upper(sql_text) like upper(nvl('&sql_text',sql_text))
and sql_text not like '%from v$sql where sql_text like nvl(%'
and sql_id like nvl('&sql_id',sql_id)
and u.user_id = s.parsing_user_id
/

7. Kill the session by running below command:
alter system kill session 'sid,serial#' immediate;

---

### 538. Ryman Quarterly Audit scripts

**Topic ID:** 2105

**Important -> select SYS_CONTEXT ('USERENV', 'LANG') from dual;********--->must return 'US' for EBS views to return data**

If above query doesn't return "US", then please run below command to set it:

ALTER SESSION SET NLS_LANGUAGE= 'AMERICAN';

Check it once again by running the first command above.

Date range needs to be updated for the required quarter .
**Note:**If using SQL Developer to run the following commands, make sure the NLS setting match the date format (DD-MON-RRRR)
--Qaurterly Audit--

Select ffs.flex_value_set_name, FFV.Flex_value, FFV.description, FFV.ENABLED_FLAG, FFV.eND_DATE_ACTIVE,
FU1.DESCRIPTION CREATED_BY, FFV.CREATION_DATE, FU2.DESCRIPTION LAST_UPDATED_BY, FFV.LAST_UPDATE_DATE
from apps.fnd_flex_values_vl ffv, apps.fnd_flex_value_sets ffs, APPS.FND_USER FU1, APPS.FND_USER FU2
where ffv.flex_value_set_id = ffs.flex_value_set_id
and ffs.flex_value_set_name in ('GET_COMPANY','GET_DIVISION','GET_COSTCENTER','GET_ACCOUNT','GET_RESERVED','GET_INTERCOMPANY')
--and ffs.flex_value_set_name in 'GET_COMPANY'
--and ffs.flex_value_set_name = 'GET_DIVISION'
--and ffs.flex_value_set_name = 'GET_COSTCENTER'
--and ffs.flex_value_set_name = 'GET_ACCOUNT'
--and ffs.flex_value_set_name = 'GET_RESERVED'
--and ffs.flex_value_set_name = 'GET_INTERCOMPANY'
AND FU1.USER_ID = FFV.CREATED_BY
AND FU2.USER_ID = FFV.LAST_UPDATED_BY
AND TRUNC(FFV.LAST_UPDATE_DATE) BETWEEN '01-APR-2017' AND '30-JUN-2017';

--FA Category
select fc.description, fu1.description, fc.last_update_date
from apps.FA_CATEGORIES_VL fc, APPS.FND_USER FU1
where fc.last_updated_by = fu1.user_id
and fc.last_update_date between '01-APR-2017' AND '30-JUN-2017'

--FA Book
select fc.book_type_name , fu1.description, fc.last_update_date
from apps.FA_BOOK_CONTROLS_SEC fc, APPS.FND_USER FU1
where fc.last_updated_by = fu1.user_id
and fc.last_update_date between '01-APR-2017' AND '30-JUN-2017'

--FA Methods
select fc.name , fu1.description, fc.last_update_date
from apps.FA_METHODS fc, APPS.FND_USER FU1
where fc.last_updated_by = fu1.user_id
and fc.last_update_date between '01-APR-2017' AND '30-JUN-2017'

--FA Convention Types
select fc.description , fu1.description, fc.last_update_date
from apps.FA_CONVENTION_TYPES fc, APPS.FND_USER FU1
where fc.last_updated_by = fu1.user_id
and fc.last_update_date between '01-APR-2017' AND '30-JUN-2017'

--Vendor Update Report
SELECT asp.vendor_id ,
asp.segment1 "Supplier Num" ,
asp.vendor_name "Supplier Name" ,
ass.vendor_site_code "site name" ,
FU.Description "Supplier Updated By" ,
ASP.LAST_UPDATE_DATE "Supplier Updated Date" ,
FU2.Description "Supplier Site Updated By" ,
ASS.LAST_UPDATE_DATE "Supplier Site Updated Date" ,
--hou.name "Operating Unit Name" ,
ass.address_line1 ,
ass.city ,
ass.state ,
ass.zip ,
ass.country ,
ass.phone
--person.person_first_name ,
--person.person_last_name ,
--pty_rel.primary_phone_number ,
--pty_rel.email_address
FROM APPS.ap_suppliers asp ,
APPS.ap_supplier_sites_all ass ,
apps.fnd_user fu ,
apps.fnd_user fu2
--APPS.ap_supplier_contacts apsc ,
--APPS.hz_parties person ,
--APPS.hz_parties pty_rel,
--APPS.hr_operating_units hou
WHERE ass.vendor_id = asp.vendor_id
and fu.user_id = asp.last_updated_by
and fu2.user_id = ass.last_updated_by
and (ASP.LAST_UPDATE_DATE between '01-APR-2017' and '30-JUN-2017' or
ASS.LAST_UPDATE_DATE between '01-APR-2017' and '30-JUN-2017')--AND apsc.per_party_id = person.party_id
--AND apsc.rel_party_id = pty_rel.party_id
--AND ass.org_id = hou.organization_id
--AND apsc.org_party_site_id = ass.party_site_id
--AND asp.vendor_name = 'BUYERS CONNECTION';

Select fr.Last_update_date, FU1.description, fr.responsibility_name
from apps.FND_Responsibility_tl fr, APPS.FND_USER FU1
where fr.last_updated_by = fu1.user_id
and fr.last_update_date between '01-JAN-2017' and '31-DEC-2017'

Select fr.Last_update_date, FU1.description, fr.menu_name
from apps.FND_menus fr, APPS.FND_USER FU1
where fr.last_updated_by = fu1.user_id
and fr.last_update_date between '01-JAN-2017' and '31-DEC-2017'

Select fr.Last_update_date, FU1.user_name, FU1.description, fr.function_name
from APPS.FND_FORM_FUNCTIONS_VL fr, APPS.FND_USER FU1
where fr.last_updated_by = fu1.user_id
and fr.last_update_date between '01-JAN-2017' and '31-DEC-2017'

---

### 616. Kill request in E-Business

**Topic ID:** 2105

- 

Cancel request(s) from the front end.

If you try to cancel any request from the front end, which has been running for a long time, it may/can error out like below:

- 

Kill (zombie) long-running requests

It’s a four-step procedure, maybe five:

- 

Identify the session for the request you want to kill.

SET LINESIZE 200

SELECT a.request_id, d.sid, d.serial# ,d.osuser,d.process , c.SPID, d.inst_id

FROM apps.fnd_concurrent_requests a,

apps.fnd_concurrent_processes b, gv$process c, gv$session d

WHERE a.controlling_manager = b.concurrent_process_id

AND c.pid = b.oracle_process_id

AND b.session_id=d.audsid

AND a.request_id =&req_id

AND a.phase_code = 'R';

- 

Kill the session at DB level.

**For Single instance:**

alter system kill session ',' immediate;

**For RAC instance:**

alter system kill session ',,<@inst_id>' immediate;

- 

Kill the process at the OS level (optional).

Use below command to kill the process at OS level:

Kill -9

****NOTE: This SPID will be taken from point 2.a**

- 

Update from back-end to set status as “Terminated” request.

Use below command to set the status of the request as “Terminated” from the back-end:

update fnd_concurrent_requests set status_code='X', phase_code='C' where request_id = 'req_id';

commit;

- 

Update from back-end to set status as “Completed with Error” request.

Use below command to set the status of the same “Terminated” request as “Completed with Error” from the back-end:

update fnd_concurrent_requests set status_code='E', phase_code='C' where request_id = 'req_id';

commit;

---

### 617. Clear requests after bouncing FNDOPP

**Topic ID:** 2105

https://docs.google.com/document/d/1QjpdJVnDmUX0KJLwxCEmnyiQnIwPjvP6PnH-7HhQTSo/edit

**Clear up requests after FNDOPP problem**

- 

We get below alert for FNDOPP:

*FNDOPP Logfile check alert*

This alert also confirms the log file for FNDOPP along with the error message.

We can get the FNDOPP process ID and logfile location if we run the below command on application nodes:

ps -ef | grep -i fndopp

**NOTE: Lines highlighted in above screenshots confirm the log file location with its name. Trailing part of the logfile name points out process ID which can further be verified from the front end as mentioned in step#4 below.

- 

We may get another alert for the long running concurrent requests

- 

Identify Long running concurrent request

In order to get the list of long running queries, please use below command:

Log on to the database as APPS user.

SELECT a.concurrent_program_id, a.user_concurrent_program_name, a.request_id, DECODE(phase_code,'C',DECODE(status_code,'C','SUCCESS','E','ERROR','G','WARNING','X','TERMINATED'), 'P',DECODE(status_code,'I','SCHEDULED'), 'R',DECODE(status_code,'R','RUNNING', 'W','PAUSED'), NULL) Status, TO_CHAR(a.actual_start_date,'DD-MON-RRRR HH24:MI:SS') start_date, TO_CHAR(a.actual_completion_date,'DD-MON-RRRR HH24:MI:SS') end_date, ROUND((sysdate - a.actual_start_date)*24*60,3) elapsed_time FROM apps.fnd_conc_req_summary_v a WHERE a.status_code = 'R' AND a.actual_start_date<(sysdate - (1/24));

- 

Bounce FNDOPP

Log into E-Business front-end as sysadmin and follow below navigation path:

“System Administrator” >> Concurrent >> Manager >> Administer

Process ID can be confirmed by selecting the “Output Post Processor” and click “Processes” button.

Select “Output Post Process” you want to bounce and click button “Terminate”. It’s status will change to “Terminating”, eventually killing the OS processes.

We can confirm by monitoring OS processes and their respective log files. It may take up to 5 minutes before OS processes disappear.

*ps -ef | grep -i fndopp*

In order to start FNDOPP, select the “Output Post Process” from the above screen and click button “Activate” which only be available for the OPP process already terminated.

- 

Cancel request from front end.

If you try to cancel any request from front end, which has been running for a long time, it may/can error out like below:

- 

Kill (zombie) long running requests

It’s a four step procedure, may be five:

- 

Identify the session for the request you want to kill.

SET LINESIZE 200

SELECT a.request_id, d.sid, d.serial# ,d.osuser,d.process , c.SPID, d.inst_id

FROM apps.fnd_concurrent_requests a,

apps.fnd_concurrent_processes b, gv$process c, gv$session d

WHERE a.controlling_manager = b.concurrent_process_id

AND c.pid = b.oracle_process_id

AND b.session_id=d.audsid

AND a.request_id =&req_id

AND a.phase_code = 'R';

- 

Kill the session at DB level.

**For Single instance:**

alter system kill session ',' immediate;

**For RAC instance:**

alter system kill session ',,<@inst_id>' immediate;

- 

Kill the process at OS level (optional).

Use below command to kill process at OS level:

Kill -9

****NOTE: This SPID will be taken from point 6.a**

- 

Update from back-end to set status as “Terminated” request.

Use below command to set the status of the request as “Terminated” from the back-end:

update fnd_concurrent_requests set status_code='X', phase_code='C' where request_id = 'req_id';

commit;

- 

Update from back-end to set status as “Completed with Error” request.

Use below command to set the status of the same “Terminated” request as “Completed with Error” from the back-end:

update fnd_concurrent_requests set status_code='E', phase_code='C' where request_id = 'req_id';

commit;

---

### 555. RYMAN Resolution on Excel4apps GL Wand

**Topic ID:** 2105

**Resolution on glwand**:

After upgrade of GLWAND in R12.2 because of file version difference between patch file system and run file system we are facing issue with autoconfig and glwand access
once completed clone and also same in PRD instance of Ryman
For resolving the issue we have an workaround to fix
****
**Symptoms:**
apptest@rhtstebsapp2 scripts]$ adautocfg.sh
Enter the APPS user password:
The log file for this session is located at: /u01/oracle/uat/fs2/inst/apps/UAT_rhtstebsapp2/admin/log/10111926/adconfig.log
AutoConfig is configuring the Applications environment...
AutoConfig will consider the custom templates if present.
Using CONFIG_HOME location : /u01/oracle/uat/fs2/inst/apps/UAT_rhtstebsapp2
Classpath : /u01/oracle/uat/fs2/FMW_Home/Oracle_EBS-app1/shared-libs/ebs-appsborg/WEB-INF/lib/ebsAppsborgManifest.jar:/u01/oracle/uat/fs2/EBSapps/comn/java/classes
Version Conflicts among development maintained and customized templates encountered; aborting AutoConfig run.
The logfile for this session is located at: /u01/oracle/uat/fs2/inst/apps/UAT_rhtstebsapp2/admin/log/10111926/adconfig.log
[apptest@rhtstebsapp2 scripts]$ vi /u01/oracle/uat/fs2/EBSapps/appl/fnd/12.0.0/admin/template/oacore_web_xml_FMW.tmp
[apptest@rhtstebsapp2 scripts]$ vi /u01/oracle/uat/fs2/EBSapps/appl/fnd/12.0.0/admin/template/custom/oacore_web_xml_FMW.tmp

**Cause:**
As the file versions are different we observed the issue is triggered due adop patch filesystem syncronization in PRD for which we are currently working for the fix

**Fix for autoconfig/file version issues**
To correct the issue we have copied the orginal APPS template file which are latest to patch file system and syncronised them to run file system so that autoconfig
picks the correct files and autoconfig completes successsfully and glwand issue resolves
[apptest@rhtstebsapp2 template]$ diff oacore_web_xml_FMW.tmp.orig oacore_web_xml_FMW.tmp
3c3
<
---
>
58a59,69
>
>
>m4aServlet
>com.more4apps.r12.servlet.XmlServlet
>
>
>
>m4aServlet
>/m4aServlet/*
>
>
951c962
<%s_fndtop%/secure/allowed_resources.conf
---
>%s_fndtop%/secure/allowed_jsps.conf
960c971
<*
---
>*.jsp
1139a1151,1160
>
>
>excel4apps
>com.excel4apps.servlet.wand.oracle.Servlet
>
>
>excel4apps
>/excel4apps
>
>
[ VERSION CONFLICTS INFORMATION ]
Template shipped by oracle is having a version different than the template lying in custom directory.
Template shipped by Oracle : /u01/oracle/uat/fs1/EBSapps/appl/fnd/12.0.0/admin/template/oacore_web_xml_FMW.tmp(version: 120.17.12020000.23)
Custom template : /u01/oracle/uat/fs1/EBSapps/appl/fnd/12.0.0/admin/template/custom/oacore_web_xml_FMW.tmp(version: 120.17.12020000.22)
Please resolve the differences between the two templates or refer to the Oracle E-Business Suite Setup Guide for further details.
All driver files processed.
ERROR MESSAGE
**************************************************************
Following files are NOT in SYNC:
--------------------------------
/u01/oracle/uat/fs1/EBSapps/appl/fnd/12.0.0/admin/template/custom/ebs3rdpartyManifest_xml.tmp (Version: 120.12.12020000.11)
/u01/oracle/uat/fs1/EBSapps/appl/fnd/12.0.0/admin/template/ebs3rdpartyManifest_xml.tmp (Version: 120.12.12020000.12)
Cannot proceed further unless this is fixed.

---

### 544. EBS Patching for 12.2.X

**Topic ID:** 2105

Reference : https://ora-data.blogspot.in/2016/12/step-by-step-to-apply-patches-in-oracle.html

As we are knowing that applying patch in oracle EBS R12.2.X is different than R12.1 or 11.5.10.X
I would like to share here the steps for applying patching in r12.2 with concepts and details.
From R12.2.0 onward oracle has introduced online patching functionality called ADOP
Oracle EBS 12.2 introduces Online Patching, a new feature that greatly reduces the downtime that was needed in previous releases for application of Release Update Packs (RUPs), Critical Patch Updates (CPUs), and other patches and bug fixes of various kinds.
Before patching, make sure to unzip the patch to $PATCH_TOP on all app tier nodes.
​
There are below 5 Phases of ADOP(online patching):
1) PREPARE
2) APPLY
3) FINALIZE
4) CUTOVER
5) CLEANUP
**Steps:-**
1. Download the patch and unzip on patch_top.
2. Must go through Readme.html or readme.txt.

3. Prepare the system for patching
a. we can run the .env file . or the adop utility sets its own environment.
b. Then run the below command for prepare the System for patching:$ adop phase=prepare

4. Wait for the prepare phase to be complete.
Please check the status from below points:$ adop -status
Enter the APPS username: apps
Enter the APPS password:
5. After completion Prepare phase, go to next phase called Apply phase:
$adop phase=apply patches=XXXXX
Enter the APPS password:
Enter the SYSTEM password:
Enter the WLSADMIN password:
Please wait. Validating credentials...
6 . After completion of apply phase, goto next phase called Finalize phase:
i.e like Ready the instance for cutover$ adop phase=finalize
Enter the APPS password:
Enter the SYSTEM password:
Enter the WLSADMIN password:
Please wait. Validating credentials...
7. After completion of Finalize phase, goto next phase called Cutover:$ adop phase=cutover
Enter the APPS password:
Enter the SYSTEM password:
Enter the WLSADMIN password:
Please wait. Validating credentials...Note: Keep checking Status after every Phases.

8. After completion of Cutover phase, run next Cleanup Phase
We can do this step after instance is released to Customer.$adop phase=cleanup
Enter the APPS password:
Enter the SYSTEM password:
Enter the WLSADMIN password:
Note:
If there are some reason either the prepare or apply phase failed or any problems then you can abort this patching cycle.$adop phase=abort
But always remember, after running abort, you must always run a full cleanup as:
$adop phase=cleanup cleanup_mode=full
So, this will remove all columns that were added by the patches but are no longer needed because of the abort.
And If that columns are not removed, then that may create problems in a later patching cycle.

---

### 560. Schedule 360 (TSAD) demo refresh

**Topic ID:** 2701

[orarac@ah249 ~]$ sqlplus sys/S3cr3t123@tsad
SQL*Plus: Release 12.1.0.2.0 Production on Sun Feb 4 20:16:55 2018
Copyright (c) 1982, 2014, Oracle. All rights reserved.
ERROR:
ORA-28009: connection as SYS should be as SYSDBA or SYSOPER

Enter user-name: sys/S3cr3t123 as sysdba
Connected to:
Oracle Database 12c Enterprise Edition Release 12.1.0.2.0 - 64bit Production
With the Partitioning, OLAP, Advanced Analytics and Real Application Testing opt ions
SQL> select file_name from dba_data_files;
FILE_NAME
--------------------------------------------------------------------------------
/u01/app/orarac/oradata/tsad/system.264.741659535
/u01/app/orarac/oradata/tsad/sysaux.263.741659535
/u01/app/orarac/oradata/tsad/undotbs1.256.741659535
/u01/app/orarac/oradata/tsad/users.266.741659535
/u01/app/orarac/oradata/tsad/undotbs2.267.741659643
/u01/app/orarac/oradata/tsad/data.260.834357535
/u01/app/orarac/oradata/tsad/data.258.741662763
/u01/app/orarac/oradata/tsad/indexes.265.741662775
/u01/app/orarac/oradata/tsad/undotbs3.270.757834791
/u01/app/orarac/oradata/tsad/data2.275.875501449
/u01/app/orarac/oradata/tsad/indexes2.276.875501539
FILE_NAME
--------------------------------------------------------------------------------
/u01/app/orarac/oradata/tsad/data3.256.875506045
/u01/app/orarac/oradata/tsad/indexes3.257.875506057
13 rows selected.
SQL> show parameter spfile
NAME TYPE VALUE
------------------------------------ ----------- ------------------------------
spfile string /u01/app/orarac/product/12.1.0
/dbhome_1/dbs/spfiletsad.ora
[orarac@ah249 dbs]$ sqlplus sys/S3cr3t123@tsad as sysdba
SQL*Plus: Release 12.1.0.2.0 Production on Sun Feb 4 20:18:57 2018
Copyright (c) 1982, 2014, Oracle. All rights reserved.

Connected to:
Oracle Database 12c Enterprise Edition Release 12.1.0.2.0 - 64bit Production
With the Partitioning, OLAP, Advanced Analytics and Real Application Testing options
SQL> create pfile from spfile;
File created.
[orarac@ah249 ~]$ sqlplus sys/S3cr3t123@tsad as sysdba
SQL*Plus: Release 12.1.0.2.0 Production on Sun Feb 4 20:24:04 2018
Copyright (c) 1982, 2014, Oracle. All rights reserved.

Connected to:
Oracle Database 12c Enterprise Edition Release 12.1.0.2.0 - 64bit Production
With the Partitioning, OLAP, Advanced Analytics and Real Application Testing options
SQL> shut immediate
Database closed.
Database dismounted.
ORACLE instance shut down.
SQL> exit
[orarac@ah249 ~]$ cd /u01/app/orarac/oradata/tsad
[orarac@ah249 tsad]$ ls
control01.ctl data.260.834357535 group_3.257.741659663 group_7.273.757858205 indexes3.257.875506057 temp11.dbf users.266.741659535
control02.ctl data3.256.875506045 group_4.259.741659663 group_8.274.757858205 old undotbs1.256.741659535
data2.275.875501449 group_1.262.741659619 group_5.271.757834803 indexes2.276.875501539 sysaux.263.741659535 undotbs2.267.741659643
data.258.741662763 group_2.261.741659619 group_6.272.757834803 indexes.265.741662775 system.264.741659535 undotbs3.270.757834791
[orarac@ah249 tsad]$ rm data2.275.875501449 data.258.741662763 data.260.834357535 data3.256.875506045 group_1.262.741659619 group_2.261.741659619 group_3.257.741659663 group_4.259.741659663 group_5.271.757834803 group_6.272.757834803 group_7.273.757858205 group_8.274.757858205 indexes2.276.875501539 indexes.265.741662775 indexes3.257.875506057 sysaux.263.741659535 system.264.741659535 undotbs2.267.741659643 undotbs1.256.741659535 undotbs3.270.757834791 users.266.741659535
[orarac@ah249 tsad]$ sqlplus sys/S3cr3t123@tsad as sysdba
SQL*Plus: Release 12.1.0.2.0 Production on Sun Feb 4 20:32:46 2018
Copyright (c) 1982, 2014, Oracle. All rights reserved.
Connected to an idle instance.
SQL> startup nomount
ORACLE instance started.
Total System Global Area 838860800 bytes
Fixed Size 2929936 bytes
Variable Size 671091440 bytes
Database Buffers 159383552 bytes
Redo Buffers 5455872 bytes
SQL> exit
rman target sys/S3cr3t123@TSAH auxiliary sys/S3cr3t123@tsad log=demorefresh_05feb2018.log
duplicate database to TSAD from active database nofilenamecheck;
contents of Memory Script:
{
Alter clone database open resetlogs;
}
executing Memory Script
database opened
Finished Duplicate Db at 04-FEB-18

You have new mail in /var/spool/mail/orarac
[orarac@ah249 ~]$
[orarac@ah249 ~]$
[orarac@ah249 ~]$ sqlplus sys/S3cr3t123 as sysdba
SQL*Plus: Release 12.1.0.2.0 Production on Sun Feb 4 22:07:15 2018
Copyright (c) 1982, 2014, Oracle. All rights reserved.

Connected to:
Oracle Database 12c Enterprise Edition Release 12.1.0.2.0 - 64bit Production
With the Partitioning, OLAP, Advanced Analytics and Real Application Testing options
SQL> select * from v$tempfile;
FILE# CREATION_CHANGE# CREATION_ TS# RFILE# STATUS ENABLED
---------- ---------------- --------- ---------- ---------- ------- ----------
BYTES BLOCKS CREATE_BYTES BLOCK_SIZE
---------- ---------- ------------ ----------
NAME
--------------------------------------------------------------------------------
CON_ID
----------
2 945397412 06-MAR-12 3 1 ONLINE READ WRITE
36700

... [Content truncated for readability]

---

### 620. E-Business Kill session using a specific form

**Topic ID:** 2105

1. Set the environment accordingly.

2. Log onto the database using APPS credentials as below:

sqlplus apps/

3. Check the sessions using a specific form by running below command:

4. Kill the session by running the below command:

alter system kill session ',';<<for single instance
alter system kill session ',,@';<<for RAC

---

### 625. Reset apex internal admin password

**Topic ID:** 2104

Method 1:

Reset password via script apxchpwd.sql:

[orarac@af356 apex]$ pwd
/u01/app/apex/apex
[orarac@af356 apex]$ sqlplus sys as sysdba

SQL*Plus: Release 12.1.0.2.0 Production on Thu Sep 24 16:22:05 2020

Copyright (c) 1982, 2014, Oracle. All rights reserved.

Enter password:

Connected to:
Oracle Database 12c Enterprise Edition Release 12.1.0.2.0 - 64bit Production
With the Partitioning, Real Application Clusters, Automatic Storage Management, OLAP,
Advanced Analytics and Real Application Testing options

SQL> @apxchpwd.sql;
...set_appun.sql
================================================================================
This script can be used to change the password of an Application Express
instance administrator. If the user does not yet exist, a user record will be
created.
================================================================================
Enter the administrator's username [ADMIN]
User "ADMIN" exists.
Enter ADMIN's email [ADMIN]sup@appsforte.com
Enter ADMIN's password []
Changed password of instance administrator ADMIN.

SQL> exit
Disconnected from Oracle Database 12c Enterprise Edition Release 12.1.0.2.0 - 64bit Production
With the Partitioning, Real Application Clusters, Automatic Storage Management, OLAP,
Advanced Analytics and Real Application Testing options
[orarac@af356 apex]$

Method 2:
https://oracle-base.com/articles/misc/oracle-application-express-apex-change-admin-password

Step1:
-------
Issue the below command to set the schema for APEX:

Step2:
-------
Get the User ID and default schema for the admin user by running the command:

first_name,

last_name,

default_schema

wwv_flow_fnd_user

user_name = 'ADMIN'

234567

USER_ID FIRST_NAMELAST_NAMEDEFAULT_SCHEMA

1660748476723838APEX_050100

1662687525651020APEX_EBS_EXTENSION

5268213909680079APEX_EBS_LOCAL

As you can see above that we need to reset the password for the "ADMIN" user in the main schema, so we'll use USER_ID =2SETweb_password = 'ZdAINM08^9%'<<This will be INTERNAL/ADMIN password

3WHEREuser_name = 'ADMIN'

4ANDuser_id = 1660748476723838;<<USER_ID from the above step/command.

Step4:
-------
Unlock the ADMIN user by running the below block:

2WWV_FLOW_SECURITY.g_security_group_id := 10;

3WWV_FLOW_FND_USER_API.unlock_account('ADMIN');

4commit;

5end;

6/

---

### 551. Terminating ADOP activities in PROD.

**Topic ID:** 2105

**Problem**: Customer reported performance problems in the PROD Instance.

**References**:
**Symptoms**: General Slowness in GLWAND

**Causes**: ADOP session running in Background

**Solution**: Kill Adop session and associated processes / db sesion.

Running ADOP activities in PROD.

The ADOP activities cause slowness in the PROD Environment. So we need to run them during off-businesses hours .

If the process is launched and aborted , we need to make sure that the process is not running in background :

**22863**15467 0 08:18 pts/2 00:00:00 /bin/sh /u01/oracle/prd/fs_ne/EBSapps/appl/ad/bin/adop phase =cleanup cleanup_mode=full
applprd 29030 28745 0 10:49 pts/3 00:00:00 grep adop
[applprd@rhapp1 ~]$ kill -9 22863

[applprd@rhapp1 ~]$ ps -ef | grep perl
applprd 555 1 0 Sep23 pts/2 00:00:00 perl /u01/oracle/prd/fs2/EBSapps/appl/ad/12.0.0/bin/adRegisterWLSListeners.pl contextfile=/u01/oracle/prd/fs2/inst/apps/PRD_rhapp1/appl/admin/PRD_rhapp1.xml
applprd 5644 28745 0 10:56 pts/3 00:00:00 grep perl
applprd**22965**1 0 08:18 pts/2 00:00:13 /u01/oracle/prd/fs2/FMW_Home/webtier/perl/bin/perl /u01/oracle/prd/fs2/EBSapps/appl/ad/12.0.0/bin/adzdoptl.pl phase =cleanup cleanup_mode=full
oemcc 23042 1 0 2016 ? 00:27:34 /home/oemcc/agentHome/core/12.1.0.3.0/perl/bin/perl /home/oemcc/agentHome/core/12.1.0.3.0/bin/emwd.pl agent /home/oemcc/agentHome/agent_inst/sysman/log/emagent.nohup
[applprd@rhapp1 ~]$ kill -9 22965

And finally kill the DB session:

SQL> select sid,serial#,program,module,status from v$session where program like '%perl%';

SID SERIAL# PROGRAM
---------- ---------- ------------------------------------------------
MODULE STATUS
---------------------------------------------------------------- --------
2027 29453 perl@rhapp1.appsforte.com (TNS V1-V3)
perl@rhapp1.appsforte.com (TNS V1-V3) ACTIVE

SQL> alter system kill session '2027,29453' immediate;
alter system kill session '2027,29453' immediate
*
ERROR at line 1:
ORA-00031: session marked for kill

SQL> select sid,serial#,program,module,status from v$session where program like '%perl%';

no rows selected

SQL> Disconnected from Oracle Database 12c Enterprise Edition Release 12.1.0.2.0 - 64bit Production
With the Partitioning, OLAP, Advanced Analytics and Real Application Testing options
You have new mail in /var/spool/mail/oraprd

---

### 634. Workflow Mailer Down (not running) alert

**Topic ID:** 2105

Problem:
========
Received alert for WF mailer being down on PRODEBS.

Solution:
========
Log onto the below URL as sysadmin user:
http://c1prdebsapp.nanometrics.com:8001

1/ system administrator >> workflow >> oracle applications manager >> workflow manager.

2/ A new page for "workflow mailer" will open.
3/ Make sure all components are up and running (GREEN).

4/ Click on the "Service Components" link.

5/ Make sure all the components are up and running (GREEN).

6/ Click on "Workflow mailer service" link, in the "Container" column, right at the bottom of the list.

7/ Make sure that all three (03) service component containers are activated and up/running (GREEN).

---

### 619. Cron jobs fail while reading data files.

**Topic ID:** 1801

**Problem**: Scheduled Oracle cron jobs failing to reading data file

**References**: VDS 6.0.2 DSM Installation Guide

**Symptoms**:
Recovery Manager: Release 12.1.0.2.0 - Production on Sun Dec 1 22:00:01 2019

Copyright (c) 1982, 2014, Oracle and/or its affiliates. All rights reserved.

RMAN-00571: ===========================================================
RMAN-00569: =============== ERROR MESSAGE STACK FOLLOWS ===============
RMAN-00571: ===========================================================
RMAN-00554: initialization of internal recovery manager package failed
RMAN-06003: ORACLE error from target database:
ORA-00204: error in reading (block 1, # blocks 1) of control file
ORA-00202: control file: '/u01/oracle/prd/db/apps_st/data/cntrl01.dbf'
ORA-27072: File I/O error
Linux-x86_64 Error: 13: Permission denied
Additional information: 4
Additional information: 1
Additional information: 4294967295

**Causes**: Cron daemon not added to allowed host setting in DSM.

**Solution**:
1. Log in to Vormetric Data Security Manager GUI from Remote Desktop (must log in from same network as the DSM).
2. Navigate to Domains -> Switch Domain menu, and switch to "Ryman" domain.
3. Navigate to Hosts -> Hosts menu, and click on "Hosts Settings" tab.
4. Add entry "|authenticator| /usr/sbin/crond", and click Apply and OK.

---

### 621. How to Force Log Off Demantra User

**Topic ID:** 2105

**Problem**: User getting Already Logged in error when trying to log in

**References**: How to Automatically Clear a Hunging Session ? (Doc ID 1994389.1)
https://support.oracle.com/epmos/faces/DocumentDisplay?_afrLoop=665476953159735&parent=EXTERNAL_SEARCH&sourceId=HOWTO&id=1994389.1&_afrWindowMode=0&_adf.ctrl-state=1ca2r2ny1w_53

**Symptoms**: Getting already logged in error

**Causes**: User had log-in session from prior log-on

**Solution**: For log off user
http://c1prdascp1.nanometrics.com:7010/demantra/portal/userManagement.jsp

---

### 584. Jobs to disable in Schedule 360 database after refreshing database to a new server

**Topic ID:** 2701

Need to connect as user tsa and run below
========= Dynamically disable all TSA jobs =========================================================​

DECLARE

CURSOR selection

IS SELECT job_name FROM dba_scheduler_jobs WHERE owner = 'TSA';

BEGIN

FOR record IN selection

LOOP

dbms_scheduler.disable(record.job_name);

END LOOP;

END;

/
=========== Hard coded job names ================================================================
begin

DBMS_SCHEDULER.disable (name => 'IMPORT_AMERHOSP_CENSUS_DATA');

DBMS_SCHEDULER.disable (name => 'CST_BATCH_RELEASE');

DBMS_SCHEDULER.disable (name => 'BATCH_RELEASE_EST_1800');

DBMS_SCHEDULER.disable (name => 'DEL_REVIEWED_MESSAGES');

DBMS_SCHEDULER.disable (name => 'BATCH_RELEASE_EST_1200');

DBMS_SCHEDULER.disable (name => 'BATCH_RELEASE_CST_1200');

DBMS_SCHEDULER.disable (name => 'BATCH_RELEASE_MST_1700');

DBMS_SCHEDULER.disable (name => 'BATCH_RELEASE_1600');

DBMS_SCHEDULER.disable (name => 'BATCH_RELEASE_PRATT');

DBMS_SCHEDULER.disable (name => 'BATCH_RELEASE_2NDREL_2200');

DBMS_SCHEDULER.disable (name => 'LOURDES_KRONOS');

DBMS_SCHEDULER.disable (name => 'BATCH_RELEASE_1800');

DBMS_SCHEDULER.disable (name => 'BATCH_RELEASE_700');

DBMS_SCHEDULER.disable (name => 'EST_BATCH_RELEASE');

DBMS_SCHEDULER.disable (name => 'MST_BATCH_RELEASE');

DBMS_SCHEDULER.disable (name => 'PST_BATCH_RELEASE');

DBMS_SCHEDULER.disable (name => 'BATCH_RELEASE_1900');

DBMS_SCHEDULER.disable (name => 'INVENTIV_REPSURVEY_DISPATCH');

DBMS_SCHEDULER.disable (name => 'INVENTIV_ONCALLSURVEY_DISPATCH');

DBMS_SCHEDULER.disable (name => 'BATCH_RELEASE_600');

DBMS_SCHEDULER.disable (name => 'BATCH_RELEASE_MST_2100');

DBMS_SCHEDULER.disable (name => 'YEARLY_VACATION_LIMIT');

DBMS_SCHEDULER.disable (name => 'BATCH_RELEASE_1100');

DBMS_SCHEDULER.disable (name => 'KP_GLOBAL_SHIFT_CHANGES_NOTIFY');

DBMS_SCHEDULER.disable (name => 'LOG_ON_TRACKING');

DBMS_SCHEDULER.disable (name => 'BATCH_RELEASE_2200');

DBMS_SCHEDULER.disable (name => 'BATCH_RELEASE_2100');

DBMS_SCHEDULER.disable (name => 'BATCH_RELEASE_1700');

DBMS_SCHEDULER.disable (name => 'BATCH_RELEASE_MST_800');

DBMS_SCHEDULER.disable (name => 'BATCH_RELEASE_EST_800');

DBMS_SCHEDULER.disable (name => 'OWA_CACHE_GARBAGE_COL');

DBMS_SCHEDULER.disable (name => 'CVS_DAILY_EXP_COMPLIANCE');

DBMS_SCHEDULER.disable (name => 'BAYER_NURSE_NOTES');

DBMS_SCHEDULER.disable (name => 'CVS_WEEKLY_EXP');

DBMS_SCHEDULER.disable (name => 'CVS_DAILY_EXP');

DBMS_SCHEDULER.disable (name => 'BATCH_RELEASE_CST_1800');

DBMS_SCHEDULER.disable (name => 'BATCH_RELEASE_MST_NOON');

DBMS_SCHEDULER.disable (name => 'INVENTIVE_COMPLETE_EXPORT');

DBMS_SCHEDULER.disable (name => 'CRT_INVENTIVE_ASSIGN');

DBMS_SCHEDULER.disable (name => 'INVENTIVE_SCHD_EXPORT');

DBMS_SCHEDULER.disable (name => 'MC_RESTRICT_TIMEOFFS');

DBMS_SCHEDULER.disable (name => 'BATCH_RELEASE_CST_800');

DBMS_SCHEDULER.disable (name => 'NORTHSIDE_SCHD_DATA_BATCH');

DBMS_SCHEDULER.disable (name => 'SHIRE4PROJ_UPD_REPORT');

DBMS_SCHEDULER.disable (name => 'CRT_SHIRE4PROJS_ASSIGN');

DBMS_SCHEDULER.disable (name => 'NORTHSIDE_CRT_STAT_EMAIL');

DBMS_SCHEDULER.disable (name => 'CRT_STELARA_ASSIGN');

DBMS_SCHEDULER.disable (name => 'STELARA_SCHD_EXPORT');

DBMS_SCHEDULER.disable (name => 'ADD_PROVIDER_COUNT');

DBMS_SCHEDULER.disable (name => 'STELARA_COMPLETE_EXPORT');

DBMS_SCHEDULER.disable (name => 'NORTHSIDE_HR_LOAD');

DBMS_SCHEDULER.disable (name => 'SUV_HR_LOAD');

DBMS_SCHEDULER.disable (name => 'UPD_NOVARTIS_ASSIGN');

DBMS_SCHEDULER.disable (name => 'BATCH_RELEASE_0830');

DBMS_SCHEDULER.disable (name => 'CRT_NOVARTIS_ASSIGN');

DBMS_SCHEDULER.disable (name => 'CVS_DAILY_EXP_TRENDRPT');

DBMS_SCHEDULER.disable (name => 'CRT_NATPARA_REPORT');

DBMS_SCHEDULER.disable (name => 'GATTEX_DAILY_EXPORT');

DBMS_SCHEDULER.disable (name => 'FIRAZYR_DAILY_EXPORT');

DBMS_SCHEDULER.disable (name => 'BATCH_RELEASE_1500');

DBMS_SCHEDULER.disable (name => 'HST_BATCH_RELEASE');

DBMS_SCHEDULER.disable (name => 'BATCH_RELEASE_PST_700');

DBMS_SCHEDULER.disable (name => 'BATCH_RELEASE_MST_700');

DBMS_SCHEDULER.disable (name => 'BATCH_RELEASE_HST_700');

DBMS_SCHEDULER.disable (name => 'BATCH_RELEASE_EST_700');

DBMS_SCHEDULER.disable (name => 'BATCH_RELEASE_CST_700');

DBMS_SCHEDULER.disable (name => 'CAL_SYNC_DAILY_LOAD');

DBMS_SCHEDULER.disable (name => 'TABITHA_ADP_EXP');

DBMS_SCHEDULER.disable (name => 'GATTEX_NURSE_EXPORT');

DBMS_SCHEDULER.disable (name => 'BATCH_RELEASE_MST_1600');

DBMS_SCHEDULER.disable (name => 'BATCH_RELEASE_CST_1700');

DBMS_SCHEDULER.disable (name => 'TREMFYA_COMPLETE_EXPORT');

DBMS_SCHEDULER.disable (name => 'TREMFYA_SCHD_EXPORT');

DBMS_SCHEDULER.disable (name => 'CRT_TREMFYA_ASSIGNMENTS');

end;
/

SQL> select JOB_NAME ,OWNER from dba_scheduler_jobs where job_creator = 'TSA' and state = 'SCHEDULED';
no rows selectedcol job_name format a40;
col owner format a10;
col job_creator format a10;
select job_name, owner, job_creator, enabled from dba_schedul

... [Content truncated for readability]

---

### 635. Pending Concurrent Jobs count alert

**Topic ID:** 2105

Problem:
========
We receive the alert for number of pending concurrent jobs being HIGH.

Symptoms:
==========
There could be multiple reasons for a high pending jobs. Below are a few of the most common reasons:
1/ Locking sessions.
2/ Forms sessions being hung.
3/ File system issue.
4/ Load on the database and/or application servers.
5/ Tablespace issue.

Solution:
========

Check the current count of pending concurrent jobs using below:

sshappprod@c1prdebsapp1.nanometrics.com
. APPSPRODEBS_c1prdebsapp1.env

sqlplus apps@prodebs

FROM apps.fnd_concurrent_worker_requests cwr,

AND cwr.requested_start_date<= SYSDATE

and cq.LANGUAGE='US'

https://docs.google.com/document/d/1QapIUzHLAWs8Vs81Zr5_qnQJm59OqWGr-WOUCtEkcYA/edit

2/ For hung Forms sessions, we follow through below steps:

sshappprod@c1prdebsapp1.nanometrics.com
. APPSPRODEBS_c1prdebsapp1.env

sqlplus apps@prodebs

SQL> @/home/appprod/forms_session.sql

****NOTE: Above query will list the users and their respective sessions. You can correlate the session with the steps from the above document to determine the session to be killed. ****

3/ File system issue, we engage with our DC Team to take a look.

4/ For the high load on DB+App servers, we use OEM/Maxgauge to find the reason. Also, engage the DC team.

OEM:https://af225.appsforte.com:7803/em
MaxGauge:https://maxgauge.appsforte.com
5/ For tablespace issue, we follow through below steps:
a. Run below query to find the tablespace utilisation:

set linesi 200
set pagesi 999
SELECT a.tablespace_name, ROUND(a.totsize/1024/1024,0) "Tot Size (MB)",
ROUND(NVL(b.used,0)/1024/1024,0) "Used (MB)",
100 - ROUND(((a.totsize - NVL(b.used,0)) / a.totsize) * 100,0) "% Used", ROUND(((a.totsize -
NVL(b.used,0)) / a.totsize) * 100,0) "% Free"
FROM
(SELECT tablespace_name, SUM(bytes) totsize FROM dba_data_files GROUP BY tablespace_name) a,
(SELECT tablespace_name, SUM(bytes) used FROM dba_segments
GROUP BY tablespace_name) b
WHERE a.tablespace_name=b.tablespace_name (+)
ORDER BY 5 desc
/

b. Check the data file utilisation by running below query:

set linesi 150
set pagesi 999
col tablespace_name for a20
col file_name format a70
select tablespace_name, file_name, bytes/1024/1024/1024 "Size GB", maxbytes/1024/1024/1024 "Maxsize GB", AUTOEXTENSIBLE
from dba_data_files where tablespace_name = upper('&tablespace_name')
order by tablespace_name
/

c. Counter verify the tablespace issue from the alert log by issuing below commands on the respective hosts:

c1prdebsdb1: tail -100f /home/oraprod/alert_PRODEBS1.log
c1prdebsdb2: tail -100f /home/oraprod/alert_PRODEBS2.log

d. Extend a data file OR add a data file in the problematic tablespace.

---

### 644. JAR Resources In JNLP File Are Not Signed By Same Certificate

**Topic ID:** 2105

Reference: E-Business Suite R12.2 : Using Java Web Start Get Error 'JAR Resources In JNLP File Are Not Signed By Same Certificate' (Doc ID 2464716.1)

Use the AD Administration tool (adadmin) to regenerate JAR files with force option.

1. Please stop the services on second web node (Except for concurrent manager)

2. Backup $APPL_TOP_NE/ad/admin/adkeystore.dat and adsign.txt and copy these files from primary node.

3. Generate the jar files:

$ adadmin

Navigation: Generate Applications Files > Generate product JAR files

Regenerate JAR files with FORCE option set to Yes

Do you wish to force regeneration of all jar files? [No] ? Yes

4. Restart the services.

**Note:**Regenerate the JAR files in both nodes for multi node environment.

---

### 45. New APEX account provisioning

**Topic ID:** 2104

Provision new APEX account
Follow solution 26 to create new workspace and schema
Follow soution 27 to provision CPANEL account and setup DNS
Test new URL works properly
Update Customer worksheet with workspace and CPANEL account information
Release new accounts to customer

---

### 649. VM very high load average with high IO, unresponsive, won't come back online

**Topic ID:** 2116

**References**:

**Symptoms (if applicable)**:

**Causes (if applicable)**:

**Procedure or Solution Description**:

1. Force shutdown
2. Copy to another VM, fast clone.
3. Bring up the database, and remove PDB from restricted mode.
PDB is in restrict mode - Oracle Forums

connect / as sysdba

alter session set container=ICONDEV;

alter system disable restricted session;
4. Bring up tomcat. Don't bring up tomcat until the database is fully open to avoid ORDS pool unavailable error.

---

### 650. EBS Forms not opening for client

**Topic ID:** 2105

**Title**: CLIENT UNABLE TO OPEN JAR FORM

**References**:

**Symptoms (if applicable)**:

**Causes (if applicable)**:

**Procedure or Solution Description**:
Inform client to follow steps:

1. Open the Java Control Panel (accessible through the Control Panel in Windows).
2. Navigate to the "General" tab.
3. Under "Temporary Internet Files," click "Settings."
4. Click "Delete Files."
5. Ensure "Delete Applications and Applets" is selected and proceed with deleting the files. This might take some time to complete.
6. Close all browser windows.
7. Reopen the browser and attempt to launch the JNLP application again

---

### 656. Changing Password for EBS level user using FNDCPASS

**Topic ID:** 2105

**Title**: How to change password for EBSapps user with FNDCPASS

**References**:

**Symptoms (if applicable)**: Client does not know or forgot password to login to the EBS apps webpage.

**Causes (if applicable)**:

**Procedure or Solution Description**:
**KEEP IN MIND THAT APP LEVEL USER IS SEPARATE FROM DATABASE LEVEL USER.

Access the server via SSH, and source the environment file.
You must have the application level password and also the EBS system level password (this is not the same thing as the password used to login to EBS as sysadmin, this is the password used during setup.)

To change a single user's password, use the following:

FNDCPASS apps/APPS_PW_HERE 0 Y system/SYSTEM_PW_HERE USER USER_TO_CHANGE_HERE NEW_PASSWORD

Example:
FNDCPASS apps/AppsPass123 0 Y system/SysPass123 USER ERICJ ericspassword123

^^^
Keep in mind that the "USER" specified here is for when you want to change the password for one single user.
**AFTER DOING THIS, MAKE SURE TO READ THE OUTPUT LOG FILE THAT FNDCPASS GIVES AND MAKE SURE THE PASSWORD WAS CHANGE SUCCESFULLY. THIS IS IMPORTANT AS YOUR PASSWORD MAY NOT MEET ORACLE SECURITY STANDARDS AND THE NEW PASSWORD MIGHT NOT APPLY.**
There are other variables you can use in place of that "USER", such as the following:

FNDCPASS apps/apps 0 Y system/manager ORACLE GL GL1
^^^
Specifying with "ORACLE" is to change the password for one schema user.
FNDCPASS apps/apps 0 Y system/manager ALLORACLE WELCOME
^^^
This is used when you wish to change the password for ALL database schemas - (Schemas: a user within a database that is responsible for handling data, generally for modules attached to EBS)

---

### 652. Setting up Inventory Debugger for EBS

**Topic ID:** 2105

**Title**: Setup Inventory Debugger for EBS

**References**:
https://support.oracle.com/epmos/faces/DocumentDisplay?_afrLoop=280020470807269&parent=SrDetailText&sourceId=3-41833585351&id=148651.1
**Symptoms (if applicable)**:

**Causes (if applicable)**:

**Procedure or Solution Description**:
Go into EBS apps and find and change the following profiles

INV:DebugTrace = YES
INV:Debuglevel = 15
INV:DebugFile= /tmp/invdbg_TAR.dbg

Once set, you will need to go into Process Transaction Managers and restart the manager named "Process interface". This will cause the inv debugger to run and spit out an output at the directory that you provided in the profile settings.

---

### 651. Adding Analyzer Scripts as Concurrent Request to EBS

**Topic ID:** 2105

**Title**: Adding Analyzer as Concurrent Request to EBS

**References**:

**Symptoms (if applicable)**:

**Causes (if applicable)**:

**Procedure or Solution Description**:
After putting analyzer files onto server, make sure to run the "package definition" script first. After this,define a new Concurrent Program using the FNDLOAD utility.

example:
$$FND_TOP/bin/FNDLOAD apps/0 Y UPLOAD $FND_TOP/patch/115/import/afcpprog.lct AR_PERIOD_CLOSEAZ.ldt CUSTOM_MODE=FORCE UPLOAD_MODE=REPLACE

In EBS, figure out and write down the group you wish to add this request to by going to:

**Responsibility**: System Administrator
**Navigation**: Security > Responsibility > Define
- Query Receivables responsibility being used.
- Under "Request Group" note down the name.

Then proceed to add this concurrent request by going to

**Navigation**: Security > Responsibility > Request
- Query Request Group name from previous step.
- Add an entry for the Program "Receivables Period Close Analyzer" to the request group being used.
​

---

### 653. Create Synonym in Oracle Database

**Topic ID:** 2105

**Title**: Create Synonym in Oracle Database

**References**:

**Symptoms (if applicable)**:

**Causes (if applicable)**:

**Procedure or Solution Description**:
You must first know the object name and user name that you want this synonym to point to, and the user you are wanting to make this synonym on must have permissions to view the object from that other user.
Log into the db as the user and run the following query:

create synonym SYNONYM_NAME for OBJECT_OWNER_USER.OBJECT_NAME;

Example:
If you want to let the current user be able to view the table named "TEST" and have it show an object named "PAGE" from the user "ADMIN", then you would do the following as the current user.

create synonym TEST for PAGE.ADMIN;

Now when this user queries for TEST, it will show the contents from the object named PAGE from the user ADMIN.

---

### 654. Get Package Files from Database

**Topic ID:** 2105

**Title**: Get Package files from EBS

**References**:

**Symptoms (if applicable)**:

**Causes (if applicable)**:

**Procedure or Solution Description**:
Connect to the DB in SQL Developer, and go to the "packages" on the left side of your menu, right click it, and click "apply filter", and input the name of the package you wish to see.

The package comes in two files, one is a .pks, which will contain the "header" of the package, which is this one:

The actual package body itself is this one, and is a .pkb extension. This file will be much larger than the .pks.

Save the contents of both the header and the body into a txt file and save and name as the correct extensions.

---

### 655. Stop log files from generating for external tables, (disable stats monitoring)

**Topic ID:** 2104

**Title**: Stop log files from generating for external tables, (disable stats monitoring)

**References**:
https://forums.oracle.com/ords/apexds/post/external-table-log-files-forming-themselves-5828
https://docs.oracle.com/en/database/oracle/oracle-database/18/tgsql/controlling-the-use-of-optimizer-statistics.html#GUID-F9BB2D09-BAED-466A-9953-B93442AD8E4A
**Symptoms (if applicable)**:
If clients are having random log file creations every 4 hours or on a similar repeated schedule
**Causes (if applicable)**:
The dbms_stats.gather_stats_job is creating the log files for those external tables.
**Procedure or Solution Description**:

Figure out the owner of the external tables, and then run the following for those tables:

BEGIN
DBMS_STATS.LOCK_TABLE_STATS(
ownname => 'TABLE_OWNER_NAME', -- Replace with the owner of the table
tabname => 'TABLE_NAME' -- Replace with the name of the table
);
END;
/

---

### 657. Adding a Program or Script as concurrent program in EBS

**Topic ID:** 2105

To figure out which request groups have access to the script/application, submit a new request with the name of "Report Group Responsibilities".
For the "Application Name", select the "Application" request group that the program would belong to. Then for the "Report Name", select the name of the script/program.
Run the report, and the output will give you a list of the responsibilities that can access this program, along with the application group that that responsibility is a part of.

With this list of information, you can go on to Responsiblity -> Define and search up the responsibility name.
After searching, the right side tells you which Request Group this Responsibility is a part of.

Go to Responsiblity -> Request, and search up the Request Group for this responsiblity.
Once searched, you can proceed to make a new entry and select the program and save.

Now to make sure that the User in question has access to this Responsibility.
Go to Security -> Users -> Define and search up the user you wish to give permission to this program to.
Make a new entry and select the responsibility which has the correct request group which has access to the program.

NOTES:

---

### 658. Run or execute given script on EBS instance

**Topic ID:** 2105

**Title**: Run or execute given script on EBS instance

**References**:

**Symptoms (if applicable)**:

**Causes (if applicable)**:

**Procedure or Solution Description**:
Upload the script you were given via SFTP, make sure that the transfer protocol is correct for your file type. In SSH, go to the directory where the scripts are, and then enter SQLPlus. Execute the scripts by typing @ before the script name. Example: @script.sql

---

### 139. Create a CSR for Certificate with openssl

**Topic ID:** 301

**Create a CSR for Certificate**

**1. Log on to the server and execute "openssl genrsa" command followed by below options:**
[root@haproxy1 2024]# openssl genrsa -out prjebsapp.key 2048Generating RSA private key, 2048 bit long modulus

...............................................+++
.................................................................................................................................................................+++
e is 65537 (0x10001)
Enter pass phrase for prdebskey.pem:
**(Add password and remove later.)**
[root@haproxy1 2024]# pwd
/root/sslcerts/prdebsapp/2024
[root@haproxy1 2024]# ls
prdebskey.pem

**2. Run "openssl req" command:**
(Both challenge password and optional company name blanks)
[root@haproxy1 2024]# openssl req -new -sha256 -key prdebskey.pem -out prdebsapp.csr
Enter pass phrase for prdebskey.pem:
You are about to be asked to enter information that will be incorporated
into your certificate request.
What you are about to enter is what is called a Distinguished Name or a DN.
There are quite a few fields but you can leave some blank
For some fields there will be a default value,
If you enter '.', the field will be left blank.
-----
Country Name (2 letter code) [XX]:US
State or Province Name (full name) []:California
Locality Name (eg, city) [Default City]:Milpitas
Organization Name (eg, company) [Default Company Ltd]:Onto Innovation
Organizational Unit Name (eg, section) []:IT
Common Name (eg, your name or your server's hostname) []:prdebsapp.ontoinnovation.com
Email Address []:sup@appsforte.com

Please enter the following 'extra' attributes
to be sent with your certificate request
A challenge password []:
An optional company name []:
(Both challenge password and company name leave blank)

**3. Make a backup of the private key.**

[root@haproxy1 2024]# cp -p prdebskey.pem prdebskey.pem.orig

**4. Remove the passphrase for the private key**

[root@haproxy1 2024]# openssl rsa -in prdebskey.pem.orig -out prdebskey.pem
Enter pass phrase for prdebskey.pem.orig:
writing RSA key
[root@haproxy1 2024]# ls
prdebsapp.csr prdebskey.pem prdebskey.pem.orig

---

### 659. Migrating packages onto production - Backing up before executing migration script

**Topic ID:** 2105

**Title**: Migration packages for production - Executing scripts to update data in EBS

**References**:

**Symptoms (if applicable)**:

**Causes (if applicable)**:

**Procedure or Solution Description**:
You will need to upload the script or package onto the server instance.
BACKUP!!!!-
Before running or migrating the file, open the file and check for the name of the table or the package that is being updated.

In this case, this is a migration to update the package named "XXONTO_CPQ_SR_CONTRACTS_PKG". For packages, you can connect to the instance via SQLDeveloper, and on the left side right click on "Packages" and filter for this specific package name.
----

Open up the package and save all of the text from the first section, and put it into a txt file and save it. This will be the package header file, with the file name extension being .pks.

Now go to the one below it, this will be the actual .pkb file. Save all the text in notepad and save it as a .pkb extension file.

Now that you have your backups, you can execute the new package file on SQLPlus by first going into the directory of the script, launching SQLPlus, and then executing by typing "@package_name_here.pkb".
If after you run this it shows the line number count, you will need to execute and close the code statement by typing a "/".

________________________________________________________________________________________________________________________________
BACKING UP TABLES OR DATA FROM THE DB

First you will need to analyze the script that they give you to discern which tables are which entries are to be updated.

CREATE TABLE newbackuptable AS SELECT columnyouwantto_backup FROM table_you_wanttobackup WHERE recordyouwanttobackup = xyz

For this scenario, this will be our example code that we need to apply.

*update mtl_cycle_count_entries**
*

*set entry_status_code=4 where cycle_count_entry_id in (6007,6009,6012,6015,6016,6026,6028,8003,8004,8006,8007,8016,8017,8031,11011,11014,11016,11018,14004,14005,14006,14013,14016,14020,14030,21001,28071,20001)**
*

*and CYCLE_COUNT_HEADER_ID=1001 and**
*

*ORGANIZATION_ID=103;*

You will need to discern what is going to be changed from executing this script.
Keep in mind the table name that is to be changed (this is the table you will be pulling from to create your backup table), and also whatever specific entries are to be changed.
In this case, you can see that the table named "*mtl_cycle_count_entries"*will have the column "*entry_status_code"*set to "*4"*for the entries that have "*(6007,6009,6012,6015,6016,6026,6028,8003,8004,8006,8007,8016,8017,8031,11011,11014,11016,11018,14004,14005,14006,14013,14016,14020,14030,21001,28071,20001)"*for the column named "*cycle_count_entry_id".*

This means that you will need to create a new backup table while bringing over the data from the table named "*mtl_cycle_count_entries",*for the column "*entry_status_code"*for entries that have "*(6007,6009,6012,6015,6016,6026,6028,8003,8004,8006,8007,8016,8017,8031,11011,11014,11016,11018,14004,14005,14006,14013,14016,14020,14030,21001,28071,20001)"*for the column named "*cycle_count_entry_id".*

(color coded example):

*updatemtl_cycle_count_entries*

*setentry_status_code=4 wherecycle_count_entry_idin(6007,6009,6012,6015,6016,6026,6028,8003,8004,8006,8007,8016,8017,8031,11011,11014,11016,11018,14004,14005,14006,14013,14016,14020,14030,21001,28071,20001)*

*and CYCLE_COUNT_HEADER_ID=1001 and*

*ORGANIZATION_ID=103;*

The format to create a new backup table with the parameters goes as follows:

CREATE TABLEnew_table_for_backupAS SELECTcolumn_you_want_to_backupFROMtable_you_want_to_backupWHERErecord_you_want_to_backup=specific_conditions_here;

In this case, we can take the variables from the provided script and plug them into the correct spaces.
For this example, it will end up looking like this.

CREATE TABLEmtl_cycle_count_entries_backupAS SELECTentry_status_codeFROMmtl_cycle_count_entriesWHEREcycle_count_entry_idin (6007,6009,6012,6015,6016,6026,6028,8003,8004,8006,8007,8016,8017,8031,11011,11014,11016,11018,14004,14005,14006,14013,14016,14020,14030,21001,28071,20001);

This will back up specific tables and columns.
After this is when you can run the data fix or update by going into SQLPlus and typing "@script_here.sql"

---

### 660. Get or find OPP logs for failed concurrent request. FNDOPP

**Topic ID:** 2105

**Title**: Get or find OPP logs for failed concurrent request. FNDOPP

**References**:

**Symptoms (if applicable)**:

**Causes (if applicable)**:

**Procedure or Solution Description**:
Go into EBS, System Administrator -> Concurrent -> Manager -> Administer

Check for which server the output post processor is running on.

SSH to the server in question.
For this example, we will SSH into ONTOEBSAPPS2.

You will have to check for OPP processes by typing

ps aux | grep OPP

If you cat those log files and grep to search for the request number that failed, you will be able to discern which log file has the failed concurrent request.
So to find the logs for request1973869, do

cat LOGFILEHERE | grep REQUEST#HERE

---

### 663. Cannot edit trusted list / Cannot open forms EBS apps

**Topic ID:** 2104

**Title**: OntoInnovation Computers unable to open EBS application forms

**References**:

**Symptoms (if applicable)**:
Cannot add the url/host to Java security list
Everytime you add the link/url, it doesn't save or take into effect.
**Causes (if applicable)**:
The OntoInnovation computers have higher security standards.
**Procedure or Solution Description**:
You must right click the "Configure Java" to be able to edit the list of trusted Java hosts.

---

### 664. Running Analyzer script on EBS

**Topic ID:** 2105

**Title**: Running Analyzer script on EBS

**References**:

**Symptoms (if applicable)**:

**Causes (if applicable)**:

**Procedure or Solution Description**:
Download the latest version of the analyzer zip, and sftp it to the applications server. Unzip, and then follow the Oracle Notes guide.
Usually consists of first creating the package definition by running the script in SQLPlus. Then you can run the actual analyzer script (usually script name is "analyze" while package definition name is "analyzer") and input the correct parameters that was given from client.

---

### 665. Create Missing Sequence Synonyms for APPSREAD user

**Topic ID:** 2105

**Title**: Create Missing Sequence Synonyms for APPSREAD user

**References**:
see sequence synonym creation on this document:https://docs.google.com/document/d/1wU94Ld0BPeakmZcn24ybBiTy6cvMqHQ0MMamdFnHIhM/edit?tab=t.0
**Symptoms (if applicable)**:
Client was having trouble querying some sequences as the appsread user.
**Causes (if applicable)**:
Appsread user did not have majority of sequence synonyms.
**Procedure or Solution Description**:
Ran the following script:

SET SERVEROUTPUT ON SIZE 1000000
SET FEEDBACK OFF
SET VERIFY OFF

SPOOL create_appsread_sequence_synonyms.sql

BEGIN
DBMS_OUTPUT.PUT_LINE('-- Synonyms for sequences accessible by APPS user');
DBMS_OUTPUT.PUT_LINE('-- Generated on: ' || TO_CHAR(SYSDATE, 'YYYY-MM-DD HH24:MI:SS'));
DBMS_OUTPUT.PUT_LINE('');

FOR seq_rec IN (
SELECT sequence_owner, sequence_name
FROM all_sequences
WHERE sequence_owner NOT IN ('SYS', 'SYSTEM', 'APPSREAD')
AND sequence_name NOT IN (
SELECT synonym_name
FROM all_synonyms
WHERE owner = 'APPSREAD'
)
ORDER BY sequence_owner, sequence_name
) LOOP
DBMS_OUTPUT.PUT_LINE(
'CREATE SYNONYM APPSREAD.' || seq_rec.sequence_name ||
' FOR ' || seq_rec.sequence_owner || '.' || seq_rec.sequence_name || ';'
);
END LOOP;
END;
/

SPOOL OFF

-- Review the generated file, then execute it
-- @create_appsread_sequence_synonyms.sql
And then afterwards ran@create_appsread_sequence_synonyms.sql

---



## Category: Networking & Firewall

*71 solutions*

### 12. chroot functinality in sftp

**Topic ID:** 306

Let's assume you already have ssh set up and you want (chroot-sftp). So now we'll start configuring the second sshd daemon for sftp access:

1. cp -p /etc/ssh/ssh_config /etc/ssh/sshd_config-internal (you can give any name to configuration file)

2. Modify the new file as necessary. Most importantly, look at ListenAddress and Port. You can change the port address to e.g. 222

3. Below is the diff command output to understand the changes between two config files.

# diff sshd_config sshd_config-internal
13c13
<Port 22
---
> Port 222
41c41
<#StrictModes yes
---
> StrictModes no
111a112
> PidFile /var/run/sshd-internal.pid
119c120,121
<#Subsystem sftp internal-sftp
---
> ChrootDirectory %h
> Subsystem sftp internal-sftp

4. Now copy, cp -p /etc/rc.d/init.d/sshd /etc/rc.d/init.d/sshd-internal and modify the new file to point to sshd-internal wherever the old file pointed to ssh. This includes executables, config files, pid files and key files, for example.

# diff sshd sshd-internal
8c8
<# processname: sshd
---
> # processname: sshd-internal
12,13c12,13
<# config: /etc/ssh/sshd_config
<# pidfile: /var/run/sshd.pid
---
> # config: /etc/ssh/sshd_config-internal
> # pidfile: /var/run/sshd-internal.pid
19c19
<[ -f /etc/sysconfig/sshd ] && . /etc/sysconfig/sshd
---
> [ -f /etc/sysconfig/sshd-internal ] && . /etc/sysconfig/sshd-internal
22c22
<prog="sshd"
---
> prog="sshd-internal"
30c30
<PID_FILE=/var/run/sshd.pid
---
> PID_FILE=/var/run/sshd-internal.pid

Please note the above changes made in "/etc/init.d/sshd-internal" file.

5. Now, cd /usr/sbin/
$ ln -s sshd sshd-internal
No changes to the executable

6. cd /etc/pam.d/
$ ln -s sshd sshd-internal
No changes to the PAM module.

7. Now create the "/etc/sysconfig/sshd-internal" file and add as below,

#cat /etc/sysconfig/sshd-internal
OPTIONS="-f /etc/ssh/sshd_config-internal"

8. Now start the service as, service sshd-internal start

The importanat points to be noted here are

Here SFTP is running on port 222.

The home directory of the user should be owned by root and no others should have the write permissions on that directory.
Inside that directory you can create other directory and assign full permission to the user on that directory. So user can use that directory.

---

### 77. Configuration of Windows 2008 Server - Radius for PIX VPN

**Topic ID:** 301

OptionsSymptom:
*(public)*I like connecting to my network using my pfSense firewall's built-in VPN server. Following these steps, I can configure Windows Server 2008 to provide the authentication credentials for pfSense via RADIUS. I figured this out usingthis great guidethat I referenced for Windows Server 2003...
**Enable "reversible password encryption" for your domain users.
***Globally:*

- Admin Tools - Group Policy Management
- Choose your forest, domain and then right click your Default Domain Policy and choose Edit.
- Computer Configuration -> Policies -> Windows Settings -> Security Settings -> Account Policies -> Password Policy -> Store passwords using reversible encryption = Enabled.
*Per User:*

- I prefer doing it globally, but you can do it on a per user basis by opening your domain user's properties and checking "Store password using reversible encryption" on the Account tab.
*Restart the domain controller after these Group Policy changes.
**Enable Windows Server 2008 Network Policy Server (NPS)**

- Add the "Network Policy and Access Services" role to your domain controller.
- Enable these role services during installation:
Network Policy Server
Routing & Remote Access Services
Remote Access Service
Routing
**Verify the RADIUS Port Numbers**

- Server Manager -> Roles -> Network Policy and Access -> Right-click NPS (Local) -> Properties -> Ports Tab.
- Verify the defaults for Authentication are 1812,1645.
- Verify the defaults for Accounting are 1813, 1646.
- The 18 set is for a secure connection, or vice-versa. You can change things to match your RADIUS client, but the defaults should be fine.
**Add a new RADIUS Client**

- NPS (Local) -> RADIUS Clients and Servers -> RADIUS Clients -> Right-click Add new Client.
- Add a name, the ip address of your client and create a shared secret.
**Add a new Network Policy**

- NPS (Local) -> Policies -> Right-click Network Policies -> Add new.
- Enter a name and leave Type of network access server as Unspecified. Click Next.
- Add a condition. Choose Windows Groups. Add a Group ("Domain Users" for example). Click OK, then Next.
- Choose Access Granted. Click Next.
- Leave the default Authentication Methods. Click Next.
- Leave the Default Constraints. (Although they look like some cool new features you may want to use.) Click Next.
- Leave the Default Settings. Click Next.
- Click Finish.
**Granting or Denying Access to Users**

- Right click a domain user -> Properties -> Dial-in tab.
- You can Grant or Deny here, but I just leave the NPS Policy we setup earlier to allow all domain users through.
**Configure your RADIUS Client**

- In this case, I enable a PPTP VPN server on my pfSense firewall and point it to my domain controller/NPS services machine where we just configured everything. Input the shared secret and then login from anywhere!
Problem:
*(public)*Solution:
*(public)*

---

### 13. Cisco ASA 5520 SmartNet Support Information

**Topic ID:** 903

Cisco Smartnet Information

CONTRACT INFORMATION
Service Level: IPS Svc, AR NBD(SU1)
Reseller PO Number: 70F0654D
Cisco Quote Number: Q11766808
Registered By: richrad
Registration Date: 23/APR/2010

Install Site Location: APPS HOSTING
1820 E GARRY AVE - STE 218
SANTA ANA, CA 92705
UNITED STATES
Product Part Number: ASA5520-AIP10-K9
Product Serial Number: JMX1230L1MP
Contract Number: 90855726
Registration Type: New Service
Start Date: 22/APR/2010
End Date: 21/APR/2011

Please keep this information readily available. You will need this information when calling our Technical Assistance Center (TAC) for support .

The TAC can be reached at:

Location: Telephone: E-Mail:
North America 1-800-553-2447 tac@cisco.com:
408-526-7209

Europe 32-2-704-5555 euro-tac@cisco.com
Asia-Pacific 61-2-8448-7107 asiapac-tac@cisco.com
Australia 1-800-805-227 asiapac-tac@cisco.com

---

### 17. Cisco SSM-10 IPS Login

**Topic ID:** 1201

Upgraded the IPS to 7.0 (2)

The IPS ip address is 172.1.0.52

To connect https://172.1.0.52

Username : cisco

Password : a0droot2oo6!

---

### 18. Opening Ports on Cisco Firewall (ASA or Pix)

**Topic ID:** 1201

Opening ports on ASA

You need to know the internal and external IP and ports.

- Log into ASA (ssh 172.1.0.1, default gateway)

- "enable" mode (type ena)
- "configuration" mod (type conf t)

- Enter the following configuration:

---
static (inside,outside) tcp 216.74.58.72 8001 172.1.0.62 8001 netmask 255.255.255.255
static (inside,outside) tcp 216.74.58.72 8005 172.1.0.62 8005 netmask 255.255.255.255
static (inside,outside) tcp 216.74.58.72 1522 172.1.0.62 1522 netmask 255.255.255.255
static (inside,outside) tcp 216.74.58.98 1522 172.1.1.61 1522 netmask 255.255.255.255

access-list ahdirect extended permit tcp any host 216.74.58.72 eq 8001
access-list ahdirect extended permit tcp any host 216.74.58.72 eq 8005
access-list ahdirect extended permit tcp any host 216.74.58.72 eq 1522
access-list ahdirect extended permit tcp host 74.208.145.51 host 216.74.58.98 eq 1522

NOTE: To allow access to a particular IP address use the following format:

access-list ahdirect extended permit tcp host 66.152.169.36 host 216.74.58.68 eq 8888

---

- "write mem" to save configuration
**APPENDIX:**

To look for rule set in firewall:
show run | include "your string"

To remove a rule set, prepend "no " to the command used to set the command:

no static (inside,outside) tcp 216.74.58.98 1522 172.1.1.61 1522 netmask 255.255.255.255
no access-list ahdirect extended permit tcp host 74.208.145.51 host 216.74.58.98 eq 1522

---

### 19. DSI DNS Logins

**Topic ID:** 1202

dyndns:

customer: dispensingsolutions
ashok / wltd0ww

Network Solutions

hvolkman
dsi-4321!

---

### 20. Set Maximum Bandwidth Throughput Speed

**Topic ID:** 1501

The policy configuratio is set on the Cisco ASA:

policy-map police-policy
class class-default
police output 12583000
police input 12583000

---

### 563. Vpn client for mac

**Topic ID:** 308

**Problem**: Client faced problem installing VPN client on Mac
**References**: https://drive.google.com/open?id=0BwbkrP97qT3bZTBPWVhrck95eDg
**Symptoms**: Installer failed installation
**Causes**: Some Mac versions have problem with AnyConnect VPN client.
**Solution**: Workaround by configuring native Mac VPN client. See reference document.

---

### 53. CPanel - httpd.conf Apache Adding Custom Directives

**Topic ID:** 301

OptionsSymptom:
*(public)*

## Adding Custom Directives to httpd.confMany users are initially daunted by the new system used for generating and managing Apache's core configuration file, httpd.conf. As mentioned inThe Apache Configuration Systemdirect edits of httpd.conf will no longer be preserved unless they are properly integrated with the new Apache configuration system. This section lists the various methods available for customizing the httpd.conf file. For most users, the apache config distiller tool or the use of include files are recommended.

#### httpd.conf changes not contained in a

- **Includes**- When EasyApache 3 is rebuilt using a different version of Apache, changes checked in using the apache config distiller will be replaced with default values to ensure compatibility with the new version of Apache. If you would like your changes to persist through such a rebuild, several include files can be used instead of editing the main httpd.conf. The WebHost Manager features an editor for these include files at**Main >> Service Configuration >> Apache Setup >> Include Editor**. Open the editor interface and select the appropriate location in httpd.conf and the desired Apache version. When you have finished editing the include file, click**Update**and your changes will be tested for syntactical validity.
**NOTE:**Virtually any Apache directives can be added using this method. Please make certain that any changes you make in this fashion will remain valid regardless of other configuration changes made in the WebHost Manager. For instance, if you are adding directives that pertain to mod_suphp, enclose them in an appropriateblock.
`
suPHP_ConfigPath /usr/local/lib/
`

- **Apache config distiller -**Most changes to the non-VirtualHost sections of httpd.conf can be easily preserved using the apache config distiller tool. Simply run`/usr/local/cpanel/bin/apache_conf_distiller --update --main`after making such a change to update the templates and datastores. Regenerating the httpd.conf file with`/scripts/rebuildhttpdconf`will allow you to quickly verify that the change was properly stored.
- **Custom Templates**- The final method for preserving changes to the non-VirtualHost sections of httpd.conf is to create a custom template for Apache. This would be placed at /var/cpanel/templates/apache(1 or 2)/main.local and should be based on the template at /var/cpanel/templates/apache(1 or 2)/main.default. The templates located here are processed using the Template Toolkit and have access to the information contained in the configuration datastores used by the new configuration system. The same warning about ensuring your edits will remain valid when settings are changed in the WebHost Manager applies to this method. Additionally, if you create a main.local template the apache config distiller will no longer preserve changes to the non-VirtualHost sections in httpd.conf. The apache config distiller updates the main.default template only.

#### httpd.conf changes contained in a

- **Includes**- Like the main portion of httpd.conf, the VirtualHost containers also provide the ability to add customizations using Include files. At this time there is no graphical interface for creating and managing VirtualHost includes, so they must be manipulated manually. The include directory structure is not created automatically, but uses the following file structure:

  - Individual VirtualHost
`/usr/local/apache/conf/userdata/(ssl|std)/(1|2)
///.conf`
  - All VirtualHost containers
`/usr/local/apache/conf/userdata/.conf`
  - All VirtualHost containers for SSL or standard VirtualHosts
`/usr/local/apache/conf/userdata/[ssl or std]/.conf`
  - All VirtualHost containers for SSL or standard VirtualHosts with version specific settings
`/usr/local/apache/conf/userdata/[ssl or std]/[1 or 2]/.conf`
  - All of a users VirtualHost containers for SSL or standard VirtualHosts with version specific settings
`/usr/local/apache/conf/userdata/[ssl or std]/[1 or 2]//.conf`
  - Individual VirtualHost container for SSL or standard VirtualHosts with version specific settings
`/usr/local/apache/conf/userdata/[ssl or std]/[1 or 2]///.conf`

- Includes are located as the final directive in the VirtualHost container. As a result, default values in the VirtualHost can usually be overridden via the include files. Include files beginning with "cp_" are reserved for cPanel settings and can and will likely be automatically rewritten. After adding any new include files, they need checked for compatibility and httpd.conf needs made aware of it.

To verify that include files are valid with the running apache run:`/scripts/verify_vhost_includes`

Add --help if you wish for additional information.

After that is complete you can ensure that cpanel includes are setup as per the userdata and have the VirtualHost Include directives updated by running`/scripts/ensure_vhost_include_directives`with the proper arguments.

Add --help if you wish for additional informati

... [Content truncated for readability]

---

### 54. Convert SSL Certificate to PFX (Windows)

**Topic ID:** 301

OptionsSymptom:
*(public)*openssl pkcs12 -export -out NEW.pfx -inkey ../private/\\*.appshosting.com.key -in \\*.appshosting.com.crt -certfile bundle.crtProblem:
*(public)*Solution:
*(public)*

---

### 69. Broadcom BCM5716 Nic driver build on RHEL 5.2

**Topic ID:** 301

OptionsSymptom:
*(public)*On new R410 servers RHEL 5.2 will not identify the network card hence will not be able to bring the system online.Problem:
*(public)*How to build nic driver on R410 servers for RHEL 5.2Solution:
*(public)*

1) Download the latest driver from Dell site for the new hardware R410. Burn the driver tar.gz file onto CD-ROM and request local support people to load it on the server

2) Mount the CDROM and extract the tarball

3) RHEL requires kernel-devel and kernel-headers for compiling the driver as well the rpmbuild package. Install the rpmbuild package.

4) Extract the tarball to /usr/local, this will create a directory called Bcom_LAN_12.8_Linux_Source_A00

cd Bcom_LAN*

You would see the following directroies:

[root@ah79 Bcom_LAN_12.8.1_Linux_Source_A00]# ll
total 8
drwxr-xr-x 2 root root 4096 Apr 30 23:35 NetXtreme
drwxr-xr-x 3 root root 4096 Aug 12 02:58 NetXtremeII

cd to NetXtremeII

Install the RPM source to build the RPM pacakge for the current kernel as follows:

rpm -ivh netxtreme2-4.8.21-1.src.rpm

cd /usr/src/redhat, check that we have netxtreme2.spec under SPECS directory.

rpmbuild --bb SPEC/netxtreme2.spec

this creates a new RPM package that can be installed on the system.

5) Install the newly built package ( driver)
rpm -ivh RPMS/x86_64/netxtreme2-4.8.21-1.x86_64.rpm

The driver is installed to the following path:
/lib/modules/2.6.18-92.el5/updates/bnx*.ko

copy the drivers from updates to /lib/modules/2.6.18-92.el5/kernel/drivers/

[root@ah79 2.6.18-92.el5]# ll updates
total 3568
-r--r--r-- 1 root root 863421 Aug 13 03:25 bnx2.ko
-rw-r--r-- 1 root root 2156015 Aug 13 03:25 bnx2x.ko
-r--r--r-- 1 root root 615018 Aug 13 03:25 cnic.ko
[root@ah79 2.6.18-92.el5]# pwd
/lib/modules/2.6.18-92.el5

cp /lib/modules/2.6.18-92.el5/updates/*.ko /lib/modules/2.6.18-92.el5/kernel/drivers/

overwrite the existing files which does not have the BCM5716 support.

6) Add the following two entries to .etc/modprobe.conf

alias eth0 bnx2
alias eth1 bnx2

7) Rebuild the initrd to load the newly created drivers as follows:

cd /boot

mkinitrd -v -f /boot/initrd-2.6.18-92.el5.img 2.6.18-92.el5

8) Reboot the server and you should be able to configure the NIC

Optional to update PCI files:

Add the following entry to /usr/share/hwdata/pci.ids to detect by the h/w.

[root@ah79 hwdata]# grep 5716 pci.ids
163b NetXtreme II BCM5716 Gigabit Ethernet

---

### 79. Configuring Cisco Pix Site to Site VPN

**Topic ID:** 301

OptionsSymptom:
*(public)*isakmp policy 10 authentication pre-share
isakmp policy 10 encryption 3des
isakmp policy 10 hash md5
isakmp policy 10 group 2

access-list VPN3 permit ip 172.1.0.0 255.255.0.0 192.168.1.0
255.255.255.0

crypto map ahimap 3 match address VPN3
crypto map ahimap 3 set peer 66.110.220.75
crypto map ahimap 3 set transform-set ahiset

tunnel-group 66.110.220.75 type ipsec-l2l
tunnel-group 66.110.220.75 ipsec-attributes
pre-shared-key Pass@13579
Problem:
*(public)*Solution:
*(public)*

---

### 71. Cisco Catalyst Switch Telnet Message "Password required, but none set"\r\n

**Topic ID:** 301

OptionsSymptom:
*(public)*

## Background InformationIf you try to telnet to a router that does not have a Telnet password configured, you receive this error message:

```
Router-1#**telnet 10.3.3.1** 

Trying 10.3.3.1 ... Open

**Password required, but none set**

[Connection to 10.3.3.1 closed by foreign host]
```

## ConfigureIn this section, you are presented with the information to configure a Telnet password.
**Note:**Use theCommand Lookup Tool(registeredcustomers only) to obtain more information on the commands used in this section.

### ConfigurationsThis document uses the Router-2 configuration.
In order to set up the router to allow Telnet access, issue the**line vty**command. This command allows for the configuration of Virtual Terminal (VTY) lines for remote console access. You can configure the router to accept one or more Telnet sessions. It is strongly suggested that you configure password checking with the**login**and**password**line configuration commands. This example configures the router to accept five sessions, with the password "letmein":
Router-2

```
Router-2(config)#**line vty 0 4**
Router-2(config-line)#**login**
% Login disabled on line 66, until 'password' is set
% Login disabled on line 67, until 'password' is set
% Login disabled on line 68, until 'password' is set
% Login disabled on line 69, until 'password' is set
% Login disabled on line 70, until 'password' is set
Router-2(config-line)#**password letmein**

```

## VerifyIn order to verify that the router is correctly configured for Telnet, issue the**show running-config**command.

```
Router-2#**show running-config** 
 Building configuration...
hostname Router-2
 .
 .
line vty 0 4
password letmein
 login
 .
 .
 ! 
end
```
You should now be able to telnet to the router.

```
Router-1#**telnet**
10.3.3.1 
Trying
10.3.3.1 ... Open
User
Access Verification
Password:
letmein
Router-2#
```

---

### 72. Cisco PIX VPN Account Setup

**Topic ID:** 301

OptionsAttachment:Cisco VPN Setup.rtf10.9 MBytesSymptom:
*(public)*Problem:
*(public)*Solution:
*(public)*

**Create Cisco VPN Account for End Users
**

**
**

**Step 1
**

**
**

Create user in "Active Directory Users and Groups" using Windows SBS Console, if not already created:

**Step 2
**

Assign the "RemoteVPNAppsHosting" security group to user:

By default, unless the user requires other services, add them ONLY to the RemoteVPNAppsHosting group, and remove them from all other groups (this will require setting the RemoteVPNAppsHosting group as primary.

**Step 3**

Send the PCF file to the user:

https://remote.appshosting.com:987/OPERATIONSNetworking%20Documents/Cisco%20VPN%20PCF%20File/AppsHosting%20VPN.pcf

**Step 4**

Ask user to download the Cisco VPN client here:

http://www.appshosting.com/vpn/vpnclient.exe

**Step 5**

Ask user to run the Cisco VPN client and import the PCF profile.

**Step 6**

Provide username/password to user

---

### 73. Cisco Pix - DMZ (Mail) Interface to Inside Interface Communication

**Topic ID:** 301

OptionsSymptom:
*(public)*same-security-traffic permit inter-interface
static (inside,mail) 172.1.0.105 172.1.0.105 netmask 255.255.255.255
static (mail,inside) 192.168.0.116 192.168.0.116 netmask 255.255.255.255Problem:
*(public)*Solution:
*(public)*

---

### 74. Cisco Pix ASA 5520 Password Recovery - DSI

**Topic ID:** 301

OptionsSymptom:
*(public)*

### Performing Password Recovery for the ASA 5500 Series Adaptive Security Appliance
To recover from the loss of passwords, perform the following steps:

---
**Step 1**Connect to the security appliance console port according to the "Accessing the Command-Line Interface".

**Step 2**Power off the security appliance, and then power it on.
**Step 3**During the startup messages, press the**Escape**key when prompted to enter ROMMON.
**Step 4**To set the security appliance to ignore the startup configuration at reload, enter the following command:

```
rommon #1>** confreg
**
```
The security appliance displays the current configuration register value, and asks if you want to change the value:

```
Current Configuration Register: 0x00000011

```

```
Configuration Summary:

```

```
 boot TFTP image, boot default image from Flash on netboot failure

```

```
Do you wish to change this configuration? y/n [n]:

```
**Step 5**Record your current configuration register value, so you can restore it later.
**Step 6**At the prompt, enter**Y**to change the value.
The security appliance prompts you for new values.
**Step 7**Accept the default values for all settings, except for the "disable system configuration?" value; at that prompt, enter**Y**.
**Step 8**Reload the security appliance by entering the following command:

```
rommon #2> **boot
**
```
The security appliance loads a default configuration instead of the startup configuration.
**Step 9**Enter privileged EXEC mode by entering the following command:

```
hostname> **enable
**
```
**Step 10**When prompted for the password, press**Return**.
The password is blank.
**Step 11**Load the startup configuration by entering the following command:

```
hostname# **copy startup-config running-config
**
```
**Step 12**Enter global configuration mode by entering the following command:

```
hostname# **configure terminal
**
```
**Step 13**Change the passwords in the configuration by entering the following commands, as necessary:

```
hostname(config)# **password **password

```

```
hostname(config)# **enable password **password

```

```
hostname(config)# **username **name password password

```
**Step 14**Change the configuration register to load the startup configuration at the next reload by entering the following command:

```
hostname(config)# **config-register **value

```
Where*value*is the configuration register value you noted in Step 5. 0×1 is the default configuration register. For more information about the configuration register, see the*Cisco Security Appliance Command Reference*.
**Step 15**Save the new passwords to the startup configuration by entering the following command:

```
hostname(config)# **copy running-config startup-config
**
```
Problem:
*(public)*Solution:
*(public)*

---

### 84. Enable large memory support on 32 bit Linux

**Topic ID:** 301

OptionsSymptom:
*(public)*32bit Linux is not able to recognize physical RAM beyond 4GBProblem:
*(public)*32bit Linux is not able to recognize physical RAM beyond 4GBSolution:
*(public)*To enable large memory support on Linux. You need to install smp kernel.

Enable large memory support on 32 bit Linux
1. install smp kernel on 32 bit Linux
# yum install kernel-smp
# yum list |grep kernel

2. Load smp kernel
# yum update kernel kernel-smp

3. Change bootup kernel to smp
# vi /etc/grub.conf
Change default=[number equal to position of smp kernel]
Schedule rebooting the server. You will be able to see the rest of physical memory after rebooting.

4. Set kernel parameter properly
# vi /etc/sysctl.conf
Set kernel.shmmax = 4294967295 (maximum value you can set on 32bit OS)**

---

### 86. How to Clear Cisco Pix VPN Tunnel

**Topic ID:** 301

OptionsSymptom:
*(public)*fw01(config)# sh cry isa sa

Active SA: 3
Rekey SA: 0 (A tunnel will report 1 Active and 1 Rekey SA during rekey)
Total IKE SA: 3

1 IKE Peer: 72.165.93.130
Type : L2L Role : initiator
Rekey : no State : MM_ACTIVE
2 IKE Peer: 66.110.220.75
Type : L2L Role : initiator
Rekey : no State : MM_ACTIVE
3 IKE Peer: 64.244.135.190
Type : L2L Role : responder
Rekey : no State : MM_ACTIVE

fw01(config)# clear crypto ipsec sa peer 66.110.220.75
fw01(config)# clear crypto isakmp sa 66.110.220.75Problem:
*(public)*Solution:
*(public)*

---

### 88. How to block SSH on Cisco PIX Firewall

**Topic ID:** 301

OptionsSymptom:
*(public)*>First: Exceptions

access-list block_ssh permit tcp hostany eq 22
access-list block_ssh permit tcp hostany eq 22
access-list block_ssh permit tcp hostany eq 22
.
.
.

>Second: block all the ssh traffic

access-list block_ssh deny tcp any any eq 22

>Third: allow all the rest of the traffic

access-list block_ssh permit ip any any

>Fourth: Apply the Access-list with the access-group command

access-group block_ssh in interface insideProblem:
*(public)*Solution:
*(public)*

---

### 94. How to kill a hung VM (which is stuck at 95% on power down)\r\n

**Topic ID:** 301

OptionsSymptom:
*(public)*Unable to shutdown the VM ( example AH43) which shows 95% on task progressProblem:
*(public)*Unable to shutdown a VM?Solution:
*(public)*1) Login to the VMWare server hosting the VM ( in this example AH44), using SSH/Putty
-Login as root-
2) Find out the vmid for the VM as follows:

# vm-support -x
VMware ESX Server Support Script 1.29

Available worlds to debug:
vmid=4184385 AH46
vmid=11095382 AH43
vmid=14805 AH45
vmid=14826 Deploy
vmid=25155 oraapps

3) Kill the vm by exceuting the following command:
~ #vm-support -X 11095382
VMware ESX Server Support Script 1.29
Preparing files: |
Can I include a screenshot of the VM 11095382? [y/n]: n
Can I send an NMI (non-maskable interrupt) to the VM 11095382? This might crash the VM, but could aid in debugging [y/n]: y
Can I send an ABORT to the VM 11095382? This will crash the VM, but could aid in debugging [y/n]: y

.....

/sbin/vm-support: /sbin/vm-support: 1574: cannot create vm-support-ah44-2009-05-05--00.54.16085068/hungvm/vmdumper-commands.16085068.txt: Directory nonexistent
tee: vm-support-ah44-2009-05-05--00.54.16085068/hungvm/vmdumper-commands.16085068.txt: No such file or directory
Dumping unsync cores...
/sbin/vm-support: /sbin/vm-support: 1574: cannot create vm-support-ah44-2009-05-05--00.54.16085068/hungvm/vmdumper-commands.16085068.txt: Directory nonexistent
tee: vm-support-ah44-2009-05-05--00.54.16085068/hungvm/vmdumper-commands.16085068.txt: No such file or directory
Dumping sync cores...
/sbin/vm-support: /sbin/vm-support: 1574: cannot create vm-support-ah44-2009-05-05--00.54.16085068/hungvm/vmdumper-commands.16085068.txt: Directory nonexistent
tee: vm-support-ah44-2009-05-05--00.54.16085068/hungvm/vmdumper-commands.16085068.txt: No such file or directory
Dumping vmx core...
/sbin/vm-support: /sbin/vm-support: 1574: cannot create vm-support-ah44-2009-05-05--00.54.16085068/hungvm/vmdumper-commands.16085068.txt: Directory nonexistent
tee: vm-support-ah44-2009-05-05--00.54.16085068/hungvm/vmdumper-commands.16085068.txt: No such file or directory
Dumping vmx core (force)...
Done with core dumps
/sbin/vm-support: /sbin/vm-support: 1574: cannot create vm-support-ah44-2009-05-05--00.54.16085068/hungvm/vmdumper-commands.16085068.txt: Directory nonexistent
tee: vm-support-ah44-2009-05-05--00.54.16085068/hungvm/vmdumper-commands.16085068.txt: No such file or directory
Turning VM samples off...
/sbin/vm-support: /sbin/vm-support: 1574: cannot create vm-support-ah44-2009-05-05--00.54.16085068/hungvm/vmdumper-commands.16085068.txt: Directory nonexistent
tee: vm-support-ah44-2009-05-05--00.54.16085068/hungvm/vmdumper-commands.16085068.txt: No such file or directory
Sending NMI to guest...
Adding all files in '/vmfs/volumes/49a35038-5b952174-8c57-001c23c6af4c/AH43' to tar
Preparing files: \\
Could not copy /var/log to tar area (err 1).
Have you run out of disk space?

4) Start the VM from GUI

---

### 96. How to monitor Cisco PIX Firewall for SSH Connections

**Topic ID:** 301

OptionsSymptom:
*(public)*access-list capture permit tcp any any eq 22

capture ssh_in access-list capture interface insideProblem:
*(public)*Solution:
*(public*

---

### 98. How to run both Cisco and Juniper VPN client on same machine

**Topic ID:** 301

OptionsSymptom:
*(public)*How to run both Cisco and Juniper VPN client on same machine
Problem:
*(public)*How to run both Cisco and Juniper VPN client on same machineSolution:
*(public)*Install Cisco VPN and then Juniper VPN client on your machine. You will see "Cisco Systems VPN Client" and "NetScreen - Remote" program groups.

To run Cisco VPN:
1. Stop Juniper VPN client. From the systems tray, find small icon for "NetScreen - Policy" and disconnect.
2. Go to Administrative Tools, and Services and stop Juniper VPN services. (SafeNet IKE Service and SafeNet Monitor Service). Stop IPSEC Services.
3. Start Cisco Systems VPN Service.

To run Juniper VPN (for Tai Ping):
1. Stop Cisco VPN client.
2. Stop Cisco Systems VPN Service.
3. Start SafeNet IKE Service and SafeNet Monitor Service. Start IPSEC Service

---

### 102. Import and Export from Active Directory

**Topic ID:** 301

OptionsSymptom:
*(public)*Step-by-Step Guide to Bulk Import and Export to Active DirectoryThis guide introduces batch administration of the Active DirectoryTMservice, using both the LDAP Data Interchange Format (LDIF) utility and a simple program you can write using the Visual Basic® Scripting Edition (VBScript) development system. Using these tools, you can export, import, and modify objects such as users, contacts, groups, servers, printers, and shared folders.
On This PageIntroduction
Using the LDIFDE Utility
Using VBScript and ADSI
Important Notes

### IntroductionIn this guide, you will perform the following tasks:

- **Perform batch operations using the LDIFDE utility**. Export users from the Marketing organizational unit (OU) in the Reskit domain into a file format compatible with the LDIF standard format. Perform a batch modification of all the users in the Marketing OU. Use LDIF to create a new user and delete a user.

- **Perform batch operations using ADSI and VBScript**. Export users from the Marketing OU in the Reskit domain into a text file, using a script written with ADSI and VBScript. Use VBScript to perform a batch modification of all the users in the Marketing OU. Use VBScript to create a new user and delete a user.

#### Requirements and PrerequisitesYou must install the Windows 2000 Server operating system, including Active Directory, on a server in your network. You can then run the Administration Tools from the server or from a workstation running the Windows 2000 Professional operating system.
This step-by-step guide assumes that you have run the procedures in A Common Infrastructure for Windows 2000 Server Deployment Step-by-StepPart 1.
The common infrastructure documents specify a particular hardware and software configuration. If you are not using the common infrastructure, you need to make the appropriate changes to this document. For the latest information about hardware requirements and compatibility for servers, clients, and peripherals, see the Windows 2000 Product Compatibility search page (http://www.microsoft.com/windows2000/server/howtobuy/upgrading/compat/default.asp).
The Administration Tools are installed by default on all Windows 2000-based domain controllers. The LDIFDE utility described in this guide is installed by default on servers, and can be copied to any Windows 2000-based workstation. The VBScript programs that you create can be run from either servers or workstations.
For all procedures in this guide, you must be logged on as an administrator. If you log on using an account that does not have administrative privileges, you may not be able to perform export and import operations in Active Directory.
Top of page

### Using the LDIFDE UtilityThe LDAP Data Interchange Format (LDIF) is an Internet draft standard for a file format that can be used for performing batch operations on directories that conform to the LDAP standards. LDIF can be used to export and import data, allowing batch operations such as Add, Modify, and Delete to be performed in Active Directory. A utility called LDIFDE is included in the Windows 2000 operating system to support batch operations based on the LDIF standard.

#### Using LDIF to Export All Objects in the Marketing OUYou can use LDIFDE to export all objects in the Marketing organizational unit (OU), created in "Step-by-Step Guide to Common Infrastructure Part 1". This example searches the organizational unit for certain objects and creates a file containing the names of those objects.
**To export all objects in the Marketing OU**

- Click**Start**, point to**Programs**, then point to**Accessories**, and click**Command Prompt**.

- At the command prompt, type:
ldifde -f marketing.ldf -s hq-res-dc-01-d"ou=Marketing,dc= reskit,dc=com"-psubtreer"(objectCategory=CN=Person,CN=Schema,CN=Configuration,DC=reskit,DC=com)"

This creates a LDIF file named*Marketing.ldf*, by connecting to the server named*HQ-RES-DC-01*and executing a subtree search of the Marketing OU for all objects of the category*Person*. (See Figure 1 below.)
Note that*objectCategory*is an indexed attribute designed to enhance search performance.

**Figure 1: Creating an LDF file**You can use this LDIF file to perform a batch import of all the objects from the Marketing OU into any other LDAP-compatible directory. Some attributes may not be applicable to other implementations of LDAP. In particular, if you use this mechanism to import the objects into another Active Directory, some attributes must be omitted because they are automatically generated during object creation. (If they are not specifically omitted, the operation will fail.)
For example, the LDIFDE command that is used to omit these attributes is:
ldifde -f marketing.ldf -s hq-res-dc-01 d
"ou=Marketing,dc= reskit,dc=com"r
>"(objectCategory=CN=Person,CN=Schema,CN=Configuration,DC=reskit,DC=com)" m

#### Using LDIF to Modify All Objects in the Marketing OUIn this example, the entire Marketing organization has mov

... [Content truncated for readability]

---

### 103. Install Big Brother client on Linux servers

**Topic ID:** 301

OptionsSymptom:
*(public)*Install BB clientProblem:
*(public)*Solution:
*(public)*Installing Big Brother Client on Linux server
Creat bb user on client machine (Linux server):
# adduser bb
Set password to P3axxx
# passwd bb
passwd:
From client machine (Linux server), as user bb:
# su - bb
# cd $HOME
# tar xvf /san-002/work/BBClient/BigBrotherforRedHatES40ClientPackage_40.tar
# su - root
# cd /home/bb/bbc4.00-bbpe/install /
# ./bbconfig
Do you agree to Quest license agreement(Y/N): Y
Please confirm your OS: [linux]:
What will be the user ID for BBPE [bb]:
What host will be the BBDISPLAY [ah46.appshosting.com]:
What host will be the BBPAGER [ah46.appshosting.com]:
Add following line to root crontab on Client machine (Linux server):
@reboot su - bb -c "cd /home/bb/bbc4.00-bbpe;./runbb.sh start"
0 * * * * chmod 744 /var/log/messages
Create $BBHOME/etc/bb-hosts file on client
$ su - bb
$ cd $HOME/bbc*/etc
$ vi bb-hosts
Example:
66.152.169.38 ah72.appshosting.com # BBDISPLAY BBPAGER BBNEThttp://ah72.appshosting.com/bb
66.152.165.198 ah1.appshosting.com
Add client to $BBHOME/etc/bb-hosts file on BB server ah72
$ sshbb@ah72.appshosting.com
$ cd $HOME/server/etc
$ vi bb-hosts
Example:
66.152.165.198 ah1.appshosting.com

APENDIX A:
Add firewall rule to allow client to access server in LA DC
On ah1 as root:
Add to /etc/ipf/ipf.conf
pass in quick on bge1 proto tcp from ah1.appshosting.com to ah72.appshosting.com port=1984 flags S/FSRPAU keep state
Type svcadm restart ipfilter to refresh firewall rules.

APPENDIX B:
--------------------

**Pocedure to increase the threshold for the CPU paging event for gc2 server**
Procedure
Login to client server as "bb" user (gc2 in this case):
(1) log into gc2
(2) sudo su -

Edit the following file: /home/bb/bbc4.00-bbpe/etc/bbwarnsetup.cfg
(3) su - bb

Modify the following line (for example cpu:500):
svcerrlist: disk:100 cpu:200 procs:300 msgs:400 conn:500 http:600 dns:800 ERR:999
Then restart bb.
/home/bb/bbc4.00-bbpe
[bb@gc2 bbc4.00-bbpe]$ ./runbb.sh stop
[bb@gc2 bbc4.00-bbpe]$ ./runbb.sh start

APPENDIX C:
--------------------

Alert: gc2.appshosting.com.msgs red Tue May 12 09:06:10 PDT 2009 Urgent message file problems reported &red /var/log/messages is unreadable.

FIX: The Above error is resolved by adding the following to crontab, as root:
(1) log into gc2
(2) sudo su -
(3) crontab -e, and add the below new entry

0 * * * * chmod 744 /var/log/messages

---

### 104. Install Big Brother client on Linux servers

**Topic ID:** 301

OptionsSymptom:
*(public)*Install BB clientProblem:
*(public)*Solution:
*(public)*Installing Big Brother Client on Linux server
Creat bb user on client machine (Linux server):
# adduser bb
Set password to P3axxx
# passwd bb
passwd:
From client machine (Linux server), as user bb:
# su - bb
# cd $HOME
# tar xvf /san-002/work/BBClient/BigBrotherforRedHatES40ClientPackage_40.tar
# su - root
# cd /home/bb/bbc4.00-bbpe/install /
# ./bbconfig
Do you agree to Quest license agreement(Y/N): Y
Please confirm your OS: [linux]:
What will be the user ID for BBPE [bb]:
What host will be the BBDISPLAY [ah46.appshosting.com]:
What host will be the BBPAGER [ah46.appshosting.com]:
Add following line to root crontab on Client machine (Linux server):
@reboot su - bb -c "cd /home/bb/bbc4.00-bbpe;./runbb.sh start"
0 * * * * chmod 744 /var/log/messages
Create $BBHOME/etc/bb-hosts file on client
$ su - bb
$ cd $HOME/bbc*/etc
$ vi bb-hosts
Example:
66.152.169.38 ah72.appshosting.com # BBDISPLAY BBPAGER BBNEThttp://ah72.appshosting.com/bb
66.152.165.198 ah1.appshosting.com
Add client to $BBHOME/etc/bb-hosts file on BB server ah72
$ sshbb@ah72.appshosting.com
$ cd $HOME/server/etc
$ vi bb-hosts
Example:
66.152.165.198 ah1.appshosting.com

APENDIX A:
Add firewall rule to allow client to access server in LA DC
On ah1 as root:
Add to /etc/ipf/ipf.conf
pass in quick on bge1 proto tcp from ah1.appshosting.com to ah72.appshosting.com port=1984 flags S/FSRPAU keep state
Type svcadm restart ipfilter to refresh firewall rules.

APPENDIX B:
--------------------

**Pocedure to increase the threshold for the CPU paging event for gc2 server**
Procedure
Login to client server as "bb" user (gc2 in this case):
(1) log into gc2
(2) sudo su -

Edit the following file: /home/bb/bbc4.00-bbpe/etc/bbwarnsetup.cfg
(3) su - bb

Modify the following line (for example cpu:500):
svcerrlist: disk:100 cpu:200 procs:300 msgs:400 conn:500 http:600 dns:800 ERR:999
Then restart bb.
/home/bb/bbc4.00-bbpe
[bb@gc2 bbc4.00-bbpe]$ ./runbb.sh stop
[bb@gc2 bbc4.00-bbpe]$ ./runbb.sh start

APPENDIX C:
--------------------

Alert: gc2.appshosting.com.msgs red Tue May 12 09:06:10 PDT 2009 Urgent message file problems reported &red /var/log/messages is unreadable.

FIX: The Above error is resolved by adding the following to crontab, as root:
(1) log into gc2
(2) sudo su -
(3) crontab -e, and add the below new entry

0 * * * * chmod 744 /var/log/messages

---

### 107. LSOF Linux - How to check what process is running on what port

**Topic ID:** 301

OptionsSymptom:
*(public)*# lsof -i -nP | grep httpd
httpd 2318 apache 16u IPv4 0x019922bc 0t0 TCP 127.0.0.1:8000 (LISTEN)
httpd 2319 apache 16u IPv4 0x019922bc 0t0 TCP 127.0.0.1:8000 (LISTEN)
httpd 2322 apache 16u IPv4 0x019922bc 0t0 TCP 127.0.0.1:8000 (LISTEN)Problem:
*(public)*Solution:
*(public*

---

### 113. Microsoft Support - Contacting

**Topic ID:** 301

OptionsSymptom:
*(public)***Microsoft Support Procedure**

Call 800-765-7768 and get an access ID. Tell them u are a MAPS Action Pack subscriber and are opening a case to help a customer.
Tell them our partner ID doesn't show an access ID for technical support.

AppsHosting Partner ID is: 2019291
The registered email ID is: ashb@appshosting.com

After Hours

Contact the following # directly:

Then you will be conferenced for support. If you need to reach tech support once you have a case # call 1-800-936-4900.

**Portal Login**

To log into our partner portal, go here:

https://partners.microsoft.com

login: ashok_522@msn.com
Passwd: hello123

**MAPS Subscription ID**

Your Organization ID is 2019292.
Your Microsoft Action Pack Subscription (MAPS) ID is 700648261.

**NON CRITICAL SUPPORT:**

http://support.microsoft.com/oas

(Open cases online)Problem:
*(public)*Solution:
*(public)*Comment:
*(internal)***DSI Filesystem Permission Issue**

Case #: 110022666270064

---

### 120. Quest Big Brother Professional Support

**Topic ID:** 301

OptionsSymptom:
*(public)*Quest Login
ashb@appshosting.comn3wadmmn1
http://www.quest.com
Problem:
*(public)*Solution:
*(public)*

---

### 130. Sendmail Configuration behind Irvine Firewall

**Topic ID:** 301

OptionsSymptom:
*(public)*> If the server is in Irvine, please point the Sendmail "smart relay" to
> ah59.appshosting.com.
>
> Example: /etc/mail/sendmail.cf
>
> DSah59.appshosting.com

Then restart sendmail (/etc/init.d/sendmail restart)
Problem:
*(public)*Solution:
*(public)*

---

### 567. Create AnyConnect VPN Users

**Topic ID:** 2403

**References**:
**Procedure or Description**:
1. Log in to AD server by RDP, 10.100.90.120.2. Choose appropriate group (folder) under VPN_Users.3. Create new user.

---

### 169. FRM-91500: Unable to start/complete the build when using frmcmp to compile forms

**Topic ID:** 2105

OptionsSymptom:
*(public)*FRM-91500: Unable to start/complete the build when using frmcmp to compile formsProblem:
*(public)*Solution:
*(public)***When X-server is not available :**

- Use frmcmp_batch command from your telnet/putty. The options remain the same.
**When X-server is available :**

- You need to run an X-Display software in client machine (eg. Reflection)
- Check the ip address of the client machine.
- Set environment variable DISPLAY as
$ export DISPLAY=hostname:0.0
- Execute frmcmp as
$ frmcmp help=y

---

### 468. Set up Cisco VPN Client on Mac Using IPSec

**Topic ID:** 308

Set up Cisco VPN Client on Mac Using IPSec Protocol1.Click on System Preferences -> Network or the network icon on top right.2.Click on the + symbol at bottom left of the Network window, and choose VPN for Interface.3.Select Cisco IPSec VPN and give service name, then click Create button.4.Click Authentication Settings button and enter the group name and password:5.Enter user and password, then click Apply and Connect.

---

### 220. How to edit configuration in WebLogic server using WLST

**Topic ID:** 901

1. Go to $WL_HOME/common/bin and run wlst.sh
2. Connect to admin server: connect('weblogic','passwd','t3://host:port')
3. easeSyntax
4. cd to where the setting is
5. Go in edit mode: edit()
6. cd back to the directory where the setting is.
startEdit()
cmd.setXXX('value')
save()
activate()

Bounce the server.

---

### 225. Editing Sharepoint Documents (in non Read-Only Mode)\r\n

**Topic ID:** 301

OptionsSymptom:
*(public)***NOTE**

To edit docs in our sharepoint site (https://remote.appshosting.com:987), you must do the following:

(1) Use Internet Explorer
(2) Add the URL (https://remote.appshosting.com:987) to your IE trusted sites.

Thanks,
Ashok

Addendum

If u are using Office 2007 refer to the following:

http://support.microsoft.com/kb/870853

---

### 229. Remote Desktop - Network Level Authentication RDP

**Topic ID:** 301

OptionsSymptom:
*(public)*

### You must have installed Windows XP Service Pack Two or above, with the latest RDP Client, then perform the following if you get an error regarding "Your remote desktop client requires network level authentication" when trying to connect to Windows servers using RDP.

### How to turn on CredSSP**Important**This section, method, or task contains steps that tell you how to modify the registry. However, serious problems might occur if you modify the registry incorrectly. Therefore, make sure that you follow these steps carefully. For added protection, back up the registry before you modify it. Then, you can restore the registry if a problem occurs. For more information about how to back up and restore the registry, click the following article number to view the article in the Microsoft Knowledge Base:322756(http://support.microsoft.com/kb/322756/ )How to back up and restore the registry in Windows

- Click**Start**, click**Run**, typeregedit, and then press ENTER.
- In the navigation pane, locate and then click the following registry subkey:HKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\Control\\Lsa
- In the details pane, right-click**Security Packages**, and then click**Modify**.
- In the**Value data**box, typetspkg. Leave any data that is specific to other SSPs, and then click**OK**.
- In the navigation pane, locate and then click the following registry subkey:HKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\Control\\SecurityProviders
- In the details pane, right-click SecurityProviders, and then click**Modify**.
- In the**Value data**box, typecredssp.dll. Leave any data that is specific to other SSPs, and then click**OK**.
- Exit Registry Editor.
- Restart the computer.
Problem:
*(public)*Solution:
*(public)*

---

### 328. Error occurred during initialization of VM\r\nCould not reserve enough space for object heap\r\nCould not create the Java virtual machine.

**Topic ID:** 2403

While restarting the tomcat service on the server, If you get following error

===============================
Using CATALINA_BASE: /usr/local/jakarta/tomcat
Using CATALINA_HOME: /usr/local/jakarta/tomcat
Using CATALINA_TMPDIR: /usr/local/jakarta/tomcat/temp
Using JRE_HOME: /usr/local/jdk
Error occurred during initialization of VM
Could not reserve enough space for object heap
Could not create the Java virtual machine.
===============================

Then the best**solution**for this error is to use the following command. This command will increase the java heap size.

Quote:root@server [/]#**export _JAVA_OPTIONS="-Xms20m -Xmx64m -XX:MinHeapFreeRatio=20 -XX:MaxHeapFreeRatio=40 -XX:NewSize=10m -XX:MaxNewSize=10m -XX:SurvivorRatio=6 -XX:TargetSurvivorRatio=80 -XX:+CMSClassUnloadingEnabled -XX:+CMSPermGenSweepingEnabled"****OR**

export CATALINA_OPTS="-Xms1024m -Xmx1024m"

Then restart the tomcat
Quote:root@server[~]# /usr/local/jakarta/tomcat/bin/./shutdown.sh
root@server[~]# /usr/local/jakarta/tomcat/bin/./startup.sh
root@server[~]# /usr/local/jakarta/tomcat/bin/./catalina.sh run

---

### 243. ITIL / ITSM - Where do I start ?

**Topic ID:** 301

OptionsAttachment:ITIL-ITSM_Where_Do_I_Start.pdf194.0 KBytesSymptom:
*(public)*
**ITIL or ITSM Where do I start?**

What is ITIL?

ITIL (Information Technology Infrastructure Library) is a set of best practice standards for Information Technology Service Management (ITSM). The United Kingdom's Central Computer and Telecommunications Agency (CCTA) created ITIL during the late 1980's in response to the growing dependence on Information Technology to meet business needs and goals. As a result of widespread adoption and continuous improvement, ITIL has become the de facto standard in service management. ITIL provides businesses with a customizable framework of best practices to achieve quality service and overcome difficulties associated with the growth and complexity of IT systems.
ITIL is organized into sets of texts which are defined by related functions: service support, service delivery, security management, infrastructure management, application management and others. Service Management, the heart of ITIL, addresses a variety of IT functions that can be effectively categorized into two groups:Service SupportandService Delivery.

What is ITSM?

Information Technology Service Management (ITSM) is an approach, utilizing documented best practices, that guides the management of people, processes and technology to provide high quality service. ITSM processes help your organization to create a proactive IT services environment that aligns IT services with business objectives. This helps to bring a "business" perspective as opposed to the traditional "technology" perspective.
IT Service Management utilizes best practices documented in the IT Infrastructure Library (ITIL), which was the outcome of a major UK Government funded project embracing public and private IT service providers.

Problem:
*(public)*Solution:
*(public)*

---

### 247. Fix AutoVue issue

**Topic ID:** 303

OptionsSymptom:
*(public)*when I tried to view an attached file, it gives an error "Unsupported File Format".Problem:
*(public)*Can not view pdf and other files in Agile AutoVueSolution:
*(public)*/u01/app/agile93/apache-tomcat-6.0.18/webapps/Filemgr/WEB-INF/classes/com/agile/webfs/configuration/server.conf
Workaround: Edit the server.conf and set the property *viewer.filename.exclude* to
Update the Filemgr deployment archive:
1. Backup/agileDomain/applications/webfs.war
2. Extract the server.conf:

cd/agiledomain/applications
/u01/app/agile93/jdk/bin/jar -xvf webfs.war WEB-INF/classes/com/agile/webfs/configuration/server.conf[Enter]
This will create a sub-folder 'WEB-INF' under the applications folder, which contains the extracted file.
3. Make the necessary changes to the extracted server.conf.
4. Update the webfs.war archive with the new version of server.conf.

/u01/app/agile93/jdk/bin/jar -uvf webfs.war WEB-INF/classes/com/agile/webfs/configuration/server.conf
5. Stop Filemgr (Tomcat server)
6. Delete the folder/apache-tomcat-6.0.18/webapps/Filemgr
7. Start Filemgr (Tomcat server)
8. Delete the folder created while extracted server .conf:/agileDomain/applications/WEB-INF

---

### 252. Sakura VPN pcf file

**Topic ID:** 303

OptionsAttachment:Sakura.pcf669 BytesSymptom:
*(public)*Sakura VPN pcf fileProblem:
*(public)*Sakura VPN pcf fileSolution:
*(public)*

---

### 277. SOP: Xen Server Backup and Restore Process

**Topic ID:** 2116

Xen Export Process

- Decide which VM to export.
- Listing of VMs: # xe vm-list

Example:

uuid ( RO) : 9240073b-da2f-7959-66a1-c96a072cc1f1
name-label ( RW): sme
power-state ( RO): halted

- In this example we will be exporting "sme" server.
- Ensure the server is shut down.
- If it is not shut down, use the following command to suspend the VM

# xe vm-suspend vm=SME
- 

- Use the following command to export the VM

# xe vm-export vm=SME filename=/b03/xen-backups/sme-xen-export

- Once complete, it will give the following message:

# Export succeeded

- Make sure to compress the backups file!!!!!

# gzip /b03/xen-backups/sme-xen-export

**XEN HOT Backup Process**

Step 1
Create Snapshot
xe vm-snapshot vm=Cacti new-name-label=cacti-snapshot
This will give you a snapshot uuid: f3cba4d8-0972-4985-bf0b-3f3ca0c548a7
Step 2
Set the snapshot as a VM and not a template
xe template-param-set is-a-template=false uuid=f3cba4d8-0972-4985-bf0b-3f3ca0c548a7
Step 3
Perform Export
nohup xe vm-export vm=cacti-snapshot filename=&
Step 4
Compress backup file
nohup gzip cacti-backup.exp &
Step 5
Clean up Snapshot
xe vm-uninstall uuid=f3cba4d8-0972-4985-bf0b-3f3ca0c548a7 force=true

Xen Import Process

- You need 2 things - an export file (Created earlier) and an SR UUID to restore onto.

To figure out the SR UUID, do the following:

# xe sr-list

It will give you a listing of your SRs, example:

uuid ( RO) : 37e1d96f-3fce-a95e-850b-028769f5e648
name-label ( RW): Backup Storage (RAID 1 SATA)
name-description ( RW): Hardware HBA SR [DELL - /dev/sdc

host ( RO): os1.orasource.com
type ( RO): lvmohb content-type ( RO)

- Run the following command to begin the import (restore):

# xe vm-import filename=sme-xen-export preserve=true sr-uuid=37e1d96f-3fce-a95e-850b-028769f5e648

---

### 282. Fiber Switch Zone Setup

**Topic ID:** 307

Attached is a document on how to zone our Brocade fiber switches.

---

### 284. Convert SSL Certificate to PFX (Windows)

**Topic ID:** 2401

openssl pkcs12 -export -out NEW.pfx -inkey ../private/\\*.appshosting.com.key -in \\*.appshosting.com.crt -certfile bundle.crt

---

### 287. Adding Custom Directives

**Topic ID:** 2402

Adding Custom Directives to httpd.conf

Many users are initially daunted by the new system used for generating and managing Apache's core configuration file, httpd.conf. As mentioned in The Apache Configuration System direct edits of httpd.conf will no longer be preserved unless they are properly integrated with the new Apache configuration system. This section lists the various methods available for customizing the httpd.conf file. For most users, the apache config distiller tool or the use of include files are recommended.
httpd.conf changes not contained in a

* Includes - When EasyApache 3 is rebuilt using a different version of Apache, changes checked in using the apache config distiller will be replaced with default values to ensure compatibility with the new version of Apache. If you would like your changes to persist through such a rebuild, several include files can be used instead of editing the main httpd.conf. The WebHost Manager features an editor for these include files at Main >> Service Configuration >> Apache Setup >> Include Editor. Open the editor interface and select the appropriate location in httpd.conf and the desired Apache version. When you have finished editing the include file, click Update and your changes will be tested for syntactical validity.

NOTE: Virtually any Apache directives can be added using this method. Please make certain that any changes you make in this fashion will remain valid regardless of other configuration changes made in the WebHost Manager. For instance, if you are adding directives that pertain to mod_suphp, enclose them in an appropriateblock.

suPHP_ConfigPath /usr/local/lib/

* Apache config distiller - Most changes to the non-VirtualHost sections of httpd.conf can be easily preserved using the apache config distiller tool. Simply run /usr/local/cpanel/bin/apache_conf_distiller --update --main after making such a change to update the templates and datastores. Regenerating the httpd.conf file with /scripts/rebuildhttpdconf will allow you to quickly verify that the change was properly stored.
* Custom Templates - The final method for preserving changes to the non-VirtualHost sections of httpd.conf is to create a custom template for Apache. This would be placed at /var/cpanel/templates/apache(1 or 2)/main.local and should be based on the template at /var/cpanel/templates/apache(1 or 2)/main.default. The templates located here are processed using the Template Toolkit and have access to the information contained in the configuration datastores used by the new configuration system. The same warning about ensuring your edits will remain valid when settings are changed in the WebHost Manager applies to this method. Additionally, if you create a main.local template the apache config distiller will no longer preserve changes to the non-VirtualHost sections in httpd.conf. The apache config distiller updates the main.default template only.

httpd.conf changes contained in a

* Includes - Like the main portion of httpd.conf, the VirtualHost containers also provide the ability to add customizations using Include files. At this time there is no graphical interface for creating and managing VirtualHost includes, so they must be manipulated manually. The include directory structure is not created automatically, but uses the following file structure:
o Individual VirtualHost
/usr/local/apache/conf/userdata/(ssl|std)/(1|2)
///.conf
o All VirtualHost containers
/usr/local/apache/conf/userdata/.conf
o All VirtualHost containers for SSL or standard VirtualHosts
/usr/local/apache/conf/userdata/[ssl or std]/.conf
o All VirtualHost containers for SSL or standard VirtualHosts with version specific settings
/usr/local/apache/conf/userdata/[ssl or std]/[1 or 2]/.conf
o All of a users VirtualHost containers for SSL or standard VirtualHosts with version specific settings
/usr/local/apache/conf/userdata/[ssl or std]/[1 or 2]/ /.conf
o Individual VirtualHost container for SSL or standard VirtualHosts with version specific settings
/usr/local/apache/conf/userdata/[ssl or std]/[1 or 2]///.conf
* Includes are located as the final directive in the VirtualHost container. As a result, default values in the VirtualHost can usually be overridden via the include files. Include files beginning with "cp_" are reserved for cPanel settings and can and will likely be automatically rewritten. After adding any new include files, they need checked for compatibility and httpd.conf needs made aware of it.

To verify that include files are valid with the running apache run: /scripts/verify_vhost_includes

Add --help if you wish for additional information.

After that is complete you can ensure that cpanel includes are setup as per the userdata and have the VirtualHost Include directives updated by running /scripts/ensure_vhost_include_directives with the proper arguments.

Add --help if you wish for additional information.

To update the include files for a single user, run /scripts/ensure_vhost_includes

... [Content truncated for readability]

---

### 307. Could not reserve enough space for object heap

**Topic ID:** 2403

Whilerestarting the tomcat service on the server, If you get following error

===============================
Using CATALINA_BASE: /usr/local/jakarta/tomcat
Using CATALINA_HOME: /usr/local/jakarta/tomcat
Using CATALINA_TMPDIR: /usr/local/jakarta/tomcat/temp
Using JRE_HOME: /usr/local/jdk
Error occurred during initialization of VM
Could not reserve enough space for object heap
Could not create the Java virtual machine.
===============================

Then the best**solution**for this error is to use the following command. This command will increase the java heap size.

Quote:root@server [/]#**export _JAVA_OPTIONS="-Xms20m -Xmx64m -XX:MinHeapFreeRatio=20 -XX:MaxHeapFreeRatio=40 -XX:NewSize=10m -XX:MaxNewSize=10m -XX:SurvivorRatio=6 -XX:TargetSurvivorRatio=80 -XX:+CMSClassUnloadingEnabled -XX:+CMSPermGenSweepingEnabled"****OR**

export CATALINA_OPTS="-Xms1024m -Xmx1024m"

Then restart the tomcat
Quote:root@server[~]# /usr/local/jakarta/tomcat/bin/./shutdown.sh
root@server[~]# /usr/local/jakarta/tomcat/bin/./startup.sh
root@server[~]# /usr/local/jakarta/tomcat/bin/./catalina.sh run

---

### 310. Visual Concepts Environment Information

**Topic ID:** 302

Visual Concept
==============

VPN Configuration:

1. Download and Install "Sonicwall Global VPN Client"

/b02/infrastructure/software/SonicWall-VPN-Client

-other versions can be downloaded here-

http://help.mysonicwall.com/Applications/vpnclient/

2. 2.Use following information to connect to VC VPN

IP: 108.0.185.58
Shared Secret: 70D2F40E68CA59F4
Uid/pwd: venkat/venkat

==============

Enzo Prod Server
---------------------

DRAC IP Address: 192.168.7.200

Xen Server (reserved) IP Address: 192.168.7.201

Dev Virtual Machine (reserverd):

Hostname: enzo.visualconcept.com ( 192.168.7.202 )
IP:
Login: root/Let$G0b1K!ng

==============

Enzo-Dev
-----------

Xen Server : 192.168.7.20
VM Hostname : Enzo-Dev

Install Xen Server

(1) Please install Xen Server
(2) There is a USB drive connected to the physical server that contains and exported image of the DEV VM.
Import this VM into the Xen Server

#####################################

New server details
----------------------

defiant02.dev.visualconcept.com ( 192.168.7.166 ) ( RDP )
Username : ah_win
Password : Wltc0ww!
Keepass : P@$$w0rd4VC!$3cur3V@u7t!

antares01.dev.visualconcept.com
Username : DEV\\ah_win
Password : Wltc0ww!

#####################################

==============

Network info for Enzo VM

eth0 Link encap:Ethernet HWaddr 00:1C:23:CC:A3:29
inet addr:192.168.7.28 Bcast:192.168.7.255 Mask:255.255.255.0
inet6 addr: fe80::21c:23ff:fecc:a329/64 Scope:Link
UP BROADCAST RUNNING MULTICAST MTU:1500 Metric:1
RX packets:156 errors:0 dropped:0 overruns:0 frame:0
TX packets:157 errors:0 dropped:0 overruns:0 carrier:0
collisions:0 txqueuelen:1000
RX bytes:17141 (16.7 KiB) TX bytes:15046 (14.6 KiB)
Interrupt:169 Memory:f8000000-f8012100

eth1 Link encap:Ethernet HWaddr 00:1C:23:CC:A3:2B
BROADCAST MULTICAST MTU:1500 Metric:1
RX packets:0 errors:0 dropped:0 overruns:0 frame:0
TX packets:0 errors:0 dropped:0 overruns:0 carrier:0
collisions:0 txqueuelen:1000
RX bytes:0 (0.0 b) TX bytes:0 (0.0 b)
Interrupt:169 Memory:f4000000-f4012100

eth2 Link encap:Ethernet HWaddr 00:15:17:48:54:34
inet addr:192.168.100.28 Bcast:192.168.100.255 Mask:255.255.255.0
inet6 addr: fe80::215:17ff:fe48:5434/64 Scope:Link
UP BROADCAST RUNNING MULTICAST MTU:1500 Metric:1
RX packets:218 errors:0 dropped:0 overruns:0 frame:0
TX packets:240 errors:0 dropped:0 overruns:0 carrier:0
collisions:0 txqueuelen:1000
RX bytes:123328 (120.4 KiB) TX bytes:27712 (27.0 KiB)
Base address:0xece0 Memory:fc5e0000-fc600000

eth3 Link encap:Ethernet HWaddr 00:15:17:48:54:35
BROADCAST MULTICAST MTU:1500 Metric:1
RX packets:0 errors:0 dropped:0 overruns:0 frame:0
TX packets:0 errors:0 dropped:0 overruns:0 carrier:0
collisions:0 txqueuelen:1000
RX bytes:0 (0.0 b) TX bytes:0 (0.0 b)
Base address:0xecc0 Memory:fc5a0000-fc5c0000

eth4 Link encap:Ethernet HWaddr 00:15:17:48:54:3C
inet addr:192.168.101.28 Bcast:192.168.101.255 Mask:255.255.255.0
UP BROADCAST MULTICAST MTU:1500 Metric:1
RX packets:0 errors:0 dropped:0 overruns:0 frame:0
TX packets:0 errors:0 dropped:0 overruns:0 carrier:0
collisions:0 txqueuelen:1000
RX bytes:0 (0.0 b) TX bytes:0 (0.0 b)
Base address:0xdce0 Memory:fc3e0000-fc400000

eth5 Link encap:Ethernet HWaddr 00:15:17:48:54:3D
BROADCAST MULTICAST MTU:1500 Metric:1
RX packets:0 errors:0 dropped:0 overruns:0 frame:0
TX packets:0 errors:0 dropped:0 overruns:0 carrier:0
collisions:0 txqueuelen:1000
RX bytes:0 (0.0 b) TX bytes:0 (0.0 b)
Base address:0xdcc0 Memory:fc3a0000-fc3c0000

lo Link encap:Local Loopback
inet addr:127.0.0.1 Mask:255.0.0.0
inet6 addr: ::1/128 Scope:Host
UP LOOPBACK RUNNING MTU:16436 Metric:1
RX packets:3377 errors:0 dropped:0 overruns:0 frame:0
TX packets:3377 errors:0 dropped:0 overruns:0 carrier:0
collisions:0 txqueuelen:0
RX bytes:4497852 (4.2 MiB) TX bytes:4497852 (4.2 MiB)

sit0 Link encap:IPv6-in-IPv4
NOARP MTU:1480 Metric:1
RX packets:0 errors:0 dropped:0 overruns:0 frame:0
TX packets:0 errors:0 dropped:0 overruns:0 carrier:0
collisions:0 txqueuelen:0
RX bytes:0 (0.0 b) TX bytes:0 (0.0 b)

---

### 313. Logging into Appshosting Switches

**Topic ID:** 301

Please see the attached document for instructions on logging into our Ethernet Switches.

---

### 318. AppsHosting DNSMadeEasy DNS Backup

**Topic ID:** 2403

AppsHosting DNSMadeEasy DNS Backup

---

### 321. Cisco / CentOS TFTP Configuration

**Topic ID:** 2403

Modify /etc/xinet.d/tftp as follows

service tftp
{
socket_type = dgram
protocol = udp
wait = yes
user = root
server = /usr/sbin/in.tftpd
server_args = -c -s /tftpboot
disable = no
per_source = 11
cps = 100 2
flags = IPv4
}

---

### 322. Configuring SNMP Agents for OPManager

**Topic ID:** 2403

# Configuring SNMP Agents

- Configuring SNMP agent in Windows XP/2000,2003
- Configuring SNMP agent in Windows NT
- Configuring SNMP agent in Linux versions prior to 8
- Configuring the Agent in Linux versions 8 and above
- Configuring SNMP agent in Solaris
**Configuring SNMP Agent in Windows XP, 2000, and 2003 Systems**

For details about installing SNMP agents in Windows systems, refer to Installing SNMP Agent on Windows Systems.
To configure SNMP agent in Windows XP and 2000 systems, follow the steps given below:

- Click**Start**, point to**Settings**, click**Control Panel**.
- Under Administrative Tools, click**Services**.
- In the details pane, right-click**SNMP Service**and select**Properties**.
- In the**Security**tab, select**Send authentication trap**if you want a trap message to be sent whenever authentication fails.
- Under Accepted community names, click**Add**.
- Under**Community Rights**, select a permission level for this host to process SNMP requests from the selected community.
- In**Community Name**, type a case-sensitive community name, and then click**Add**.
- Specify whether or not to accept SNMP packets from a host:

  - To accept SNMP requests from any host on the network, regardless of identity, click**Accept SNMP packets from any host**.
  - To limit acceptance of SNMP packets, click**Accept SNMP packets from these hosts**, click**Add**, type the appropriate host name, IP or IPX address, and then click**Add**again.

- Click**Apply**to apply the changes.
To configure SNMP traps, follow the steps given below:

- Click**Start**, point to**Settings**, click**Control Panel**.
- Under Administrative Tools, click**Services**.
- In the details pane, right-click**SNMP Service**and select**Properties**.
- In the**Traps**tab, under**Community name**, type the case-sensitive community name to which this computer will send trap messages, and then click**Add**to list.
- Under**Trap destinations**, click Add.
- In the**Host name, IP or IPX address**field, type host name or its IP address of the server (OpManager server) to send the trap, and click**Add**.
- Repeat steps 5 through 7 until you have added all the communities and trap destinations you want.
- Click**OK**to apply the changes.
**Configuring SNMP Agent in Windows NT Systems**

For details about installing SNMP agents in Windows systems, refer to Installing SNMP Agent on Windows Systems.
To configure SNMP agent in Windows NT systems, follow the steps given below:

- Click**Start**, point to**Settings**, click**Control Panel**.
- Under Administrative Tools, click**Services**.
- In the details pane, right-click**SNMP Service**and select**Properties**.
- In the**Security**tab, select**Send authentication trap**if you want a trap message to be sent whenever authentication fails.
- Under**Accepted Community Names**, click**Add**.
- In the**Community Names**box, type the community name to authenticate the SNMP requests.
- To move the name to the**Accepted Community Names**list, click**Add**.
- Repeat steps 6 and 7 for any additional community name.
- To specify whether to accept SNMP packets from any host or from only specified hosts, click one of two options:

  - **Accept SNMP Packets From Any Host**, if no SNMP packets are to be rejected on the basis of source computer ID.
  - **Only Accept SNMP Packets From These Hosts**, if SNMP packets are to be accepted only from the computers listed. To designate specific hosts, click Add, type the names or addresses of the hosts from which you will accept requests in the IP Host or IPX Address box, and then click Add.

- Repeat step 11 for any additional hosts.
- In the**Agent**tab, specify the appropriate information (such as comments about the user, location, and services).
- Click**OK**to apply the changes.
Further, the SNMP Agent running Windows NT does not respond to Host Resource Data, by default. To include this support, you should have Windows NT Service Pack 6 & above. Verify this and then follow the steps given below:

- Extract the NTHR-MIB.zip available athttp://bonitas.zohocorp.com/opmanager/07Jul2010/NTHR-MIB.zipinto C:\\WinNT\\system32 folder.
- Double click on the registry files to import the mibs into Windows registry.
- Restart your Windows NT box.
To Configure SNMP Traps, follow the steps given below:

- Click**Start**, point to**Settings**, and then click**Control Panel**. Double-click**Administrative Tools**, and then double-click**Services**.
- In the details pane, click**SNMP Service**, and then click**Properties**.
- Click the**Traps**tab.
- To identify each community to which you want this computer to send traps, type the name in the**Community Name**box. Community names are case sensitive.
- After typing each name, click**Add**to add the name to the list.
- To specify hosts for each community you send traps to, after you have added the community and while it is still highlighted, click**Add**under Trap Destination.
- To move the name or address to the Trap Destination list f

... [Content truncated for readability]

---

### 335. Linux Printers - Backing up and Copying to another Server

**Topic ID:** 2404

Make yourself at home as root on the old server.

Issue the following command:

```
printconf-tui --Xexport > printers.xml

```

Now copy the printers.xml to the new machine.

Log on to this machine as root, also.

Do the following:

```
printconf-tui --Ximport < printers.xml

```

Now the last thing you have to do is restart cups on the new machine - and you're ready:

```
service cups restart

```
You can use this also to back up your printer definitions on one machine. That comes in handy when someone removes printer definitions by accident or if your machine goes down.

---

### 379. Linux Server Provisioning - Virtual Machine

**Topic ID:** 2404

**Linux Server Provisioning - Virtual Machine**

Import the required golden image from

Refer to details on Red Hat Linux (5.x) Provisioning.docx -https://docs.google.com/a/appshosting.com/file/d/0By5z4jU7rF5TYTA0ODcwNzMtNWU4Mi00Nzk3LTgwODEtZjNiYzMwMmIwZjI0/edit

/b01/infrastructure/golden-images( it has CentOS and RHEL )

1. After the machine is started, change the hostname

/etc/
2. Assign the IP address

Modify /etc/sysconfig/network-scripts/ifcfg-eth0 for Ethernet port 0.

DEVICE=eth0

BOOTPROTO=none

HWADDR=00:26:B9:48:1C:60

ONBOOT=yes

IPADDR=192.168.69.46

NETMASK=255.255.255.0

GATEWAY=192.168.69.1

/etc/init.d/network restart
Update /etc/resolv.conf with correct name server:nameserver 206.13.29.12

3. Update the XenTools if required

4. Add the data partitions ( Recommended to create in LVM. We can expand it in future ) and update fstab
5. Add the IP address to hotname in DNSMADEEAY

---

### 369. Adding new Cisco firewall rule

**Topic ID:** 1201

From Configuration terminal window:

osfw(config)# access-list ahdirect permit tcp any host 69.17.99.171 eq 8002
osfw(config)# static (inside,outside) tcp 69.17.99.171 8002 192.168.88.19 8002$
osfw(config)# write mem

sh access-list ahdirect (to show all rules defined on the firewall.)

---

### 378. Windows 2008 R2 Server Provisioning - Virtual machine

**Topic ID:** 3001

**Provision New Windows 2008 R2 Server - Virtual Machine
**

Right click the Xen Server
Select New VM
In the NEW VM window, select the Operating system Template
Then give the Name for the VM
Select the iso image of the Operating system

Home server will be the physical machine you are installing the VM
Select the no.of CPU and Memory
Then choose the disk size. it varies depends on customer requirement
Select the network ( Mostly it should be Network0 )
Check all the values you have choosed so far

After the machine is ready, you have to configure the network
Findout a free IP address and assign it
Then change the hostname
Enable Remote Desktop
Add the IP address to hotname in DNSMADEEAY
Install Xen Server tools
Reboot the server

Install the required roles / features according to the requirement

---

### 382. How to troubleshoot DNS problem

**Topic ID:** 3001

To see a machine's IP address info:
http://showip.net/

To see domain registrar and DNS server info:
http://whois.net/whois/erdsystems1.com

---

### 388. Maintenance page for weekend down time of Taiping production system

**Topic ID:** 2112

Enabled maintenance page for 1 hr downtime and edited index.html file.

Please use the following procedure to enable maintenance page:
(1) Log into prod.taipingcarpets.com as root
(2) Specify the maintenance end times in the following file (at the end of the file):
/var/www/html/index.html (Edit this file)

Login to APPS
Go to OAM - site map -Maintenance - Manage Downtime Schedules and schedule a new one using an existing one.

Example Message:
----------------------

Production will be down from Sun Sep 30 16:00 PM HKT to 17:00 PM HKT (4 AM EST to 5 AM EST Sunday) for maintenance. Please contact your local IT support with any questions.

---

### 434. Mac OSX Installation of Cisco VPN Client Throws Damaged File Error

**Topic ID:** 308

Problem: Mac OSX Installation of Cisco VPN Client Throws Damaged File Error
Solution: Need to allow

1. Navigate to:

System Settings icon (looks like cogs)

Security & Privacy

General

2.Select option to allow download from any where.

---

### 438. Set up Cisco VPN Client

**Topic ID:** 1201

**How to Set up Cisco VPN Client**

Download and install standard Cisco IPSec VPN client:
www.appshosting.com/vpn/vpnclient.exe(32 bit Windows)
www.appshosting.com/vpn/vpnclient64.exe(64 bit Windows)

After downloading and installing appropriate VPN client software, you can import PCF file provided to set up VPN profile.
Log in with user ID and password provided separately.

***** NOTE: *****For users running Windows 8 or Mac that have problem with using standard VPN client above, they can follow below document and software to run Cisco AnyConnect for VPN.
The following links have the instructions for downloading and setting up AnyConnect to AppsHosting VPN:
www.appshosting.com/vpn/Steps_for_AnyConnect_to_AppsHosting_VPN.docx
www.appshosting.com/vpn/AnyConnect-3.1.02026.exe (Windows AnyConnect Client)http://www.appshosting.com/vpn/anyconnect-macosx-i386-3.1.04066-k9.dmg(Mac AnyConnect Client)
When logging into AnyConnect, select the appropriate group assigned to you before logging in.
For changing VPN password, follow the steps in the following document:www.appshosting.com/vpn/Change_Cisco_VPN_Password.pdf

---

### 452. Nanometrics Vertex Installation

**Topic ID:** 2105

**IMPORTANT : Please make sure to always start Vertex services among Apps Services to avoid quote error ( Solution #454)**

Instructions inAH Vertex Installation.doc

---

### 455. Windows command utility to get all folder sizes - du

**Topic ID:** 3001

### Introduction

Du (disk usage) reports the disk space usage for the directory you specify. By default it recurses directories to show the total size of a directory and its subdirectories.

### Using Disk Usage (DU)

**Usage: du [-c[t]] [-l| -n | -v] [-u] [-q]**
**-c**Print output as CSV. Use -ct for tab delimiting.**-l**Specify subdirectory depth of information (default is all levels).**-n**Do not recurse.**-v**Show size (in KB) of intermediate directories.**-u**Count each instance of a hardlinked file.**-q**Quiet (no banner).

CSV output is formatted as:

Path, CurrentFileCount, CurrentFileSize, FileCount, DirectoryCount, DirectorySize

**Download Du**
**(115 KB)**

---

### 472. How to Log in to Helpdesk User Portal

**Topic ID:** 10

1. Navigate your browser to https://helpdesk.appshosting.com.2. Log in with your Helpdesk user name and password. If you created a request by sending email to support@appshosting.com, then the initial username and password is the same as your e-mail address. If you are getting password error, check that your "Log on to" setting by clicking "2. After you have logged in, you can Click on Requests tab to view or create requests.3. You can change your password by clicking on Personalize link and then "Change Password" tab.

---

### 542. Import SSL Certificate into wallet .

**Topic ID:** 2104

1. Get the certificates from the browser : ie stripe:

---

### 489. Images Missing on static workspace location

**Topic ID:** 2104

Images Issue:
Images are not copied from static files location for the application to the new server:
Solution:1) Login into the application and shared components --> static workspace files2) export all the images by pressing download as zip from source3) place it locally on the local windows machine4) Open the target URL for the application and login to the applications as application user with admin privileges5) upload the images zip file and apply the changes6) Retest the issue , perform the same for all applications for the customer which has statics workspace files

---

### 592. Unable to open Demantra 7.3 Worksheet

**Topic ID:** 3301

**Problem**: Unable to open Demantra 7 worksheet using URL : http://c1prdascp1.nanometrics.com:7010/demantra/portal/login.jsp
**References**:
**Symptoms**: Java exception occurred during opening of worksheetJava Plug-in 10.79.2.15Using JRE version 1.7.0_79-b15 Java HotSpot(TM) Client VMUser home directory = C:\\Users\\rpoupard
----------------------------------------------------c: clear console window
f: finalize objects on finalization queue
g: garbage collect
h: display this help message
l: dump classloader list
m: print memory usage
o: trigger logging
q: hide console
r: reload policy configuration
s: dump system and deployment properties
t: dump thread list
v: dump thread stack
x: clear classloader cache
0-5:
set trace level to
----------------------------------------------------
log4j:WARN No appenders could be found for logger (dpweb.connection)
log4j:WARN Please initialize the log4j system properly.log4j:WARN See http://logging.apache.org/log4j/1.2/faq.
html#noconfig for more info.
CacheEntry[http://c1prdascp1.nanometrics.com:7010/demantra/TaskListServlet]:
updateAvailable=false,lastModified=Wed Dec 31 16:00:00 PST 1969,length=-1
log4j:WARN No appenders could be found for
**Causes**:
**Solution**:Demantra 7 requires JRE/jdk 32 bit version along with IE (32 or 64) bit version-- we have downgraded the jRE from 1.8.X to 1.7.0_79 (32 bit) in the local machine-- rebooted the local desktop-- cleared the java cache from General tab in java console (delete button) then apply the changes-- cleared the IE cache from IE settings (delete all temporary files) , apply the changes-- open the fresh IE window and retest the issue-- observed issue has been resolved

---

### 645. Create Guest Account in Office 365 for External domain users

**Topic ID:** 3902

**Inviting organization side:**
**Option 1: From O365 Admin Center**
1. Log in as global administrator toMicrosoft 365 admin center
2. Click Guest users menu, and click Add a guest user button.

3. Enter Name, Email address, First name, Last name, Usage location, manager if applicable, and Groups if known; then click Invite

**Option 2: From Entra admin center:**
1. From Home screen, click Users -> +New user -> Invite external user.
2. Enter user information and click Next Properties.
2. Enter First name, Last name, Manager if applicable, and Usage location.

3. Click Next: Assignments to add group or role, or else click Review + invite, then click Invite.

**On invitee side:**
1. Receive invitation link by email, and click Accept invitation.

2. Enter verification code sent to your e-mail address.

3. Click Accept to join the organization as a guest.

4. Click Next on the Action Required for authenticator app, or click Ask later to skip this for 14 days.
5.

**Important:**Ensure the organization name is correct in Entra admin center Home Properties..

---

### 618. Download language XLIFF files

**Topic ID:** 2104

From time to time, we get a request from Laxmi to download XLIFF translation files for her applications.

****NOTE: we follow below steps from remote desktop to avoid network lag because if we do it from our laptops/machines, the download process will timeout.**

1. Access the workspace using the provided URL, in this case below was provided:

http://af3-l.appsforte.com:8080/ords

2. Log in using provided credentials to the mentioned workspace. In this case, we were provided with the below information:
Workspace: GRACE-IM
Username: Mike
Password:
3. Click on "App Builder" after logging into the workspace.

4. Scroll down to locate the application ID for which we'll be downloading XLIFF files. In this case, we were asked to do it for APP ID 220 as shown in the screenshot below:

4. Once application is opened, click on "shared components" as shown below:

5. Scroll down to locate "Globalization" section and then, click on "Translate Application" as shown below:

6. Click on "Download XLIFF Translation Files" as shown below:

7. Select the language from the dropdown list, in our case we were requested to provide translation file for French (Luxembourg) (fr-lu) and German (de). So, we'll select that and click on "Export XLIFF File for Application" button.

8. It will download XLIFF translated files in "Downloads" folder.

---

### 613. Brightfield - Create new SFTP folder

**Topic ID:** 2404

**Notes:**

1. Below example based on client user “clyde”.

2. Production SFTP user on af165.

3. SSH to server on port 222 since 22 is used by SFTP.

**Option 1 - preferred - Using Script (addsftp.sh)**

- 

Log in to af165, as afsupport userand password: o3mm0n1

- 

su - root, execute script: /root/addsftp.sh

- 

Press Enter to confirm and when prompted enter password twice.

**Option 2 - Manual Commands**

1. Create SFTP user with no shell login.

useradd clyde -d /home/sftp/clyde -s /sbin/nologin

2. Remove all hidden files.

rm -fr /home/sftp/clyde/.*

3. Change ownership of home directory to root.

chown root.root /home/sftp/clyde

4. Grant 705 permission on home directory.

chmod 705 /home/sftp/clyde

5. Create user directories.

cd /home/sftp/clyde

mkdir upload download

6. Grant SFTPADMIN users full, writable access to user directories.

chown clyde.sftpadmin upload download

chmod 750 upload download

7. Assign SFTP user password.

March 18, 2019 at 6:00 PM

**To:**"jahan.khan@appsforte.com"<jahan.khan@appsforte.com>

**Cc:**Carissa Shafto<cshafto@brightfieldstrategies.com>, Josh Mader<jmader@brightfieldstrategies.com>

**Subject:**Re: [Request ID :##RE-66845##] : Re: email notifications.

===========================

Template email:

The requested SFTP account has been created as follows:

Server: file.talentdataexchange.com (af165.appsforte.com)

User:

Password:

Please let us know the public IP address of the customer (browse showip.net), so that we can whitelist the connection.Please also remind client to upload files to "upload" folder after logging in.

---

### 460. Nanometrics : Vertex post-clone steps

**Topic ID:** 2105

Attached doc.

To verify Vertex , we can use below command ,

​-From the server command prompt
curlhttp://server:port/vertex-ws/adminservices/HealthCheck?wsdl

Where server:port = The actual server:port in you use to connect to vertex central.​

---

### 481. How to set up SSL on WebLogic

**Topic ID:** 901

**Set up SSL for WebLogic**
1. First we need to create .pem file with the crt and intermediate files. Concat those like this
[root@ah199 ~]# cat 2b699e9cba4476.crt gd_bundle-g2-g1.crt > server.pem
2. Import it to keystore
keytool -import -keystore ah199fmw.jks -file server.pem -alias ah199pk -v -keypass SamAh1RaviRs2 -storepass ah199kstpw
3. Import imtermediate cert to trust.jks
keytool -import -file gd_bundle-g2-g1.crt -alias RootCA -keystore trust.jks
Make sure you have the correct passwords you have used in the commands matches in the keystore Tab of the Weblogic GUI
-------------------------Disable SSL using port 7002 on Admin server:

---

### 589. Enable ping on Windows server

**Topic ID:** 3001

**References**: https://kb.iu.edu/d/aopy
**Procedure or Description**:

- Open Windows Firewall
- ClickAdvanced Settingson the left.
- From the left pane of the resulting window, clickInbound Rules.
- In the right pane, find the rules titledFile and Printer Sharing (Echo Request - ICMPv4-In).
- Right-click the rule and chooseEnable Rule.

Disabled ping following latest e-mail from Paul.

---

### 647. Generate Report of Active Users Sorted by Last Login Time

**Topic ID:** 3902

**Title**: Generate Active Users report sorted by login time

**References**:

**Symptoms (if applicable)**:

**Causes (if applicable)**:

**Procedure or Solution Description**:

1. Log in to M365, Entra Admin.
2. Download users.

3. Open in Excel and change format of Interactive Sign-in and then Non-interactive Sign-in columns to date.
4. Sort by sign-in columns.

---

### 661. Finding and grabbing .rdf reports for XXONTO

**Topic ID:** 2105

**Title**: Finding and grabbing .rdf reports for XXONTO

**References**:

**Symptoms (if applicable)**:

**Causes (if applicable)**:

**Procedure or Solution Description**:
All RDF reports will be in $XXONTO_TOP/reports/US/

Grab the .rdf file from here and send to client.

---



## Category: Windows & Active Directory

*59 solutions*

### 372. Ask for disable trigger in Production (for Global timezone issue)

**Topic ID:** 2111

**alter trigger apps.TPC_ASO_QUOTE_HEADERS_T2I disable;**

---

### 365. Active Directory and Domain Controller

**Topic ID:** 2403

ah59 - primary DC and AD
ah55 - secondary DC and AD

Domain: ah.local

When logging in, enter ah\\

When they log in ts01 or ah35

---

### 636. Pulling PO_ID from po_header_id table.

**Topic ID:** 2105

Please find the steps below;

1) Get the concurrent program name PO Output for Communication.

select * from All_TABLES where table_name like 'PO_HEADERS%';
2) From the request details find the PO _header_id, eg: 725714
3)Please run the below query.
select * from PO_HEADERS_ALL where po_header_id=725714;

---

### 52. Apache SSL setup on Windows

**Topic ID:** 301

OptionsSymptom:
*(public)*Problem:
*(public)*Solution:
*(public)*C:\\Program Files\\Apache Software Foundation\\Apache2.2\\bin>openssl
OpenSSL> ''
openssl:Error: '' is an invalid command.
Standard commands
asn1parse ca ciphers crl crl2pkcs7
dgst dh dhparam dsa dsaparam
ec ecparam enc engine errstr
gendh gendsa genrsa nseq ocsp
passwd pkcs12 pkcs7 pkcs8 prime
rand req rsa rsautl s_client
s_server s_time sess_id smime speed
spkac verify version x509
Message Digest commands (see the `dgst' command for more details)
md2 md4 md5 mdc2 rmd160
sha sha1
Cipher commands (see the `enc' command for more details)
aes-128-cbc aes-128-ecb aes-192-cbc aes-192-ecb aes-256-cbc
aes-256-ecb base64 bf bf-cbc bf-cfb
bf-ecb bf-ofb cast cast-cbc cast5-cbc
cast5-cfb cast5-ecb cast5-ofb des des-cbc
des-cfb des-ecb des-ede des-ede-cbc des-ede-cfb
des-ede-ofb des-ede3 des-ede3-cbc des-ede3-cfb des-ede3-ofb
des-ofb des3 desx rc2 rc2-40-cbc
rc2-64-cbc rc2-cbc rc2-cfb rc2-ecb rc2-ofb
rc4 rc4-40
OpenSSL>
OpenSSL>
OpenSSL>
OpenSSL> genrsa -des3 -out redplaid.com.key 2048
Loading 'screen' into random state - done
Generating RSA private key, 2048 bit long modulus
..+++
.............................+++
e is 65537 (0x10001)
Enter pass phrase for redplaid.com.key:
7676:error:28069065:lib(40):UI_set_result:result too small:.\\crypto\\ui\\ui_lib.c
850:You must type in 4 to 511 characters
Enter pass phrase for redplaid.com.key:
Verifying - Enter pass phrase for redplaid.com.key:
OpenSSL> genrsa -out redplaid.key 2048
Loading 'screen' into random state - done
Generating RSA private key, 2048 bit long modulus
.................+++
..+++
e is 65537 (0x10001)
OpenSSL> openssl req -new -key redplaid.com.key -out redplaid.com.csr
openssl:Error: 'openssl' is an invalid command.
Standard commands
asn1parse ca ciphers crl crl2pkcs7
dgst dh dhparam dsa dsaparam
ec ecparam enc engine errstr
gendh gendsa genrsa nseq ocsp
passwd pkcs12 pkcs7 pkcs8 prime
rand req rsa rsautl s_client
s_server s_time sess_id smime speed
spkac verify version x509
Message Digest commands (see the `dgst' command for more details)
md2 md4 md5 mdc2 rmd160
sha sha1
Cipher commands (see the `enc' command for more details)
aes-128-cbc aes-128-ecb aes-192-cbc aes-192-ecb aes-256-cbc
aes-256-ecb base64 bf bf-cbc bf-cfb
bf-ecb bf-ofb cast cast-cbc cast5-cbc
cast5-cfb cast5-ecb cast5-ofb des des-cbc
des-cfb des-ecb des-ede des-ede-cbc des-ede-cfb
des-ede-ofb des-ede3 des-ede3-cbc des-ede3-cfb des-ede3-ofb
des-ofb des3 desx rc2 rc2-40-cbc
rc2-64-cbc rc2-cbc rc2-cfb rc2-ecb rc2-ofb
rc4 rc4-40
OpenSSL> req -new -key redplaid.com.key -out redplaid.com.csr
Unable to load config info from /usr/local/ssl/openssl.cnf
error in req
OpenSSL>
**

---

### 55. How to generate an SSL CSR through CPanel

**Topic ID:** 301

**Generate CSR (Certificate Signing Request)
**

1.State: Utah

Locality: Park City

Organization: Mountain Travel Company LLC

Organization unit: Mountain Travel Company

Common Name:www.mountaintravelcompany.com

Email Address:shane@mountaintravelcompany.com

2.administration site,https://prod.appshosting.com:2087as root user.

3.4.

---

### 60. AH1 - Start Web / Proxy Server

**Topic ID:** 301

OptionsSymptom:
*(public)*root@ah1[~]# /etc/init.d/httpd stop
Stopping httpd: [ OK ]
root@ah1[~]# /etc/init.d/httpd start
Starting httpd: [Mon Oct 12 14:50:02 2009] [warn] VirtualHost 66.152.169.35:443 overlaps with VirtualHost 66.152.169.35:443, the first has precedence, perhaps you need a NameVirtualHost directive
Apache/2.0.52 mod_ssl/2.0.52 (Pass Phrase Dialog)
Some of your private key files are encrypted for security reasons.
In order to read them you have to provide the pass phrases.
Server komfortgb.com:443 (RSA)
Enter pass phrase:<------------------------TYPE "admin123"
Server lvct.appshosting.com:443 (RSA)
Enter pass phrase:<------------------------TYPE "t1t@n"
Serverwww.titanapplications.com:443(RSA)
Enter pass phrase:<------------------------TYPE "titan"
OK: Pass Phrase Dialog successful.
[ OK ]
root@ah1[~]#

ALSO

# cd /u01/admin/proxy/proxy-eloyalty
root@ah1[/u01/admin/proxy/proxy-eloyalty]# ./start
Sun Java System Web Proxy Server 4.0.5 B04/18/2007 11:01
Please enter password for "internal" token:
warning: CORE1234: SSL server certificate eloyalty.appshosting.com is expired.
info: HTTP3072: [LS ls1]https://66.152.191.98:443ready to accept requests
startup: server started successfully

ALSO - Start Tomcat

On ah1

su - tomcat
cd bin
./startup.sh

su - tomcat6
cd bin
./startup.sh

---

### 63. Apache - Force HTTPS / SSL

**Topic ID:** 301

OptionsSymptom:
*(public)*`**Add the following in the virtualhosts directive in httpd.conf:
**
RewriteEngine On
RewriteCond %{HTTPS} off
RewriteRule (.*) https://%{HTTP_HOST}%{REQUEST_URI}`Problem:
*(public)*Solution:
*(public)*

---

### 66. Backup Mount Points - Mounting NFS /b01 /b02 /b03

**Topic ID:** 301

OptionsSymptom:
*(public)*

/etc/init.d/nfs start

/etc/init.d/nfslock start

mkdir /b01 /b02 /b03

filer.appshosting.com:/b01 /b01 nfs rw,bg,hard,nointr,tcp,vers=3,timeo=300,rsize=32768,wsize=32768 2 2

filer.appshosting.com:/b02 /b02 nfs rw,bg,hard,nointr,tcp,vers=3,timeo=300,rsize=32768,wsize=32768 2 2

filer.appshosting.com:/b03 /b03 nfs rw,bg,hard,nointr,tcp,vers=3,timeo=300,rsize=32768,wsize=32768 2 2

mount /b01

mount /b02

mount /b03

If possible, instead of filer.appshosting.com use the backup network (10.x.x.x)
Problem:
*(public)*Solution:
*(public)*

---

### 503. Fix for Duplicate Tickets from Bouncing E-mails

**Topic ID:** 10

Problem: Duplicate tickets are being generated repeatedly from bouncing e-mails
Symptom: When ticket generating e-mail addresses are copied from Helpdesk ticket, the mail fetch keeps creating new ticke
Solution: Navigate to Admin -> Mail Server Settings, and add all the ticket generating email aliases to the E-mail address list.

---

### 92. How to enable caching for images on Apache?\r\n

**Topic ID:** 301

OptionsSymptom:
*(public)*To improve Apache performance, enable caching for the imagesProblem:
*(public)*How to enable caching on Apache for images on the web pages?Solution:
*(public)*1) Make sure the following modules are enabled or loaded by Apache:

LoadModule expires_module modules/mod_expires.so
LoadModule deflate_module modules/mod_deflate.so

2) Go to Virtual Server and add the following directories that are containing the following images such as .jpg .png .gif

ExpiresActive On
ExpiresByType images/gif "access plus 30 days"
ExpiresByType images/jpg "access plus 30 days"
ExpiresByType images/png "access plus 30 days"
ExpiresByType img/gif "access plus 30 days"
ExpiresByType img/jpg "access plus 30 days"
ExpiresByType img/png "access plus 30 days"

3)Check the apache config

apachectl configtest

4) Restart the Apache as follows:

apachectl graceful

5) Check the web pages, first time it will download the images, subsequently they are served from client local cache.

---

### 418. Checking WebLogic Admin Server Memory Usage

**Topic ID:** 901

You can get memory usage info from WLS console as follows:
1. Log in to WLS console as weblogi.c2. Click Environment -> Servers.3. Click AdminServer from the list.4. Click on Monitoring tab & Performance subtab which is default.
The Heap size is the memory size for AdminServer JVM.

---

### 115. NFS Backup Mount Points (b01 b02 b03)\r\n

**Topic ID:** 301

OptionsSymptom:
*(public)*

SET UP BACKUP NFS MOUNTS (b01 b02 b03)

/etc/init.d/nfs start

/etc/init.d/nfslock start

mkdir /b01 /b02 /b03

filer.appshosting.com:/b01 /b01 nfs rw,bg,hard,nointr,tcp,vers=3,timeo=300,rsize=32768,wsize=32768 2 2

filer.appshosting.com:/b02 /b02 nfs rw,bg,hard,nointr,tcp,vers=3,timeo=300,rsize=32768,wsize=32768 2 2

filer.appshosting.com:/b03 /b03 nfs rw,bg,hard,nointr,tcp,vers=3,timeo=300,rsize=32768,wsize=32768 2 2

PREFERABLY: Use "10.10.10.10" instead of "filer.appshosting.com", as this is the backup network (Gig-E)

BACKUP ROOT FILESYSTEM

To take ROOT Backup

mkdir /b01/os/`hostname`

IF ROOT PARTITION is GREATER THAN 50gb

nohup tar cvf /b01/os/`hostname`/boot.tar boot > /tmp/nohup.out &

nohup tar cvf /b01/os/`hostname`/usr.tar usr > /tmp/nohup.out &

nohup tar cvf /b01/os/`hostname`/var.tar var > /tmp/nohup.out &

nohup tar cvf /b01/os/`hostname`/lib.tar lib > /tmp/nohup.out &

nohup tar cvf /b01/os/`hostname`/lib64.tar lib64 > /tmp/nohup.out &

nohup tar cvf /b01/os/`hostname`/etc.tar etc > /tmp/nohup.out &

or

IF ROOT PARTITION is LESS THAN 50gb

nohup dump 0f /b01/os/`hostname`/`hostname`-root.dump / > /tmp/nohup.out &
Problem:
*(public)*Solution:
*(public)*

---

### 124. Reset Windows Terminal Server Session

**Topic ID:** 301

OptionsSymptom:
*(public)*Query the sessions

qwinsta /server:cp-its-soadv01

Reset the sessions

rwinsta /server:cp-its-soadv01 2Problem:
*(public)*Solution:
*(public)*

---

### 493. Workflow settings Nanometrics

**Topic ID:** 2105

Below are settings for Worflow mailer in Nanometrics Production

Server Name: outlook.office365.com:993
Manually start components if not already up.

---

### 214. Server Spreadsheet

**Topic ID:** 304

OptionsAttachment:Computers.xls28.0 KBytesSymptom:
*(public)*Problem:
*(public)*Solution:
*(public)*

---

### 215. Setting From and Reply-To address using MUTT

**Topic ID:** 304

OptionsSymptom:
*(public)*Problem:
*(public)*Solution:
*(public)*Update $HOME/.muttrc on all application servers as follows:

# Mutt sender profile:
# Signature file
# set signature='~/.signature'
# Customized headers
# unmy_hdr * # remove all extra headers first.
set reply_to=yes
my_hdr From: Emtek Products
my_hdr Reply-To:noreply@emtek.com

---

### 222. Add Host/IP to Exchange SPAM Whitelist

**Topic ID:** 301

OptionsAttachment:Spam-Whitelist.jpg244.3 KBytesSymptom:
*(public)*Problem:
*(public)*Solution:
*(public)*

---

### 230. Remotely Reboot a Windows Server (Remote Reboot)\r\n

**Topic ID:** 301

OptionsSymptom:
*(public)*shutdown /m \\\\ah59 /rProblem:
*(public)*Solution:
*(public)*

---

### 226. Fix for Exchange users with mailbox but no SBS user account

**Topic ID:** 301

OptionsSymptom:
*(public)*User and email exists from Exchange Management Console, but does not show from SBS Console.
Problem:
*(public)*Solution:
*(public)*1. Go into the mailbox properties to Account tab.
2. Change the account user ID to something else.
3. Change all other reference to something else.
4. Go into SBS console and create new user from there.
5. Go to the mailbox in Exchange Management Console, and follow these steps allow the new user to access the old mailboxes:
a. Select the old mailbox, and click Manage Full Access Permissions link on right.
b. Click Add and choose the new user that was created.
c. Click OK then Manage.

---

### 227. How to give desktop access through Citrix

**Topic ID:** 301

OptionsSymptom:
*(public)*Problem:
*(public)*Solution:
*(public)***I. Give access to desktop from Windows
**1. Open Computer Management in Administrative Tools group.
2. Create new user and assign Users, Remote Desktop Users group.

II. Give access to Citrix desktop
1. Start Citrix Management Console
2. Log in to the MetaFrame server (CM) with administrator user name/password and domain if configured.
3. Navigate to ahfarm->Applications->Desktop and right click then Properties.
4. Navigate to Users and then add new user.

---

### 228. Microsoft Exchange - Add New Users

**Topic ID:** 301

OptionsAttachment:Exchange Add Users.doc870.0 KBytesSymptom:
*(public)*Problem:
*(public)*Solution:
*(public)*

---

### 231. Restore Microsoft Exchange Server from Backup (Windows SBS 2008)\r\n

**Topic ID:** 301

OptionsSymptom:
*(public)*We perform full backups of the Exchange server 3 times a day.
The restore process is quite painless and takes about 30 minutes.
Make sure the Windows Small Business Server 2008 CD is in the ah59 before proceeding with the below steps:

Log in to the Raritan console and attach to the AH59 server console -->

http://blogs.technet.com/nking/archive/2008/12/17/bare-metal-restore-with-sbs-2008-running-virtualized.aspx?CommentPosted=true#commentmessage

http://technet.microsoft.com/en-us/library/cc794282.aspx
You can recover your server operating system or full server by using the Windows SBS 2008 Installation disc and a backup that you created earlier by using Windows Small Business Server Backup. This method of data recovery is also known as a “bare metal” restore.
**To restore the operating system or full server from backup**

- Unplug the external storage device from the server.

- Insert Windows SBS 2008 Installation DVD 1.

- Restart the server and boot to the DVD drive.

- On the**Install Now**page of the Windows Server 2008 Installation Wizard, click**Repair your computer**.**The System Recovery Options**dialog box appears.

- Select**Microsoft Windows Server 2008**, and then click**Next**.

- On the**Choose a recovery tool**page, click**Windows Complete PC Restore**. A warning appears to inform you that a valid backup location could not be found.

- Connect the external storage device that contains your server backup, and then click**Retry**.

- Follow the instructions in the Windows Complete PC Restore Wizard:

  - On the first page of the Windows Complete PC Restore Wizard, choose whether you want to restore the server from the latest available backup or from a different backup.

NoteWindows Recovery Environment does not adjust time stamps for daylight time. As a result, the time of the backup that is displayed in the Windows Complete PC Restore Wizard may be off by an hour.

  - On the**Choose how to restore backup**page of the wizard, you can:

    - Choose to format and repartition disks

    - Choose to only restore system disks

    - Install drivers if necessary

    - Specify advanced options

After the computer restores from the backup, it restarts.
Problem:
*(public)*Solution:
*(public)*

---

### 232. Set up BlackBerry to synchronize email with Exchange

**Topic ID:** 301

OptionsSymptom:
*(public)*Problem:
*(public)*Solution:
*(public)*How to set up BlackBerry to synchronize email with Exchange

1. Log into ah57-l using Remote Desktop.

user/password: besadmin / P3a...

2. Launch BlackBerry Manager

3. Go to Users Tab -> Choose ID and Right click to choose Erase Data and Delete Handheld.

4. Go to User Tab -> Choose the ID and righ-click to choose Generate and Send Activation Password

5. Follow instructions from BlackBerry phone vendor, and activate it. Ask Sam or Ashok to do this part but give your ESN/MEID found under the battery.

For Verizon users:
1. Turn off the devices before activating.
2. Go to verizonwireless.com/myverizon and log in or register. (appshosting / ahver...)
3. Go to My Phone and select Activate Phone and replacement equipment, and follow steps to enter ESN/MEID and activate.

### Your account has been updated. To program your new phone:1) Power off your old phone.
2) Wait approximately 20 minutes, then dial *228 from your new phone.
3) Select Option 1 to complete the programming.
4) Dial #832 to make a test call and confirm the activation.

---

### 498. Set up Google Mail Spam Whitelist

**Topic ID:** 2403

Title: Set up Google Mail Spam WhitelistApplies to: Google Apps E-mailReferences:Solution:

1. Navigate to Google Apps Admin console.2. Click Apps.3. Choose G Suite.
4. Click Gmail.
5. Click Advanced Settings.6. Click Configure on the right side of the Spam settings area.7. Create new spam whitelist.8. Add domains to white list and click Save.
9. Click Save at bottom right of the screen.

---

### 331. Maujim Upgrade from 8.1.7.4 to 10.2.0.4

**Topic ID:** 1801

Please find the attached document

---

### 280. Reset DRAC Password

**Topic ID:** 301

racadm config -g cfgUserAdmin -o cfgUserAdminPassword -i 2 "hello123"

---

### 281. Add ramdisk

**Topic ID:** 301

/sbin/mke2fs -q -m 0 /dev/ram0
mkdir -p /ramdisk
/bin/mount /dev/ram0 /ramdisk
/bin/chown root /ramdisk
/bin/chmod 0750 /ramdisk

---

### 352. New *.appshosting.com SSL Certificate

**Topic ID:** 904

Attached is the renewed 3 year wildcard SSL certificate for *.appshosting.com

This can be used for any application or web server that has the URL *.appshosting.com

The following files are attached:

(1)SSL Cert

(2)Private Key

(3)Godaddy CA Bundle

There is no need to purchase individual certs for *.appshosting.com domains, just use this one.

---

### 286. Apache SSL Setup on Windows

**Topic ID:** 2402

C:\\Program Files\\Apache Software Foundation\\Apache2.2\\bin>openssl
OpenSSL> ''
openssl:Error: '' is an invalid command.

Standard commands
asn1parse ca ciphers crl crl2pkcs7
dgst dh dhparam dsa dsaparam
ec ecparam enc engine errstr
gendh gendsa genrsa nseq ocsp
passwd pkcs12 pkcs7 pkcs8 prime
rand req rsa rsautl s_client
s_server s_time sess_id smime speed
spkac verify version x509

Message Digest commands (see the `dgst' command for more details)
md2 md4 md5 mdc2 rmd160
sha sha1

Cipher commands (see the `enc' command for more details)
aes-128-cbc aes-128-ecb aes-192-cbc aes-192-ecb aes-256-cbc
aes-256-ecb base64 bf bf-cbc bf-cfb
bf-ecb bf-ofb cast cast-cbc cast5-cbc
cast5-cfb cast5-ecb cast5-ofb des des-cbc
des-cfb des-ecb des-ede des-ede-cbc des-ede-cfb
des-ede-ofb des-ede3 des-ede3-cbc des-ede3-cfb des-ede3-ofb
des-ofb des3 desx rc2 rc2-40-cbc
rc2-64-cbc rc2-cbc rc2-cfb rc2-ecb rc2-ofb
rc4 rc4-40

OpenSSL>
OpenSSL>
OpenSSL>
OpenSSL> genrsa -des3 -out redplaid.com.key 2048
Loading 'screen' into random state - done
Generating RSA private key, 2048 bit long modulus
..+++
.............................+++
e is 65537 (0x10001)
Enter pass phrase for redplaid.com.key:
7676:error:28069065:lib(40):UI_set_result:result too small:.\\crypto\\ui\\ui_lib.c
850:You must type in 4 to 511 characters
Enter pass phrase for redplaid.com.key:
Verifying - Enter pass phrase for redplaid.com.key:
OpenSSL> genrsa -out redplaid.key 2048
Loading 'screen' into random state - done
Generating RSA private key, 2048 bit long modulus
.................+++
..+++
e is 65537 (0x10001)
OpenSSL> openssl req -new -key redplaid.com.key -out redplaid.com.csr
openssl:Error: 'openssl' is an invalid command.

Standard commands
asn1parse ca ciphers crl crl2pkcs7
dgst dh dhparam dsa dsaparam
ec ecparam enc engine errstr
gendh gendsa genrsa nseq ocsp
passwd pkcs12 pkcs7 pkcs8 prime
rand req rsa rsautl s_client
s_server s_time sess_id smime speed
spkac verify version x509

Message Digest commands (see the `dgst' command for more details)
md2 md4 md5 mdc2 rmd160
sha sha1

Cipher commands (see the `enc' command for more details)
aes-128-cbc aes-128-ecb aes-192-cbc aes-192-ecb aes-256-cbc
aes-256-ecb base64 bf bf-cbc bf-cfb
bf-ecb bf-ofb cast cast-cbc cast5-cbc
cast5-cfb cast5-ecb cast5-ofb des des-cbc
des-cfb des-ecb des-ede des-ede-cbc des-ede-cfb
des-ede-ofb des-ede3 des-ede3-cbc des-ede3-cfb des-ede3-ofb
des-ofb des3 desx rc2 rc2-40-cbc
rc2-64-cbc rc2-cbc rc2-cfb rc2-ecb rc2-ofb
rc4 rc4-40

OpenSSL> req -new -key redplaid.com.key -out redplaid.com.csr
Unable to load config info from /usr/local/ssl/openssl.cnf
error in req
OpenSSL>

---

### 353. Fusion SOA environment connection information

**Topic ID:** 310

Problem : Attached the screenshot as attachment MaverickConnection problem.docSolution:This was resolved by doing the following 2 things:1. For each managed server, set the Listen Address to hostname, i.e. maverick.appshosting.com.2. Add the following to local /etc/hosts file so it resolves internally:192.168.88.19 maverick.appshosting.com maverick

---

### 292. Creating a local file system on Citrix Xen Server

**Topic ID:** 2116

Check the name of the Volume Group:

# vgdisplay

VG_XenStorage-0bd23b3a-bf79-3f7d-0d8a-8006da3c17bc

Create Logical Volume

lvcreate -L 1000000M -n datavol00 VG_XenStorage-0bd23b3a-bf79-3f7d-0d8a-8006da3c17bc

Create Filesystem

mkfs.ext3 /dev/mapper/VG_XenStorage--0bd23b3a--bf79--3f7d--0d8a--8006da3c17bc-datavol00

Create Mount Point

mkdir /data00

Mount File System

mount /dev/mapper/VG_XenStorage--0bd23b3a--bf79--3f7d--0d8a--8006da3c17bc-datavol00 /data00

Add the following to /etc/fstab to automount upon reboot:

/dev/mapper/VG_XenStorage--0bd23b3a--bf79--3f7d--0d8a--8006da3c17bc-datavol00 /data00 ext3 defaults 0 0

---

### 297. Metadata backup

**Topic ID:** 301

Log into XSConsole on each XenServer

Provide the login credentials

Choose Backup,Restore and Update

Choose Schedule Virtual Machine Metadata

Choose Daily

Choose Ok

(Screen Shot enclosed)

---

### 311. Citrix XenServer Add Host to Pool

**Topic ID:** 2116

xe pool-join master-address=172.1.0.69 master-username=root master-password=force=true

---

### 333. Configuring custom ring tones - Blackberry

**Topic ID:** 301

## Set custom notification for calls or messages from a specific contact

- In the profile list, clickAdvanced.
- Press theMenukey.
- ClickNew Exception.
- In theExceptionfield, type a name for the profile exception.
- In theFromfield, press theMenukey.
- ClickAdd Name.
- Click a contact.
- To add another contact, repeat steps 5 through 7.
- Set theUse Profilefield to the notification profile on which the exception should be based.
- To set a ring tone, select theCustom Phone Tunecheck box. Set a ring tone.
- Press theMenukey.
- ClickSave.

---

### 347. How to reset weblogic admin password

**Topic ID:** 901

Reset weblogic password when you forgot after installation.

move out/DefaultAuthenticatorInit.ldift
move out/servers/AdminServer/data/ldap/DefaultAuthenticatormyrealmInit.initialized
(move out/servers/AdminServer/data/ldap)

Create new/servers/AdminServer/security/boot.properties

./bin/setDomainEnv.sh
java weblogic.security.utils.AdminAccount weblogic morn1ngusaf .

Restart Admin server.

---

### 349. Weblogic & OID upgrade

**Topic ID:** 310

Video of Weblogic and OID Upgrade.

---

### 350. Upgrade SOA

**Topic ID:** 310

Upgrade video of SOA

---

### 355. ah217 tomcat

**Topic ID:** 2403

root 5135 1 0 Jun24 pts/2 00:00:15 /usr/local/jdk/bin/java -Djava.util.logging.config.file=/home/alden/tomcat6/conf/logging.properties -Djava.util.logging.manager=org.apache.juli.ClassLoaderLogManager -Djava.endorsed.dirs=/home/alden/tomcat6/endorsed -classpath /home/alden/tomcat6/bin/bootstrap.jar -Dcatalina.base=/home/alden/tomcat6 -Dcatalina.home=/home/alden/tomcat6 -Djava.io.tmpdir=/home/alden/tomcat6/temp org.apache.catalina.startup.Bootstrap start
acf 14721 1 0 Jun15 ? 00:05:00 /usr/local/jdk/bin/java -Djava.util.logging.config.file=/usr/local/jakarta/tomcat-acf/apache-tomcat-6.0.26/conf/logging.properties -ms256M -mx512M -Djava.util.logging.manager=org.apache.juli.ClassLoaderLogManager -Djava.endorsed.dirs=/usr/local/jakarta/tomcat-acf/apache-tomcat-6.0.26/endorsed -classpath /usr/local/jakarta/tomcat-acf/apache-tomcat-6.0.26/bin/bootstrap.jar -Dcatalina.base=/usr/local/jakarta/tomcat-acf/apache-tomcat-6.0.26 -Dcatalina.home=/usr/local/jakarta/tomcat-acf/apache-tomcat-6.0.26 -Djava.io.tmpdir=/usr/local/jakarta/tomcat-acf/apache-tomcat-6.0.26/temp org.apache.catalina.startup.Bootstrap start
root 27054 1 0 May26 ? 01:19:38 /usr/local/jdk/bin/java -Djava.util.logging.config.file=/home/oak/apache-tomcat-6.0.29/conf/logging.properties -Djava.util.logging.manager=org.apache.juli.ClassLoaderLogManager -Xms256m -Xmx1024m -Djava.endorsed.dirs=/home/oak/apache-tomcat-6.0.29/endorsed -classpath /home/oak/apache-tomcat-6.0.29/bin/bootstrap.jar -Dcatalina.base=/home/oak/apache-tomcat-6.0.29 -Dcatalina.home=/home/oak/apache-tomcat-6.0.29 -Djava.io.tmpdir=/home/oak/apache-tomcat-6.0.29/temp org.apache.catalina.startup.Bootstrap start

---

### 359. Adding/removing node to load balancer

**Topic ID:** 2403

Steps for adding/removing a node to load balancer for Staffing Angel
-----------------------------------------------------------------------------------

From ah35 or ah255 go tohttp://172.1.101.25
Username: nsroot
password: wltd0ww
In the console, on the left side double click on "Load Balancing"
Then double click on "Virtual servers"
Then double click on "Staffing-Angel-HTTPS"
To remove ah248 off the load balancer uncheck the check box for staffing-angel-c and click on "OK"
To add it back, check the check box for staffing-angel-c and click on "OK"

---

### 506. Code Migration Request

**Topic ID:** 2105

**Subject**: Code migration request

**References**: Attached instruction.

**Description of Actions Taken**: Upload File & Executed migration steps.

---

### 390. Open Manage Installation

**Topic ID:** 902

Dell OpenManager IT Assistant (dia.appshosting.com)

Action -> Include Ranges (spcify IP for each Xen server)

Mount ISO image
df -TH

mount -o loop .iso /mnt/xxx
mount -o loop OM-SrvAdmin-Dell-Web-LX-6.5.0-2247.XenServer56_A01.11.iso /mnt/
cd /mnt
./install.sh
cd /opt/dell/srvadmin/sbin
./srvadmin-services.sh start / stop

cd /mnt
install.sh

Start background daemon process

cd /opt/dell/srvadmin/sbin
./srvadmin-services.sh start or stop

ah137-l.appshosting.com:1311

diag.appshosting.com

---

### 529. How to Add ASM Disk to Disk Group

**Topic ID:** 1801

Prerequisite: Provision ASM disk to server.
Source the grid environment and go to grid_home/bin location and trigger asmca in vnc serveronce triggered you will observe the below screen shot
choose the required disk group for adding the asm file systemright click on top of the required disk group and choose add disksonce successful you will observe the space added to the disk group selected

Steps:

---

### 403. Restart Hung OPManager

**Topic ID:** 902

The Opmanager application is hanged. I restarted it.

Follow this .

1. Login to AH35

2. Go to Administrative Tools -> Services

Try to stop Manage Engine Opmanager

If that doesn't stop or gives any error, open task manager and kill any java processes.

Then start Opmanager services. Wait for 2-3 mins before you access the URL

---

### 408. User do not receive email notification in Password reset Link

**Topic ID:** 2105

Changed profile Local Login Mask to 40 from 32 in CRP and bounced ApacheExplanation in SR 3-6419330481 is as below ,In order to enable this functionality please perform this setup:a. Set 'Local Login Mask' profile option at site level to include the Forgot PasswordURL in the login page. For the Login page to display this link the profile optionshould include value FORGOT_PASSWORD_URL = 08. All the options you can set for thelogin page are:â¢ USERNAME_HINT = 01â¢ PASSWORD_HINT = 02â¢ CANCEL_BUTTON = 04â¢ FORGOT_PASSWORD_URL = 08â¢ REGISTER_URL = 16â¢ LANGUAGE_IMAGES = 32â¢ SARBANES_OXLEY_TEXT = 64Example, set the Local Login Mask to 40 to display the Forgot Password link and thelanguage images in the login page (08 + 32). Bounce the apache server to pick up the changesThere are 2 concurrent requested that usually fix this kind on issues
Set workflow notificaiton preference at system level:1. Log into applications with the "Workflow Administrator Web Applications" responsibility.2. Navigate as as follows:---> Administrator Workflow------------> Administration--------------> Workflow Configuration3. Scroll to section "Global Preferences".4. Change the "Notification Style" to "HTML mail with attachments" and Apply.
Run Workflow Directory services User/Role Validation and Synchronize WF LOCAL role concurrent requests.

Reproduce the case.1. Change sysadmin user email to larry.zhao@appshosting.com2. Run 'Synchronize wf local role' request3. Go to login page at http://prod.taipingcarpets.com:8000/4. Click 'Login Assistance' link5. Type 'larry.zhao@appshosting.com' in the Email field. Click 'Forgot User Name' button. You will see following confirmation page.ConfirmationYour request to retrieve your username has been submitted. An email will be sent shortly. Please contact the System Administrator if you do not receive an email within the next 10-15 minutes.6. I received 'User Name Lookup' email notification from TPC prodution. (Forwarded to the ticket)7. Now go back to 'Login Assistance' page. Enter 'sysadmin' in 'User Name' field. Click 'Forgot Password' button. See following confirmation page.ConfirmationYour password-reset request has been submitted. An email with instructions will be sent shortly. Please contact the System Administrator if you do not receive an email within the next 10-15 minutes.8. I received 'Password Reset' email notificationo from TPC production. (Forwarded to the ticket)9. Reset sysadmin user email back to shashinbhavsar@taipingcarpets.com

---

### 513. Ryman 12.2 upgrade Details/installation/configuration

**Topic ID:** 2105

Ryman 12.2 upgrade Details/installation/configuration

---

### 435. In 12.1.X version of Applications when I set the over ride address (test address for the mailer ) I do not get a Verification code.\r\nHave verified that I can send an email to the user using the telenet / smtp commands. The user successfully receives an email. But no Verification email is received to change the Override address so it does not save.

**Topic ID:** 2105

There is a new parameter for the mailer in 12.1.X version of the mailer called Outbound User. It is on screen 3 of 8 of the mailer configuration and used for SMTP servers that require Authentication. This parameter also has a Outbound Password field. If your SMTP mail server does not require Authentication, then this field should just be blank. the fields may be set to changeOnJavaMailerinstall and this is not correct.

Blank out the Parameter(s) and retest setting the Override Address with the following steps

1. Shutdown the Notification Mailer Service (Make sure the status is Deactivated )
2. Clear/Blank out the value of Username
3. Change/Set Override Address (and receive authorization code email)
4. Enter authorization code
5 Start the Notification Mailer

---

### 437. Updated Office 365 after Upgrade on May 25, 2013

**Topic ID:** 2403

Added CNAME autodiscover for autodiscover.outlook.comMX record appshosting-com.mail.eo.outlook.com.TXT record with VALUE v=spf1 include:spf.protection.outlook.com -all and TTL=3600

Exchange Online******************************************************TypePriorityHost namePoints to addressTTLMX0@appshosting-com.mail.protection.outlook.com1 HourCNAME-autodiscoverautodiscover.outlook.com1 Hour******************************************TypeTXT NameTXT ValueTTLTXT@v=spf1 include:spf.protection.outlook.com -all1 Hour

---

### 440. Upgrade GRC 8.6.4.500 to 8.6.4.700

**Topic ID:** 2105

See attached detail logs for GRC 8.6.4.700 upgrading steps.

---

### 488. Change WF Mailer test address

**Topic ID:** 2105

From backend :

select fscpv.parameter_value
,fnd_svc_comp_param_vals fscpv
and fscpt.parameter_id = fscpv.parameter_id;
update
set
test-quote@nanometrics.com'
fscpv.parameter_id in (
fscpt.parameter_id
fnd_svc_comp_params_tl fscpt
fscpt.display_name = 'Test Address');
select fscpv.parameter_value
,fnd_svc_comp_param_vals fscpv
and fscpt.parameter_id = fscpv.parameter_id;
commit;
Bounce WF Mailer.

---

### 505. File Upload Request

**Topic ID:** 2105

**Subject**: Upload F¡le to Server request

**References**:
**Description of Actions Taken**: File Has been uploaded to requested server.

---

### 536. How to Change Windows Password

**Topic ID:** 3001

1. Log in to Windows server as administrator (or administrator1 on Windows workstation).2. Open Control Panel.3. Click on User Accounts, Change account type (see attached change_winpass1.png).4. Click on the user you want to change password.5. Click "Change the password" and set new password (see attached change_winpass2.png).6. Set new password & hint, and click Change password button (see attached change_winpass3.png).

---

### 547. Setting up override email address for WF mailer

**Topic ID:** 2105

Steps for setting override email address for WF mailer is in screenshots attached .

---

### 586. Disable Windows local user password expiration

**Topic ID:** 3001

**Title**: Disable Windows user password expiration
**References**: https://www.sevenforums.com/tutorials/73224-password-expiration-change-max-min-password-age.html
**Procedure or Description**:1. Launch Local Security Policy Manager.2. Change Maximum Password Age to 0.

---

### 605. WEBADI excel 2013 journal upload issue

**Topic ID:** 2105

WEBADI excel 2013 journal upload issue:

when ever there is issue with journal upload first observe the BNE staging directory and see if we have enough free space under the mount point and having proper permissions

Our BNE staging directory is under /u01 mount point under BNE top so make sure go to the directory on eca1ap19 server and you able to create any file more than 200MB and also observe if permissions are correct and not changed due to any mount point issues.

Before clearing space observed there are lot of Apache logs which has occupied more space and there almost no space left on the mount point$ df -k .
/u01 (/dev/vg00/lvol8 ) : 30720000 total allocated Kb
106016 free allocated Kb
30613984 used allocated Kb
99 % allocation used
[eca1ap19:imax /u01/app/imaxora/iAS/Apache/Apache/logs]

Started clearing the old apache logs by moving to /spare/download/logs/

$ df -k .
/u01 (/dev/vg00/lvol8 ) : 30651428 total allocated Kb
4599324 free allocated Kb
26052104 used allocated Kb
84 % allocation used
[eca1ap19:imax /u01/app/imaxora/iAS/Apache/Apache/logs]

once cleared retest the issue and users are able to upload to the staging directory under application server.

---

### 564. Give RDP access to the windows machine - Remote Desktop

**Topic ID:** 3001

**Title**: Add Kyle to af194 RDP

**References**:
**Procedure or Description**:1. Create Windows local user.

---

### 622. New proxy setting uat_randstad_batch

**Topic ID:** 2402

**Title**: Add New Proxy for TDX

**References**:

**Procedure or Description**:
1. Log in to af165
2. Modify /etc/httpd/conf/httpd.conf
ProxyPass /uat_randstad_batchhttp://af267.appsforte.com:8090/uat_randstad_batch
ProxyPassReverse /uat_randstad_batchhttp://af267.appsforte.com:8090/uat_randstad_batch
3. Reload httpd
[root@af165 conf]# systemctl reload httpd

---

### 582. Add New URL Monitoring to Monitis

**Topic ID:** 902

**Title**: Add new monitis URL monitoring
**References**:
**Procedure or Description**:1. Log in to Monitis.com.2. Choose menu Monitors -> UptimeMonitors -> HTTPS3. Enter URL to be monitored. Make sure you have available Unused uptime monitors, else click Upgrade to add more monitor.4. Choose at least 2 monitoring locations.5. Add Alert Rules to send alert to appropriate contacts/contract groups.

---

### 646. Create Shared folder in Microsoft 365 and assign Members

**Topic ID:** 3902

Create new Shared folder:
1. Log in as global admin to SharePoint admin site.
2. Click Sites -> Active sites.
3. Click Create and select Team site, then choose template, i.e. Standard Team, and click Choose Template
4. Enter Site name and assign Group owner.
5. Click Create site.
6. Select the site created, and click Membership.
7. Choose Members menu, and then click Add members to add internal and external guest users.

Create Guest User
https://helpdesk.appsforte.com/ui/solutions?entity_id=645&mode=detail#keywords

---

### 662. Granting permissions or privileges to schema/user

**Topic ID:** 2105

**Title**: Granting permissions or privileges to schema/user

**References**:

**Symptoms (if applicable)**:

**Causes (if applicable)**:

**Procedure or Solution Description**:

****
**Syntax:GRANTTO;
**

When you create a user with theCREATE USERstatement, the user's privilege domain is empty by default. The administrator assigns privileges to the user based on the tasks that the user may perform in the future. In this tutorial, theONLINE_SHOPPEuser establishes a session, creates a table, and writes DML statements against tables. Execute the following statements to assign the required privileges to theONLINE_SHOPPEuser:

GRANT CREATE SESSION to online_shoppe;
GRANT CREATE TABLE to online_shoppe;
GRANT UNLIMITED TABLESPACE to online_shoppe;
GRANT SELECT ANY TABLE to online_shoppe;
GRANT UPDATE ANY TABLE to online_shoppe;
GRANT INSERT ANY TABLE to online_shoppe;
GRANT DROP ANY TABLE to online_shoppe;

---



## Category: Other Solutions

*40 solutions*

### 6. Sharepoint Drive Mapping

**Topic ID:** 310

https://appshostingcom-1.sharepoint.microsoftonline.com/Infrastructure/Forms

---

### 8. DSI Unity Phone System

**Topic ID:** 305

The attached document describes how to log into DSI's Unity Phone system.

---

### 24. Customer worksheet

**Topic ID:** 2110

This document contains customer and their environment information. It covers most shared and small customers. Large customers have their own individual customer worksheet.

---

### 27. Provision new CPANEL account

**Topic ID:** 2104

Provision new CPANEL account

---

### 118. O/S Cloning Procedures

**Topic ID:** 301

OptionsAttachment:OS Cloning.docx15.6 KBytesSymptom:
*(public)*Problem:
*(public)*Solution:
*(public*

---

### 99. IP Allocations DC wise

**Topic ID:** 301

OptionsAttachment:NetConf_AH_20091113.xls121.0 KBytesSymptom:
*(public)*
Please find the present IP allocations attached ..Problem:
*(public)*Solution:
*(public*

---

### 106. Installing and Configuring a iDRAC Enterprise on a Dell R410

**Topic ID:** 301

OptionsAttachment:Installing DRAC Enterprise in a Dell Poweredge R410.doc5.6 MBytesSymptom:
*(public)*Problem:
*(public)*Solution:
*(public)*

---

### 114. Mondorestore working RPM sets for x86_64 RHEL 5.2

**Topic ID:** 301

OptionsAttachment:afio-2.4.7-1.x86_64.rpm62.1 KBytesbuffer-1.19-1.x86_64.rpm10.6 KBytesmindi-2.0.3-1.rhel5.x86_64.rpm257.7 KBytesmindi-busybox-1.7.3-1.rhel5.x86_64.rpm283.0 KBytesmondo-2.2.6-1.rhel5.x86_64.rpm923.8 KBytesSymptom:
*(public)*
-rw-r--r-- 1 root sys 63614 Jun 2 2007 afio-2.4.7-1.x86_64.rpm
-rw-r--r-- 1 root sys 10872 Jun 2 2007 buffer-1.19-1.x86_64.rpm
-rw-r--r-- 1 root sys 263864 Aug 7 2008 mindi-2.0.3-1.rhel5.x86_64.rpm
-rw-r--r-- 1 root sys 294038 Mar 22 2008 mindi-busybox-1.7.3-1.rhel5.x86_64.rpm
-rw-r--r-- 1 root sys 945965 Jun 1 2008 mondo-2.2.6-1.rhel5.x86_64.rpmProblem:
*(public)*Solution:
*(public)*Working set of RPMS for Mondrestore OS clone tool:

-rw-r--r-- 1 root sys 63614 Jun 2 2007 afio-2.4.7-1.x86_64.rpm
-rw-r--r-- 1 root sys 10872 Jun 2 2007 buffer-1.19-1.x86_64.rpm
-rw-r--r-- 1 root sys 263864 Aug 7 2008 mindi-2.0.3-1.rhel5.x86_64.rpm
-rw-r--r-- 1 root sys 294038 Mar 22 2008 mindi-busybox-1.7.3-1.rhel5.x86_64.rpm
-rw-r--r-- 1 root sys 945965 Jun 1 2008 mondo-2.2.6-1.rhel5.x86_64.rpm

---

### 129. SAN-009 iSCSI Configuration Instructions

**Topic ID:** 301

OptionsAttachment:SAN-009-iSCSI.xls11.5 KBytesSymptom:
*(public)*Problem:
*(public)*Solution:
*(public)*

---

### 138. Verizon Blackberry Reset Phone - Activation

**Topic ID:** 301

# OptionsSymptom:
*(public)**228
option 1

If activation doesn't work, try resetting...Problem:
*(public)*Solution:
*(public)*

---

### 142. iSCSI Initiator Configuration

**Topic ID:** 301

OptionsAttachment:ISCSI Initiator Configuration.doc33.5 KBytesSymptom:
*(public)*Problem:
*(public)*Solution:
*(public*

---

### 224. Creating Microsoft Exchange Distribution Groups

**Topic ID:** 301

OptionsAttachment:Exchange Distribution Groups.doc105.0 KBytesSymptom:
*(public)*Problem:
*(public)*Solution:
*(public)*

---

### 209. Fix gcc issue on dev-app

**Topic ID:** 304

OptionsSymptom:
*(public)*Failed to relink INV programs during patchingProblem:
*(public)*Failed to relink INV programs during patching. gcc library error.Solution:
*(public)*[root@dev-app bin]# cp -p g++ g++.20080414
[root@dev-app bin]# mv gcc gcc344
[root@dev-app bin]# mv g++ g++344
[root@dev-app bin]# ln -s gcc32 gcc
[root@dev-app bin]# ln -s g++32 g++

---

### 208. Emtek customer worksheet

**Topic ID:** 2113

OptionsAttachment:Emtek_new_pass_082009.xls19.0 KBytesSymptom:
*(public)*Emtek new pass 2009Problem:
*(public)*Emtek new pass 2009Solution:
*(public)*

---

### 213. Patch Analysis

**Topic ID:** 2113

OptionsAttachment:Patching.xls20.5 KBytesSymptom:
*(public)*Patch AnalysisProblem:
*(public)*Patch AnalysisSolution:
*(public)*Patch Analysis

---

### 249. Sakura CRP2 migration steps

**Topic ID:** 2114

OptionsAttachment:CRP2 migration steps and timing.xls18.5 KBytesSymptom:
*(public)*CRP2 migrationProblem:
*(public)*CRP2 migrationSolution:
*(public)*

---

### 250. Sakura Data Sheet

**Topic ID:** 303

OptionsAttachment:Sakura.pcf669 BytesSakura_data_sheet_New.xls29.0 KBytesSymptom:
*(public)*Problem:
*(public)*Solution:
*(public)*

---

### 242. How to use OTRS

**Topic ID:** 301

OptionsSymptom:
*(public)*How can I use OTRS best way?Problem:
*(public)*Need to use OTRSSolution:
*(public)*Use OTRSComment:
*(internal)*Log-in links for OTRS at AppsHosting:

Internal employees (agents):http://otrs.appshosting.com/otrs/index.pl
External customers: http://otrs.appshosting.com/otrs/customer.pl
Public (open to all):http://otrs.appshosting.com/otrs/public.pl(faq.pl)

---

### 306. How to install cygwin xwindow tool on PC

**Topic ID:** 601

This document shows step by step how to install cygwin tool on your PC

---

### 255. Sakura production cut-over steps and timing

**Topic ID:** 2114

OptionsAttachment:Production migration steps and timing.xls44.5 KBytesSymptom:
*(public)*Sakura production cut-over steps and timingProblem:
*(public)*Sakura production cut-over steps and timingSolution:
*(public)*

---

### 251. Sakura Platform migration run book

**Topic ID:** 2114

OptionsAttachment:Sakura development 11.5.10.2 plaftform migration run book.doc116.5 KBytesSymptom:
*(public)*Problem:
*(public)*Solution:
*(public)*

---

### 259. Flexfiled software and documentaion

**Topic ID:** 2112

OptionsAttachment:FlexField_v3664.zip6.1 MBytesflexfield_install.txt14.9 KBytesSymptom:
*(public)*Problem:
*(public)*Solution:
*(public)*Attached zip file has software and documentation for Flexfield software used by Taiping.

---

### 261. MLS patching

**Topic ID:** 2112

OptionsAttachment:MLS Patching_pdev.xlsx11.1 KBytesSymptom:
*(public)*Problem:
*(public)*Solution:
*(public)*

---

### 265. Tai Ping Data Sheet

**Topic ID:** 2112

OptionsAttachment:tpc instance data sheet.txt3.3 KBytesTai_Ping_Instances.xls31.0 KBytesTaiping_Datasheet.xls28.0 KBytesSymptom:
*(public)*Problem:
*(public)*Solution:
*(public)*

---

### 266. Tai Ping Hosted Architecture

**Topic ID:** 2111

OptionsAttachment:Tai Ping Architecture.pdf82.1 KBytesSymptom:
*(public)*Problem:
*(public)*Solution:
*(public)*

---

### 268. Taiping patching history

**Topic ID:** 2112

OptionsAttachment:Tai_Ping_Patching_History.xls21.0 KBytesSymptom:
*(public)*Problem:
*(public)*Solution:
*(public)*

---

### 288. Customer Worksheet

**Topic ID:** 302

Customer worksheet for analyst is enclosed

---

### 324. How do customer create cron job through cpanel

**Topic ID:** 2104

How do customer create cron job through cpanel

---

### 325. Start and Stop Air Force Fusion Middleware

**Topic ID:** 901

US Air Force Fusion Startup and Stop

---

### 303. customer worksheet

**Topic ID:** 2110

This document contains customer and their environment information. It covers most shared and small customers. Large customers have their own individual customer worksheet.

---

### 334. Script to find and update pending requests

**Topic ID:** 2105

Here is the select query

------------------------------

Please replace user_name and concurrent_program_name accordingly. You can find the "concurrent_program_name" from concurrent program definition (concurrent ->program ->define)

SELECT request_id id,
nvl(meaning, 'UNKNOWN') status,
user_concurrent_program_name pname,
to_char(request_date, 'DD-MON-RR HH24:MI:SS') submitd, user_name, phase_code FROM fnd_concurrent_requests fcr,
fnd_lookups fl,
fnd_concurrent_programs_vl fcpv,
fnd_concurrent_programs fcp, fnd_user fu WHERE phase_code = 'P'
AND hold_flag = 'N'
AND fcr.requested_start_date<= sysdate
AND status_code != 'P'
AND LOOKUP_TYPE = 'CP_STATUS_CODE'
AND lookup_code = status_code
AND fcr.concurrent_program_id = fcpv.concurrent_program_id
AND fcr.program_application_id = fcpv.application_id
AND fcr.requested_by=fu.user_id
AND fu.user_name='SSAUCEDO'
and fcr.concurrent_program_id=fcp.concurrent_program_id
and fcp.concurrent_program_name=''
ORDER BY request_date,request_id;

Here is the update script.
----------------------------

NOTE: Please replace user_name and concurrent_program_name accordingly. You can find the "concurrent_program_name" from concurrent program definition (concurrent ->program ->define)

update
fnd_concurrent_requests
set
hold_flag='Y'
where PHASE_CODE='P' and hold_flag='N' and
request_id
in
(
SELECT request_id
FROM fnd_concurrent_requests fcr,
fnd_lookups fl,
fnd_concurrent_programs_vl fcpv,
fnd_concurrent_programs fcp, fnd_user fu WHERE phase_code = 'P'
AND hold_flag = 'N'
AND fcr.requested_start_date<= sysdate
AND status_code != 'P'
AND LOOKUP_TYPE = 'CP_STATUS_CODE'
AND lookup_code = status_code
AND fcr.concurrent_program_id = fcpv.concurrent_program_id AND fcr.program_application_id = fcpv.application_id AND fcr.requested_by=fu.user_id AND fu.user_name='SSAUCEDO'
and fcr.concurrent_program_id=fcp.concurrent_program_id
and fcp.concurrent_program_name=''
);

---

### 420. How to effectively copy and paste from Putty

**Topic ID:** 601

**How to effectively copy and paste from Putty**
1. Set up Putty to log all session output by choosing Session-Logging option to "All session output". Remember putty.log output.2. Increase your scroll buffer to 200,000 lines or greater so you don't lose screen outputs.3. To clear your Putty session buffer and start new Putty capture session, choose menu "Clear Scrollback". After you finished the task you want to copy and paste, choose "Copy All to Clipboard" menu and then paste to your document.

---

### 376. Installing BAM

**Topic ID:** 901

Installing BAM

---

### 398. Forward vonage phone to any phone including mobile

**Topic ID:** 310

Logon to Vonage.com as your account. Go to Features ->Call Forwarding. You can forward vonage phone to any phone including mobile in the world. I set it up last week. It works most of the time.

---

### 400. what's taking up space and deleting old files in Log/out directory

**Topic ID:** 2105

$ du -ks * (command to first determine what's taking up all space )

===============================================

$ ls -l |more

( to check the list of files)

==================

Command to delete the files under log directory is.

$ find . -mtime +120 -exec rm {} \\;

Note: this will delete 4 months old files . i.e (120)

---

### 415. Install ASCP 12.1.1

**Topic ID:** 2105

Install ASCP 12.1.1

---

### 451. Nanometrics ASCP document

**Topic ID:** 2105

Nanometrics ASCP document

---

### 461. Nanometrics : Some users get the error APP-FND-01630 after clone

**Topic ID:** 2105

After clone nanometrics instances some users might get the error APP-FND-01630 while opening forms.

Check the profile ICX: Forms Launcher at user level for conflicting user , generally this value will be pointing to source instance , just clear the value and problem should be solved.

---

### 499. How to Decrypt files

**Topic ID:** 301

1. Goto file location as a root user.
2.Use this command to Decrypt the files "gpg --yes --batch --passphrase=B5SxM8R4SwLp9N filename "

---

### 569. RYMAN ICX:Session Timeout

**Topic ID:** 2105

After Instance maintenance : Autoconfig , Bounce , patching .
Check ICX Session timeout profile. Sometimes it value is reset back to 30. change it to 240 -

---



## Category: Linux & Unix

*29 solutions*

### 11. Linux email Relay Server

**Topic ID:** 306

Add the following line to sendmail.mc

FEATURE(promiscuous_relay)dnl

before the following lines

MAILER(smtp)dnl
MAILER(procmail)dnl
dnl MAILER(cyrusv2)dnl

Then use m4 and restart the sendmail service.

---

### 43. LDAP authentication from Linux to windows AD

**Topic ID:** 2104

OptionsAttachment:LDAP AUTH TO WINDOWS SERVER ACTIVE DIRECTORY FROM LINUX.doc75.5 KBytesSymptom:
*(public)*LDAP authentication from Linux to windows ADProblem:
*(public)*Solution:
*(public)*

---

### 61. Add Swap Space to Redhat Linux Server

**Topic ID:** 301

OptionsSymptom:
*(public)*To add a swap file:

- Determine the size of the new swap file and multiple by 1024 to determine the block size. For example, the block size of a 64 MB swap file is 65536.

- At a shell prompt as root, type the following command with count being equal to the desired block size:

```
dd if=/dev/zero of=/swapfile bs=1024 count=65536
```

- Setup the swap file with the command:

```
mkswap /swapfile
```

- To enable the swap file immediately but not automatically at boot time:

```
swapon /swapfile
```

- To enable it at boot time, edit /etc/fstab to include:

```
/swapfile        swap          swap  defaults    0 0
```
The next time the system boots, it will enable the new swap file.

- After adding the new swap file and enabling it, make sure it is enabled by viewing the output of the command cat /proc/swaps or free

---

### 78. Configure ManageEngine OpManager

**Topic ID:** 301

**Option 1: Updating monitoring settings for single server/device**

1. Log in to http://om.appshosting.com using admin and password.
2. Search for your server (device).

**Option 2: Updating monitoring settings for multiple Linux servers**

1. Log in to http://om.appshosting.com using admin and password.
2. Navigate to Admin menu, and then click on "Device Templates" in Configurations section.
3. Search for "Name" Linux and click "Go".
4. Click on "Linux" link to open up the desired Device Template.
5. Click on the monitor, for example "Memory Utilization".
6. Set the parameters desired, for example enter "5" for "Consecutive Times" and click OK.
7. Click "Apply" from the main Device Template screen.
8. From the "Apply Device Template Linux to selected devices" screen, select all Available devices on the left and click ">>" arrow icon, to move them over to the Selected devices area.
9. Click "Apply" button to apply the new settings to all selected target devices/servers.

---

### 624. New SFTP Notification for Brightfield

**Topic ID:** 306

**Title**: Change SFTP recipient

**References**:

**Procedure or Description**:

1. Created custom script check_new_ftp_files_qamentor.sh
2. Add to cron.
*/15 * * * * /root/scripts/check_new_ftp_files_qamentor.sh >/dev/null 2>&1
3. Exclude from check_new_ftp_files.sh:
diff check_new_ftp_files.sh check_new_ftp_files.sh.bp.20200712
11c11
<for UPLOAD_DIR in `find ${FTP_BASE_DIR} -name upload -type d | egrep -v 'Jaguar|catamount|bobcat|Panther|Newton|Hawking|Einstein|Ride|Curie|Galilei|Sagan|Feynman|Rivers|Kingdome|Gugu|Tiger|Shawshank|Lakes|Montana|BlueShades|WhiteHat|Playdoh|MountSopris|Bordeaux|Calder|Data-McDatafac|Daytona|Cougar|InigoMontoya|GreatWhiteShark|qamentor'`

---

### 76. Commtting snapshots when there are no snapshot entires in the snapshot manager

**Topic ID:** 301

OptionsSymptom:
*(public)*There are some delta snapshot files left on the disk

The snapshot manager shows no snapshots but there are one or more sets of-00000*X*.vmdkand-00000*X*-delta.vmdkfiles in the directory with the virtual disk. The.vmxfile points to one of the-00000*X*.vmdkfiles, usually the highest numbered file, indicating that the snapshot file is in use.Problem:
*(public)*Unable to get good backup of VMs?

The snapshot manager shows no snapshots but there are one or more sets of-00000*X*.vmdkand-00000*X*-delta.vmdkfiles in the directory with the virtual disk. The.vmxfile points to one of the-00000*X*.vmdkfiles, usually the highest numbered file, indicating that the snapshot file is in use.Solution:
*(public)*Commtting snapshots when there are no snapshot entires in the snapshot manager

Create a new snapshot and delete it. The delete commits down through the entire tree of snapshots. This means all snapshots on the virtual machine are committed and the snapshot files are deleted. You must have some storage available as the new snapshot requires a minimum of 16MB. If the virtual machine needs to remain running, you must accomodate for the snapshots to grow as the older snapshots commit.To commit all snapshots:

- Log in to the ESX Server service console.

- Typevmware-cmd -l/vmfs/volumes/UUID/VMNAME/VMNAME.vmx
and press Enter.

Expected output:

- Typevmware-cmd /vmfs/volumes/UUID/VMNAME/VMNAME.vmx hassnapshotand press Enter to confirm that there is a snapshot. If the output displays a blank value or value of 1, a snapshot is present. If the output displays a value of 0, there is no snapshot present.

- Typevmware-cmd /vmfs/volumes/UUID/VMNAME/VMNAME.vmx createsnapshot ""and press Enter to create a new snapshot.

**Note**: You can use any name you like. The name appears in the snapshot manager.

- Typevmware-cmd /vmfs/volumes/UUID/VMNAME/VMNAME.vmx removesnapshotsand press Enter to remove the snapshot.
Additional Information

- The remove snapshot process takes a lot of time to complete if the snapshots are large.

- If you entered the removesnapshots command via an SSH tool (such as PuTTY or secureCRT) the SSH session must be left open. Closing the SSH program aborts the process. If leaving an SSH session open for an extended time is unaccaptable, run the command from the physical console.

- The commit process takes longer if the virtual machine is running and requires more free space on the data store.

- The commit process has no progress that you can follow. As long as the date on the files continues to update, the process is working.
When the commit has completed succesfully, there are no-00000X.vmdkor-00000X-delta.vmdkfiles left unless they were not part of the snapshot tree. These files can be deleted. To confirm the commit succeeded, view the.vmxfile and verify that virtual disks are not pointing to a base disk (-flat.vmdk).If the.vmxThe source file name is the current active-00000X.vmdkas identified in the .vmx file. Once the clone is complete, point the virtual machine to use the newly cloned disk. The original base disk and snapshot tree can be deleted.contains a disk that is still pointing a snapshot file, the commit process failed. The virtual disk must be cloned usingvmkfstools -i.
KB Article**1002310**

---

### 80. Create VM server and load 64bit OS

**Topic ID:** 301

OptionsAttachment:Create VM server and load 64bit OS.doc1.3 MBytesSymptom:
*(public)*Install 64bit Linux on VM serverProblem:
*(public)*Install 64bit Linux on VM serverSolution:
*(public)*

---

### 82. Enable FTP service on Linux server

**Topic ID:** 301

OptionsSymptom:
*(public)*Enable FTP service on Linux
Problem:
*(public)*Enable FTP service on Linux
Solution:
*(public)*# /etc/init.d/vsftpd start
Starting vsftpd for vsftpd: [ OK ]
Create the following symbolic links for the vsftpd service to start and stop when recycling (rebooting) the machine.
# ln -s /etc/init.d/vsftpd /etc/rc3.d/S56vsftpd
# ln -s /etc/init.d/vsftpd /etc/rc4.d/S56vsftpd
# ln -s /etc/init.d/vsftpd /etc/rc5.d/S56vsftpd

---

### 85. Expand Linux Filesystem Space

**Topic ID:** 301

OptionsAttachment:Expand-Linux-Filesystem.doc179.5 KBytesSymptom:
*(public)*Expand Linux Filesystem SpaceProblem:
*(public)*Solution:
*(public)***

---

### 89. How to change hostname in Linux

**Topic ID:** 301

OptionsSymptom:
*(public)*Hostname incorrectProblem:
*(public)*Need to change host nameSolution:
*(public)*Modify the following with proper hostname:
/etc/hosts
/etc/sysconfig/network
/etc/sysconfig/network-scripts/ (if needed)

restart server by executing "reboot"

---

### 90. How to create cron job in CPANEL

**Topic ID:** 301

OptionsSymptom:
*(public)*How to create cron job in CPANEL?Problem:
*(public)*Solution:
*(public)*1. Logon to CPANEL athttp://prod.appshosting.com/cpanelusing your Unix ID and password
2. On CPANEL home page, go to Advanced. Click Cron job
3. Followhttp://www.2serveu.net/cpanel-tutorials/standardcron.htmlto create standard cronjob

---

### 111. Linux FibreChannel (SAN) Useful Commands

**Topic ID:** 301

OptionsSymptom:
*(public)*http://kbase.redhat.com/faq/docs/DOC-9937Problem:
*(public)*Solution:
*(public)*

---

### 110. Linux Cloning with Mondo from Physical to Virtual on VMWare

**Topic ID:** 301

OptionsSymptom:
*(public)*How to clone Linux from Physical to VM or another hardware?Problem:
*(public)*How to clone Linux OS from one hardware to another hardware or VM?Solution:
*(public)*

- **Mondo Cloning Process followed:**

  - Step 1) Modify the mindi script to add MPTBASE and MPTSCSIH drivers which are essential for VMWare to find the disk.

    - # Force some modules to be included
FORCE_MODS="diskdumplib diskdump mptbase mptscsi mptfc mptspi mptsas mptscsih ata_piix crc32 mii pcnet32 sunrpc nfs nfs_acl lockd loop"

  - Step 2) mondoarchive -Oi -d /mondobackup -p ah1 -N -E "/mondobackup /home /u01 /u02 /u03 /u04 /u05" -s 4200m
  - Step 3) Copy the created iso image to VM ESX Server
  - Step 4) Create a new VM with the required disk sizes and mount iso image, don't enable networking
  - Step 5) Mondorestore type expert at boot:
  - Step 6) Edit the devices and mount points as needed at /tmp/mountlist.txt
  - Step 7) Start Mondorestore
  - Step 8) Accept the mount list
  - Step 9) Format disks/partiotions
  - Step 10) LVM might fail if the partiotions are not correct or size of the disks are not correct. It is ok if it fails. Drop to shell and do what ever required to create the partiotions and LVM as needed.
  - Step 11) Invoke mondorestore and don't format disks, go for restoring data
  - Step 12) Once restore is done it will ask to edit fstab.mnttab and grub
  - Step 13) All done it will drop to prompt, do not reboot. Need to do some more manual steps
  - Step 14) Follow the steps from the attached pdf
  - Step 15) Reboot the server and login to check that everything restored as expected.

---

### 112. Map a network drive in Windows ( Samba Share on Linux Server )

**Topic ID:** 301

# OptionsSymptom:
*(public)*How to Map a network drive in Windows ( Samba Share on Linux Server )Problem:
*(public)*Solution:
*(public)*LINUX SERVER SIDE CONFIGURATION:
------------------------------------------------------------
Create the samba shares for each server as follows. Fro example

[BACKUP-AH59]
comment = Backup drive mounted from openfiler for AH59 server
path = /b03/windows/ah59.appshosting.com
public = yes
writable = yes
printable = no
write list = +staff
[BACKUP-AH12]
comment = Backup drive mounted from openfiler for AH12 server
path = /b03/windows/ah12.appshosting.com
public = yes
writable = yes
printable = no
write list = +staff
[BACKUP-AH55]
comment = Backup drive mounted from openfiler for AH55 server
path = /b03/windows/ah55.appshosting.com
public = yes
writable = yes
printable = no
write list = +staff
[BACKUP-AH35]
comment = Backup drive mounted from openfiler for AH35 server
path = /b03/windows/ah35.appshosting.com
public = yes
writable = yes
printable = no
write list = +staff

and find the following line

security = user

change it to

security = share

Restart the samba service

WINDOWS SERVER SIDE CONFIGURATION:
-----------------------------------------------------

Create a script file like map.bat , and put the share path to the network drive in the file.

Ex: net use z:\\\\filer.appshosting.com\\backup

We need to place a script in group policy for user , so that the script will run every time the when the user login to the server.

In windows go to Start > Run > gpedit.msc
It will open group policy window

There go to the path User Configuration > Windows Settings > Scripts (Logon / Logoff ) > Logon

Then click on Add, browse the script file. then click on OK

That's it.

Now everytime when you login to the windows server, the Network drive will automatically connect.

---

### 121. Redhat Linux - Enable RSH and RLOGIN

**Topic ID:** 301

OptionsSymptom:
*(public)*Add 'rsh' and 'rlogin' to /etc/securetty
Add all IPs to /root/.rhosts, and chmod 600 /root/.rhosts
Set "disable = no" in /etc/xinetd.d/{rsh,rlogin}
chkconfig xinetd on
/etc/init.d/xinetd restart
Problem:
*(public)*Solution:
*(public)*

---

### 122. Redhat Linux - Setting Time / NTP

**Topic ID:** 301

OptionsSymptom:
*(public)*
```
rdate -s tick.greyware.com

**Configure NTP:**

# chkconfig ntpd on
# ntpdate pool.ntp.org
# /etc/init.d/ntpd start

# Verify Time Zone

**Manually Set Time**

date -s "Mar 26 23:01:50 PDT 2010"

```
Problem:
*(public)*Solution:
*(public)*

---

### 637. SFTP Account for saftp server

**Topic ID:** 2404

**Title**: Create new SFTP account for saftp

**References**:

**Symptoms (if applicable)**:

**Causes (if applicable)**:

**Procedure or Solution Description**:

[root@saftp sftp-users]# useradd -d /home/sftp-users/piedmont piedmont
[root@saftp sftp-users]# rm /home/sftp-users/piedmont/.bash*
rm: remove regular file ‘/home/sftp-users/piedmont/.bash_logout’? y
rm: remove regular file ‘/home/sftp-users/piedmont/.bash_profile’? y
rm: remove regular file ‘/home/sftp-users/piedmont/.bashrc’? y
[root@saftp sftp-users]# chown root.root /home/sftp-users/piedmont
[root@saftp sftp-users]# chmod 700 /home/sftp-users/piedmont
[root@saftp sftp-users]# ls -al /home/sftp-users/piedmont
total 4
drwx------ 2 root root 6 Mar 25 15:20 .
drwxr-xr-x 12 root root 4096 Mar 25 15:19 ..
[root@saftp sftp-users]# cd /home/sftp-users/piedmont
[root@saftp piedmont]# mkdir upload
[root@saftp piedmont]# chown piedmont.piedmont upload/
[root@saftp piedmont]# chmod 750 upload/
[root@saftp piedmont]# pwd
/home/sftp-users/piedmont
[root@saftp sftp-users]# ls -al /home/sftp-users/piedmont
total 4
drwx------ 3 root root 20 Mar 25 15:22 .
drwxr-xr-x 12 root root 4096 Mar 25 15:19 ..
drwxr-x--- 2 piedmont piedmont 6 Mar 25 15:22 upload
[root@saftp sftp-users]# vi /etc/passwd
[root@saftp sftp-users]# vi /etc/passwd
You have new mail in /var/spool/mail/root
[root@saftp sftp-users]# passwd piedmont
Changing password for user piedmont.
New password:
Retype new password:
passwd: all authentication tokens updated successfully.
[root@saftp sftp-users]#chmod 705 /home/sft-users/piedmont

---

### 218. Workflow mailer settings on production

**Topic ID:** 304

OptionsSymptom:
*(public)*Users complain they do not receive PO notification email on production
Problem:
*(public)*Workflow notification mailer process deactiviates itself even after bouncingSolution:
*(public)*Check and correct workflow mailer configuration as following.
INBOUND
Server: it-linux1.emtek.epi
Id: wfprod1
Pw: Apps15250
OUTBOUND
Server: localhost

---

### 279. Linux Verizon VZAcess Manager

**Topic ID:** 301

You don't need VZAM in linux to use MBB. You can direct-dial a connection easily using PPP. The settings are as follows:

Phone #: #777

User:yournumber@vzw3g.com

Pass:vzw

Example, if your device's # is 212-555-1234, the username would be 2125551234@vzw3g.com

Mind you this will just give you a connection, no usage info, network stats or signal meter.

---

### 290. Add Swap Space to Redhat Linux Server

**Topic ID:** 2403

To add a swap file:

1.Determine the size of the new swap file and multiple by 1024 to determine the block size. For example, the block size of a 64 MB swap file is 65536.
2.At a shell prompt as root, type the following command with count being equal to the desired block size:
dd if=/dev/zero of=/swapfile bs=1024 count=65536
3.Setup the swap file with the command:
mkswap /swapfile
4.To enable the swap file immediately but not automatically at boot time:
swapon /swapfile
5.To enable it at boot time, edit /etc/fstab to include:
/swapfile swap swap defaults 0 0

You can use type swapon -a, to make all swap entires in /etc/fstab to take effect, except the entries which have noauto as their option.
The next time the system boots, it will enable the new swap file.

6.After adding the new swap file and enabling it, make sure it is enabled by viewing the output of the command cat /proc/swaps or free.

---

### 294. How to Copy Directory Structure in Linux

**Topic ID:** 2404

rsync -av --include='*/' --exclude='*'

---

### 295. How to Copy Directory Structure in Linux

**Topic ID:** 2403

rsync -av --include='*/' --exclude='*'

---

### 301. iSCSI Persistent Device Names - Linux

**Topic ID:** 2404

## Configuring persistent storage in a Red Hat Enterprise Linux 5 environmentIn an environment where external storage (for example, Fibre Channel or iSCSI) is used it is advised to configure persistent device names on your hosts. This will also aid in using Red Hat Virtualization's (live) migration feature to implement consistent device names across multiple systems.

Single Path Configuration

On systems not using multipath, udev is a good way to implement LUN persistence. For more information on scsi_id and its various options please consult the man page.

- The first step would be to acquire UUIDs. Check/Open your`/etc/scsi_id.config`file and verify that you have the following line commented out:

```
# options=-b

```

- Add the following line to your`/etc/scsi_id.config`file:

```
options=-g

```
This configuration option will configure udev to assume that all attached SCSI devices will return a UUID (Unique Device Identifier)

- To display the UUID for a given device execute the following command:`scsi_id -g -s /block/sdc`. The output will look similar to the following:

```
# scsi_id -g -s /block/sdc 
3600a0b800013275100000015427b625e

```
The result of the command above represents the device's UUID. At this time you should verify the UUID you just retrieved is the same displayed via each path the device can be accessed through. The UUID will be used as the primary/sole key to the device. UUIDs will be persistent across reboots and as you add additional storage to your environment.

- The next step is to create a rule to name your device. In`/etc/udev/rules.d`create the file`20-names.rules`. You will be adding the new rules to the file`/etc/udev/rules.d/20-names.rules`, any subsequent rules will be added to the same file using the same format. Rules should have the following format:

```
KERNEL="sd*", BUS="scsi", PROGRAM="/sbin/scsi_id -g -s", RESULT=*UUID*, NAME=*devicename*

```
Replace*`UUID`*and*`devicename`*with the UUID retrieved above, and the desired name for the device. In the example, the rule would look as follows:

```
KERNEL="sd*", BUS="scsi", PROGRAM="/sbin/scsi_id -g -s", RESULT="3600a0b800013275100000015427b625e", NAME="mydevice"

```
This forces the system to verify all devices which correspond to a block device (`/dev/sd*`) for the given UUID. When it finds a matching device, it will create a device node named`/dev/*`devicename`*`. In the example above, the device node is labeled`/dev/mydevice`.

- As the last step add the following line to`/etc/rc.local`:

```
/sbin/start_udev

```

Multi-path configuration

To implement LUN persistence in a multipath environment, you need to define alias names for your multipath devices. To identify a device's UUID or WWID follow the steps from the single path configuration section. The multipath devices will be created in the`/dev/mpath`directory. In our example below we will define 4 devices in`/etc/multipath.conf`:

```
multipaths { 
	multipath { 
	wwid		3600805f30015987000000000768a0019 
	alias		oramp1 
	} 
	multipath { 
	wwid		3600805f30015987000000000d643001a 
	alias		oramp2 
	} 
	mulitpath { 
	wwid		3600805f3001598700000000086fc001b 
	alias		oramp3 
	} 
	mulitpath { 
	wwid		3600805f300159870000000000984001c 
	alias		oramp4 
	} 
}

```
This configuration will create 4 LUNs named`/dev/mpath/oramp1`,`/dev/mpath/oramp2`,`/dev/mpath/oramp3`and`/dev/mpath/oramp4`. Once entered, the mapping of the devices' WWIDs/UUIDs to their new names will now be persistent even after rebooting.

---

### 312. Install EMC PowerPath software for SAN (Linux)

**Topic ID:** 2403

Log into Linux server:

cd /b02/infrastructure/software/emc
rpm -i naviagent-6.28.22.0.35-1.noarch.rpm
rpm -i EMCpower.LINUX-5.3.1.00.00-111.rhel5.x86_64.rpm

---

### 315. OEM Grid Control 11gR1 Installation on Linux 5

**Topic ID:** 902

This article list out details steps to install OEM GRID control 11gR1 on Appshosting Linux server.

**Q&A:**
1. Q: Error saying not enough space to install (100 MB or somewhere around there)
A: Check permission on oraInventory: 1. Look at /etc/oraInst.loc to find out inventory location. 2. Open up permission on the inventory directory (chmod 777 /etc/oraInventory). Note that you might need to open up read or executable permission on parent directory for oraoem user.

---

### 495. Logs showing with many systemd messages on starting session of user root

**Topic ID:** 2404

Environment: RHEL 7Issue: Seeing many log entries below in /var/log/messagesJan 27 10:05:01 af161 systemd: Started Session 444236 of user root.
Resolution:[root@af161 ~]# echo 'if $programname == "systemd" and ($msg contains "Starting Session" or $msg contains "Started Session" or $msg contains "Created slice" or $msg contains "Starting user-") then stop' >/etc/rsyslog.d/ignore-systemd-session-slice.conf[root@af161 ~]# systemctl restart rsyslog
References:https://access.redhat.com/solutions/1564823

---

### 337. Printer install in Linux if we don't finf drivers in Linux

**Topic ID:** 2403

http://hplipopensource.com/hplip-web/gethplip.html

Download the tar ball and compile it. It asks for dependency RPMs.

---

### 341. Steps for restarting atcostflights Tomact

**Topic ID:** 301

1.ssh to root @atcostflights.com

2.su – acf

3.ps –fu acf

4.kill -9 /usr/local/jdk/bin/java -Djava.util.logging.config…..

5.cd /home/acf/apache-tomcat-6.0.26/bin

6../startup.sh

---

### 399. SFTP users creation for boaz

**Topic ID:** 2403

create a user with complete home directory path.
useradd sqc_hexcel_sbox -d /home/sftp-users/hexcel/sqc_hexcel_sbox
cd /home/sftp-users/hexcelmkdir sqc_prod_movedfilescd sqc_hexcel_sboxmkdir uploadchmod 777 upload/
Edit passwd file and put shell as /sbin/nologin ( we won't allow SSH )cd ..chown root.root sqc_hexcel_sboxchmod 755 sqc_hexcel_sbox
chmod 777 sqc_prod_movedfiles
Repeat the same steps for all users. But home directory path might change. Follow according to that.Check the permissions. All dirs owned by root here.upload dir has 777 permission and all others will have either 705 or 755 permission
Check the permissions for already created users if you have any confusion
Put a password for the user

---



## Category: Server & Infrastructure

*23 solutions*

### 9. Error: ESX1

**Topic ID:** 305

Delted some older backups on driveds F and G of IT-Srvr.

---

### 117. New server installation checklist

**Topic ID:** 301

OptionsAttachment:New server installation checklist.xls14.0 KBytesSymptom:
*(public)*Problem:
*(public)*Solution:
*(public)*

---

### 128. Root O/S Backup procedures

**Topic ID:** 301

OptionsSymptom:
*(public)*

ROOT Backup

mkdir /b01/os/`hostname`

(if necessary)

IF ROOT PARTITION is GREATER THAN 50gb

nohup tar cvf /b01/os/`hostname`/boot.tar boot > /tmp/nohup.out &

nohup tar cvf /b01/os/`hostname`/usr.tar usr > /tmp/nohup.out &

nohup tar cvf /b01/os/`hostname`/var.tar var > /tmp/nohup.out &

nohup tar cvf /b01/os/`hostname`/lib.tar lib > /tmp/nohup.out &

nohup tar cvf /b01/os/`hostname`/lib64.tar lib64 > /tmp/nohup.out &

nohup tar cvf /b01/os/`hostname`/etc.tar etc > /tmp/nohup.out &

-or-

IF ROOT PARTITION is LESS THAN 50gb

nohup dump 0f /b01/os/`hostname`/`hostname`-root.dump / > /tmp/nohup.out &
Problem:
*(public)*Solution:
*(public)*

---

### 67. Big Brother - Purple Alerts

**Topic ID:** 301

OptionsSymptom:
*(public)*Big Brother:

1. First Login to the server
2. Next browse to BB logs directory.
3. Next run the command grep -i purple
4. Find the log files which are showing purple from the ouput of above command and list down the host names.
5. Next run the ./bbrm script with the hostname found in the log with purple.
6. Next wait for 30 minutes for the changes to reflect in the BB monitor.Problem:
*(public)*Solution:
*(public)*

---

### 93. How to install VMWare License

**Topic ID:** 301

OptionsSymptom:
*(public)*License Code: 13207-4AJ5H-06C08-0KAL4-9LY7M

Log into VMWare infrastructure client.
Click "Configuration"
Click "Licensed Features"
Edit the license, and type in the above license key.

Problem:
*(public)*Solution:
*(public)*

---

### 97. How to restore a file from AFFA backups

**Topic ID:** 301

OptionsAttachment:How to restore a file from the AFFA backups.docx10.2 KBytesSymptom:
*(public)*

How to restore a file from the AFFA backups

**Log into"smesrv01.appshosting.com" as root.
**

Look for the backups in/var/affa///directory

Copy them back where required.
Problem:
*(public)*Solution:
*(public)*

---

### 100. IP Allocations or Server details

**Topic ID:** 301

OptionsAttachment:Servers in 172.1.x.x.xls58.5 KBytesSymptom:
*(public)*
This information is mostly above 99% accurate

and I will have a manual audit once i complete collecting some basic data from all subnets.

- Ravi

Problem:
*(public)*Solution:
*(public)*

---

### 127. Restore files from AFFA Backups

**Topic ID:** 301

OptionsSymptom:
*(public)*

How to restore a file from the AFFA backups

**Log into "smesrv01.appshosting.com" as root.
**

Look for the backups in /var/affa///directory

Copy them back where required.
Problem:
*(public)*Solution:
*(public)*

---

### 133. Setup and logon to Raritan console

**Topic ID:** 301

OptionsAttachment:LogOntoServerConsoles_swf.zip6.4 MBytesSymptom:
*(public)*Problem:
*(public)*Solution:
*(public)*

---

### 144. snmpwalk installation

**Topic ID:** 301

OptionsSymptom:
*(public)*yum install net-snmp-utils
Problem:
*(public)*Solution:
*(public*

---

### 137. VMWare Installation

**Topic ID:** 301

OptionsAttachment:VMWare Installation.pdf513.5 KBytesSymptom:
*(public)*Problem:
*(public)*Install VMWareSolution:
*(public)*See attached procedure to install VMWareComment:
*(internal)*

---

### 330. ntpdate not uptating time with time servers

**Topic ID:** 2403

echo 1 > /proc/sys/xen/independent_wallclock

---

### 244. Peoplesoft Installation HRMS and CS 9.0

**Topic ID:** 301

OptionsAttachment:Peoplesoft HRMS and CS 9.0 Install Document Part - I.doc2.8 MBytesPeoplesoft HRMS and CS 9.0 Install Document Part - II.doc1.8 MBytesSymptom:
*(public)*Installation of PeopleSoft HR and CS 9.0Problem:
*(public)*To Install of PeopleSoft HR and CS 9.0Solution:
*(public)*Install the PeopleSoft HR and CS 9.0 by following through the attached docs.

Also for reference

http://gasparotto.blogspot.com/

---

### 257. Discoverer 10g Insallation and Setup

**Topic ID:** 2112

OptionsAttachment:Discoverer 10g Installation and Setup.doc2.0 MBytesSymptom:
*(public)*Install and Setup discoverer 10gProblem:
*(public)*Install and Setup discoverer 10gSolution:
*(public)*

---

### 262. ORA-01403: no data found in newly created Taiping instances

**Topic ID:** 2112

OptionsAttachment:Taiping_Datasheet_new.xls29.0 KBytestpc instance data sheet.txt3.3 KBytesSymptom:
*(public)*ORA-01403: no data foundProblem:
*(public)*Solution:
*(public)*Please copy below pll files present in /home/appdev on tp-apps01.appshosting.com machine to the the instance where having the issue , backup the existing pll and plx files and copy

CUSTOM.pll
USER_OEXOEORD.pll
USER_RCVRCERC.pll
place them in $AU_TOP/resource and generate plx files using frmcmp logout and log in back to the application.

Above is applicable to only Taiping newly created instances.

---

### 264. RMAN backup solution

**Topic ID:** 2112

OptionsAttachment:Taiping RMAN backup solution.doc58.5 KBytesSymptom:
*(public)*RMAN backup on productionProblem:
*(public)*RMAN backup on productionSolution:
*(public)*

---

### 299. AH7 LVM Problem

**Topic ID:** 2404

Upon reboot, LVM volumes (iSCSI based) are inactive.

Fix:

vgchange -ay
mount -a

---

### 309. Citrix Xen Server - Configure with EMC CX4 iSCSI SAN

**Topic ID:** 2116

Citrix Xen Server - Configure with EMC CX4 iSCSI SAN

---

### 417. GRC 8.6.4.5000 installation

**Topic ID:** 601

Install GRC 8.6.4.5000 for Nanometrics.

---

### 442. Discoverer 11g installation

**Topic ID:** 901

Discoverer 11g installation

---

### 459. Avalara - fixes

**Topic ID:** 2105

- Installation guide
- Post-steps and common errors.

---

### 491. Ryman More4Apps Installation

**Topic ID:** 2105

http://horizon.more4apps.com/doco/GeneralDocs/InstallationSetup/output/index.htm?sync&page=html/Steps-InstallationandConfiguration.html

Products used at Ryman: Asset Wizard

---

### 648. Creating CDN Server with NGINX

**Topic ID:** 307

Eric's documentation of step-by-step information for the current standard CDN server setup.

---



## Category: Security & Authentication

*7 solutions*

### 56. How to install SSL certificate in CPANEL

**Topic ID:** 301

OptionsAttachment:Install SSL certificate.zip2.9 MBytesSymptom:
*(public)*Install new SSL certificate in CPANELProblem:
*(public)*Solution:
*(public)*Install new SSL certificate in CPANEL

---

### 140. decrypt the csr certificate

**Topic ID:** 301

OptionsSymptom:
*(public)*decrypt the csr certificate to know the information in that file.Problem:
*(public)*Solution:
*(public)*#openssl req -in eap.sumnertechnologies.com.csr -text -nooutComment:
*(internal)*

---

### 141. decrypt the csr certificate

**Topic ID:** 301

OptionsSymptom:
*(public)*decrypt the csr certificate to know the information in that file.Problem:
*(public)*Solution:
*(public)*#openssl req -in eap.sumnertechnologies.com.csr -text -noout

---

### 197. Start/Stop GRC

**Topic ID:** 2105

OptionsSymptom:
*(public)*How to start/stop GRCProblem:
*(public)*Solution:
*(public)*Comment:
*(internal)*How to start/stop GRC
1. logon to oraapps.appshosting.com as lapps
Password: R!2p5xxxx
2. cd bin
3. startall.sh to startup GRC or stopall.sh to stop GRC
4. Test GRC console at http://oraapps.appshosting.com:8080/ags
5. Log a ticket and escalate the problem to Larry if the URL not showing

---

### 351. *.appshosting.com SSL Cert valid from 29-Apr-2011 to 1-May-2014

**Topic ID:** 2403

SSL Cert

---

### 509. Password Less Authentication

**Topic ID:** 301

https://docs.google.com/document/d/1qAlV4gsXsOk2JDnTRjo4rrX5DkWK5buOrZPvy2uB2p4/edit#

---

### 641. Convert .PFX Certificate to Base 64 cert and key

**Topic ID:** 2402

**Title**: Convert .PFX certificate to Base64 cert and key

**References**:

**Symptoms (if applicable)**:

**Causes (if applicable)**:

**Procedure or Solution Description**:
https://docs.google.com/document/d/1D1ibyJmXIg-7tH9DapGFKViTq6yZ3k-K4Q3gX74fm4o/edit
**[af@vmsit ssl]$ openssl pkcs12 -in ./ichorwildcard2023.pfx -out ./ichorwildcert.pem -n odes**

---



## Category: Web Servers & Applications

*6 solutions*

### 126. Restart Tomcat on CPanel Server (prod)

**Topic ID:** 301

OptionsSymptom:
*(public)*Login as root and execute:

root@prod [~]# /usr/sbin/stoptomcat
root@prod [~]# /usr/sbin/starttomcat
Problem:
*(public)*Solution:
*(public)*

---

### 464. Vertex Startup Procedure

**Topic ID:** 2105

login as oravertex/vertexora123 in app node.
1. stop:
/u01/VERTEX/tomcat/bin/shutdown.sh
2. Start
/u01/VERTEX/tomcat/bin/startup.sh
3. review Log
/u01/VERTEX/tomcat/logs/catalina.out

---

### 393. Restart Tomcat on ah217 for vinrare and atcostflights

**Topic ID:** 301

Login as root user to ah217.appshosting.com

root / T1....

vinrare

#cd /home/oak/apache-tomcat-6.0.29/bin
#./shutdown.sh
#./startup.sh

atcostflights

#cd /usr/local/jakarta/tomcat-acf/apache-tomcat-6.0.26/bin
#./shutdown.sh
#./startup.sh

For atcostflights check http://www.atcostflights.com/For vinrare check http://vinrare.com/ and https://vinrare.com/

---

### 173. Connection is dropping frequently

**Topic ID:** 2105

OptionsSymptom:
*(public)*Connection is dropping frequentlyProblem:
*(public)*Connection is dropping frequentlySolution:
*(public)*1. Change networkRetries from 0 to 30 in

xxxxx/apps/tech_st/10.1.2/forms/server/formwweb.cfg.

2. Stop/Start Forms server and Apache

---

### 234. Fusion Middleware 11g WebLogic Server 10.3.1 Install

**Topic ID:** 901

OptionsAttachment:fusion weblogic 11g 10.3.12 install.zip4.0 MBytesSymptom:
*(public)*Problem:
*(public)*Solution:
*(public)*

Embedded LDAP:

1. From WL Console, on left Domain Structure, click the domain ssm_domain.
2. Click Security tab on right.
3. Click Embedded LDAP subtab below it.
4. Enter password in Credentials field for embedded ldap use.

---

### 497. How to Restart Tomcat 8

**Topic ID:** 901

1. Go to Tomcat bin.i.e. /home/tomcat8/apache-tomcat-8.5.8/bin
2. Issue shutdown.i.e. ./shutdown.sh
3. Issue startup.i.e. ./startup.sh

---



## Category: Email & Communication

*2 solutions*

### 5. Forward DC@appshosting.com emails to helpdesk@appshosting.com

**Topic ID:** 11

Logged intohttp://mail.appshosting.comwithdc@appshosting.compass= Mynewpc30

Went to thr rules wizard and created a forwarding rule that sends all email tohelpdesk@appshosting.com

---

### 339. enable disabled printers

**Topic ID:** 2403

#!/bin/bash
#This script is to enable any disabled printers
#
ENABLE=/usr/bin/cupsenable
#Get the list of printers that are disabled
LPSTAT=/usr/bin/lpstat
LST=`${LPSTAT} -t |grep disabled |awk '{print $2}'`
for i in $LST
do
${ENABLE} $i
/bin/mail -s "Printer ${i} on `hostname` is Enabled"sup@appshosting.com</dev/null
done

---



## Category: Monitoring & Management

*1 solutions*

### 527. Create service based monitoring using OEM

**Topic ID:** 2105

How to create service based monitoring using OEM

Navigate to Home pageàTargetsàServices -àcreate service

---



